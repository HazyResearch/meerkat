<script lang="ts">
	import banner from '$lib/assets/banner_small.png';
	import ComponentContext from '$lib/ComponentContext.svelte';
    import { Interface } from '@meerkat-ml/meerkat';
	import { onMount } from 'svelte';
    import { page } from '$app/stores';
	import { API_URL } from '$lib/constants';

    let config: Interface | null = null;
	onMount(async () => {
		config = await (await fetch(`${$API_URL}/interface/${$page.params.slug}/config`)).json();
		document.title = config?.name ? config.name : 'Meerkat';
	});
</script>

<ComponentContext>
	<div class="h-screen p-3">
		{% raw %}{#if config}{% endraw %}
			<Interface {config} />
		{:else}
			<div class="flex justify-center h-screen items-center">
				<img src={banner} alt="Meerkat" class="h-12" />
			</div>
		{/if}
	</div>
</ComponentContext>
