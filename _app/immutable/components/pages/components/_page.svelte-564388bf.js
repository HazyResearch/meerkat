var fH=Object.defineProperty;var dH=(e,t,n)=>t in e?fH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var au=(e,t,n)=>(dH(e,typeof t!="symbol"?t+"":t,n),n);import{S as He,i as Ve,s as Be,K as _e,_ as Fu,$ as Ru,m as U,h as D,a0 as ff,b as q,R as Z,T as Ut,B as xe,I as Qe,L as tt,M as K,n as I,G as P,C as yt,k as z,l as B,D as vt,E as _t,F as xt,f as R,t as j,a3 as to,e as Le,g as Rt,d as It,P as at,a1 as Wh,a as ue,c as oe,O as $m,w as re,x as ae,y as ie,Z as j0,z as se,Q as U3,N as Qt,Y as pl,V as ii,U as kM,a4 as Iu,W as OM,a5 as kO,a6 as np,a7 as Pu,q as Fe,r as Re,u as $t,a8 as hH,X as OO,o as gH,v as AO,a9 as pH,a2 as rp,aa as Ca,ab as CO,ac as tn,ad as mH,ae as nn,af as bH,p as df,ag as yH,J as vH}from"../../../chunks/index-f8c1caff.js";import{c as Nt,q as TO,s as MO,B as _H,N as xH,F as wH}from"../../../chunks/Footer-e600ec90.js";import{w as EH}from"../../../chunks/index-39fcfd13.js";var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AM(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(t,i);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}function SH(e){let t,n,r,i,s=[{xmlns:"http://www.w3.org/2000/svg"},{width:e[0]},{height:e[0]},{class:n=e[4].class},e[5],{"aria-label":e[1]},{fill:"none"},{viewBox:e[2]},{"stroke-width":"2"}],a={};for(let u=0;u<s.length;u+=1)a=_e(a,s[u]);return{c(){t=Fu("svg"),this.h()},l(u){t=Ru(u,"svg",{xmlns:!0,width:!0,height:!0,class:!0,"aria-label":!0,fill:!0,viewBox:!0,"stroke-width":!0});var o=U(t);o.forEach(D),this.h()},h(){ff(t,a)},m(u,o){q(u,t,o),t.innerHTML=e[3],r||(i=Z(t,"click",e[8]),r=!0)},p(u,[o]){o&8&&(t.innerHTML=u[3]),ff(t,a=Ut(s,[{xmlns:"http://www.w3.org/2000/svg"},o&1&&{width:u[0]},o&1&&{height:u[0]},o&16&&n!==(n=u[4].class)&&{class:n},o&32&&u[5],o&2&&{"aria-label":u[1]},{fill:"none"},o&4&&{viewBox:u[2]},{"stroke-width":"2"}]))},i:xe,o:xe,d(u){u&&D(t),r=!1,i()}}}function kH(e,t,n){const r=["size","color","variation","ariaLabel"];let i=Qe(t,r),{size:s="24"}=t,{color:a="currentColor"}=t,{variation:u="outline"}=t,o,l,c=`<path d="M19.5 8.25L12 15.75L4.5 8.25" stroke="${a}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> `,f=`<path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 16.2803C12.2374 16.5732 11.7626 16.5732 11.4697 16.2803L3.96967 8.78033C3.67678 8.48744 3.67678 8.01256 3.96967 7.71967C4.26256 7.42678 4.73744 7.42678 5.03033 7.71967L12 14.6893L18.9697 7.71967C19.2626 7.42678 19.7374 7.42678 20.0303 7.71967C20.3232 8.01256 20.3232 8.48744 20.0303 8.78033L12.5303 16.2803Z" fill="${a}"/> `,{ariaLabel:d="chevron down"}=t;function h(g){K.call(this,e,g)}return e.$$set=g=>{n(4,t=_e(_e({},t),tt(g))),n(5,i=Qe(t,r)),"size"in g&&n(0,s=g.size),"color"in g&&n(6,a=g.color),"variation"in g&&n(7,u=g.variation),"ariaLabel"in g&&n(1,d=g.ariaLabel)},e.$$.update=()=>{if(e.$$.dirty&128)switch(u){case"outline":n(3,l=c),n(2,o="0 0 24 24");break;case"solid":n(3,l=f),n(2,o="0 0 24 24");break;default:n(3,l=c),n(2,o="0 0 24 24")}},t=tt(t),[s,d,o,l,t,i,a,u,h]}class OH extends He{constructor(t){super(),Ve(this,t,kH,SH,Be,{size:0,color:6,variation:7,ariaLabel:1})}}function AH(e){let t,n,r,i,s=[{xmlns:"http://www.w3.org/2000/svg"},{width:e[0]},{height:e[0]},{class:n=e[4].class},e[5],{"aria-label":e[1]},{fill:"none"},{viewBox:e[2]},{"stroke-width":"2"}],a={};for(let u=0;u<s.length;u+=1)a=_e(a,s[u]);return{c(){t=Fu("svg"),this.h()},l(u){t=Ru(u,"svg",{xmlns:!0,width:!0,height:!0,class:!0,"aria-label":!0,fill:!0,viewBox:!0,"stroke-width":!0});var o=U(t);o.forEach(D),this.h()},h(){ff(t,a)},m(u,o){q(u,t,o),t.innerHTML=e[3],r||(i=Z(t,"click",e[8]),r=!0)},p(u,[o]){o&8&&(t.innerHTML=u[3]),ff(t,a=Ut(s,[{xmlns:"http://www.w3.org/2000/svg"},o&1&&{width:u[0]},o&1&&{height:u[0]},o&16&&n!==(n=u[4].class)&&{class:n},o&32&&u[5],o&2&&{"aria-label":u[1]},{fill:"none"},o&4&&{viewBox:u[2]},{"stroke-width":"2"}]))},i:xe,o:xe,d(u){u&&D(t),r=!1,i()}}}function CH(e,t,n){const r=["size","color","variation","ariaLabel"];let i=Qe(t,r),{size:s="24"}=t,{color:a="currentColor"}=t,{variation:u="outline"}=t,o,l,c=`<path d="M4.5 15.75L12 8.25L19.5 15.75" stroke="${a}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> `,f=`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.4697 7.71967C11.7626 7.42678 12.2374 7.42678 12.5303 7.71967L20.0303 15.2197C20.3232 15.5126 20.3232 15.9874 20.0303 16.2803C19.7374 16.5732 19.2626 16.5732 18.9697 16.2803L12 9.31066L5.03033 16.2803C4.73744 16.5732 4.26256 16.5732 3.96967 16.2803C3.67678 15.9874 3.67678 15.5126 3.96967 15.2197L11.4697 7.71967Z" fill="${a}"/> `,{ariaLabel:d="chevron up"}=t;function h(g){K.call(this,e,g)}return e.$$set=g=>{n(4,t=_e(_e({},t),tt(g))),n(5,i=Qe(t,r)),"size"in g&&n(0,s=g.size),"color"in g&&n(6,a=g.color),"variation"in g&&n(7,u=g.variation),"ariaLabel"in g&&n(1,d=g.ariaLabel)},e.$$.update=()=>{if(e.$$.dirty&128)switch(u){case"outline":n(3,l=c),n(2,o="0 0 24 24");break;case"solid":n(3,l=f),n(2,o="0 0 24 24");break;default:n(3,l=c),n(2,o="0 0 24 24")}},t=tt(t),[s,d,o,l,t,i,a,u,h]}class TH extends He{constructor(t){super(),Ve(this,t,CH,AH,Be,{size:0,color:6,variation:7,ariaLabel:1})}}function MH(e){let t,n,r;return{c(){t=Fu("svg"),n=Fu("path"),this.h()},l(i){t=Ru(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var s=U(t);n=Ru(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),U(n).forEach(D),s.forEach(D),this.h()},h(){I(n,"fill-rule","evenodd"),I(n,"d","M8 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),I(n,"clip-rule","evenodd"),I(t,"class",r="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(e[0]?"rounded":"rounded-full")),I(t,"fill","currentColor"),I(t,"viewBox","0 0 16 16"),I(t,"xmlns","http://www.w3.org/2000/svg")},m(i,s){q(i,t,s),P(t,n)},p(i,[s]){s&1&&r!==(r="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(i[0]?"rounded":"rounded-full"))&&I(t,"class",r)},i:xe,o:xe,d(i){i&&D(t)}}}function DH(e,t,n){let{rounded:r=!1}=t;return e.$$set=i=>{"rounded"in i&&n(0,r=i.rounded)},[r]}class NH extends He{constructor(t){super(),Ve(this,t,DH,MH,Be,{rounded:0})}}function $H(e){let t,n;const r=e[8].default,i=yt(r,e,e[7],null);return{c(){t=z("div"),i&&i.c(),this.h()},l(s){t=B(s,"DIV",{class:!0});var a=U(t);i&&i.l(a),a.forEach(D),this.h()},h(){I(t,"class",e[0])},m(s,a){q(s,t,a),i&&i.m(t,null),n=!0},p(s,[a]){i&&i.p&&(!n||a&128)&&vt(i,r,s,s[7],n?xt(r,s[7],a,null):_t(s[7]),null),(!n||a&1)&&I(t,"class",s[0])},i(s){n||(R(i,s),n=!0)},o(s){j(i,s),n=!1},d(s){s&&D(t),i&&i.d(s)}}}function FH(e,t,n){let{$$slots:r={},$$scope:i}=t;const s=to(r);let{color:a="gray"}=t,{rounded:u=!1}=t,{size:o="md"}=t,{border:l=!1}=t,{placement:c=void 0}=t,{offset:f=!0}=t;const d={gray:"bg-gray-200",dark:"bg-gray-900 dark:bg-gray-700",blue:"bg-blue-600",green:"bg-green-500",red:"bg-red-500",purple:"bg-purple-500",indigo:"bg-indigo-500",yellow:"bg-yellow-300",teal:"bg-teal-500",none:""},h={xs:"w-2 h-2",sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-3.5 h-3.5",xl:"w-6 h-6"},g={"top-left":"top-0 left-0","top-center":"top-0 left-1/2 -translate-x-1/2","top-right":"top-0 right-0","center-left":"top-1/2 -translate-y-1/2 left-0",center:"top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2","center-right":"top-1/2 -translate-y-1/2 right-0","bottom-left":"bottom-0 left-0","bottom-center":"bottom-0 left-1/2 -translate-x-1/2","bottom-right":"bottom-0 right-0"},p={"top-left":"-translate-x-1/3 -translate-y-1/3","top-center":"-translate-y-1/3","top-right":"translate-x-1/3 -translate-y-1/3","center-left":"-translate-x-1/3",center:"","center-right":"translate-x-1/3","bottom-left":"-translate-x-1/3 translate-y-1/3","bottom-center":"translate-y-1/3","bottom-right":"translate-x-1/3 translate-y-1/3"};let m;return e.$$set=b=>{n(13,t=_e(_e({},t),tt(b))),"color"in b&&n(1,a=b.color),"rounded"in b&&n(2,u=b.rounded),"size"in b&&n(3,o=b.size),"border"in b&&n(4,l=b.border),"placement"in b&&n(5,c=b.placement),"offset"in b&&n(6,f=b.offset),"$$scope"in b&&n(7,i=b.$$scope)},e.$$.update=()=>{n(0,m=Nt("flex-shrink-0",u?"rounded":"rounded-full",l&&"border-2 border-white dark:border-gray-800",h[o],d[a],s.default&&"inline-flex items-center justify-center",c&&"absolute "+g[c],c&&f&&p[c],t.class))},t=tt(t),[m,a,u,o,l,c,f,i,r]}class RH extends He{constructor(t){super(),Ve(this,t,FH,$H,Be,{color:1,rounded:2,size:3,border:4,placement:5,offset:6})}}function IH(e){let t,n,r=[{alt:e[4]},{src:n=e[1]},e[7],{class:e[5]}],i={};for(let s=0;s<r.length;s+=1)i=_e(i,r[s]);return{c(){t=z("img"),this.h()},l(s){t=B(s,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){at(t,i)},m(s,a){q(s,t,a)},p(s,a){at(t,i=Ut(r,[a&16&&{alt:s[4]},a&2&&!Wh(t.src,n=s[1])&&{src:n},a&128&&s[7],a&32&&{class:s[5]}]))},i:xe,o:xe,d(s){s&&D(t)}}}function PH(e){let t=e[2]?"a":"div",n,r,i=(e[2]?"a":"div")&&v2(e);return{c(){i&&i.c(),n=Le()},l(s){i&&i.l(s),n=Le()},m(s,a){i&&i.m(s,a),q(s,n,a),r=!0},p(s,a){s[2],t?Be(t,s[2]?"a":"div")?(i.d(1),i=v2(s),i.c(),i.m(n.parentNode,n)):i.p(s,a):(i=v2(s),i.c(),i.m(n.parentNode,n)),t=s[2]?"a":"div"},i(s){r||(R(i),r=!0)},o(s){j(i),r=!1},d(s){s&&D(n),i&&i.d(s)}}}function jH(e){let t;const n=e[12].default,r=yt(n,e,e[11],null),i=r||zH(e);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,a){i&&i.m(s,a),t=!0},p(s,a){r?r.p&&(!t||a&2048)&&vt(r,n,s,s[11],t?xt(n,s[11],a,null):_t(s[11]),null):i&&i.p&&(!t||a&8)&&i.p(s,t?a:-1)},i(s){t||(R(i,s),t=!0)},o(s){j(i,s),t=!1},d(s){i&&i.d(s)}}}function LH(e){let t,n,r;return{c(){t=z("img"),this.h()},l(i){t=B(i,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){I(t,"alt",e[4]),Wh(t.src,n=e[1])||I(t,"src",n),I(t,"class",r=e[3]?"rounded":"rounded-full")},m(i,s){q(i,t,s)},p(i,s){s&16&&I(t,"alt",i[4]),s&2&&!Wh(t.src,n=i[1])&&I(t,"src",n),s&8&&r!==(r=i[3]?"rounded":"rounded-full")&&I(t,"class",r)},i:xe,o:xe,d(i){i&&D(t)}}}function zH(e){let t,n;return t=new NH({props:{rounded:e[3]}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,i){const s={};i&8&&(s.rounded=r[3]),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function DO(e){let t,n;const r=[{border:!0},{offset:e[3]},e[0]];let i={};for(let s=0;s<r.length;s+=1)i=_e(i,r[s]);return t=new RH({props:i}),{c(){re(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,a){ie(t,s,a),n=!0},p(s,a){const u=a&9?Ut(r,[r[0],a&8&&{offset:s[3]},a&1&&j0(s[0])]):{};t.$set(u)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){j(t.$$.fragment,s),n=!1},d(s){se(t,s)}}}function v2(e){let t,n,r,i,s,a;const u=[LH,jH],o=[];function l(h,g){return h[1]?0:1}n=l(e),r=o[n]=u[n](e);let c=e[0]&&DO(e),f=[{href:e[2]},e[7],{class:s="relative flex justify-center items-center "+e[5]}],d={};for(let h=0;h<f.length;h+=1)d=_e(d,f[h]);return{c(){t=z(e[2]?"a":"div"),r.c(),i=ue(),c&&c.c(),this.h()},l(h){t=B(h,((e[2]?"a":"div")||"null").toUpperCase(),{href:!0,class:!0});var g=U(t);r.l(g),i=oe(g),c&&c.l(g),g.forEach(D),this.h()},h(){/-/.test(e[2]?"a":"div")?$m(t,d):at(t,d)},m(h,g){q(h,t,g),o[n].m(t,null),P(t,i),c&&c.m(t,null),a=!0},p(h,g){let p=n;n=l(h),n===p?o[n].p(h,g):(Rt(),j(o[p],1,1,()=>{o[p]=null}),It(),r=o[n],r?r.p(h,g):(r=o[n]=u[n](h),r.c()),R(r,1),r.m(t,i)),h[0]?c?(c.p(h,g),g&1&&R(c,1)):(c=DO(h),c.c(),R(c,1),c.m(t,null)):c&&(Rt(),j(c,1,1,()=>{c=null}),It()),d=Ut(f,[(!a||g&4)&&{href:h[2]},g&128&&h[7],(!a||g&32&&s!==(s="relative flex justify-center items-center "+h[5]))&&{class:s}]),/-/.test(h[2]?"a":"div")?$m(t,d):at(t,d)},i(h){a||(R(r),R(c),a=!0)},o(h){j(r),j(c),a=!1},d(h){h&&D(t),o[n].d(),c&&c.d()}}}function BH(e){let t,n,r,i;const s=[PH,IH],a=[];function u(o,l){return!o[1]||o[2]||o[6].default||o[0]?0:1}return t=u(e),n=a[t]=s[t](e),{c(){n.c(),r=Le()},l(o){n.l(o),r=Le()},m(o,l){a[t].m(o,l),q(o,r,l),i=!0},p(o,[l]){let c=t;t=u(o),t===c?a[t].p(o,l):(Rt(),j(a[c],1,1,()=>{a[c]=null}),It(),n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r))},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){a[t].d(o),o&&D(r)}}}function UH(e,t,n){const r=["src","href","rounded","border","stacked","dot","alt","size"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;const u=to(s);let{src:o=""}=t,{href:l=void 0}=t,{rounded:c=!1}=t,{border:f=!1}=t,{stacked:d=!1}=t,{dot:h=void 0}=t,{alt:g=""}=t,{size:p="md"}=t;const m={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"};let b;return e.$$set=y=>{n(14,t=_e(_e({},t),tt(y))),n(7,i=Qe(t,r)),"src"in y&&n(1,o=y.src),"href"in y&&n(2,l=y.href),"rounded"in y&&n(3,c=y.rounded),"border"in y&&n(8,f=y.border),"stacked"in y&&n(9,d=y.stacked),"dot"in y&&n(0,h=y.dot),"alt"in y&&n(4,g=y.alt),"size"in y&&n(10,p=y.size),"$$scope"in y&&n(11,a=y.$$scope)},e.$$.update=()=>{e.$$.dirty&1&&n(0,h=h&&{placement:"top-right",color:"gray",size:"lg",...h}),e.$$.dirty&1&&h&&console.log(h),n(5,b=Nt(c?"rounded":"rounded-full",f&&"p-1 ring-2 ring-gray-300 dark:ring-gray-500",m[p],d&&"border-2 -ml-4 border-white dark:border-gray-800","bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300",t.class))},t=tt(t),[h,o,l,c,g,b,u,i,f,d,p,a,s]}class qH extends He{constructor(t){super(),Ve(this,t,UH,BH,Be,{src:1,href:2,rounded:3,border:8,stacked:9,dot:0,alt:4,size:10})}}function HH(e){let t;const n=e[5].default,r=yt(n,e,e[4],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&16)&&vt(r,n,i,i[4],t?xt(n,i[4],s,null):_t(i[4]),null)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function VH(e){let t=e[0],n,r,i=e[0]&&_2(e);return{c(){i&&i.c(),n=Le()},l(s){i&&i.l(s),n=Le()},m(s,a){i&&i.m(s,a),q(s,n,a),r=!0},p(s,a){s[0]?t?Be(t,s[0])?(i.d(1),i=_2(s),i.c(),i.m(n.parentNode,n)):i.p(s,a):(i=_2(s),i.c(),i.m(n.parentNode,n)):t&&(i.d(1),i=null),t=s[0]},i(s){r||(R(i),r=!0)},o(s){j(i),r=!1},d(s){s&&D(n),i&&i.d(s)}}}function _2(e){let t,n,r,i;const s=e[5].default,a=yt(s,e,e[4],null);let u=[e[3]],o={};for(let l=0;l<u.length;l+=1)o=_e(o,u[l]);return{c(){t=z(e[0]),a&&a.c(),this.h()},l(l){t=B(l,(e[0]||"null").toUpperCase(),{});var c=U(t);a&&a.l(c),c.forEach(D),this.h()},h(){/-/.test(e[0])?$m(t,o):at(t,o)},m(l,c){q(l,t,c),a&&a.m(t,null),n=!0,r||(i=U3(e[2].call(null,t)),r=!0)},p(l,c){a&&a.p&&(!n||c&16)&&vt(a,s,l,l[4],n?xt(s,l[4],c,null):_t(l[4]),null),o=Ut(u,[c&8&&l[3]]),/-/.test(l[0])?$m(t,o):at(t,o)},i(l){n||(R(a,l),n=!0)},o(l){j(a,l),n=!1},d(l){l&&D(t),a&&a.d(l),r=!1,i()}}}function GH(e){let t,n,r,i;const s=[VH,HH],a=[];function u(o,l){return o[1]?0:1}return t=u(e),n=a[t]=s[t](e),{c(){n.c(),r=Le()},l(o){n.l(o),r=Le()},m(o,l){a[t].m(o,l),q(o,r,l),i=!0},p(o,[l]){let c=t;t=u(o),t===c?a[t].p(o,l):(Rt(),j(a[c],1,1,()=>{a[c]=null}),It(),n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r))},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){a[t].d(o),o&&D(r)}}}function WH(e,t,n){const r=["tag","show","use"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t,{tag:u="div"}=t,{show:o}=t,{use:l=()=>{}}=t;return e.$$set=c=>{t=_e(_e({},t),tt(c)),n(3,i=Qe(t,r)),"tag"in c&&n(0,u=c.tag),"show"in c&&n(1,o=c.show),"use"in c&&n(2,l=c.use),"$$scope"in c&&n(4,a=c.$$scope)},[u,o,l,i,a,s]}class q3 extends He{constructor(t){super(),Ve(this,t,WH,GH,Be,{tag:0,show:1,use:2})}}function XH(e){let t;const n=e[7].default,r=yt(n,e,e[6],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&64)&&vt(r,n,i,i[6],t?xt(n,i[6],s,null):_t(i[6]),null)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function YH(e){let t,n;const r=e[7].default,i=yt(r,e,e[6],null);let s=[e[3],{class:e[2]}],a={};for(let u=0;u<s.length;u+=1)a=_e(a,s[u]);return{c(){t=z("label"),i&&i.c(),this.h()},l(u){t=B(u,"LABEL",{class:!0});var o=U(t);i&&i.l(o),o.forEach(D),this.h()},h(){at(t,a)},m(u,o){q(u,t,o),i&&i.m(t,null),e[8](t),n=!0},p(u,o){i&&i.p&&(!n||o&64)&&vt(i,r,u,u[6],n?xt(r,u[6],o,null):_t(u[6]),null),at(t,a=Ut(s,[o&8&&u[3],(!n||o&4)&&{class:u[2]}]))},i(u){n||(R(i,u),n=!0)},o(u){j(i,u),n=!1},d(u){u&&D(t),i&&i.d(u),e[8](null)}}}function ZH(e){let t,n,r,i;const s=[YH,XH],a=[];function u(o,l){return o[0]?0:1}return t=u(e),n=a[t]=s[t](e),{c(){n.c(),r=Le()},l(o){n.l(o),r=Le()},m(o,l){a[t].m(o,l),q(o,r,l),i=!0},p(o,[l]){let c=t;t=u(o),t===c?a[t].p(o,l):(Rt(),j(a[c],1,1,()=>{a[c]=null}),It(),n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r))},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){a[t].d(o),o&&D(r)}}}function QH(e,t,n){let r;const i=["color","defaultClass","show"];let s=Qe(t,i),{$$slots:a={},$$scope:u}=t,{color:o="gray"}=t,{defaultClass:l="text-sm font-medium block"}=t,{show:c=!0}=t,f;const d={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function h(g){Qt[g?"unshift":"push"](()=>{f=g,n(1,f)})}return e.$$set=g=>{n(10,t=_e(_e({},t),tt(g))),n(3,s=Qe(t,i)),"color"in g&&n(4,o=g.color),"defaultClass"in g&&n(5,l=g.defaultClass),"show"in g&&n(0,c=g.show),"$$scope"in g&&n(6,u=g.$$scope)},e.$$.update=()=>{if(e.$$.dirty&18){const g=f==null?void 0:f.control;n(4,o=g!=null&&g.disabled?"disabled":o)}n(2,r=Nt(l,d[o],t.class))},t=tt(t),[c,f,r,s,o,l,u,a,h]}let rn=class extends He{constructor(t){super(),Ve(this,t,QH,ZH,Be,{color:4,defaultClass:5,show:0})}};function JH(e){let t,n,r,i,s,a=[{type:"radio"},{__value:e[4]},e[8],{class:n=Rm(e[2],e[1],!1,e[5],e[7].default||e[6].class)}],u={};for(let c=0;c<a.length;c+=1)u=_e(u,a[c]);const o=e[9].default,l=yt(o,e,e[23],null);return{c(){t=z("input"),l&&l.c(),this.h()},l(c){t=B(c,"INPUT",{type:!0,class:!0}),l&&l.l(c),this.h()},h(){at(t,u),e[22][0].push(t)},m(c,f){q(c,t,f),t.autofocus&&t.focus(),t.checked=t.__value===e[0],l&&l.m(c,f),r=!0,i||(s=[Z(t,"change",e[21]),Z(t,"blur",e[10]),Z(t,"change",e[11]),Z(t,"click",e[12]),Z(t,"focus",e[13]),Z(t,"keydown",e[14]),Z(t,"keypress",e[15]),Z(t,"keyup",e[16]),Z(t,"mouseenter",e[17]),Z(t,"mouseleave",e[18]),Z(t,"mouseover",e[19]),Z(t,"paste",e[20])],i=!0)},p(c,f){at(t,u=Ut(a,[{type:"radio"},(!r||f&16)&&{__value:c[4]},f&256&&c[8],(!r||f&198&&n!==(n=Rm(c[2],c[1],!1,c[5],c[7].default||c[6].class)))&&{class:n}])),f&1&&(t.checked=t.__value===c[0]),l&&l.p&&(!r||f&8388608)&&vt(l,o,c,c[23],r?xt(o,c[23],f,null):_t(c[23]),null)},i(c){r||(R(l,c),r=!0)},o(c){j(l,c),r=!1},d(c){c&&D(t),e[22][0].splice(e[22][0].indexOf(t),1),l&&l.d(c),i=!1,ii(s)}}}function KH(e){let t,n;return t=new rn({props:{class:Fm(e[3],e[6].class),show:e[7].default,$$slots:{default:[JH]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,[i]){const s={};i&72&&(s.class=Fm(r[3],r[6].class)),i&128&&(s.show=r[7].default),i&8389079&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}const eV={red:"text-red-600 focus:ring-red-500 dark:focus:ring-red-600",green:"text-green-600 focus:ring-green-500 dark:focus:ring-green-600",purple:"text-purple-600 focus:ring-purple-500 dark:focus:ring-purple-600",teal:"text-teal-600 focus:ring-teal-500 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-500 dark:focus:ring-yellow-600",orange:"text-orange-500 focus:ring-orange-500 dark:focus:ring-orange-600",blue:"text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-600"},Fm=(e,t)=>Nt(e?"inline-flex":"flex","items-center",t),Rm=(e,t,n,r,i)=>Nt("w-4 h-4 bg-gray-100 border-gray-300 dark:ring-offset-gray-800 focus:ring-2",i===!0&&"mr-2",r?"dark:bg-gray-600 dark:border-gray-500":"dark:bg-gray-700 dark:border-gray-600",e&&"sr-only peer",n&&"rounded",eV[t],i);function tV(e,t,n){const r=["color","custom","inline","group","value"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;const u=to(s);let{color:o="blue"}=t,{custom:l=!1}=t,{inline:c=!1}=t,{group:f=""}=t,{value:d=""}=t,h=pl("background");const g=[[]];function p(O){K.call(this,e,O)}function m(O){K.call(this,e,O)}function b(O){K.call(this,e,O)}function y(O){K.call(this,e,O)}function v(O){K.call(this,e,O)}function _(O){K.call(this,e,O)}function x(O){K.call(this,e,O)}function E(O){K.call(this,e,O)}function w(O){K.call(this,e,O)}function k(O){K.call(this,e,O)}function A(O){K.call(this,e,O)}function N(){f=this.__value,n(0,f)}return e.$$set=O=>{n(6,t=_e(_e({},t),tt(O))),n(8,i=Qe(t,r)),"color"in O&&n(1,o=O.color),"custom"in O&&n(2,l=O.custom),"inline"in O&&n(3,c=O.inline),"group"in O&&n(0,f=O.group),"value"in O&&n(4,d=O.value),"$$scope"in O&&n(23,a=O.$$scope)},t=tt(t),[f,o,l,c,d,h,t,u,i,s,p,m,b,y,v,_,x,E,w,k,A,N,g,a]}class CM extends He{constructor(t){super(),Ve(this,t,tV,KH,Be,{color:1,custom:2,inline:3,group:0,value:4})}}function nV(e){let t,n,r,i,s,a,u=[{type:"checkbox"},{__value:e[5]},e[11],{class:n=Rm(e[3],e[2],!0,e[6],e[10].default||e[9].class)}],o={};for(let f=0;f<u.length;f+=1)o=_e(o,u[f]);const l=e[12].default,c=yt(l,e,e[25],null);return{c(){t=z("input"),c&&c.c(),this.h()},l(f){t=B(f,"INPUT",{type:!0,class:!0}),c&&c.l(f),this.h()},h(){at(t,o)},m(f,d){q(f,t,d),t.autofocus&&t.focus(),t.checked=e[1],c&&c.m(f,d),i=!0,s||(a=[U3(r=e[7].call(null,t,e[0])),Z(t,"change",e[24]),Z(t,"keyup",e[13]),Z(t,"keydown",e[14]),Z(t,"keypress",e[15]),Z(t,"focus",e[16]),Z(t,"blur",e[17]),Z(t,"click",e[18]),Z(t,"mouseover",e[19]),Z(t,"mouseenter",e[20]),Z(t,"mouseleave",e[21]),Z(t,"paste",e[22]),Z(t,"change",e[8]),Z(t,"change",e[23])],s=!0)},p(f,d){at(t,o=Ut(u,[{type:"checkbox"},(!i||d&32)&&{__value:f[5]},d&2048&&f[11],(!i||d&1548&&n!==(n=Rm(f[3],f[2],!0,f[6],f[10].default||f[9].class)))&&{class:n}])),r&&kM(r.update)&&d&1&&r.update.call(null,f[0]),d&2&&(t.checked=f[1]),c&&c.p&&(!i||d&33554432)&&vt(c,l,f,f[25],i?xt(l,f[25],d,null):_t(f[25]),null)},i(f){i||(R(c,f),i=!0)},o(f){j(c,f),i=!1},d(f){f&&D(t),c&&c.d(f),s=!1,ii(a)}}}function rV(e){let t,n;return t=new rn({props:{class:Fm(e[4],e[9].class),show:!!e[10].default,$$slots:{default:[nV]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,[i]){const s={};i&528&&(s.class=Fm(r[4],r[9].class)),i&1024&&(s.show=!!r[10].default),i&33558063&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function iV(e,t,n){const r=["color","custom","inline","group","value","checked"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;const u=to(s);let{color:o="blue"}=t,{custom:l=!1}=t,{inline:c=!1}=t,{group:f=[]}=t,{value:d=""}=t,{checked:h=void 0}=t,g=pl("background");function p(C,T){return h===void 0&&n(1,h=T.includes(d)),m(),{update(S){n(1,h=S.includes(d))}}}function m(){const C=f.indexOf(d);h===void 0&&n(1,h=C>=0),h?C<0&&(f.push(d),n(0,f)):C>=0&&(f.splice(C,1),n(0,f))}function b(C){K.call(this,e,C)}function y(C){K.call(this,e,C)}function v(C){K.call(this,e,C)}function _(C){K.call(this,e,C)}function x(C){K.call(this,e,C)}function E(C){K.call(this,e,C)}function w(C){K.call(this,e,C)}function k(C){K.call(this,e,C)}function A(C){K.call(this,e,C)}function N(C){K.call(this,e,C)}function O(C){K.call(this,e,C)}function $(){h=this.checked,n(1,h)}return e.$$set=C=>{n(9,t=_e(_e({},t),tt(C))),n(11,i=Qe(t,r)),"color"in C&&n(2,o=C.color),"custom"in C&&n(3,l=C.custom),"inline"in C&&n(4,c=C.inline),"group"in C&&n(0,f=C.group),"value"in C&&n(5,d=C.value),"checked"in C&&n(1,h=C.checked),"$$scope"in C&&n(25,a=C.$$scope)},t=tt(t),[f,h,o,l,c,d,g,p,m,t,u,i,s,b,y,v,_,x,E,w,k,A,N,O,$,a]}class sV extends He{constructor(t){super(),Ve(this,t,iV,rV,Be,{color:2,custom:3,inline:4,group:0,value:5,checked:1})}}const aV=e=>({props:e[0]&36}),NO=e=>({props:{...e[5],class:e[2]}}),uV=e=>({props:e[0]&36}),$O=e=>({props:{...e[5],class:e[2]}}),oV=e=>({props:e[0]&36}),FO=e=>({props:{...e[5],class:e[2]}});function RO(e){let t,n;const r=e[10].left,i=yt(r,e,e[25],FO);return{c(){t=z("div"),i&&i.c(),this.h()},l(s){t=B(s,"DIV",{class:!0});var a=U(t);i&&i.l(a),a.forEach(D),this.h()},h(){I(t,"class",TM+" left-0 pl-2.5 pointer-events-none")},m(s,a){q(s,t,a),i&&i.m(t,null),n=!0},p(s,a){i&&i.p&&(!n||a[0]&33554468)&&vt(i,r,s,s[25],n?xt(r,s[25],a,oV):_t(s[25]),FO)},i(s){n||(R(i,s),n=!0)},o(s){j(i,s),n=!1},d(s){s&&D(t),i&&i.d(s)}}}function lV(e){let t,n,r,i,s=[e[5],{class:e[2]}],a={};for(let u=0;u<s.length;u+=1)a=_e(a,s[u]);return{c(){t=z("input"),this.h()},l(u){t=B(u,"INPUT",{class:!0}),this.h()},h(){at(t,a)},m(u,o){q(u,t,o),t.autofocus&&t.focus(),Iu(t,e[0]),r||(i=[Z(t,"input",e[24]),Z(t,"blur",e[11]),Z(t,"change",e[12]),Z(t,"click",e[13]),Z(t,"contextmenu",e[14]),Z(t,"focus",e[15]),Z(t,"keydown",e[16]),Z(t,"keypress",e[17]),Z(t,"keyup",e[18]),Z(t,"mouseover",e[19]),Z(t,"mouseenter",e[20]),Z(t,"mouseleave",e[21]),Z(t,"paste",e[22]),Z(t,"input",e[23]),U3(n=e[3].call(null,t,e[1]))],r=!0)},p(u,o){at(t,a=Ut(s,[o[0]&32&&u[5],o[0]&4&&{class:u[2]}])),o[0]&1&&t.value!==u[0]&&Iu(t,u[0]),n&&kM(n.update)&&o[0]&2&&n.update.call(null,u[1])},d(u){u&&D(t),r=!1,ii(i)}}}function IO(e){let t,n;const r=e[10].right,i=yt(r,e,e[25],NO);return{c(){t=z("div"),i&&i.c(),this.h()},l(s){t=B(s,"DIV",{class:!0});var a=U(t);i&&i.l(a),a.forEach(D),this.h()},h(){I(t,"class",TM+" right-0 pr-2.5")},m(s,a){q(s,t,a),i&&i.m(t,null),n=!0},p(s,a){i&&i.p&&(!n||a[0]&33554468)&&vt(i,r,s,s[25],n?xt(r,s[25],a,aV):_t(s[25]),NO)},i(s){n||(R(i,s),n=!0)},o(s){j(i,s),n=!1},d(s){s&&D(t),i&&i.d(s)}}}function cV(e){let t,n,r,i,s=e[4].left&&RO(e);const a=e[10].default,u=yt(a,e,e[25],$O),o=u||lV(e);let l=e[4].right&&IO(e);return{c(){s&&s.c(),t=ue(),o&&o.c(),n=ue(),l&&l.c(),r=Le()},l(c){s&&s.l(c),t=oe(c),o&&o.l(c),n=oe(c),l&&l.l(c),r=Le()},m(c,f){s&&s.m(c,f),q(c,t,f),o&&o.m(c,f),q(c,n,f),l&&l.m(c,f),q(c,r,f),i=!0},p(c,f){c[4].left?s?(s.p(c,f),f[0]&16&&R(s,1)):(s=RO(c),s.c(),R(s,1),s.m(t.parentNode,t)):s&&(Rt(),j(s,1,1,()=>{s=null}),It()),u?u.p&&(!i||f[0]&33554468)&&vt(u,a,c,c[25],i?xt(a,c[25],f,uV):_t(c[25]),$O):o&&o.p&&(!i||f[0]&39)&&o.p(c,i?f:[-1,-1]),c[4].right?l?(l.p(c,f),f[0]&16&&R(l,1)):(l=IO(c),l.c(),R(l,1),l.m(r.parentNode,r)):l&&(Rt(),j(l,1,1,()=>{l=null}),It())},i(c){i||(R(s),R(o,c),R(l),i=!0)},o(c){j(s),j(o,c),j(l),i=!1},d(c){s&&s.d(c),c&&D(t),o&&o.d(c),c&&D(n),l&&l.d(c),c&&D(r)}}}function fV(e){let t,n;return t=new q3({props:{class:"relative w-full",show:e[4].left||e[4].right,$$slots:{default:[cV]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,i){const s={};i[0]&16&&(s.show=r[4].left||r[4].right),i[0]&33554487&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function dV(e){return e&&e==="xs"?"sm":e==="xl"?"lg":e}let TM="flex absolute inset-y-0 items-center text-gray-500 dark:text-gray-400";function hV(e,t,n){let r;const i=["type","value","size","defaultClass","color"];let s=Qe(t,i),{$$slots:a={},$$scope:u}=t;const o=to(a);let{type:l="text"}=t,{value:c=""}=t,{size:f=void 0}=t,{defaultClass:d="block w-full disabled:cursor-not-allowed disabled:opacity-50"}=t,{color:h="base"}=t;const g={base:"border-gray-300 dark:border-gray-600",tinted:"border-gray-300 dark:border-gray-500",green:"border-green-500 dark:border-green-400",red:"border-red-500 dark:border-red-400"},p={base:"focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",green:"focus:ring-green-500 focus:border-green-500 dark:focus:border-green-500 dark:focus:ring-green-500",red:"focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500"},m={base:"bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",tinted:"bg-gray-50 text-gray-900 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400",green:"bg-green-50 text-green-900 placeholder-green-700 dark:text-green-400 dark:placeholder-green-500 dark:bg-gray-700",red:"bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700"};let b=pl("background"),y=pl("group");const v=(Y,ye)=>(Y.type=ye,{update(Ne){Y.type=Ne}}),_={sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},x={sm:"pl-9",md:"pl-10",lg:"pl-11"},E={sm:"pr-9",md:"pr-10",lg:"pr-11"},w={sm:"p-2",md:"p-2.5",lg:"p-4"};let k;function A(Y){K.call(this,e,Y)}function N(Y){K.call(this,e,Y)}function O(Y){K.call(this,e,Y)}function $(Y){K.call(this,e,Y)}function C(Y){K.call(this,e,Y)}function T(Y){K.call(this,e,Y)}function S(Y){K.call(this,e,Y)}function M(Y){K.call(this,e,Y)}function F(Y){K.call(this,e,Y)}function L(Y){K.call(this,e,Y)}function H(Y){K.call(this,e,Y)}function J(Y){K.call(this,e,Y)}function ge(Y){K.call(this,e,Y)}function ke(){c=this.value,n(0,c)}return e.$$set=Y=>{n(35,t=_e(_e({},t),tt(Y))),n(5,s=Qe(t,i)),"type"in Y&&n(1,l=Y.type),"value"in Y&&n(0,c=Y.value),"size"in Y&&n(6,f=Y.size),"defaultClass"in Y&&n(7,d=Y.defaultClass),"color"in Y&&n(8,h=Y.color),"$$scope"in Y&&n(25,u=Y.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&64&&n(9,r=f||dV(y==null?void 0:y.size)||"md");{const Y=h==="base"&&b?"tinted":h;n(2,k=Nt(d,o.left&&x[r],o.right&&E[r],p[h],m[Y],g[Y],w[r],_[r],y||"rounded-lg",y&&"first:rounded-l-lg last:rounded-r-lg",y&&"border-l-0 first:border-l last:border-r",t.class))}},t=tt(t),[c,l,k,v,o,s,f,d,h,r,a,A,N,O,$,C,T,S,M,F,L,H,J,ge,ke,u]}let gV=class extends He{constructor(t){super(),Ve(this,t,hV,fV,Be,{type:1,value:0,size:6,defaultClass:7,color:8},null,[-1,-1])}};function pV(e){let t,n,r,i=[{type:"file"},e[17]],s={};for(let a=0;a<i.length;a+=1)s=_e(s,i[a]);return{c(){t=z("input"),this.h()},l(a){t=B(a,"INPUT",{type:!0}),this.h()},h(){at(t,s)},m(a,u){q(a,t,u),t.autofocus&&t.focus(),n||(r=[Z(t,"change",e[5]),Z(t,"keyup",e[6]),Z(t,"keydown",e[7]),Z(t,"keypress",e[8]),Z(t,"focus",e[9]),Z(t,"blur",e[10]),Z(t,"click",e[11]),Z(t,"mouseover",e[12]),Z(t,"mouseenter",e[13]),Z(t,"mouseleave",e[14]),Z(t,"paste",e[15]),Z(t,"change",e[16])],n=!0)},p(a,u){at(t,s=Ut(i,[{type:"file"},u&131072&&a[17]]))},d(a){a&&D(t),n=!1,ii(r)}}}function mV(e){let t,n;const r=[e[3],{class:Nt(e[2],e[4].class)}];let i={$$slots:{default:[pV,({props:s})=>({17:s}),({props:s})=>s?131072:0]},$$scope:{ctx:e}};for(let s=0;s<r.length;s+=1)i=_e(i,r[s]);return t=new gV({props:i}),{c(){re(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,a){ie(t,s,a),n=!0},p(s,[a]){const u=a&28?Ut(r,[a&8&&j0(s[3]),a&20&&{class:Nt(s[2],s[4].class)}]):{};a&393219&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){j(t.$$.fragment,s),n=!1},d(s){se(t,s)}}}function bV(e,t,n){const r=["value","files","inputClass"];let i=Qe(t,r),{value:s=""}=t,{files:a=void 0}=t,{inputClass:u="border !p-0 dark:text-gray-400"}=t;function o(_){K.call(this,e,_)}function l(_){K.call(this,e,_)}function c(_){K.call(this,e,_)}function f(_){K.call(this,e,_)}function d(_){K.call(this,e,_)}function h(_){K.call(this,e,_)}function g(_){K.call(this,e,_)}function p(_){K.call(this,e,_)}function m(_){K.call(this,e,_)}function b(_){K.call(this,e,_)}function y(_){K.call(this,e,_)}function v(){s=this.value,a=this.files,n(0,s),n(1,a)}return e.$$set=_=>{n(4,t=_e(_e({},t),tt(_))),n(3,i=Qe(t,r)),"value"in _&&n(0,s=_.value),"files"in _&&n(1,a=_.files),"inputClass"in _&&n(2,u=_.inputClass)},t=tt(t),[s,a,u,i,t,o,l,c,f,d,h,g,p,m,b,y,v]}class yV extends He{constructor(t){super(),Ve(this,t,bV,mV,Be,{value:0,files:1,inputClass:2})}}function PO(e,t,n){const r=e.slice();return r[0]=t[n].value,r[16]=t[n].name,r}function jO(e){let t,n;return{c(){t=z("option"),n=Fe(e[2]),this.h()},l(r){t=B(r,"OPTION",{});var i=U(t);n=Re(i,e[2]),i.forEach(D),this.h()},h(){t.disabled=!0,t.selected=!0,t.__value="",t.value=t.__value},m(r,i){q(r,t,i),P(t,n)},p(r,i){i&4&&$t(n,r[2])},d(r){r&&D(t)}}}function LO(e){let t;const n=e[10].default,r=yt(n,e,e[9],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&512)&&vt(r,n,i,i[9],t?xt(n,i[9],s,null):_t(i[9]),null)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function zO(e){let t,n=e[16]+"",r,i;return{c(){t=z("option"),r=Fe(n),this.h()},l(s){t=B(s,"OPTION",{});var a=U(t);r=Re(a,n),a.forEach(D),this.h()},h(){t.__value=i=e[0],t.value=t.__value},m(s,a){q(s,t,a),P(t,r)},p(s,a){a&2&&n!==(n=s[16]+"")&&$t(r,n),a&2&&i!==(i=s[0])&&(t.__value=i,t.value=t.__value)},d(s){s&&D(t)}}}function vV(e){let t,n,r,i,s=e[2]&&jO(e),a=e[1],u=[];for(let f=0;f<a.length;f+=1)u[f]=zO(PO(e,a,f));let o=null;a.length||(o=LO(e));let l=[e[4],{class:e[3]}],c={};for(let f=0;f<l.length;f+=1)c=_e(c,l[f]);return{c(){t=z("select"),s&&s.c(),n=Le();for(let f=0;f<u.length;f+=1)u[f].c();o&&o.c(),this.h()},l(f){t=B(f,"SELECT",{class:!0});var d=U(t);s&&s.l(d),n=Le();for(let h=0;h<u.length;h+=1)u[h].l(d);o&&o.l(d),d.forEach(D),this.h()},h(){at(t,c),e[0]===void 0&&OM(()=>e[14].call(t))},m(f,d){q(f,t,d),s&&s.m(t,null),P(t,n);for(let h=0;h<u.length;h+=1)u[h].m(t,null);o&&o.m(t,null),(c.multiple?kO:np)(t,c.value),t.autofocus&&t.focus(),np(t,e[0]),r||(i=[Z(t,"change",e[14]),Z(t,"change",e[11]),Z(t,"contextmenu",e[12]),Z(t,"input",e[13])],r=!0)},p(f,[d]){if(f[2]?s?s.p(f,d):(s=jO(f),s.c(),s.m(t,n)):s&&(s.d(1),s=null),d&514){a=f[1];let h;for(h=0;h<a.length;h+=1){const g=PO(f,a,h);u[h]?u[h].p(g,d):(u[h]=zO(g),u[h].c(),u[h].m(t,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length,!a.length&&o?o.p(f,d):a.length?o&&(Rt(),j(o,1,1,()=>{o=null}),It()):(o=LO(f),o.c(),R(o,1),o.m(t,null))}at(t,c=Ut(l,[d&16&&f[4],{class:f[3]}])),d&24&&"value"in c&&(c.multiple?kO:np)(t,c.value),d&3&&np(t,f[0])},i:xe,o:xe,d(f){f&&D(t),s&&s.d(),Pu(u,f),o&&o.d(),r=!1,ii(i)}}}const _V="block w-full";function xV(e,t,n){const r=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t,{items:u=[]}=t,{value:o}=t,{placeholder:l="Choose option ..."}=t,{underline:c=!1}=t,{size:f="md"}=t,{defaultClass:d="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}=t,{underlineClass:h="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=t;const g={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let p;function m(_){K.call(this,e,_)}function b(_){K.call(this,e,_)}function y(_){K.call(this,e,_)}function v(){o=hH(this),n(0,o),n(1,u)}return e.$$set=_=>{t=_e(_e({},t),tt(_)),n(4,i=Qe(t,r)),"items"in _&&n(1,u=_.items),"value"in _&&n(0,o=_.value),"placeholder"in _&&n(2,l=_.placeholder),"underline"in _&&n(5,c=_.underline),"size"in _&&n(6,f=_.size),"defaultClass"in _&&n(7,d=_.defaultClass),"underlineClass"in _&&n(8,h=_.underlineClass),"$$scope"in _&&n(9,a=_.$$scope)},e.$$.update=()=>{n(3,p=Nt(_V,c?h:d,g[f],c&&"!px-0",i.class))},[o,u,l,p,i,c,f,d,h,a,s,m,b,y,v]}class wV extends He{constructor(t){super(),Ve(this,t,xV,vV,Be,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}const EV=e=>({}),BO=e=>({}),SV=e=>({}),UO=e=>({});function qO(e){let t,n;const r=e[8].header,i=yt(r,e,e[23],UO);return{c(){t=z("div"),i&&i.c(),this.h()},l(s){t=B(s,"DIV",{class:!0});var a=U(t);i&&i.l(a),a.forEach(D),this.h()},h(){I(t,"class",e[5](!0))},m(s,a){q(s,t,a),i&&i.m(t,null),n=!0},p(s,a){i&&i.p&&(!n||a&8388608)&&vt(i,r,s,s[23],n?xt(r,s[23],a,SV):_t(s[23]),UO)},i(s){n||(R(i,s),n=!0)},o(s){j(i,s),n=!1},d(s){s&&D(t),i&&i.d(s)}}}function kV(e){let t,n,r,i=[e[7],{class:e[3]}],s={};for(let a=0;a<i.length;a+=1)s=_e(s,i[a]);return{c(){t=z("textarea"),this.h()},l(a){t=B(a,"TEXTAREA",{class:!0}),U(t).forEach(D),this.h()},h(){at(t,s)},m(a,u){q(a,t,u),t.autofocus&&t.focus(),Iu(t,e[0]),n||(r=[Z(t,"input",e[22]),Z(t,"blur",e[9]),Z(t,"change",e[10]),Z(t,"click",e[11]),Z(t,"contextmenu",e[12]),Z(t,"focus",e[13]),Z(t,"input",e[14]),Z(t,"keydown",e[15]),Z(t,"keypress",e[16]),Z(t,"keyup",e[17]),Z(t,"mouseenter",e[18]),Z(t,"mouseleave",e[19]),Z(t,"mouseover",e[20]),Z(t,"paste",e[21])],n=!0)},p(a,u){at(t,s=Ut(i,[u&128&&a[7],u&8&&{class:a[3]}])),u&1&&Iu(t,a[0])},d(a){a&&D(t),n=!1,ii(r)}}}function HO(e){let t,n;const r=e[8].footer,i=yt(r,e,e[23],BO);return{c(){t=z("div"),i&&i.c(),this.h()},l(s){t=B(s,"DIV",{class:!0});var a=U(t);i&&i.l(a),a.forEach(D),this.h()},h(){I(t,"class",e[5](!1))},m(s,a){q(s,t,a),i&&i.m(t,null),n=!0},p(s,a){i&&i.p&&(!n||a&8388608)&&vt(i,r,s,s[23],n?xt(r,s[23],a,EV):_t(s[23]),BO)},i(s){n||(R(i,s),n=!0)},o(s){j(i,s),n=!1},d(s){s&&D(t),i&&i.d(s)}}}function OV(e){let t,n,r,i,s,a=e[6].header&&qO(e);n=new q3({props:{show:e[1],class:e[4],$$slots:{default:[kV]},$$scope:{ctx:e}}});let u=e[6].footer&&HO(e);return{c(){a&&a.c(),t=ue(),re(n.$$.fragment),r=ue(),u&&u.c(),i=Le()},l(o){a&&a.l(o),t=oe(o),ae(n.$$.fragment,o),r=oe(o),u&&u.l(o),i=Le()},m(o,l){a&&a.m(o,l),q(o,t,l),ie(n,o,l),q(o,r,l),u&&u.m(o,l),q(o,i,l),s=!0},p(o,l){o[6].header?a?(a.p(o,l),l&64&&R(a,1)):(a=qO(o),a.c(),R(a,1),a.m(t.parentNode,t)):a&&(Rt(),j(a,1,1,()=>{a=null}),It());const c={};l&2&&(c.show=o[1]),l&16&&(c.class=o[4]),l&8388745&&(c.$$scope={dirty:l,ctx:o}),n.$set(c),o[6].footer?u?(u.p(o,l),l&64&&R(u,1)):(u=HO(o),u.c(),R(u,1),u.m(i.parentNode,i)):u&&(Rt(),j(u,1,1,()=>{u=null}),It())},i(o){s||(R(a),R(n.$$.fragment,o),R(u),s=!0)},o(o){j(a),j(n.$$.fragment,o),j(u),s=!1},d(o){a&&a.d(o),o&&D(t),se(n,o),o&&D(r),u&&u.d(o),o&&D(i)}}}function AV(e){let t,n;return t=new q3({props:{show:e[1],class:e[2],$$slots:{default:[OV]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,[i]){const s={};i&2&&(s.show=r[1]),i&4&&(s.class=r[2]),i&8388827&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function CV(e,t,n){const r=["value"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;const u=to(s),o=pl("background");let{value:l=""}=t,c,f,d;const h=C=>Nt(C?"border-b":"border-t","py-2 px-3 border-gray-200 dark:border-gray-600");let g;function p(C){K.call(this,e,C)}function m(C){K.call(this,e,C)}function b(C){K.call(this,e,C)}function y(C){K.call(this,e,C)}function v(C){K.call(this,e,C)}function _(C){K.call(this,e,C)}function x(C){K.call(this,e,C)}function E(C){K.call(this,e,C)}function w(C){K.call(this,e,C)}function k(C){K.call(this,e,C)}function A(C){K.call(this,e,C)}function N(C){K.call(this,e,C)}function O(C){K.call(this,e,C)}function $(){l=this.value,n(0,l)}return e.$$set=C=>{n(25,t=_e(_e({},t),tt(C))),n(7,i=Qe(t,r)),"value"in C&&n(0,l=C.value),"$$scope"in C&&n(23,a=C.$$scope)},e.$$.update=()=>{n(2,f=Nt("w-full rounded-lg",o?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","text-gray-900 dark:placeholder-gray-400 dark:text-white ","border border-gray-200 dark:border-gray-600",t.class)),e.$$.dirty&6&&n(3,d=c?Nt("block w-full","text-sm","border-0 px-0","bg-inherit dark:bg-inherit","focus:outline-none focus:ring-0"):Nt(f,"p-2.5 text-sm","focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"))},n(1,c=u.header||u.footer),n(4,g=Nt("py-2 px-4 bg-white dark:bg-gray-800",u.footer||"rounded-b-lg",u.header||"rounded-t-lg")),t=tt(t),[l,c,f,d,g,h,u,i,s,p,m,b,y,v,_,x,E,w,k,A,N,O,$,a]}class TV extends He{constructor(t){super(),Ve(this,t,CV,AV,Be,{value:0})}}function MV(e){let t,n,r;const i=e[4].default,s=yt(i,e,e[3],null);let a=[e[1],{class:n=Nt(e[0],e[2].class)},{"aria-label":"Sidebar"}],u={};for(let o=0;o<a.length;o+=1)u=_e(u,a[o]);return{c(){t=z("aside"),s&&s.c(),this.h()},l(o){t=B(o,"ASIDE",{class:!0,"aria-label":!0});var l=U(t);s&&s.l(l),l.forEach(D),this.h()},h(){at(t,u)},m(o,l){q(o,t,l),s&&s.m(t,null),r=!0},p(o,[l]){s&&s.p&&(!r||l&8)&&vt(s,i,o,o[3],r?xt(i,o[3],l,null):_t(o[3]),null),at(t,u=Ut(a,[l&2&&o[1],(!r||l&5&&n!==(n=Nt(o[0],o[2].class)))&&{class:n},{"aria-label":"Sidebar"}]))},i(o){r||(R(s,o),r=!0)},o(o){j(s,o),r=!1},d(o){o&&D(t),s&&s.d(o)}}}function DV(e,t,n){const r=["asideClass"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t,{asideClass:u="w-64"}=t;return e.$$set=o=>{n(2,t=_e(_e({},t),tt(o))),n(1,i=Qe(t,r)),"asideClass"in o&&n(0,u=o.asideClass),"$$scope"in o&&n(3,a=o.$$scope)},t=tt(t),[u,i,t,a,s]}class NV extends He{constructor(t){super(),Ve(this,t,DV,MV,Be,{asideClass:0})}}const $V=e=>({}),VO=e=>({}),FV=e=>({}),GO=e=>({});function WO(e){let t;const n=e[10].subtext,r=yt(n,e,e[9],VO);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&512)&&vt(r,n,i,i[9],t?xt(n,i[9],s,$V):_t(i[9]),VO)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function RV(e){let t,n,r,i,s,a,u,o,l,c;const f=e[10].icon,d=yt(f,e,e[9],GO);let h=e[8].subtext&&WO(e),g=[e[6],{href:e[1]},{class:u=Nt(e[5]?e[4]:e[0],e[7].class)}],p={};for(let m=0;m<g.length;m+=1)p=_e(p,g[m]);return{c(){t=z("li"),n=z("a"),d&&d.c(),r=ue(),i=z("span"),s=Fe(e[2]),a=ue(),h&&h.c(),this.h()},l(m){t=B(m,"LI",{});var b=U(t);n=B(b,"A",{href:!0,class:!0});var y=U(n);d&&d.l(y),r=oe(y),i=B(y,"SPAN",{class:!0});var v=U(i);s=Re(v,e[2]),v.forEach(D),a=oe(y),h&&h.l(y),y.forEach(D),b.forEach(D),this.h()},h(){I(i,"class",e[3]),at(n,p)},m(m,b){q(m,t,b),P(t,n),d&&d.m(n,null),P(n,r),P(n,i),P(i,s),P(n,a),h&&h.m(n,null),o=!0,l||(c=[Z(n,"blur",e[11]),Z(n,"click",e[12]),Z(n,"focus",e[13]),Z(n,"keydown",e[14]),Z(n,"keypress",e[15]),Z(n,"keyup",e[16]),Z(n,"mouseenter",e[17]),Z(n,"mouseleave",e[18]),Z(n,"mouseover",e[19])],l=!0)},p(m,[b]){d&&d.p&&(!o||b&512)&&vt(d,f,m,m[9],o?xt(f,m[9],b,FV):_t(m[9]),GO),(!o||b&4)&&$t(s,m[2]),(!o||b&8)&&I(i,"class",m[3]),m[8].subtext?h?(h.p(m,b),b&256&&R(h,1)):(h=WO(m),h.c(),R(h,1),h.m(n,null)):h&&(Rt(),j(h,1,1,()=>{h=null}),It()),at(n,p=Ut(g,[b&64&&m[6],(!o||b&2)&&{href:m[1]},(!o||b&177&&u!==(u=Nt(m[5]?m[4]:m[0],m[7].class)))&&{class:u}]))},i(m){o||(R(d,m),R(h),o=!0)},o(m){j(d,m),j(h),o=!1},d(m){m&&D(t),d&&d.d(m),h&&h.d(),l=!1,ii(c)}}}function IV(e,t,n){const r=["aClass","href","label","spanClass","activeClass","active"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;const u=to(s);let{aClass:o="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}=t,{href:l=""}=t,{label:c=""}=t,{spanClass:f="ml-3"}=t,{activeClass:d="flex items-center p-2 text-base font-normal text-gray-900 bg-gray-200 dark:bg-gray-700 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}=t,{active:h=!1}=t;function g(w){K.call(this,e,w)}function p(w){K.call(this,e,w)}function m(w){K.call(this,e,w)}function b(w){K.call(this,e,w)}function y(w){K.call(this,e,w)}function v(w){K.call(this,e,w)}function _(w){K.call(this,e,w)}function x(w){K.call(this,e,w)}function E(w){K.call(this,e,w)}return e.$$set=w=>{n(7,t=_e(_e({},t),tt(w))),n(6,i=Qe(t,r)),"aClass"in w&&n(0,o=w.aClass),"href"in w&&n(1,l=w.href),"label"in w&&n(2,c=w.label),"spanClass"in w&&n(3,f=w.spanClass),"activeClass"in w&&n(4,d=w.activeClass),"active"in w&&n(5,h=w.active),"$$scope"in w&&n(9,a=w.$$scope)},t=tt(t),[o,l,c,f,d,h,i,t,u,a,s,g,p,m,b,y,v,_,x,E]}class XO extends He{constructor(t){super(),Ve(this,t,IV,RV,Be,{aClass:0,href:1,label:2,spanClass:3,activeClass:4,active:5})}}function PV(e){let t,n,r,i,s,a,u=[e[5],{href:e[1]},{class:i=Nt(e[4]?e[3]:e[0],e[6].class)}],o={};for(let l=0;l<u.length;l+=1)o=_e(o,u[l]);return{c(){t=z("li"),n=z("a"),r=Fe(e[2]),this.h()},l(l){t=B(l,"LI",{});var c=U(t);n=B(c,"A",{href:!0,class:!0});var f=U(n);r=Re(f,e[2]),f.forEach(D),c.forEach(D),this.h()},h(){at(n,o)},m(l,c){q(l,t,c),P(t,n),P(n,r),s||(a=[Z(n,"blur",e[7]),Z(n,"click",e[8]),Z(n,"focus",e[9]),Z(n,"keydown",e[10]),Z(n,"keypress",e[11]),Z(n,"keyup",e[12]),Z(n,"mouseenter",e[13]),Z(n,"mouseleave",e[14]),Z(n,"mouseover",e[15])],s=!0)},p(l,[c]){c&4&&$t(r,l[2]),at(n,o=Ut(u,[c&32&&l[5],c&2&&{href:l[1]},c&89&&i!==(i=Nt(l[4]?l[3]:l[0],l[6].class))&&{class:i}]))},i:xe,o:xe,d(l){l&&D(t),s=!1,ii(a)}}}function jV(e,t,n){const r=["aClass","href","label","activeClass","active"];let i=Qe(t,r),{aClass:s="flex items-center p-2 pl-11 w-full text-base font-normal text-gray-900 rounded-lg transition duration-75 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700"}=t,{href:a=""}=t,{label:u=""}=t,{activeClass:o="flex items-center p-2 pl-11 text-base font-normal text-gray-900 bg-gray-200 dark:bg-gray-700 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}=t,{active:l=!1}=t;function c(v){K.call(this,e,v)}function f(v){K.call(this,e,v)}function d(v){K.call(this,e,v)}function h(v){K.call(this,e,v)}function g(v){K.call(this,e,v)}function p(v){K.call(this,e,v)}function m(v){K.call(this,e,v)}function b(v){K.call(this,e,v)}function y(v){K.call(this,e,v)}return e.$$set=v=>{n(6,t=_e(_e({},t),tt(v))),n(5,i=Qe(t,r)),"aClass"in v&&n(0,s=v.aClass),"href"in v&&n(1,a=v.href),"label"in v&&n(2,u=v.label),"activeClass"in v&&n(3,o=v.activeClass),"active"in v&&n(4,l=v.active)},t=tt(t),[s,a,u,o,l,i,t,c,f,d,h,g,p,m,b,y]}class Vt extends He{constructor(t){super(),Ve(this,t,jV,PV,Be,{aClass:0,href:1,label:2,activeClass:3,active:4})}}const LV=e=>({}),YO=e=>({}),zV=e=>({}),ZO=e=>({}),BV=e=>({}),QO=e=>({});function UV(e){let t,n;return t=new OH({}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p:xe,i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function qV(e){let t;const n=e[10].arrowdown,r=yt(n,e,e[9],YO);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&512)&&vt(r,n,i,i[9],t?xt(n,i[9],s,LV):_t(i[9]),YO)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function HV(e){let t,n,r,i;const s=[GV,VV],a=[];function u(o,l){return o[8].arrowup?0:1}return t=u(e),n=a[t]=s[t](e),{c(){n.c(),r=Le()},l(o){n.l(o),r=Le()},m(o,l){a[t].m(o,l),q(o,r,l),i=!0},p(o,l){let c=t;t=u(o),t===c?a[t].p(o,l):(Rt(),j(a[c],1,1,()=>{a[c]=null}),It(),n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r))},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){a[t].d(o),o&&D(r)}}}function VV(e){let t,n;return t=new TH({}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p:xe,i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function GV(e){let t;const n=e[10].arrowup,r=yt(n,e,e[9],ZO);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&512)&&vt(r,n,i,i[9],t?xt(n,i[9],s,zV):_t(i[9]),ZO)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function JO(e){let t,n,r;const i=e[10].default,s=yt(i,e,e[9],null);return{c(){t=z("ul"),s&&s.c(),this.h()},l(a){t=B(a,"UL",{id:!0,class:!0});var u=U(t);s&&s.l(u),u.forEach(D),this.h()},h(){I(t,"id","dropdown"),I(t,"class",e[4])},m(a,u){q(a,t,u),s&&s.m(t,null),r=!0},p(a,u){e=a,s&&s.p&&(!r||u&512)&&vt(s,i,e,e[9],r?xt(i,e[9],u,null):_t(e[9]),null),(!r||u&16)&&I(t,"class",e[4])},i(a){r||(R(s,a),OM(()=>{n||(n=OO(t,MO,{delay:250,duration:300,easing:TO},!0)),n.run(1)}),r=!0)},o(a){j(s,a),n||(n=OO(t,MO,{delay:250,duration:300,easing:TO},!1)),n.run(0),r=!1},d(a){a&&D(t),s&&s.d(a),a&&n&&n.end()}}}function WV(e){let t,n,r,i,s,a,u,o,l,c,f,d,h;const g=e[10].icon,p=yt(g,e,e[9],QO),m=[HV,qV,UV],b=[];function y(E,w){return E[0]?0:E[8].arrowdown?1:2}u=y(e),o=b[u]=m[u](e);let v=[e[6],{type:"button"},{class:l=Nt(e[1],e[7].class)},{"aria-controls":"sidebar-dropdown"}],_={};for(let E=0;E<v.length;E+=1)_=_e(_,v[E]);let x=e[0]&&JO(e);return{c(){t=z("li"),n=z("button"),p&&p.c(),r=ue(),i=z("span"),s=Fe(e[2]),a=ue(),o.c(),c=ue(),x&&x.c(),this.h()},l(E){t=B(E,"LI",{});var w=U(t);n=B(w,"BUTTON",{type:!0,class:!0,"aria-controls":!0});var k=U(n);p&&p.l(k),r=oe(k),i=B(k,"SPAN",{class:!0,"sidebar-toggle-item":!0});var A=U(i);s=Re(A,e[2]),A.forEach(D),a=oe(k),o.l(k),k.forEach(D),c=oe(w),x&&x.l(w),w.forEach(D),this.h()},h(){I(i,"class",e[3]),I(i,"sidebar-toggle-item",""),at(n,_)},m(E,w){q(E,t,w),P(t,n),p&&p.m(n,null),P(n,r),P(n,i),P(i,s),P(n,a),b[u].m(n,null),n.autofocus&&n.focus(),P(t,c),x&&x.m(t,null),f=!0,d||(h=Z(n,"click",e[11]),d=!0)},p(E,[w]){p&&p.p&&(!f||w&512)&&vt(p,g,E,E[9],f?xt(g,E[9],w,BV):_t(E[9]),QO),(!f||w&4)&&$t(s,E[2]),(!f||w&8)&&I(i,"class",E[3]);let k=u;u=y(E),u===k?b[u].p(E,w):(Rt(),j(b[k],1,1,()=>{b[k]=null}),It(),o=b[u],o?o.p(E,w):(o=b[u]=m[u](E),o.c()),R(o,1),o.m(n,null)),at(n,_=Ut(v,[w&64&&E[6],{type:"button"},(!f||w&130&&l!==(l=Nt(E[1],E[7].class)))&&{class:l},{"aria-controls":"sidebar-dropdown"}])),E[0]?x?(x.p(E,w),w&1&&R(x,1)):(x=JO(E),x.c(),R(x,1),x.m(t,null)):x&&(Rt(),j(x,1,1,()=>{x=null}),It())},i(E){f||(R(p,E),R(o),R(x),f=!0)},o(E){j(p,E),j(o),j(x),f=!1},d(E){E&&D(t),p&&p.d(E),b[u].d(),x&&x.d(),d=!1,h()}}}function XV(e,t,n){const r=["btnClass","label","spanClass","ulClass","isOpen"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;const u=to(s);let{btnClass:o="flex items-center p-2 w-full text-base font-normal text-gray-900 rounded-lg transition duration-75 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700"}=t,{label:l=""}=t,{spanClass:c="flex-1 ml-3 text-left whitespace-nowrap"}=t,{ulClass:f="py-2 space-y-2"}=t,{isOpen:d=!1}=t;const h=()=>{n(0,d=!d)},g=()=>h();return e.$$set=p=>{n(7,t=_e(_e({},t),tt(p))),n(6,i=Qe(t,r)),"btnClass"in p&&n(1,o=p.btnClass),"label"in p&&n(2,l=p.label),"spanClass"in p&&n(3,c=p.spanClass),"ulClass"in p&&n(4,f=p.ulClass),"isOpen"in p&&n(0,d=p.isOpen),"$$scope"in p&&n(9,a=p.$$scope)},t=tt(t),[d,o,l,c,f,h,i,t,u,a,s,g]}class KO extends He{constructor(t){super(),Ve(this,t,XV,WV,Be,{btnClass:1,label:2,spanClass:3,ulClass:4,isOpen:0})}}function YV(e){let t,n,r;const i=e[6].default,s=yt(i,e,e[5],null);let a=[e[1],{class:n=Nt(e[0],e[2].class)}],u={};for(let o=0;o<a.length;o+=1)u=_e(u,a[o]);return{c(){t=z("ul"),s&&s.c(),this.h()},l(o){t=B(o,"UL",{class:!0});var l=U(t);s&&s.l(l),l.forEach(D),this.h()},h(){at(t,u)},m(o,l){q(o,t,l),s&&s.m(t,null),r=!0},p(o,[l]){s&&s.p&&(!r||l&32)&&vt(s,i,o,o[5],r?xt(i,o[5],l,null):_t(o[5]),null),at(t,u=Ut(a,[l&2&&o[1],(!r||l&5&&n!==(n=Nt(o[0],o[2].class)))&&{class:n}]))},i(o){r||(R(s,o),r=!0)},o(o){j(s,o),r=!1},d(o){o&&D(t),s&&s.d(o)}}}function ZV(e,t,n){const r=["ulClass","borderClass","border"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t,{ulClass:u="space-y-2"}=t,{borderClass:o="pt-4 mt-4 border-t border-gray-200 dark:border-gray-700"}=t,{border:l=!1}=t;return l&&(u+=" "+o),e.$$set=c=>{n(2,t=_e(_e({},t),tt(c))),n(1,i=Qe(t,r)),"ulClass"in c&&n(0,u=c.ulClass),"borderClass"in c&&n(3,o=c.borderClass),"border"in c&&n(4,l=c.border),"$$scope"in c&&n(5,a=c.$$scope)},t=tt(t),[u,i,t,o,l,a,s]}class QV extends He{constructor(t){super(),Ve(this,t,ZV,YV,Be,{ulClass:0,borderClass:3,border:4})}}function JV(e){let t,n,r;const i=e[4].default,s=yt(i,e,e[3],null);let a=[e[1],{class:n=Nt(e[0],e[2].class)}],u={};for(let o=0;o<a.length;o+=1)u=_e(u,a[o]);return{c(){t=z("div"),s&&s.c(),this.h()},l(o){t=B(o,"DIV",{class:!0});var l=U(t);s&&s.l(l),l.forEach(D),this.h()},h(){at(t,u)},m(o,l){q(o,t,l),s&&s.m(t,null),r=!0},p(o,[l]){s&&s.p&&(!r||l&8)&&vt(s,i,o,o[3],r?xt(i,o[3],l,null):_t(o[3]),null),at(t,u=Ut(a,[l&2&&o[1],(!r||l&5&&n!==(n=Nt(o[0],o[2].class)))&&{class:n}]))},i(o){r||(R(s,o),r=!0)},o(o){j(s,o),r=!1},d(o){o&&D(t),s&&s.d(o)}}}function KV(e,t,n){const r=["divClass"];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t,{divClass:u="overflow-y-auto py-4 px-3 bg-gray-50 rounded dark:bg-gray-800"}=t;return e.$$set=o=>{n(2,t=_e(_e({},t),tt(o))),n(1,i=Qe(t,r)),"divClass"in o&&n(0,u=o.divClass),"$$scope"in o&&n(3,a=o.$$scope)},t=tt(t),[u,i,t,a,s]}class eG extends He{constructor(t){super(),Ve(this,t,KV,JV,Be,{divClass:0})}}const tG=EH({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}.VITE_API_URL||{BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}.VITE_API_URL_PLACEHOLDER);function eA(e,t,n){const r=e.slice();return r[6]=t[n],r}function tA(e){let t,n,r;const i=[e[0]];var s=e[2];function a(u){let o={$$slots:{default:[nG]},$$scope:{ctx:u}};for(let l=0;l<i.length;l+=1)o=_e(o,i[l]);return{props:o}}return s&&(t=AO(s,a(e)),t.$on("edit",e[4])),{c(){t&&re(t.$$.fragment),n=Le()},l(u){t&&ae(t.$$.fragment,u),n=Le()},m(u,o){t&&ie(t,u,o),q(u,n,o),r=!0},p(u,o){const l=o&1?Ut(i,[j0(u[0])]):{};if(o&514&&(l.$$scope={dirty:o,ctx:u}),s!==(s=u[2])){if(t){Rt();const c=t;j(c.$$.fragment,1,0,()=>{se(c,1)}),It()}s?(t=AO(s,a(u)),t.$on("edit",u[4]),re(t.$$.fragment),R(t.$$.fragment,1),ie(t,n.parentNode,n)):t=null}else s&&t.$set(l)},i(u){r||(t&&R(t.$$.fragment,u),r=!0)},o(u){t&&j(t.$$.fragment,u),r=!1},d(u){u&&D(n),t&&se(t,u)}}}function nA(e){let t,n;const r=[e[6]];let i={};for(let s=0;s<r.length;s+=1)i=_e(i,r[s]);return t=new MM({props:i}),{c(){re(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,a){ie(t,s,a),n=!0},p(s,a){const u=a&2?Ut(r,[j0(s[6])]):{};t.$set(u)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){j(t.$$.fragment,s),n=!1},d(s){se(t,s)}}}function nG(e){let t,n,r=e[1],i=[];for(let a=0;a<r.length;a+=1)i[a]=nA(eA(e,r,a));const s=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=Le()},l(a){for(let u=0;u<i.length;u+=1)i[u].l(a);t=Le()},m(a,u){for(let o=0;o<i.length;o+=1)i[o].m(a,u);q(a,t,u),n=!0},p(a,u){if(u&2){r=a[1];let o;for(o=0;o<r.length;o+=1){const l=eA(a,r,o);i[o]?(i[o].p(l,u),R(i[o],1)):(i[o]=nA(l),i[o].c(),R(i[o],1),i[o].m(t.parentNode,t))}for(Rt(),o=r.length;o<i.length;o+=1)s(o);It()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)R(i[u]);n=!0}},o(a){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)j(i[u]);n=!1},d(a){Pu(i,a),a&&D(t)}}}function rG(e){let t,n,r=e[2]&&tA(e);return{c(){r&&r.c(),t=Le()},l(i){r&&r.l(i),t=Le()},m(i,s){r&&r.m(i,s),q(i,t,s),n=!0},p(i,[s]){i[2]?r?(r.p(i,s),s&4&&R(r,1)):(r=tA(i),r.c(),R(r,1),r.m(t.parentNode,t)):r&&(Rt(),j(r,1,1,()=>{r=null}),It())},i(i){n||(R(r),n=!0)},o(i){j(r),n=!1},d(i){r&&r.d(i),i&&D(t)}}}function iG(e,t,n){const r=pl("Components");let{name:i}=t,{props:s}=t,{slots:a=[]}=t,u;gH(async()=>{if(i in r){n(2,u=r[i]);return}else console.log(`Component ${i} was not imported and added to the Components context.`)});function o(l){K.call(this,e,l)}return e.$$set=l=>{"name"in l&&n(3,i=l.name),"props"in l&&n(0,s=l.props),"slots"in l&&n(1,a=l.slots)},e.$$.update=()=>{e.$$.dirty&8&&n(2,u=r[i])},[s,a,u,i,o]}class MM extends He{constructor(t){super(),Ve(this,t,iG,rG,Be,{name:3,props:0,slots:1})}}async function sG(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();if(!n.ok)throw console.log("HTTP status "+n.status+": "+n.statusText+`
 url: `+e+`
 data: `+JSON.stringify(t)),new Error("HTTP status "+n.status+": "+r.detail);return r}class aG{constructor(t,n,r,i,s){au(this,"columnInfos");au(this,"columns");au(this,"posidxs");au(this,"keyidxs");au(this,"rows");au(this,"fullLength");au(this,"primaryKey");this.columnInfos=t,this.columns=this.columnInfos.map(u=>u.name),this.posidxs=n,this.rows=r,this.fullLength=i,this.primaryKey=s;let a=this.columns.findIndex(u=>u===s);this.keyidxs=this.rows.map(u=>u[a])}getCell(t,n){let r=this.columns.indexOf(n),i=this.columnInfos[r];return{data:this.rows[t][this.columns.indexOf(n)],cellComponent:i.cellComponent,cellProps:i.cellProps,cellDataProp:i.cellDataProp,column:n}}getColumn(t){let n=this.columns.indexOf(t),r=this.columnInfos[n];return{data:this.rows.map(i=>i[n]),cellComponent:r.cellComponent,cellProps:r.cellProps,cellDataProp:r.cellDataProp,column:t}}length(){return this.rows.length}}const uG=async({df:e,columns:t=null,start:n=null,end:r=null,posidxs:i=null,keyidxs:s=null,key_column:a=null,variants:u=null})=>{const o=await sG(`${pH(tG)}/df/${e.refId}/rows`,{start:n,end:r,posidxs:i,key_column:a,keyidxs:s,columns:t,variants:u});return new aG(o.columnInfos,o.posidxs,o.rows,o.fullLength,o.primaryKey)};function oG(e){let t,n,r;const i=e[2].default,s=yt(i,e,e[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{width:"16"},{height:"16"},{fill:"currentColor"},{viewBox:"0 0 16 16"},e[0]],u={};for(let o=0;o<a.length;o+=1)u=_e(u,a[o]);return{c(){t=Fu("svg"),s&&s.c(),n=Fu("path"),this.h()},l(o){t=Ru(o,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0});var l=U(t);s&&s.l(l),n=Ru(l,"path",{d:!0}),U(n).forEach(D),l.forEach(D),this.h()},h(){I(n,"d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855-.143.268-.276.56-.395.872.705.157 1.472.257 2.282.287V1.077zM4.249 3.539c.142-.384.304-.744.481-1.078a6.7 6.7 0 0 1 .597-.933A7.01 7.01 0 0 0 3.051 3.05c.362.184.763.349 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9.124 9.124 0 0 1-1.565-.667A6.964 6.964 0 0 0 1.018 7.5h2.49zm1.4-2.741a12.344 12.344 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332zM8.5 5.09V7.5h2.99a12.342 12.342 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.612 13.612 0 0 1 7.5 10.91V8.5H4.51zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741H8.5zm-3.282 3.696c.12.312.252.604.395.872.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a6.696 6.696 0 0 1-.598-.933 8.853 8.853 0 0 1-.481-1.079 8.38 8.38 0 0 0-1.198.49 7.01 7.01 0 0 0 2.276 1.522zm-1.383-2.964A13.36 13.36 0 0 1 3.508 8.5h-2.49a6.963 6.963 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667zm6.728 2.964a7.009 7.009 0 0 0 2.275-1.521 8.376 8.376 0 0 0-1.197-.49 8.853 8.853 0 0 1-.481 1.078 6.688 6.688 0 0 1-.597.933zM8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855.143-.268.276-.56.395-.872A12.63 12.63 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.963 6.963 0 0 0 14.982 8.5h-2.49a13.36 13.36 0 0 1-.437 3.008zM14.982 7.5a6.963 6.963 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008h2.49zM11.27 2.461c.177.334.339.694.482 1.078a8.368 8.368 0 0 0 1.196-.49 7.01 7.01 0 0 0-2.275-1.52c.218.283.418.597.597.932zm-.488 1.343a7.765 7.765 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"),ff(t,u),rp(t,"bi",!0),rp(t,"bi-globe2",!0)},m(o,l){q(o,t,l),s&&s.m(t,null),P(t,n),r=!0},p(o,[l]){s&&s.p&&(!r||l&2)&&vt(s,i,o,o[1],r?xt(i,o[1],l,null):_t(o[1]),null),ff(t,u=Ut(a,[{xmlns:"http://www.w3.org/2000/svg"},{width:"16"},{height:"16"},{fill:"currentColor"},{viewBox:"0 0 16 16"},l&1&&o[0]])),rp(t,"bi",!0),rp(t,"bi-globe2",!0)},i(o){r||(R(s,o),r=!0)},o(o){j(s,o),r=!1},d(o){o&&D(t),s&&s.d(o)}}}function lG(e,t,n){const r=[];let i=Qe(t,r),{$$slots:s={},$$scope:a}=t;return e.$$set=u=>{t=_e(_e({},t),tt(u)),n(0,i=Qe(t,r)),"$$scope"in u&&n(1,a=u.$$scope)},[i,a,s]}class cG extends He{constructor(t){super(),Ve(this,t,lG,oG,Be,{})}}function fG(e){let t,n,r,i,s;return{c(){t=z("div"),n=z("button"),r=Fe(e[0]),this.h()},l(a){t=B(a,"DIV",{class:!0});var u=U(t);n=B(u,"BUTTON",{});var o=U(n);r=Re(o,e[0]),o.forEach(D),u.forEach(D),this.h()},h(){I(t,"class","bg-slate-100 py-3 rounded-lg drop-shadow-md flex flex-col hover:bg-slate-200")},m(a,u){q(a,t,u),P(t,n),P(n,r),i||(s=Z(n,"click",e[2]),i=!0)},p(a,[u]){u&1&&$t(r,a[0])},i:xe,o:xe,d(a){a&&D(t),i=!1,s()}}}function dG(e,t,n){let{title:r=""}=t,i=Ca();function s(){i("click",{})}const a=u=>{s()};return e.$$set=u=>{"title"in u&&n(0,r=u.title)},[r,s,a]}class hG extends He{constructor(t){super(),Ve(this,t,dG,fG,Be,{title:0})}}const gG=e=>({}),rA=e=>({}),pG=e=>({}),iA=e=>({}),mG=e=>({}),sA=e=>({});function bG(e){let t,n;return{c(){t=z("span"),n=Fe(e[1]),this.h()},l(r){t=B(r,"SPAN",{class:!0});var i=U(t);n=Re(i,e[1]),i.forEach(D),this.h()},h(){I(t,"class","font-bold")},m(r,i){q(r,t,i),P(t,n)},p(r,i){i&2&&$t(n,r[1])},d(r){r&&D(t)}}}function yG(e){let t,n;return{c(){t=z("span"),n=Fe(e[2]),this.h()},l(r){t=B(r,"SPAN",{class:!0});var i=U(t);n=Re(i,e[2]),i.forEach(D),this.h()},h(){I(t,"class","text-gray-500")},m(r,i){q(r,t,i),P(t,n)},p(r,i){i&4&&$t(n,r[2])},d(r){r&&D(t)}}}function vG(e){let t,n,r,i,s,a,u,o,l;const c=e[4].avatar,f=yt(c,e,e[3],sA),d=e[4].name,h=yt(d,e,e[3],iA),g=h||bG(e),p=e[4].time,m=yt(p,e,e[3],rA),b=m||yG(e);return{c(){t=z("div"),f&&f.c(),n=ue(),r=z("div"),i=z("p"),g&&g.c(),s=ue(),b&&b.c(),a=ue(),u=z("p"),o=Fe(e[0]),this.h()},l(y){t=B(y,"DIV",{class:!0});var v=U(t);f&&f.l(v),n=oe(v),r=B(v,"DIV",{class:!0});var _=U(r);i=B(_,"P",{class:!0});var x=U(i);g&&g.l(x),s=oe(x),b&&b.l(x),x.forEach(D),a=oe(_),u=B(_,"P",{class:!0});var E=U(u);o=Re(E,e[0]),E.forEach(D),_.forEach(D),v.forEach(D),this.h()},h(){I(i,"class","flex justify-between"),I(u,"class","text-gray-800 whitespace-pre-line"),I(r,"class","ml-2 w-full"),I(t,"class","flex ml-2 pl-4 pr-4 mb-4")},m(y,v){q(y,t,v),f&&f.m(t,null),P(t,n),P(t,r),P(r,i),g&&g.m(i,null),P(i,s),b&&b.m(i,null),P(r,a),P(r,u),P(u,o),l=!0},p(y,[v]){f&&f.p&&(!l||v&8)&&vt(f,c,y,y[3],l?xt(c,y[3],v,mG):_t(y[3]),sA),h?h.p&&(!l||v&8)&&vt(h,d,y,y[3],l?xt(d,y[3],v,pG):_t(y[3]),iA):g&&g.p&&(!l||v&2)&&g.p(y,l?v:-1),m?m.p&&(!l||v&8)&&vt(m,p,y,y[3],l?xt(p,y[3],v,gG):_t(y[3]),rA):b&&b.p&&(!l||v&4)&&b.p(y,l?v:-1),(!l||v&1)&&$t(o,y[0])},i(y){l||(R(f,y),R(g,y),R(b,y),l=!0)},o(y){j(f,y),j(g,y),j(b,y),l=!1},d(y){y&&D(t),f&&f.d(y),g&&g.d(y),b&&b.d(y)}}}function _G(e,t,n){let{$$slots:r={},$$scope:i}=t,{message:s}=t,{name:a}=t,{time:u}=t;return e.$$set=o=>{"message"in o&&n(0,s=o.message),"name"in o&&n(1,a=o.name),"time"in o&&n(2,u=o.time),"$$scope"in o&&n(3,i=o.$$scope)},[s,a,u,i,r]}class xG extends He{constructor(t){super(),Ve(this,t,_G,vG,Be,{message:0,name:1,time:2})}}function aA(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function wG(e){return{c:xe,l:xe,m:xe,p:xe,i:xe,o:xe,d:xe}}function EG(e){let t,n,r=e[9].rows,i=[];for(let a=0;a<r.length;a+=1)i[a]=uA(aA(e,r,a));const s=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=Le()},l(a){for(let u=0;u<i.length;u+=1)i[u].l(a);t=Le()},m(a,u){for(let o=0;o<i.length;o+=1)i[o].m(a,u);q(a,t,u),n=!0},p(a,u){if(u&11){r=a[9].rows;let o;for(o=0;o<r.length;o+=1){const l=aA(a,r,o);i[o]?(i[o].p(l,u),R(i[o],1)):(i[o]=uA(l),i[o].c(),R(i[o],1),i[o].m(t.parentNode,t))}for(Rt(),o=r.length;o<i.length;o+=1)s(o);It()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)R(i[u]);n=!0}},o(a){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)j(i[u]);n=!1},d(a){Pu(i,a),a&&D(t)}}}function SG(e){let t,n,r;return t=new qH({props:{src:e[9].getCell(e[9].fullLength-e[12]-1,"sender").data==="chatbot"?e[0]:e[1],stacked:!0,class:"mr-2"}}),{c(){re(t.$$.fragment),n=ue()},l(i){ae(t.$$.fragment,i),n=oe(i)},m(i,s){ie(t,i,s),q(i,n,s),r=!0},p(i,s){const a={};s&11&&(a.src=i[9].getCell(i[9].fullLength-i[12]-1,"sender").data==="chatbot"?i[0]:i[1]),t.$set(a)},i(i){r||(R(t.$$.fragment,i),r=!0)},o(i){j(t.$$.fragment,i),r=!1},d(i){se(t,i),i&&D(n)}}}function uA(e){let t,n;return t=new xG({props:{message:e[9].getCell(e[9].fullLength-e[12]-1,"message").data,name:e[9].getCell(e[9].fullLength-e[12]-1,"name").data,time:e[9].getCell(e[9].fullLength-e[12]-1,"time").data,$$slots:{avatar:[SG]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,i){const s={};i&8&&(s.message=r[9].getCell(r[9].fullLength-r[12]-1,"message").data),i&8&&(s.name=r[9].getCell(r[9].fullLength-r[12]-1,"name").data),i&8&&(s.time=r[9].getCell(r[9].fullLength-r[12]-1,"time").data),i&8203&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function kG(e){return{c:xe,l:xe,m:xe,p:xe,i:xe,o:xe,d:xe}}function OG(e){let t,n;return{c(){t=Fu("svg"),n=Fu("path"),this.h()},l(r){t=Ru(r,"svg",{fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=U(t);n=Ru(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),U(n).forEach(D),i.forEach(D),this.h()},h(){I(n,"stroke-linecap","round"),I(n,"stroke-linejoin","round"),I(n,"d","M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"),I(t,"fill","none"),I(t,"viewBox","0 0 24 24"),I(t,"stroke-width","1.5"),I(t,"stroke","currentColor"),I(t,"class","w-6 h-6")},m(r,i){q(r,t,i),P(t,n)},p:xe,d(r){r&&D(t)}}}function AG(e){let t,n,r,i,s,a,u,o,l,c,f={ctx:e,current:null,token:null,hasCatch:!1,pending:kG,then:EG,catch:wG,value:9,blocks:[,,,]};CO(r=e[3],f);function d(g){e[6](g)}let h={rows:"5",placeholder:"Your message...",class:"mx-4 resize-none"};return e[2]!==void 0&&(h.value=e[2]),a=new TV({props:h}),Qt.push(()=>tn(a,"value",d)),a.$on("keyup",e[7]),l=new _H({props:{class:"text-violet-600 dark:text-violet-500",color:"light",$$slots:{default:[OG]},$$scope:{ctx:e}}}),l.$on("click",e[4]),{c(){t=z("div"),n=z("div"),f.block.c(),i=ue(),s=z("div"),re(a.$$.fragment),o=ue(),re(l.$$.fragment),this.h()},l(g){t=B(g,"DIV",{class:!0});var p=U(t);n=B(p,"DIV",{class:!0});var m=U(n);f.block.l(m),m.forEach(D),i=oe(p),s=B(p,"DIV",{class:!0});var b=U(s);ae(a.$$.fragment,b),o=oe(b),ae(l.$$.fragment,b),b.forEach(D),p.forEach(D),this.h()},h(){I(n,"class","flex flex-col-reverse overflow-y-scroll"),I(s,"class","flex mt-4"),I(t,"class","h-full bg-violet-100 p-4 rounded-lg flex flex-col justify-between shadow-md")},m(g,p){q(g,t,p),P(t,n),f.block.m(n,f.anchor=null),f.mount=()=>n,f.anchor=null,P(t,i),P(t,s),ie(a,s,null),P(s,o),ie(l,s,null),c=!0},p(g,[p]){e=g,f.ctx=e,p&8&&r!==(r=e[3])&&CO(r,f)||mH(f,e,p);const m={};!u&&p&4&&(u=!0,m.value=e[2],nn(()=>u=!1)),a.$set(m);const b={};p&8192&&(b.$$scope={dirty:p,ctx:e}),l.$set(b)},i(g){c||(R(f.block),R(a.$$.fragment,g),R(l.$$.fragment,g),c=!0)},o(g){for(let p=0;p<3;p+=1){const m=f.blocks[p];j(m)}j(a.$$.fragment,g),j(l.$$.fragment,g),c=!1},d(g){g&&D(t),f.block.d(),f.token=null,f=null,se(a),se(l)}}}function CG(e,t,n){let r;const i=Ca();let{df:s}=t,{imgChatbot:a}=t,{imgUser:u}=t,o="",l=()=>{i("send",{message:o}),n(2,o="")};function c(d){o=d,n(2,o)}const f=d=>{d.key==="Enter"&&!d.shiftKey&&l()};return e.$$set=d=>{"df"in d&&n(5,s=d.df),"imgChatbot"in d&&n(0,a=d.imgChatbot),"imgUser"in d&&n(1,u=d.imgUser)},e.$$.update=()=>{e.$$.dirty&32&&n(3,r=uG({df:s,start:0,end:1e5}))},[a,u,o,r,l,s,c,f]}class TG extends He{constructor(t){super(),Ve(this,t,CG,AG,Be,{df:5,imgChatbot:0,imgUser:1})}}function MG(e){let t;const n=e[5].default,r=yt(n,e,e[10],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&1024)&&vt(r,n,i,i[10],t?xt(n,i[10],s,null):_t(i[10]),null)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function DG(e){let t,n,r,i,s,a;function u(f){e[6](f)}function o(f){e[7](f)}function l(f){e[8](f)}let c={$$slots:{default:[MG]},$$scope:{ctx:e}};return e[0]!==void 0&&(c.checked=e[0]),e[1]!==void 0&&(c.disabled=e[1]),e[2]!==void 0&&(c.color=e[2]),n=new sV({props:c}),Qt.push(()=>tn(n,"checked",u)),Qt.push(()=>tn(n,"disabled",o)),Qt.push(()=>tn(n,"color",l)),n.$on("change",e[9]),{c(){t=z("div"),re(n.$$.fragment),this.h()},l(f){t=B(f,"DIV",{class:!0});var d=U(t);ae(n.$$.fragment,d),d.forEach(D),this.h()},h(){I(t,"class",e[3])},m(f,d){q(f,t,d),ie(n,t,null),a=!0},p(f,[d]){const h={};d&1024&&(h.$$scope={dirty:d,ctx:f}),!r&&d&1&&(r=!0,h.checked=f[0],nn(()=>r=!1)),!i&&d&2&&(i=!0,h.disabled=f[1],nn(()=>i=!1)),!s&&d&4&&(s=!0,h.color=f[2],nn(()=>s=!1)),n.$set(h),(!a||d&8)&&I(t,"class",f[3])},i(f){a||(R(n.$$.fragment,f),a=!0)},o(f){j(n.$$.fragment,f),a=!1},d(f){f&&D(t),se(n)}}}function NG(e,t,n){let{$$slots:r={},$$scope:i}=t,{checked:s=!1}=t,{disabled:a=!1}=t,{color:u="purple"}=t,{classes:o="bg-violet-50 p-2 rounded-lg"}=t;const l=Ca();function c(g){s=g,n(0,s)}function f(g){a=g,n(1,a)}function d(g){u=g,n(2,u)}const h=g=>l("change",{detail:g.detail});return e.$$set=g=>{"checked"in g&&n(0,s=g.checked),"disabled"in g&&n(1,a=g.disabled),"color"in g&&n(2,u=g.color),"classes"in g&&n(3,o=g.classes),"$$scope"in g&&n(10,i=g.$$scope)},[s,a,u,o,l,r,c,f,d,h,i]}class $G extends He{constructor(t){super(),Ve(this,t,NG,DG,Be,{checked:0,disabled:1,color:2,classes:3})}}var J_={},FG={get exports(){return J_},set exports(e){J_=e}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},u={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function y(v){return v instanceof o?new o(v.type,y(v.content),v.alias):Array.isArray(v)?v.map(y):v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(y){return Object.prototype.toString.call(y).slice(8,-1)},objId:function(y){return y.__id||Object.defineProperty(y,"__id",{value:++s}),y.__id},clone:function y(v,_){_=_||{};var x,E;switch(u.util.type(v)){case"Object":if(E=u.util.objId(v),_[E])return _[E];x={},_[E]=x;for(var w in v)v.hasOwnProperty(w)&&(x[w]=y(v[w],_));return x;case"Array":return E=u.util.objId(v),_[E]?_[E]:(x=[],_[E]=x,v.forEach(function(k,A){x[A]=y(k,_)}),x);default:return v}},getLanguage:function(y){for(;y;){var v=i.exec(y.className);if(v)return v[1].toLowerCase();y=y.parentElement}return"none"},setLanguage:function(y,v){y.className=y.className.replace(RegExp(i,"gi"),""),y.classList.add("language-"+v)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(x){var y=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(x.stack)||[])[1];if(y){var v=document.getElementsByTagName("script");for(var _ in v)if(v[_].src==y)return v[_]}return null}},isActive:function(y,v,_){for(var x="no-"+v;y;){var E=y.classList;if(E.contains(v))return!0;if(E.contains(x))return!1;y=y.parentElement}return!!_}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(y,v){var _=u.util.clone(u.languages[y]);for(var x in v)_[x]=v[x];return _},insertBefore:function(y,v,_,x){x=x||u.languages;var E=x[y],w={};for(var k in E)if(E.hasOwnProperty(k)){if(k==v)for(var A in _)_.hasOwnProperty(A)&&(w[A]=_[A]);_.hasOwnProperty(k)||(w[k]=E[k])}var N=x[y];return x[y]=w,u.languages.DFS(u.languages,function(O,$){$===N&&O!=y&&(this[O]=w)}),w},DFS:function y(v,_,x,E){E=E||{};var w=u.util.objId;for(var k in v)if(v.hasOwnProperty(k)){_.call(v,k,v[k],x||k);var A=v[k],N=u.util.type(A);N==="Object"&&!E[w(A)]?(E[w(A)]=!0,y(A,_,null,E)):N==="Array"&&!E[w(A)]&&(E[w(A)]=!0,y(A,_,k,E))}}},plugins:{},highlightAll:function(y,v){u.highlightAllUnder(document,y,v)},highlightAllUnder:function(y,v,_){var x={callback:_,container:y,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};u.hooks.run("before-highlightall",x),x.elements=Array.prototype.slice.apply(x.container.querySelectorAll(x.selector)),u.hooks.run("before-all-elements-highlight",x);for(var E=0,w;w=x.elements[E++];)u.highlightElement(w,v===!0,x.callback)},highlightElement:function(y,v,_){var x=u.util.getLanguage(y),E=u.languages[x];u.util.setLanguage(y,x);var w=y.parentElement;w&&w.nodeName.toLowerCase()==="pre"&&u.util.setLanguage(w,x);var k=y.textContent,A={element:y,language:x,grammar:E,code:k};function N($){A.highlightedCode=$,u.hooks.run("before-insert",A),A.element.innerHTML=A.highlightedCode,u.hooks.run("after-highlight",A),u.hooks.run("complete",A),_&&_.call(A.element)}if(u.hooks.run("before-sanity-check",A),w=A.element.parentElement,w&&w.nodeName.toLowerCase()==="pre"&&!w.hasAttribute("tabindex")&&w.setAttribute("tabindex","0"),!A.code){u.hooks.run("complete",A),_&&_.call(A.element);return}if(u.hooks.run("before-highlight",A),!A.grammar){N(u.util.encode(A.code));return}if(v&&r.Worker){var O=new Worker(u.filename);O.onmessage=function($){N($.data)},O.postMessage(JSON.stringify({language:A.language,code:A.code,immediateClose:!0}))}else N(u.highlight(A.code,A.grammar,A.language))},highlight:function(y,v,_){var x={code:y,grammar:v,language:_};if(u.hooks.run("before-tokenize",x),!x.grammar)throw new Error('The language "'+x.language+'" has no grammar.');return x.tokens=u.tokenize(x.code,x.grammar),u.hooks.run("after-tokenize",x),o.stringify(u.util.encode(x.tokens),x.language)},tokenize:function(y,v){var _=v.rest;if(_){for(var x in _)v[x]=_[x];delete v.rest}var E=new f;return d(E,E.head,y),c(y,E,v,E.head,0),g(E)},hooks:{all:{},add:function(y,v){var _=u.hooks.all;_[y]=_[y]||[],_[y].push(v)},run:function(y,v){var _=u.hooks.all[y];if(!(!_||!_.length))for(var x=0,E;E=_[x++];)E(v)}},Token:o};r.Prism=u;function o(y,v,_,x){this.type=y,this.content=v,this.alias=_,this.length=(x||"").length|0}o.stringify=function y(v,_){if(typeof v=="string")return v;if(Array.isArray(v)){var x="";return v.forEach(function(N){x+=y(N,_)}),x}var E={type:v.type,content:y(v.content,_),tag:"span",classes:["token",v.type],attributes:{},language:_},w=v.alias;w&&(Array.isArray(w)?Array.prototype.push.apply(E.classes,w):E.classes.push(w)),u.hooks.run("wrap",E);var k="";for(var A in E.attributes)k+=" "+A+'="'+(E.attributes[A]||"").replace(/"/g,"&quot;")+'"';return"<"+E.tag+' class="'+E.classes.join(" ")+'"'+k+">"+E.content+"</"+E.tag+">"};function l(y,v,_,x){y.lastIndex=v;var E=y.exec(_);if(E&&x&&E[1]){var w=E[1].length;E.index+=w,E[0]=E[0].slice(w)}return E}function c(y,v,_,x,E,w){for(var k in _)if(!(!_.hasOwnProperty(k)||!_[k])){var A=_[k];A=Array.isArray(A)?A:[A];for(var N=0;N<A.length;++N){if(w&&w.cause==k+","+N)return;var O=A[N],$=O.inside,C=!!O.lookbehind,T=!!O.greedy,S=O.alias;if(T&&!O.pattern.global){var M=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,M+"g")}for(var F=O.pattern||O,L=x.next,H=E;L!==v.tail&&!(w&&H>=w.reach);H+=L.value.length,L=L.next){var J=L.value;if(v.length>y.length)return;if(!(J instanceof o)){var ge=1,ke;if(T){if(ke=l(F,H,y,C),!ke||ke.index>=y.length)break;var ut=ke.index,Y=ke.index+ke[0].length,ye=H;for(ye+=L.value.length;ut>=ye;)L=L.next,ye+=L.value.length;if(ye-=L.value.length,H=ye,L.value instanceof o)continue;for(var Ne=L;Ne!==v.tail&&(ye<Y||typeof Ne.value=="string");Ne=Ne.next)ge++,ye+=Ne.value.length;ge--,J=y.slice(H,ye),ke.index-=H}else if(ke=l(F,0,J,C),!ke)continue;var ut=ke.index,ot=ke[0],ln=J.slice(0,ut),he=J.slice(ut+ot.length),Me=H+J.length;w&&Me>w.reach&&(w.reach=Me);var Ie=L.prev;ln&&(Ie=d(v,Ie,ln),H+=ln.length),h(v,Ie,ge);var te=new o(k,$?u.tokenize(ot,$):ot,S,ot);if(L=d(v,Ie,te),he&&d(v,L,he),ge>1){var Et={cause:k+","+N,reach:Me};c(y,v,_,L.prev,H,Et),w&&Et.reach>w.reach&&(w.reach=Et.reach)}}}}}}function f(){var y={value:null,prev:null,next:null},v={value:null,prev:y,next:null};y.next=v,this.head=y,this.tail=v,this.length=0}function d(y,v,_){var x=v.next,E={value:_,prev:v,next:x};return v.next=E,x.prev=E,y.length++,E}function h(y,v,_){for(var x=v.next,E=0;E<_&&x!==y.tail;E++)x=x.next;v.next=x,x.prev=v,y.length-=E}function g(y){for(var v=[],_=y.head.next;_!==y.tail;)v.push(_.value),_=_.next;return v}if(!r.document)return r.addEventListener&&(u.disableWorkerMessageHandler||r.addEventListener("message",function(y){var v=JSON.parse(y.data),_=v.language,x=v.code,E=v.immediateClose;r.postMessage(u.highlight(x,u.languages[_],_)),E&&r.close()},!1)),u;var p=u.util.currentScript();p&&(u.filename=p.src,p.hasAttribute("data-manual")&&(u.manual=!0));function m(){u.manual||u.highlightAll()}if(!u.manual){var b=document.readyState;b==="loading"||b==="interactive"&&p&&p.defer?document.addEventListener("DOMContentLoaded",m):window.requestAnimationFrame?window.requestAnimationFrame(m):window.setTimeout(m,16)}return u}(t);e.exports&&(e.exports=n),typeof Ue<"u"&&(Ue.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var u={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};u["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var o={};o[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:u},n.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(p,m){return" Error "+p+" while fetching file: "+m},s=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},u="data-src-status",o="loading",l="loaded",c="failed",f="pre[data-src]:not(["+u+'="'+l+'"]):not(['+u+'="'+o+'"])';function d(p,m,b){var y=new XMLHttpRequest;y.open("GET",p,!0),y.onreadystatechange=function(){y.readyState==4&&(y.status<400&&y.responseText?m(y.responseText):y.status>=400?b(i(y.status,y.statusText)):b(s))},y.send(null)}function h(p){var m=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(p||"");if(m){var b=Number(m[1]),y=m[2],v=m[3];return y?v?[b,Number(v)]:[b,void 0]:[b,b]}}n.hooks.add("before-highlightall",function(p){p.selector+=", "+f}),n.hooks.add("before-sanity-check",function(p){var m=p.element;if(m.matches(f)){p.code="",m.setAttribute(u,o);var b=m.appendChild(document.createElement("CODE"));b.textContent=r;var y=m.getAttribute("data-src"),v=p.language;if(v==="none"){var _=(/\.(\w+)$/.exec(y)||[,"none"])[1];v=a[_]||_}n.util.setLanguage(b,v),n.util.setLanguage(m,v);var x=n.plugins.autoloader;x&&x.loadLanguages(v),d(y,function(E){m.setAttribute(u,l);var w=h(m.getAttribute("data-range"));if(w){var k=E.split(/\r\n?|\n/g),A=w[0],N=w[1]==null?k.length:w[1];A<0&&(A+=k.length),A=Math.max(0,Math.min(A-1,k.length)),N<0&&(N+=k.length),N=Math.max(0,Math.min(N,k.length)),E=k.slice(A,N).join(`
`),m.hasAttribute("data-start")||m.setAttribute("data-start",String(A+1))}b.textContent=E,n.highlightElement(b)},function(E){m.setAttribute(u,c),b.textContent=E})}}),n.plugins.fileHighlight={highlight:function(m){for(var b=(m||document).querySelectorAll(f),y=0,v;v=b[y++];)n.highlightElement(v)}};var g=!1;n.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(FG);const ip=J_;function RG(e){let t,n,r,i,s,a,u=ip.highlight(e[0],ip.languages.js,e[1])+"",o;return{c(){t=z("link"),r=ue(),i=z("div"),s=z("pre"),a=z("code"),this.h()},l(l){const c=bH("svelte-1dsodst",document.head);t=B(c,"LINK",{href:!0,rel:!0}),c.forEach(D),r=oe(l),i=B(l,"DIV",{class:!0});var f=U(i);s=B(f,"PRE",{});var d=U(s);a=B(d,"CODE",{class:!0});var h=U(a);h.forEach(D),d.forEach(D),f.forEach(D),this.h()},h(){I(t,"href",n="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-"+e[2]+".min.css"),I(t,"rel","stylesheet"),I(a,"class",o="language-"+e[1]),I(i,"class","whitespace-pre overflow-auto h-full max-h-[50vh] my-1 rounded-lg py-2 px-4 bg-black")},m(l,c){P(document.head,t),q(l,r,c),q(l,i,c),P(i,s),P(s,a),a.innerHTML=u},p(l,[c]){c&4&&n!==(n="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-"+l[2]+".min.css")&&I(t,"href",n),c&3&&u!==(u=ip.highlight(l[0],ip.languages.js,l[1])+"")&&(a.innerHTML=u),c&2&&o!==(o="language-"+l[1])&&I(a,"class",o)},i:xe,o:xe,d(l){D(t),l&&D(r),l&&D(i)}}}function IG(e,t,n){let{body:r}=t,{language:i="python"}=t,{theme:s="okaidia"}=t;return e.$$set=a=>{"body"in a&&n(0,r=a.body),"language"in a&&n(1,i=a.language),"theme"in a&&n(2,s=a.theme)},[r,i,s]}class PG extends He{constructor(t){super(),Ve(this,t,IG,RG,Be,{body:0,language:1,theme:2})}}function jG(e){let t,n,r;function i(a){e[7](a)}let s={inputClass:e[1],webkitdirectory:e[2],directory:e[3],multiple:e[4]};return e[0]!==void 0&&(s.files=e[0]),t=new yV({props:s}),Qt.push(()=>tn(t,"files",i)),t.$on("change",e[8]),t.$on("keyup",e[9]),t.$on("keydown",e[10]),t.$on("keypress",e[11]),t.$on("focus",e[12]),t.$on("blur",e[13]),t.$on("click",e[14]),t.$on("mouseover",e[15]),t.$on("mouseenter",e[16]),t.$on("mouseleave",e[17]),t.$on("paste",e[18]),{c(){re(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,u){ie(t,a,u),r=!0},p(a,[u]){const o={};u&2&&(o.inputClass=a[1]),u&4&&(o.webkitdirectory=a[2]),u&8&&(o.directory=a[3]),u&16&&(o.multiple=a[4]),!n&&u&1&&(n=!0,o.files=a[0],nn(()=>n=!1)),t.$set(o)},i(a){r||(R(t.$$.fragment,a),r=!0)},o(a){j(t.$$.fragment,a),r=!1},d(a){se(t,a)}}}function LG(e,t,n){const r=Ca();let{files:i}=t,{filenames:s}=t,{contents:a}=t,{classes:u}=t,{webkitdirectory:o=!1}=t,{directory:l=!1}=t,{multiple:c=!1}=t,f=async A=>await Promise.all(Array.from(A).map(N=>N.text())),d=async()=>{n(6,a=await f(i)),r("upload",{filenames:Array.from(i).map(A=>A.name),contents:a})};function h(A){i=A,n(0,i)}function g(A){K.call(this,e,A)}function p(A){K.call(this,e,A)}function m(A){K.call(this,e,A)}function b(A){K.call(this,e,A)}function y(A){K.call(this,e,A)}function v(A){K.call(this,e,A)}function _(A){K.call(this,e,A)}function x(A){K.call(this,e,A)}function E(A){K.call(this,e,A)}function w(A){K.call(this,e,A)}function k(A){K.call(this,e,A)}return e.$$set=A=>{"files"in A&&n(0,i=A.files),"filenames"in A&&n(5,s=A.filenames),"contents"in A&&n(6,a=A.contents),"classes"in A&&n(1,u=A.classes),"webkitdirectory"in A&&n(2,o=A.webkitdirectory),"directory"in A&&n(3,l=A.directory),"multiple"in A&&n(4,c=A.multiple)},e.$$.update=()=>{e.$$.dirty&1&&n(5,s=Array.from(i).map(A=>A.name)),e.$$.dirty&1&&d()},[i,u,o,l,c,s,a,h,g,p,m,b,y,v,_,x,E,w,k]}class zG extends He{constructor(t){super(),Ve(this,t,LG,jG,Be,{files:0,filenames:5,contents:6,classes:1,webkitdirectory:2,directory:3,multiple:4})}}var DM="1.13.6",oA=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Nb=Array.prototype,H3=Object.prototype,lA=typeof Symbol<"u"?Symbol.prototype:null,BG=Nb.push,L0=Nb.slice,Xh=H3.toString,UG=H3.hasOwnProperty,NM=typeof ArrayBuffer<"u",qG=typeof DataView<"u",HG=Array.isArray,cA=Object.keys,fA=Object.create,dA=NM&&ArrayBuffer.isView,VG=isNaN,GG=isFinite,$M=!{toString:null}.propertyIsEnumerable("toString"),hA=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],WG=Math.pow(2,53)-1;function Nr(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=r,e.apply(this,s)}}function Bl(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function XG(e){return e===null}function FM(e){return e===void 0}function RM(e){return e===!0||e===!1||Xh.call(e)==="[object Boolean]"}function YG(e){return!!(e&&e.nodeType===1)}function er(e){var t="[object "+e+"]";return function(n){return Xh.call(n)===t}}const V3=er("String"),IM=er("Number"),ZG=er("Date"),QG=er("RegExp"),JG=er("Error"),PM=er("Symbol"),jM=er("ArrayBuffer");var LM=er("Function"),KG=oA.document&&oA.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof KG!="function"&&(LM=function(e){return typeof e=="function"||!1});const hr=LM,zM=er("Object");var BM=qG&&zM(new DataView(new ArrayBuffer(8))),G3=typeof Map<"u"&&zM(new Map),eW=er("DataView");function tW(e){return e!=null&&hr(e.getInt8)&&jM(e.buffer)}const Im=BM?tW:eW,Ul=HG||er("Array");function no(e,t){return e!=null&&UG.call(e,t)}var K_=er("Arguments");(function(){K_(arguments)||(K_=function(e){return no(e,"callee")})})();const W3=K_;function nW(e){return!PM(e)&&GG(e)&&!isNaN(parseFloat(e))}function UM(e){return IM(e)&&VG(e)}function qM(e){return function(){return e}}function HM(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=WG}}function VM(e){return function(t){return t==null?void 0:t[e]}}const Pm=VM("byteLength"),rW=HM(Pm);var iW=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function sW(e){return dA?dA(e)&&!Im(e):rW(e)&&iW.test(Xh.call(e))}const GM=NM?sW:qM(!1),$r=VM("length");function aW(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function WM(e,t){t=aW(t);var n=hA.length,r=e.constructor,i=hr(r)&&r.prototype||H3,s="constructor";for(no(e,s)&&!t.contains(s)&&t.push(s);n--;)s=hA[n],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function Sn(e){if(!Bl(e))return[];if(cA)return cA(e);var t=[];for(var n in e)no(e,n)&&t.push(n);return $M&&WM(e,t),t}function uW(e){if(e==null)return!0;var t=$r(e);return typeof t=="number"&&(Ul(e)||V3(e)||W3(e))?t===0:$r(Sn(e))===0}function XM(e,t){var n=Sn(t),r=n.length;if(e==null)return!r;for(var i=Object(e),s=0;s<r;s++){var a=n[s];if(t[a]!==i[a]||!(a in i))return!1}return!0}function pt(e){if(e instanceof pt)return e;if(!(this instanceof pt))return new pt(e);this._wrapped=e}pt.VERSION=DM;pt.prototype.value=function(){return this._wrapped};pt.prototype.valueOf=pt.prototype.toJSON=pt.prototype.value;pt.prototype.toString=function(){return String(this._wrapped)};function gA(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Pm(e))}var pA="[object DataView]";function ex(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:YM(e,t,n,r)}function YM(e,t,n,r){e instanceof pt&&(e=e._wrapped),t instanceof pt&&(t=t._wrapped);var i=Xh.call(e);if(i!==Xh.call(t))return!1;if(BM&&i=="[object Object]"&&Im(e)){if(!Im(t))return!1;i=pA}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return lA.valueOf.call(e)===lA.valueOf.call(t);case"[object ArrayBuffer]":case pA:return YM(gA(e),gA(t),n,r)}var s=i==="[object Array]";if(!s&&GM(e)){var a=Pm(e);if(a!==Pm(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,o=t.constructor;if(u!==o&&!(hr(u)&&u instanceof u&&hr(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),s){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!ex(e[l],t[l],n,r))return!1}else{var c=Sn(e),f;if(l=c.length,Sn(t).length!==l)return!1;for(;l--;)if(f=c[l],!(no(t,f)&&ex(e[f],t[f],n,r)))return!1}return n.pop(),r.pop(),!0}function oW(e,t){return ex(e,t)}function z0(e){if(!Bl(e))return[];var t=[];for(var n in e)t.push(n);return $M&&WM(e,t),t}function X3(e){var t=$r(e);return function(n){if(n==null)return!1;var r=z0(n);if($r(r))return!1;for(var i=0;i<t;i++)if(!hr(n[e[i]]))return!1;return e!==JM||!hr(n[Y3])}}var Y3="forEach",ZM="has",Z3=["clear","delete"],QM=["get",ZM,"set"],lW=Z3.concat(Y3,QM),JM=Z3.concat(QM),cW=["add"].concat(Z3,Y3,ZM);const fW=G3?X3(lW):er("Map"),dW=G3?X3(JM):er("WeakMap"),hW=G3?X3(cW):er("Set"),gW=er("WeakSet");function Kf(e){for(var t=Sn(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function pW(e){for(var t=Sn(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function KM(e){for(var t={},n=Sn(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function tx(e){var t=[];for(var n in e)hr(e[n])&&t.push(n);return t.sort()}function Q3(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],a=e(s),u=a.length,o=0;o<u;o++){var l=a[o];(!t||n[l]===void 0)&&(n[l]=s[l])}return n}}const eD=Q3(z0),jm=Q3(Sn),tD=Q3(z0,!0);function mW(){return function(){}}function nD(e){if(!Bl(e))return{};if(fA)return fA(e);var t=mW();t.prototype=e;var n=new t;return t.prototype=null,n}function bW(e,t){var n=nD(e);return t&&jm(n,t),n}function yW(e){return Bl(e)?Ul(e)?e.slice():eD({},e):e}function vW(e,t){return t(e),e}function rD(e){return Ul(e)?e:[e]}pt.toPath=rD;function B0(e){return pt.toPath(e)}function J3(e,t){for(var n=t.length,r=0;r<n;r++){if(e==null)return;e=e[t[r]]}return n?e:void 0}function iD(e,t,n){var r=J3(e,B0(t));return FM(r)?n:r}function _W(e,t){t=B0(t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(!no(e,i))return!1;e=e[i]}return!!n}function K3(e){return e}function Yh(e){return e=jm({},e),function(t){return XM(t,e)}}function e6(e){return e=B0(e),function(t){return J3(t,e)}}function U0(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(r){return e.call(t,r)};case 3:return function(r,i,s){return e.call(t,r,i,s)};case 4:return function(r,i,s,a){return e.call(t,r,i,s,a)}}return function(){return e.apply(t,arguments)}}function sD(e,t,n){return e==null?K3:hr(e)?U0(e,t,n):Bl(e)&&!Ul(e)?Yh(e):e6(e)}function t6(e,t){return sD(e,t,1/0)}pt.iteratee=t6;function Br(e,t,n){return pt.iteratee!==t6?pt.iteratee(e,t):sD(e,t,n)}function xW(e,t,n){t=Br(t,n);for(var r=Sn(e),i=r.length,s={},a=0;a<i;a++){var u=r[a];s[u]=t(e[u],u,e)}return s}function aD(){}function wW(e){return e==null?aD:function(t){return iD(e,t)}}function EW(e,t,n){var r=Array(Math.max(0,e));t=U0(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function nx(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const Zh=Date.now||function(){return new Date().getTime()};function uD(e){var t=function(s){return e[s]},n="(?:"+Sn(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,t):s}}const oD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},SW=uD(oD),kW=KM(oD),OW=uD(kW),AW=pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x2=/(.)^/,CW={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},TW=/\\|'|\r|\n|\u2028|\u2029/g;function MW(e){return"\\"+CW[e]}var DW=/^\s*(\w|\$)+\s*$/;function NW(e,t,n){!t&&n&&(t=n),t=tD({},t,pt.templateSettings);var r=RegExp([(t.escape||x2).source,(t.interpolate||x2).source,(t.evaluate||x2).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(l,c,f,d,h){return s+=e.slice(i,h).replace(TW,MW),i=h+l.length,c?s+=`'+
((__t=(`+c+`))==null?'':_.escape(__t))+
'`:f?s+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:d&&(s+=`';
`+d+`
__p+='`),l}),s+=`';
`;var a=t.variable;if(a){if(!DW.test(a))throw new Error("variable is not a bare identifier: "+a)}else s=`with(obj||{}){
`+s+`}
`,a="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var u;try{u=new Function(a,"_",s)}catch(l){throw l.source=s,l}var o=function(l){return u.call(this,l,pt)};return o.source="function("+a+`){
`+s+"}",o}function $W(e,t,n){t=B0(t);var r=t.length;if(!r)return hr(n)?n.call(e):n;for(var i=0;i<r;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=n,i=r),e=hr(s)?s.call(e):s}return e}var FW=0;function RW(e){var t=++FW+"";return e?e+t:t}function IW(e){var t=pt(e);return t._chain=!0,t}function lD(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var s=nD(e.prototype),a=e.apply(s,i);return Bl(a)?a:s}var ed=Nr(function(e,t){var n=ed.placeholder,r=function(){for(var i=0,s=t.length,a=Array(s),u=0;u<s;u++)a[u]=t[u]===n?arguments[i++]:t[u];for(;i<arguments.length;)a.push(arguments[i++]);return lD(e,r,this,this,a)};return r});ed.placeholder=pt;const cD=Nr(function(e,t,n){if(!hr(e))throw new TypeError("Bind must be called on a function");var r=Nr(function(i){return lD(e,r,t,this,n.concat(i))});return r}),si=HM($r);function ql(e,t,n,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var i=r.length,s=0,a=$r(e);s<a;s++){var u=e[s];if(si(u)&&(Ul(u)||W3(u)))if(t>1)ql(u,t-1,n,r),i=r.length;else for(var o=0,l=u.length;o<l;)r[i++]=u[o++];else n||(r[i++]=u)}return r}const PW=Nr(function(e,t){t=ql(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=cD(e[r],e)}return e});function jW(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return no(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n}const fD=Nr(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),LW=ed(fD,pt,1);function zW(e,t,n){var r,i,s,a,u=0;n||(n={});var o=function(){u=n.leading===!1?0:Zh(),r=null,a=e.apply(i,s),r||(i=s=null)},l=function(){var c=Zh();!u&&n.leading===!1&&(u=c);var f=t-(c-u);return i=this,s=arguments,f<=0||f>t?(r&&(clearTimeout(r),r=null),u=c,a=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(o,f)),a};return l.cancel=function(){clearTimeout(r),u=0,r=i=s=null},l}function BW(e,t,n){var r,i,s,a,u,o=function(){var c=Zh()-i;t>c?r=setTimeout(o,t-c):(r=null,n||(a=e.apply(u,s)),r||(s=u=null))},l=Nr(function(c){return u=this,s=c,i=Zh(),r||(r=setTimeout(o,t),n&&(a=e.apply(u,s))),a});return l.cancel=function(){clearTimeout(r),r=s=u=null},l}function UW(e,t){return ed(t,e)}function n6(e){return function(){return!e.apply(this,arguments)}}function qW(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function HW(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function dD(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const VW=ed(dD,2);function hD(e,t,n){t=Br(t,n);for(var r=Sn(e),i,s=0,a=r.length;s<a;s++)if(i=r[s],t(e[i],i,e))return i}function gD(e){return function(t,n,r){n=Br(n,r);for(var i=$r(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}const r6=gD(1),pD=gD(-1);function mD(e,t,n,r){n=Br(n,r,1);for(var i=n(t),s=0,a=$r(e);s<a;){var u=Math.floor((s+a)/2);n(e[u])<i?s=u+1:a=u}return s}function bD(e,t,n){return function(r,i,s){var a=0,u=$r(r);if(typeof s=="number")e>0?a=s>=0?s:Math.max(s+u,a):u=s>=0?Math.min(s+1,u):s+u+1;else if(n&&s&&u)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(L0.call(r,a,u),UM),s>=0?s+a:-1;for(s=e>0?a:u-1;s>=0&&s<u;s+=e)if(r[s]===i)return s;return-1}}const yD=bD(1,r6,mD),GW=bD(-1,pD);function rx(e,t,n){var r=si(e)?r6:hD,i=r(e,t,n);if(i!==void 0&&i!==-1)return e[i]}function WW(e,t){return rx(e,Yh(t))}function wa(e,t,n){t=U0(t,n);var r,i;if(si(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=Sn(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e}function ml(e,t,n){t=Br(t,n);for(var r=!si(e)&&Sn(e),i=(r||e).length,s=Array(i),a=0;a<i;a++){var u=r?r[a]:a;s[a]=t(e[u],u,e)}return s}function vD(e){var t=function(n,r,i,s){var a=!si(n)&&Sn(n),u=(a||n).length,o=e>0?0:u-1;for(s||(i=n[a?a[o]:o],o+=e);o>=0&&o<u;o+=e){var l=a?a[o]:o;i=r(i,n[l],l,n)}return i};return function(n,r,i,s){var a=arguments.length>=3;return t(n,U0(r,s,4),i,a)}}const w2=vD(1),mA=vD(-1);function hf(e,t,n){var r=[];return t=Br(t,n),wa(e,function(i,s,a){t(i,s,a)&&r.push(i)}),r}function XW(e,t,n){return hf(e,n6(Br(t)),n)}function bA(e,t,n){t=Br(t,n);for(var r=!si(e)&&Sn(e),i=(r||e).length,s=0;s<i;s++){var a=r?r[s]:s;if(!t(e[a],a,e))return!1}return!0}function yA(e,t,n){t=Br(t,n);for(var r=!si(e)&&Sn(e),i=(r||e).length,s=0;s<i;s++){var a=r?r[s]:s;if(t(e[a],a,e))return!0}return!1}function ha(e,t,n,r){return si(e)||(e=Kf(e)),(typeof n!="number"||r)&&(n=0),yD(e,t,n)>=0}const YW=Nr(function(e,t,n){var r,i;return hr(t)?i=t:(t=B0(t),r=t.slice(0,-1),t=t[t.length-1]),ml(e,function(s){var a=i;if(!a){if(r&&r.length&&(s=J3(s,r)),s==null)return;a=s[t]}return a==null?a:a.apply(s,n)})});function i6(e,t){return ml(e,e6(t))}function ZW(e,t){return hf(e,Yh(t))}function _D(e,t,n){var r=-1/0,i=-1/0,s,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=si(e)?e:Kf(e);for(var u=0,o=e.length;u<o;u++)s=e[u],s!=null&&s>r&&(r=s)}else t=Br(t,n),wa(e,function(l,c,f){a=t(l,c,f),(a>i||a===-1/0&&r===-1/0)&&(r=l,i=a)});return r}function QW(e,t,n){var r=1/0,i=1/0,s,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=si(e)?e:Kf(e);for(var u=0,o=e.length;u<o;u++)s=e[u],s!=null&&s<r&&(r=s)}else t=Br(t,n),wa(e,function(l,c,f){a=t(l,c,f),(a<i||a===1/0&&r===1/0)&&(r=l,i=a)});return r}var JW=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function xD(e){return e?Ul(e)?L0.call(e):V3(e)?e.match(JW):si(e)?ml(e,K3):Kf(e):[]}function wD(e,t,n){if(t==null||n)return si(e)||(e=Kf(e)),e[nx(e.length-1)];var r=xD(e),i=$r(r);t=Math.max(Math.min(t,i),0);for(var s=i-1,a=0;a<t;a++){var u=nx(a,s),o=r[a];r[a]=r[u],r[u]=o}return r.slice(0,t)}function KW(e){return wD(e,1/0)}function eX(e,t,n){var r=0;return t=Br(t,n),i6(ml(e,function(i,s,a){return{value:i,index:r++,criteria:t(i,s,a)}}).sort(function(i,s){var a=i.criteria,u=s.criteria;if(a!==u){if(a>u||a===void 0)return 1;if(a<u||u===void 0)return-1}return i.index-s.index}),"value")}function $b(e,t){return function(n,r,i){var s=t?[[],[]]:{};return r=Br(r,i),wa(n,function(a,u){var o=r(a,u,n);e(s,a,o)}),s}}const tX=$b(function(e,t,n){no(e,n)?e[n].push(t):e[n]=[t]}),nX=$b(function(e,t,n){e[n]=t}),rX=$b(function(e,t,n){no(e,n)?e[n]++:e[n]=1}),iX=$b(function(e,t,n){e[n?0:1].push(t)},!0);function sX(e){return e==null?0:si(e)?e.length:Sn(e).length}function aX(e,t,n){return t in n}const ED=Nr(function(e,t){var n={},r=t[0];if(e==null)return n;hr(r)?(t.length>1&&(r=U0(r,t[1])),t=z0(e)):(r=aX,t=ql(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var a=t[i],u=e[a];r(u,a,e)&&(n[a]=u)}return n}),uX=Nr(function(e,t){var n=t[0],r;return hr(n)?(n=n6(n),t.length>1&&(r=t[1])):(t=ml(ql(t,!1,!1),String),n=function(i,s){return!ha(t,s)}),ED(e,n,r)});function SD(e,t,n){return L0.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function E2(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:SD(e,e.length-t)}function rm(e,t,n){return L0.call(e,t==null||n?1:t)}function oX(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:rm(e,Math.max(0,e.length-t))}function lX(e){return hf(e,Boolean)}function cX(e,t){return ql(e,t,!1)}const kD=Nr(function(e,t){return t=ql(t,!0,!0),hf(e,function(n){return!ha(t,n)})}),fX=Nr(function(e,t){return kD(e,t)});function ix(e,t,n,r){RM(t)||(r=n,n=t,t=!1),n!=null&&(n=Br(n,r));for(var i=[],s=[],a=0,u=$r(e);a<u;a++){var o=e[a],l=n?n(o,a,e):o;t&&!n?((!a||s!==l)&&i.push(o),s=l):n?ha(s,l)||(s.push(l),i.push(o)):ha(i,o)||i.push(o)}return i}const dX=Nr(function(e){return ix(ql(e,!0,!0))});function hX(e){for(var t=[],n=arguments.length,r=0,i=$r(e);r<i;r++){var s=e[r];if(!ha(t,s)){var a;for(a=1;a<n&&ha(arguments[a],s);a++);a===n&&t.push(s)}}return t}function sx(e){for(var t=e&&_D(e,$r).length||0,n=Array(t),r=0;r<t;r++)n[r]=i6(e,r);return n}const gX=Nr(sx);function pX(e,t){for(var n={},r=0,i=$r(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function mX(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;s<r;s++,e+=n)i[s]=e;return i}function bX(e,t){if(t==null||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(L0.call(e,r,r+=t));return n}function s6(e,t){return e._chain?pt(t).chain():t}function OD(e){return wa(tx(e),function(t){var n=pt[t]=e[t];pt.prototype[t]=function(){var r=[this._wrapped];return BG.apply(r,arguments),s6(this,n.apply(pt,r))}}),pt}wa(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Nb[e];pt.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),s6(this,n)}});wa(["concat","join","slice"],function(e){var t=Nb[e];pt.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),s6(this,n)}});const yX=Object.freeze(Object.defineProperty({__proto__:null,VERSION:DM,after:HW,all:bA,allKeys:z0,any:yA,assign:jm,before:dD,bind:cD,bindAll:PW,chain:IW,chunk:bX,clone:yW,collect:ml,compact:lX,compose:qW,constant:qM,contains:ha,countBy:rX,create:bW,debounce:BW,default:pt,defaults:tD,defer:LW,delay:fD,detect:rx,difference:kD,drop:rm,each:wa,escape:SW,every:bA,extend:eD,extendOwn:jm,filter:hf,find:rx,findIndex:r6,findKey:hD,findLastIndex:pD,findWhere:WW,first:E2,flatten:cX,foldl:w2,foldr:mA,forEach:wa,functions:tx,get:iD,groupBy:tX,has:_W,head:E2,identity:K3,include:ha,includes:ha,indexBy:nX,indexOf:yD,initial:SD,inject:w2,intersection:hX,invert:KM,invoke:YW,isArguments:W3,isArray:Ul,isArrayBuffer:jM,isBoolean:RM,isDataView:Im,isDate:ZG,isElement:YG,isEmpty:uW,isEqual:oW,isError:JG,isFinite:nW,isFunction:hr,isMap:fW,isMatch:XM,isNaN:UM,isNull:XG,isNumber:IM,isObject:Bl,isRegExp:QG,isSet:hW,isString:V3,isSymbol:PM,isTypedArray:GM,isUndefined:FM,isWeakMap:dW,isWeakSet:gW,iteratee:t6,keys:Sn,last:oX,lastIndexOf:GW,map:ml,mapObject:xW,matcher:Yh,matches:Yh,max:_D,memoize:jW,methods:tx,min:QW,mixin:OD,negate:n6,noop:aD,now:Zh,object:pX,omit:uX,once:VW,pairs:pW,partial:ed,partition:iX,pick:ED,pluck:i6,property:e6,propertyOf:wW,random:nx,range:mX,reduce:w2,reduceRight:mA,reject:XW,rest:rm,restArguments:Nr,result:$W,sample:wD,select:hf,shuffle:KW,size:sX,some:yA,sortBy:eX,sortedIndex:mD,tail:rm,take:E2,tap:vW,template:NW,templateSettings:AW,throttle:zW,times:EW,toArray:xD,toPath:rD,transpose:sx,unescape:OW,union:dX,uniq:ix,unique:ix,uniqueId:RW,unzip:sx,values:Kf,where:ZW,without:fX,wrap:UW,zip:gX},Symbol.toStringTag,{value:"Module"}));var vA=OD(yX);vA._=vA;function vX(e){let t,n,r;return{c(){t=z("img"),this.h()},l(i){t=B(i,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){I(t,"class",n="h-full w-full"+e[1]),Wh(t.src,r=e[0])||I(t,"src",r),I(t,"alt","A Meerkat cell.")},m(i,s){q(i,t,s)},p(i,[s]){s&2&&n!==(n="h-full w-full"+i[1])&&I(t,"class",n),s&1&&!Wh(t.src,r=i[0])&&I(t,"src",r)},i:xe,o:xe,d(i){i&&D(t)}}}function _X(e,t,n){let{data:r}=t,{classes:i=""}=t;return e.$$set=s=>{"data"in s&&n(0,r=s.data),"classes"in s&&n(1,i=s.classes)},[r,i]}let xX=class extends He{constructor(t){super(),Ve(this,t,_X,vX,Be,{data:0,classes:1})}};function _A(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function wX(e){let t,n=e[6][0]+"",r,i,s,a,u,o=e[6][1]+"",l,c,f,d,h,g=e[5],p=[];for(let y=0;y<g.length;y+=1)p[y]=EA(_A(e,g,y));const m=y=>j(p[y],1,1,()=>{p[y]=null});let b=!e[3]&&SA();return{c(){t=z("span"),r=Fe(n),i=ue(),s=z("ul");for(let y=0;y<p.length;y+=1)p[y].c();a=ue(),u=z("span"),l=Fe(o),b&&b.c(),c=Le(),this.h()},l(y){t=B(y,"SPAN",{class:!0,role:!0,tabindex:!0});var v=U(t);r=Re(v,n),v.forEach(D),i=oe(y),s=B(y,"UL",{class:!0});var _=U(s);for(let E=0;E<p.length;E+=1)p[E].l(_);_.forEach(D),a=oe(y),u=B(y,"SPAN",{class:!0,role:!0,tabindex:!0});var x=U(u);l=Re(x,o),x.forEach(D),b&&b.l(y),c=Le(),this.h()},h(){I(t,"class","_jsonBkt svelte-d5rr90"),I(t,"role","button"),I(t,"tabindex","0"),I(s,"class","_jsonList svelte-d5rr90"),I(u,"class","_jsonBkt svelte-d5rr90"),I(u,"role","button"),I(u,"tabindex","0")},m(y,v){q(y,t,v),P(t,r),q(y,i,v),q(y,s,v);for(let _=0;_<p.length;_+=1)p[_].m(s,null);q(y,a,v),q(y,u,v),P(u,l),b&&b.m(y,v),q(y,c,v),f=!0,d||(h=[Z(t,"click",e[8]),Z(t,"keydown",e[9]),Z(u,"click",e[8]),Z(u,"keydown",e[9])],d=!0)},p(y,v){if((!f||v&64)&&n!==(n=y[6][0]+"")&&$t(r,n),v&55){g=y[5];let _;for(_=0;_<g.length;_+=1){const x=_A(y,g,_);p[_]?(p[_].p(x,v),R(p[_],1)):(p[_]=EA(x),p[_].c(),R(p[_],1),p[_].m(s,null))}for(Rt(),_=g.length;_<p.length;_+=1)m(_);It()}(!f||v&64)&&o!==(o=y[6][1]+"")&&$t(l,o),y[3]?b&&(b.d(1),b=null):b||(b=SA(),b.c(),b.m(c.parentNode,c))},i(y){if(!f){for(let v=0;v<g.length;v+=1)R(p[v]);f=!0}},o(y){p=p.filter(Boolean);for(let v=0;v<p.length;v+=1)j(p[v]);f=!1},d(y){y&&D(t),y&&D(i),y&&D(s),Pu(p,y),y&&D(a),y&&D(u),b&&b.d(y),y&&D(c),d=!1,ii(h)}}}function EX(e){let t,n=e[6][0]+"",r,i,s=e[6][1]+"",a,u,o,l,c=!e[3]&&e[7]&&kA();return{c(){t=z("span"),r=Fe(n),i=Fe("..."),a=Fe(s),c&&c.c(),u=Le(),this.h()},l(f){t=B(f,"SPAN",{class:!0,role:!0,tabindex:!0});var d=U(t);r=Re(d,n),i=Re(d,"..."),a=Re(d,s),d.forEach(D),c&&c.l(f),u=Le(),this.h()},h(){I(t,"class","_jsonBkt svelte-d5rr90"),I(t,"role","button"),I(t,"tabindex","0")},m(f,d){q(f,t,d),P(t,r),P(t,i),P(t,a),c&&c.m(f,d),q(f,u,d),o||(l=[Z(t,"click",e[8]),Z(t,"keydown",e[9])],o=!0)},p(f,d){d&64&&n!==(n=f[6][0]+"")&&$t(r,n),d&64&&s!==(s=f[6][1]+"")&&$t(a,s),!f[3]&&f[7]?c||(c=kA(),c.c(),c.m(u.parentNode,u)):c&&(c.d(1),c=null)},i:xe,o:xe,d(f){f&&D(t),c&&c.d(f),f&&D(u),o=!1,ii(l)}}}function SX(e){let t,n=e[6][0]+"",r,i=e[6][1]+"",s,a,u=!e[3]&&OA();return{c(){t=z("span"),r=Fe(n),s=Fe(i),u&&u.c(),a=Le(),this.h()},l(o){t=B(o,"SPAN",{class:!0});var l=U(t);r=Re(l,n),s=Re(l,i),l.forEach(D),u&&u.l(o),a=Le(),this.h()},h(){I(t,"class","_jsonBkt empty svelte-d5rr90")},m(o,l){q(o,t,l),P(t,r),P(t,s),u&&u.m(o,l),q(o,a,l)},p(o,l){l&64&&n!==(n=o[6][0]+"")&&$t(r,n),l&64&&i!==(i=o[6][1]+"")&&$t(s,i),o[3]?u&&(u.d(1),u=null):u||(u=OA(),u.c(),u.m(a.parentNode,a))},i:xe,o:xe,d(o){o&&D(t),u&&u.d(o),o&&D(a)}}}function xA(e){let t,n,r=e[10]+"",i,s,a,u;return{c(){t=z("span"),n=Fe('"'),i=Fe(r),s=Fe('"'),a=z("span"),u=Fe(":"),this.h()},l(o){t=B(o,"SPAN",{class:!0});var l=U(t);n=Re(l,'"'),i=Re(l,r),s=Re(l,'"'),l.forEach(D),a=B(o,"SPAN",{class:!0});var c=U(a);u=Re(c,":"),c.forEach(D),this.h()},h(){I(t,"class","_jsonKey svelte-d5rr90"),I(a,"class","_jsonSep svelte-d5rr90")},m(o,l){q(o,t,l),P(t,n),P(t,i),P(t,s),q(o,a,l),P(a,u)},p(o,l){l&32&&r!==(r=o[10]+"")&&$t(i,r)},d(o){o&&D(t),o&&D(a)}}}function kX(e){let t,n=AA(e[0][e[10]])+"",r,i,s,a=e[12]<e[5].length-1&&wA();return{c(){t=z("span"),r=Fe(n),a&&a.c(),s=Le(),this.h()},l(u){t=B(u,"SPAN",{class:!0});var o=U(t);r=Re(o,n),o.forEach(D),a&&a.l(u),s=Le(),this.h()},h(){I(t,"class",i="_jsonVal "+Qh(e[0][e[10]])+" svelte-d5rr90")},m(u,o){q(u,t,o),P(t,r),a&&a.m(u,o),q(u,s,o)},p(u,o){o&33&&n!==(n=AA(u[0][u[10]])+"")&&$t(r,n),o&33&&i!==(i="_jsonVal "+Qh(u[0][u[10]])+" svelte-d5rr90")&&I(t,"class",i),u[12]<u[5].length-1?a||(a=wA(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i:xe,o:xe,d(u){u&&D(t),a&&a.d(u),u&&D(s)}}}function OX(e){let t,n;return t=new AD({props:{json:e[0][e[10]],depth:e[1],_cur:e[2]+1,_last:e[12]===e[5].length-1}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,i){const s={};i&33&&(s.json=r[0][r[10]]),i&2&&(s.depth=r[1]),i&4&&(s._cur=r[2]+1),i&32&&(s._last=r[12]===r[5].length-1),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function wA(e){let t,n;return{c(){t=z("span"),n=Fe(","),this.h()},l(r){t=B(r,"SPAN",{class:!0});var i=U(t);n=Re(i,","),i.forEach(D),this.h()},h(){I(t,"class","_jsonSep svelte-d5rr90")},m(r,i){q(r,t,i),P(t,n)},d(r){r&&D(t)}}}function EA(e){let t,n,r,i,s,a,u,o=!e[4]&&xA(e);const l=[OX,kX],c=[];function f(d,h){return h&33&&(r=null),r==null&&(r=Qh(d[0][d[10]])==="object"),r?0:1}return i=f(e,-1),s=c[i]=l[i](e),{c(){t=z("li"),o&&o.c(),n=ue(),s.c(),a=ue()},l(d){t=B(d,"LI",{});var h=U(t);o&&o.l(h),n=oe(h),s.l(h),a=oe(h),h.forEach(D)},m(d,h){q(d,t,h),o&&o.m(t,null),P(t,n),c[i].m(t,null),P(t,a),u=!0},p(d,h){d[4]?o&&(o.d(1),o=null):o?o.p(d,h):(o=xA(d),o.c(),o.m(t,n));let g=i;i=f(d,h),i===g?c[i].p(d,h):(Rt(),j(c[g],1,1,()=>{c[g]=null}),It(),s=c[i],s?s.p(d,h):(s=c[i]=l[i](d),s.c()),R(s,1),s.m(t,a))},i(d){u||(R(s),u=!0)},o(d){j(s),u=!1},d(d){d&&D(t),o&&o.d(),c[i].d()}}}function SA(e){let t,n;return{c(){t=z("span"),n=Fe(","),this.h()},l(r){t=B(r,"SPAN",{class:!0});var i=U(t);n=Re(i,","),i.forEach(D),this.h()},h(){I(t,"class","_jsonSep svelte-d5rr90")},m(r,i){q(r,t,i),P(t,n)},d(r){r&&D(t)}}}function kA(e){let t,n;return{c(){t=z("span"),n=Fe(","),this.h()},l(r){t=B(r,"SPAN",{class:!0});var i=U(t);n=Re(i,","),i.forEach(D),this.h()},h(){I(t,"class","_jsonSep svelte-d5rr90")},m(r,i){q(r,t,i),P(t,n)},d(r){r&&D(t)}}}function OA(e){let t,n;return{c(){t=z("span"),n=Fe(","),this.h()},l(r){t=B(r,"SPAN",{class:!0});var i=U(t);n=Re(i,","),i.forEach(D),this.h()},h(){I(t,"class","_jsonSep svelte-d5rr90")},m(r,i){q(r,t,i),P(t,n)},d(r){r&&D(t)}}}function AX(e){let t,n,r,i;const s=[SX,EX,wX],a=[];function u(o,l){return o[5].length?o[7]?1:2:0}return t=u(e),n=a[t]=s[t](e),{c(){n.c(),r=Le()},l(o){n.l(o),r=Le()},m(o,l){a[t].m(o,l),q(o,r,l),i=!0},p(o,[l]){let c=t;t=u(o),t===c?a[t].p(o,l):(Rt(),j(a[c],1,1,()=>{a[c]=null}),It(),n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r))},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){a[t].d(o),o&&D(r)}}}function Qh(e){return e===null?"null":typeof e}function AA(e){const t=Qh(e);return t==="string"?`"${e}"`:t==="function"?"f () {...}":t==="symbol"?e.toString():e}function CX(e,t,n){let{json:r}=t,{depth:i=1/0}=t,{_cur:s=0}=t,{_last:a=!0}=t,u,o=!1,l=["",""],c=!1;function f(){n(7,c=!c)}function d(h){h instanceof KeyboardEvent&&["Enter"," "].includes(h.key)&&f()}return e.$$set=h=>{"json"in h&&n(0,r=h.json),"depth"in h&&n(1,i=h.depth),"_cur"in h&&n(2,s=h._cur),"_last"in h&&n(3,a=h._last)},e.$$.update=()=>{e.$$.dirty&17&&(n(5,u=Qh(r)==="object"?Object.keys(r):[]),n(4,o=Array.isArray(r)),n(6,l=o?["[","]"]:["{","}"])),e.$$.dirty&6&&n(7,c=i<s)},[r,i,s,a,o,u,l,c,f,d]}class AD extends He{constructor(t){super(),Ve(this,t,CX,AX,Be,{json:0,depth:1,_cur:2,_last:3})}}function TX(e){let t,n,r,i;return n=new AD({props:{json:e[0]}}),{c(){t=z("div"),re(n.$$.fragment),this.h()},l(s){t=B(s,"DIV",{class:!0,style:!0});var a=U(t);ae(n.$$.fragment,a),a.forEach(D),this.h()},h(){I(t,"class",r="font-mono text-sm text-gray-800 bg-purple-50 rounded-lg p-2 "+e[2]),df(t,"--jsonPaddingLeft",e[1]+"rem")},m(s,a){q(s,t,a),ie(n,t,null),i=!0},p(s,[a]){const u={};a&1&&(u.json=s[0]),n.$set(u),(!i||a&4&&r!==(r="font-mono text-sm text-gray-800 bg-purple-50 rounded-lg p-2 "+s[2]))&&I(t,"class",r),(!i||a&2)&&df(t,"--jsonPaddingLeft",s[1]+"rem")},i(s){i||(R(n.$$.fragment,s),i=!0)},o(s){j(n.$$.fragment,s),i=!1},d(s){s&&D(t),se(n)}}}function MX(e,t,n){let{body:r}=t,{padding:i=2}=t,{classes:s=""}=t;return e.$$set=a=>{"body"in a&&n(0,r=a.body),"padding"in a&&n(1,i=a.padding),"classes"in a&&n(2,s=a.classes)},[r,i,s]}class DX extends He{constructor(t){super(),Ve(this,t,MX,TX,Be,{body:0,padding:1,classes:2})}}function CD(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let td=CD();function NX(e){td=e}const TD=/[&<>"']/,$X=new RegExp(TD.source,"g"),MD=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,FX=new RegExp(MD.source,"g"),RX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},CA=e=>RX[e];function Tn(e,t){if(t){if(TD.test(e))return e.replace($X,CA)}else if(MD.test(e))return e.replace(FX,CA);return e}const IX=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function DD(e){return e.replace(IX,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const PX=/(^|[^\[])\^/g;function Mt(e,t){e=typeof e=="string"?e:e.source,t=t||"";const n={replace:(r,i)=>(i=i.source||i,i=i.replace(PX,"$1"),e=e.replace(r,i),n),getRegex:()=>new RegExp(e,t)};return n}const jX=/[^\w:]/g,LX=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function TA(e,t,n){if(e){let r;try{r=decodeURIComponent(DD(n)).replace(jX,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}t&&!LX.test(n)&&(n=qX(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const sp={},zX=/^[^:]+:\/*[^/]*$/,BX=/^([^:]+:)[\s\S]*$/,UX=/^([^:]+:\/*[^/]*)[\s\S]*$/;function qX(e,t){sp[" "+e]||(zX.test(e)?sp[" "+e]=e+"/":sp[" "+e]=im(e,"/",!0)),e=sp[" "+e];const n=e.indexOf(":")===-1;return t.substring(0,2)==="//"?n?t:e.replace(BX,"$1")+t:t.charAt(0)==="/"?n?t:e.replace(UX,"$1")+t:e+t}const Lm={exec:function(){}};function Yi(e){let t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function MA(e,t){const n=e.replace(/\|/g,(s,a,u)=>{let o=!1,l=a;for(;--l>=0&&u[l]==="\\";)o=!o;return o?"|":" |"}),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function im(e,t,n){const r=e.length;if(r===0)return"";let i=0;for(;i<r;){const s=e.charAt(r-i-1);if(s===t&&!n)i++;else if(s!==t&&n)i++;else break}return e.slice(0,r-i)}function HX(e,t){if(e.indexOf(t[1])===-1)return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function ND(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function DA(e,t){if(t<1)return"";let n="";for(;t>1;)t&1&&(n+=e),t>>=1,e+=e;return n+e}function NA(e,t,n,r){const i=t.href,s=t.title?Tn(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const u={type:"link",raw:n,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,u}return{type:"image",raw:n,href:i,title:s,text:Tn(a)}}function VX(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[a]=s;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}let a6=class{constructor(t){this.options=t||td}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:im(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],i=VX(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:i}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const i=im(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=n[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:n[0],tokens:s,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r,i,s,a,u,o,l,c,f,d,h,g,p=n[1].trim();const m=p.length>1,b={type:"list",raw:"",ordered:m,start:m?+p.slice(0,-1):"",loose:!1,items:[]};p=m?`\\d{1,9}\\${p.slice(-1)}`:`\\${p}`,this.options.pedantic&&(p=m?p:"[*+-]");const y=new RegExp(`^( {0,3}${p})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(g=!1,!(!(n=y.exec(t))||this.rules.block.hr.test(t)));){if(r=n[0],t=t.substring(r.length),c=n[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),f=t.split(`
`,1)[0],this.options.pedantic?(a=2,h=c.trimLeft()):(a=n[2].search(/[^ ]/),a=a>4?1:a,h=c.slice(a),a+=n[1].length),o=!1,!c&&/^ *$/.test(f)&&(r+=f+`
`,t=t.substring(f.length+1),g=!0),!g){const _=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;t&&(d=t.split(`
`,1)[0],f=d,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(E.test(f)||w.test(f)||_.test(f)||x.test(t)));){if(f.search(/[^ ]/)>=a||!f.trim())h+=`
`+f.slice(a);else{if(o||c.search(/[^ ]/)>=4||E.test(c)||w.test(c)||x.test(c))break;h+=`
`+f}!o&&!f.trim()&&(o=!0),r+=d+`
`,t=t.substring(d.length+1),c=f.slice(a)}}b.loose||(l?b.loose=!0:/\n *\n *$/.test(r)&&(l=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(h),i&&(s=i[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),b.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:h}),b.raw+=r}b.items[b.items.length-1].raw=r.trimRight(),b.items[b.items.length-1].text=h.trimRight(),b.raw=b.raw.trimRight();const v=b.items.length;for(u=0;u<v;u++)if(this.lexer.state.top=!1,b.items[u].tokens=this.lexer.blockTokens(b.items[u].text,[]),!b.loose){const _=b.items[u].tokens.filter(E=>E.type==="space"),x=_.length>0&&_.some(E=>/\n.*\n/.test(E.raw));b.loose=x}if(b.loose)for(u=0;u<v;u++)b.items[u].loose=!0;return b}}html(t){const n=this.rules.block.html.exec(t);if(n){const r={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(n[0]):Tn(n[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),i=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(t){const n=this.rules.block.table.exec(t);if(n){const r={type:"table",header:MA(n[1]).map(i=>({text:i})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let i=r.align.length,s,a,u,o;for(s=0;s<i;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=MA(r.rows[s],r.header.length).map(l=>({text:l}));for(i=r.header.length,a=0;a<i;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(i=r.rows.length,a=0;a<i;a++)for(o=r.rows[a],u=0;u<o.length;u++)o[u].tokens=this.lexer.inline(o[u].text);return r}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Tn(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Tn(n[0]):n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=im(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=HX(n[2],"()");if(a>-1){const o=(n[0].indexOf("!")===0?5:4)+n[1].length+a;n[2]=n[2].substring(0,a),n[0]=n[0].substring(0,o).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],s=a[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),NA(n,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=n[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return NA(r,i,r[0],this.lexer)}}emStrong(t,n,r=""){let i=this.rules.inline.emStrong.lDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(r===""||this.rules.inline.punctuation.exec(r))){const a=i[0].length-1;let u,o,l=a,c=0;const f=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+a);(i=f.exec(n))!=null;){if(u=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!u)continue;if(o=u.length,i[3]||i[4]){l+=o;continue}else if((i[5]||i[6])&&a%3&&!((a+o)%3)){c+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+c);const d=t.slice(0,a+i.index+(i[0].length-u.length)+o);if(Math.min(a,o)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Tn(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t,n){const r=this.rules.inline.autolink.exec(t);if(r){let i,s;return r[2]==="@"?(i=Tn(this.options.mangle?n(r[1]):r[1]),s="mailto:"+i):(i=Tn(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(t,n){let r;if(r=this.rules.inline.url.exec(t)){let i,s;if(r[2]==="@")i=Tn(this.options.mangle?n(r[0]):r[0]),s="mailto:"+i;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);i=Tn(r[0]),r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t,n){const r=this.rules.inline.text.exec(t);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Tn(r[0]):r[0]:i=Tn(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}};const $e={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Lm,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};$e._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;$e._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;$e.def=Mt($e.def).replace("label",$e._label).replace("title",$e._title).getRegex();$e.bullet=/(?:[*+-]|\d{1,9}[.)])/;$e.listItemStart=Mt(/^( *)(bull) */).replace("bull",$e.bullet).getRegex();$e.list=Mt($e.list).replace(/bull/g,$e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+$e.def.source+")").getRegex();$e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";$e._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;$e.html=Mt($e.html,"i").replace("comment",$e._comment).replace("tag",$e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();$e.paragraph=Mt($e._paragraph).replace("hr",$e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e._tag).getRegex();$e.blockquote=Mt($e.blockquote).replace("paragraph",$e.paragraph).getRegex();$e.normal=Yi({},$e);$e.gfm=Yi({},$e.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});$e.gfm.table=Mt($e.gfm.table).replace("hr",$e.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e._tag).getRegex();$e.gfm.paragraph=Mt($e._paragraph).replace("hr",$e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",$e.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e._tag).getRegex();$e.pedantic=Yi({},$e.normal,{html:Mt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Lm,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Mt($e.normal._paragraph).replace("hr",$e.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const ve={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Lm,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Lm,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};ve._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";ve.punctuation=Mt(ve.punctuation).replace(/punctuation/g,ve._punctuation).getRegex();ve.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;ve.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;ve._comment=Mt($e._comment).replace("(?:-->|$)","-->").getRegex();ve.emStrong.lDelim=Mt(ve.emStrong.lDelim).replace(/punct/g,ve._punctuation).getRegex();ve.emStrong.rDelimAst=Mt(ve.emStrong.rDelimAst,"g").replace(/punct/g,ve._punctuation).getRegex();ve.emStrong.rDelimUnd=Mt(ve.emStrong.rDelimUnd,"g").replace(/punct/g,ve._punctuation).getRegex();ve._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;ve._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;ve._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;ve.autolink=Mt(ve.autolink).replace("scheme",ve._scheme).replace("email",ve._email).getRegex();ve._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;ve.tag=Mt(ve.tag).replace("comment",ve._comment).replace("attribute",ve._attribute).getRegex();ve._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;ve._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;ve._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;ve.link=Mt(ve.link).replace("label",ve._label).replace("href",ve._href).replace("title",ve._title).getRegex();ve.reflink=Mt(ve.reflink).replace("label",ve._label).replace("ref",$e._label).getRegex();ve.nolink=Mt(ve.nolink).replace("ref",$e._label).getRegex();ve.reflinkSearch=Mt(ve.reflinkSearch,"g").replace("reflink",ve.reflink).replace("nolink",ve.nolink).getRegex();ve.normal=Yi({},ve);ve.pedantic=Yi({},ve.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Mt(/^!?\[(label)\]\((.*?)\)/).replace("label",ve._label).getRegex(),reflink:Mt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ve._label).getRegex()});ve.gfm=Yi({},ve.normal,{escape:Mt(ve.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});ve.gfm.url=Mt(ve.gfm.url,"i").replace("email",ve.gfm._extended_email).getRegex();ve.breaks=Yi({},ve.gfm,{br:Mt(ve.br).replace("{2,}","*").getRegex(),text:Mt(ve.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function GX(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function $A(e){let t="",n,r;const i=e.length;for(n=0;n<i;n++)r=e.charCodeAt(n),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t}class Ea{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||td,this.options.tokenizer=this.options.tokenizer||new a6,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:$e.normal,inline:ve.normal};this.options.pedantic?(n.block=$e.pedantic,n.inline=ve.pedantic):this.options.gfm&&(n.block=$e.gfm,this.options.breaks?n.inline=ve.breaks:n.inline=ve.gfm),this.tokenizer.rules=n}static get rules(){return{block:$e,inline:ve}}static lex(t,n){return new Ea(n).lex(t)}static lexInline(t,n){return new Ea(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(u,o,l)=>o+"    ".repeat(l.length));let r,i,s,a;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(u=>(r=u.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(s=t,this.options.extensions&&this.options.extensions.startBlock){let u=1/0;const o=t.slice(1);let l;this.options.extensions.startBlock.forEach(function(c){l=c.call({lexer:this},o),typeof l=="number"&&l>=0&&(u=Math.min(u,l))}),u<1/0&&u>=0&&(s=t.substring(0,u+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=n[n.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r),a=s.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,i,s,a=t,u,o,l;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(u=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)c.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,u.index)+"["+DA("a",u[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(u=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,u.index)+"["+DA("a",u[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(u=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,u.index+u[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(o||(l=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(r=c.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,a,l)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t,$A)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,$A))){t=t.substring(r.raw.length),n.push(r);continue}if(s=t,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const f=t.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},f),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(s=t.substring(0,c+1))}if(r=this.tokenizer.inlineText(s,GX)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),o=!0,i=n[n.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}}let u6=class{constructor(t){this.options=t||td}code(t,n,r){const i=(n||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(t,i);s!=null&&s!==t&&(r=!0,t=s)}return t=t.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+Tn(i)+'">'+(r?t:Tn(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:Tn(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,n,r,i){if(this.options.headerIds){const s=this.options.headerPrefix+i.slug(r);return`<h${n} id="${s}">${t}</h${n}>
`}return`<h${n}>${t}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,n,r){const i=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+t+"</"+i+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){if(t=TA(this.options.sanitize,this.options.baseUrl,t),t===null)return r;let i='<a href="'+t+'"';return n&&(i+=' title="'+n+'"'),i+=">"+r+"</a>",i}image(t,n,r){if(t=TA(this.options.sanitize,this.options.baseUrl,t),t===null)return r;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=this.options.xhtml?"/>":">",i}text(t){return t}};class $D{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class FD{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,n){let r=t,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[t];do i++,r=t+"-"+i;while(this.seen.hasOwnProperty(r))}return n||(this.seen[t]=i,this.seen[r]=0),r}slug(t,n={}){const r=this.serialize(t);return this.getNextSafeSlug(r,n.dryrun)}}let ga=class{constructor(t){this.options=t||td,this.options.renderer=this.options.renderer||new u6,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new $D,this.slugger=new FD}static parse(t,n){return new ga(n).parse(t)}static parseInline(t,n){return new ga(n).parseInline(t)}parse(t,n=!0){let r="",i,s,a,u,o,l,c,f,d,h,g,p,m,b,y,v,_,x,E;const w=t.length;for(i=0;i<w;i++){if(h=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(E=this.options.extensions.renderers[h.type].call({parser:this},h),E!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=E||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,DD(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(f="",c="",u=h.header.length,s=0;s<u;s++)c+=this.renderer.tablecell(this.parseInline(h.header[s].tokens),{header:!0,align:h.align[s]});for(f+=this.renderer.tablerow(c),d="",u=h.rows.length,s=0;s<u;s++){for(l=h.rows[s],c="",o=l.length,a=0;a<o;a++)c+=this.renderer.tablecell(this.parseInline(l[a].tokens),{header:!1,align:h.align[a]});d+=this.renderer.tablerow(c)}r+=this.renderer.table(f,d);continue}case"blockquote":{d=this.parse(h.tokens),r+=this.renderer.blockquote(d);continue}case"list":{for(g=h.ordered,p=h.start,m=h.loose,u=h.items.length,d="",s=0;s<u;s++)y=h.items[s],v=y.checked,_=y.task,b="",y.task&&(x=this.renderer.checkbox(v),m?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=x+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=x+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:x}):b+=x),b+=this.parse(y.tokens,m),d+=this.renderer.listitem(b,_,v);r+=this.renderer.list(d,g,p);continue}case"html":{r+=this.renderer.html(h.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;i+1<w&&t[i+1].type==="text";)h=t[++i],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=n?this.renderer.paragraph(d):d;continue}default:{const k='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(k);return}else throw new Error(k)}}}return r}parseInline(t,n){n=n||this.renderer;let r="",i,s,a;const u=t.length;for(i=0;i<u;i++){if(s=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(a=this.options.extensions.renderers[s.type].call({parser:this},s),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){r+=a||"";continue}switch(s.type){case"escape":{r+=n.text(s.text);break}case"html":{r+=n.html(s.text);break}case"link":{r+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{r+=n.image(s.href,s.title,s.text);break}case"strong":{r+=n.strong(this.parseInline(s.tokens,n));break}case"em":{r+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{r+=n.codespan(s.text);break}case"br":{r+=n.br();break}case"del":{r+=n.del(this.parseInline(s.tokens,n));break}case"text":{r+=n.text(s.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(o);return}else throw new Error(o)}}}return r}};function Pe(e,t,n){if(typeof e>"u"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof t=="function"&&(n=t,t=null),t=Yi({},Pe.defaults,t||{}),ND(t),n){const i=t.highlight;let s;try{s=Ea.lex(e,t)}catch(o){return n(o)}const a=function(o){let l;if(!o)try{t.walkTokens&&Pe.walkTokens(s,t.walkTokens),l=ga.parse(s,t)}catch(c){o=c}return t.highlight=i,o?n(o):n(null,l)};if(!i||i.length<3||(delete t.highlight,!s.length))return a();let u=0;Pe.walkTokens(s,function(o){o.type==="code"&&(u++,setTimeout(()=>{i(o.text,o.lang,function(l,c){if(l)return a(l);c!=null&&c!==o.text&&(o.text=c,o.escaped=!0),u--,u===0&&a()})},0))}),u===0&&a();return}function r(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+Tn(i.message+"",!0)+"</pre>";throw i}try{const i=Ea.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(Pe.walkTokens(i,t.walkTokens)).then(()=>ga.parse(i,t)).catch(r);Pe.walkTokens(i,t.walkTokens)}return ga.parse(i,t)}catch(i){r(i)}}Pe.options=Pe.setOptions=function(e){return Yi(Pe.defaults,e),NX(Pe.defaults),Pe};Pe.getDefaults=CD;Pe.defaults=td;Pe.use=function(...e){const t=Pe.defaults.extensions||{renderers:{},childTokens:{}};e.forEach(n=>{const r=Yi({},n);if(r.async=Pe.defaults.async||r.async,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const s=t.renderers[i.name];s?t.renderers[i.name]=function(...a){let u=i.renderer.apply(this,a);return u===!1&&(u=s.apply(this,a)),u}:t.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[i.level]?t[i.level].unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){const i=Pe.defaults.renderer||new u6;for(const s in n.renderer){const a=i[s];i[s]=(...u)=>{let o=n.renderer[s].apply(i,u);return o===!1&&(o=a.apply(i,u)),o}}r.renderer=i}if(n.tokenizer){const i=Pe.defaults.tokenizer||new a6;for(const s in n.tokenizer){const a=i[s];i[s]=(...u)=>{let o=n.tokenizer[s].apply(i,u);return o===!1&&(o=a.apply(i,u)),o}}r.tokenizer=i}if(n.walkTokens){const i=Pe.defaults.walkTokens;r.walkTokens=function(s){let a=[];return a.push(n.walkTokens.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}Pe.setOptions(r)})};Pe.walkTokens=function(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(Pe,r)),r.type){case"table":{for(const i of r.header)n=n.concat(Pe.walkTokens(i.tokens,t));for(const i of r.rows)for(const s of i)n=n.concat(Pe.walkTokens(s.tokens,t));break}case"list":{n=n.concat(Pe.walkTokens(r.items,t));break}default:Pe.defaults.extensions&&Pe.defaults.extensions.childTokens&&Pe.defaults.extensions.childTokens[r.type]?Pe.defaults.extensions.childTokens[r.type].forEach(function(i){n=n.concat(Pe.walkTokens(r[i],t))}):r.tokens&&(n=n.concat(Pe.walkTokens(r.tokens,t)))}return n};Pe.parseInline=function(e,t){if(typeof e>"u"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=Yi({},Pe.defaults,t||{}),ND(t);try{const n=Ea.lexInline(e,t);return t.walkTokens&&Pe.walkTokens(n,t.walkTokens),ga.parseInline(n,t)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+Tn(n.message+"",!0)+"</pre>";throw n}};Pe.Parser=ga;Pe.parser=ga.parse;Pe.Renderer=u6;Pe.TextRenderer=$D;Pe.Lexer=Ea;Pe.lexer=Ea.lex;Pe.Tokenizer=a6;Pe.Slugger=FD;Pe.parse=Pe;Pe.options;Pe.setOptions;Pe.use;Pe.walkTokens;Pe.parseInline;ga.parse;Ea.lex;function WX(e){let t,n=Pe.parse(e[0])+"",r;return{c(){t=z("div"),this.h()},l(i){t=B(i,"DIV",{class:!0});var s=U(t);s.forEach(D),this.h()},h(){I(t,"class",r="prose "+e[1])},m(i,s){q(i,t,s),t.innerHTML=n},p(i,[s]){s&1&&n!==(n=Pe.parse(i[0])+"")&&(t.innerHTML=n),s&2&&r!==(r="prose "+i[1])&&I(t,"class",r)},i:xe,o:xe,d(i){i&&D(t)}}}function XX(e,t,n){let{body:r}=t,{classes:i=""}=t,{baseUrl:s=null}=t,{breaks:a=!1}=t,{gfm:u=!0}=t,{headerIds:o=!0}=t,{headerPrefix:l=""}=t,{langPrefix:c="language-"}=t,{mangle:f=!0}=t,{pedantic:d=!1}=t,{sanitize:h=!1}=t,{silent:g=!1}=t,{smartypants:p=!1}=t,{xhtml:m=!1}=t;return Pe.setOptions({baseUrl:s,breaks:a,gfm:u,headerIds:o,headerPrefix:l,langPrefix:c,mangle:f,pedantic:d,sanitize:h,silent:g,smartypants:p,xhtml:m}),e.$$set=b=>{"body"in b&&n(0,r=b.body),"classes"in b&&n(1,i=b.classes),"baseUrl"in b&&n(2,s=b.baseUrl),"breaks"in b&&n(3,a=b.breaks),"gfm"in b&&n(4,u=b.gfm),"headerIds"in b&&n(5,o=b.headerIds),"headerPrefix"in b&&n(6,l=b.headerPrefix),"langPrefix"in b&&n(7,c=b.langPrefix),"mangle"in b&&n(8,f=b.mangle),"pedantic"in b&&n(9,d=b.pedantic),"sanitize"in b&&n(10,h=b.sanitize),"silent"in b&&n(11,g=b.silent),"smartypants"in b&&n(12,p=b.smartypants),"xhtml"in b&&n(13,m=b.xhtml)},[r,i,s,a,u,o,l,c,f,d,h,g,p,m]}class RD extends He{constructor(t){super(),Ve(this,t,XX,WX,Be,{body:0,classes:1,baseUrl:2,breaks:3,gfm:4,headerIds:5,headerPrefix:6,langPrefix:7,mangle:8,pedantic:9,sanitize:10,silent:11,smartypants:12,xhtml:13})}}function YX(e){let t,n,r;return{c(){t=z("input"),this.h()},l(i){t=B(i,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){I(t,"type","text"),I(t,"placeholder","Write some text..."),I(t,"class","grow h-10 px-3 rounded-md shadow-md")},m(i,s){q(i,t,s),n||(r=[Z(t,"keyup",e[3]),Z(t,"keypress",e[2])],n=!0)},p:xe,i:xe,o:xe,d(i){i&&D(t),n=!1,ii(r)}}}function ZX(e,t,n){let{text:r}=t,i;const s=o=>{clearTimeout(i),i=setTimeout(()=>{n(1,r=o)},150)};function a(o){K.call(this,e,o)}const u=({target:{value:o}})=>s(o);return e.$$set=o=>{"text"in o&&n(1,r=o.text)},[s,r,a,u]}class QX extends He{constructor(t){super(),Ve(this,t,ZX,YX,Be,{text:1})}}function JX(e){let t;const n=e[6].default,r=yt(n,e,e[12],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&4096)&&vt(r,n,i,i[12],t?xt(n,i[12],s,null):_t(i[12]),null)},i(i){t||(R(r,i),t=!0)},o(i){j(r,i),t=!1},d(i){r&&r.d(i)}}}function KX(e){let t,n,r,i,s,a,u;function o(h){e[7](h)}function l(h){e[8](h)}function c(h){e[9](h)}function f(h){e[10](h)}let d={$$slots:{default:[JX]},$$scope:{ctx:e}};return e[0]!==void 0&&(d.name=e[0]),e[1]!==void 0&&(d.value=e[1]),e[2]!==void 0&&(d.disabled=e[2]),e[3]!==void 0&&(d.color=e[3]),n=new CM({props:d}),Qt.push(()=>tn(n,"name",o)),Qt.push(()=>tn(n,"value",l)),Qt.push(()=>tn(n,"disabled",c)),Qt.push(()=>tn(n,"color",f)),n.$on("change",e[11]),{c(){t=z("div"),re(n.$$.fragment),this.h()},l(h){t=B(h,"DIV",{class:!0});var g=U(t);ae(n.$$.fragment,g),g.forEach(D),this.h()},h(){I(t,"class",e[4])},m(h,g){q(h,t,g),ie(n,t,null),u=!0},p(h,[g]){const p={};g&4096&&(p.$$scope={dirty:g,ctx:h}),!r&&g&1&&(r=!0,p.name=h[0],nn(()=>r=!1)),!i&&g&2&&(i=!0,p.value=h[1],nn(()=>i=!1)),!s&&g&4&&(s=!0,p.disabled=h[2],nn(()=>s=!1)),!a&&g&8&&(a=!0,p.color=h[3],nn(()=>a=!1)),n.$set(p),(!u||g&16)&&I(t,"class",h[4])},i(h){u||(R(n.$$.fragment,h),u=!0)},o(h){j(n.$$.fragment,h),u=!1},d(h){h&&D(t),se(n)}}}function eY(e,t,n){let{$$slots:r={},$$scope:i}=t,{name:s=""}=t,{value:a=""}=t,{disabled:u=!1}=t,{color:o="purple"}=t,{classes:l="bg-violet-50 p-2 rounded-lg w-fit"}=t;const c=Ca();function f(m){s=m,n(0,s)}function d(m){a=m,n(1,a)}function h(m){u=m,n(2,u)}function g(m){o=m,n(3,o)}const p=m=>c("change",{detail:m.detail});return e.$$set=m=>{"name"in m&&n(0,s=m.name),"value"in m&&n(1,a=m.value),"disabled"in m&&n(2,u=m.disabled),"color"in m&&n(3,o=m.color),"classes"in m&&n(4,l=m.classes),"$$scope"in m&&n(12,i=m.$$scope)},[s,a,u,o,l,c,r,f,d,h,g,p,i]}class tY extends He{constructor(t){super(),Ve(this,t,eY,KX,Be,{name:0,value:1,disabled:2,color:3,classes:4})}}function FA(e,t,n){const r=e.slice();return r[13]=t[n],r[14]=t,r[15]=n,r}function nY(e){let t=e[13]+"",n,r;return{c(){n=Fe(t),r=ue()},l(i){n=Re(i,t),r=oe(i)},m(i,s){q(i,n,s),q(i,r,s)},p(i,s){s&1&&t!==(t=i[13]+"")&&$t(n,t)},d(i){i&&D(n),i&&D(r)}}}function RA(e){let t,n,r,i,s,a;function u(h){e[8](h,e[13],e[14],e[15])}function o(h){e[9](h)}function l(h){e[10](h)}function c(h){e[11](h)}function f(...h){return e[12](e[15],...h)}let d={name:"radio-group",class:e[2]?"text-gray-400":"text-purple-500",$$slots:{default:[nY]},$$scope:{ctx:e}};return e[13]!==void 0&&(d.value=e[13]),e[2]!==void 0&&(d.disabled=e[2]),e[3]!==void 0&&(d.color=e[3]),e[5]!==void 0&&(d.group=e[5]),t=new CM({props:d}),Qt.push(()=>tn(t,"value",u)),Qt.push(()=>tn(t,"disabled",o)),Qt.push(()=>tn(t,"color",l)),Qt.push(()=>tn(t,"group",c)),t.$on("change",f),{c(){re(t.$$.fragment)},l(h){ae(t.$$.fragment,h)},m(h,g){ie(t,h,g),a=!0},p(h,g){e=h;const p={};g&4&&(p.class=e[2]?"text-gray-400":"text-purple-500"),g&65537&&(p.$$scope={dirty:g,ctx:e}),!n&&g&1&&(n=!0,p.value=e[13],nn(()=>n=!1)),!r&&g&4&&(r=!0,p.disabled=e[2],nn(()=>r=!1)),!i&&g&8&&(i=!0,p.color=e[3],nn(()=>i=!1)),!s&&g&32&&(s=!0,p.group=e[5],nn(()=>s=!1)),t.$set(p)},i(h){a||(R(t.$$.fragment,h),a=!0)},o(h){j(t.$$.fragment,h),a=!1},d(h){se(t,h)}}}function rY(e){let t,n,r=e[0],i=[];for(let a=0;a<r.length;a+=1)i[a]=RA(FA(e,r,a));const s=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){t=z("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){t=B(a,"DIV",{class:!0});var u=U(t);for(let o=0;o<i.length;o+=1)i[o].l(u);u.forEach(D),this.h()},h(){I(t,"class",e[4])},m(a,u){q(a,t,u);for(let o=0;o<i.length;o+=1)i[o].m(t,null);n=!0},p(a,[u]){if(u&111){r=a[0];let o;for(o=0;o<r.length;o+=1){const l=FA(a,r,o);i[o]?(i[o].p(l,u),R(i[o],1)):(i[o]=RA(l),i[o].c(),R(i[o],1),i[o].m(t,null))}for(Rt(),o=r.length;o<i.length;o+=1)s(o);It()}(!n||u&16)&&I(t,"class",a[4])},i(a){if(!n){for(let u=0;u<r.length;u+=1)R(i[u]);n=!0}},o(a){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)j(i[u]);n=!1},d(a){a&&D(t),Pu(i,a)}}}function iY(e,t,n){let{values:r}=t,{selected:i=void 0}=t,s=i!==void 0?r[i]:void 0,{disabled:a=!1}=t,{color:u="purple"}=t,{horizontal:o=!0}=t,{classes:l="bg-violet-50 p-2 rounded-lg w-fit"}=t;l+=o?" flex flex-row space-x-4":" flex flex-col space-y-2";const c=Ca();function f(m,b,y,v){y[v]=m,n(0,r)}function d(m){a=m,n(2,a)}function h(m){u=m,n(3,u)}function g(m){s=m,n(5,s)}const p=(m,b)=>{n(1,i=m),c("change",{index:m})};return e.$$set=m=>{"values"in m&&n(0,r=m.values),"selected"in m&&n(1,i=m.selected),"disabled"in m&&n(2,a=m.disabled),"color"in m&&n(3,u=m.color),"horizontal"in m&&n(7,o=m.horizontal),"classes"in m&&n(4,l=m.classes)},[r,i,a,u,l,s,c,o,f,d,h,g,p]}class sY extends He{constructor(t){super(),Ve(this,t,iY,rY,Be,{values:0,selected:1,disabled:2,color:3,horizontal:7,classes:4})}}var ID={},Fb={},o6={},Jh={},l6={};Object.defineProperty(l6,"__esModule",{value:!0});l6.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(e){return e.charCodeAt(0)}));var c6={};Object.defineProperty(c6,"__esModule",{value:!0});c6.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(e){return e.charCodeAt(0)}));var ax={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);e.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(s){var a="";return s>65535&&(s-=65536,a+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),a+=String.fromCharCode(s),a};function r(s){var a;return s>=55296&&s<=57343||s>1114111?65533:(a=n.get(s))!==null&&a!==void 0?a:s}e.replaceCodePoint=r;function i(s){return(0,e.fromCodePoint)(r(s))}e.default=i})(ax);(function(e){var t=Ue&&Ue.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTML=e.determineBranch=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var n=t(l6);e.htmlDecodeTree=n.default;var r=t(c6);e.xmlDecodeTree=r.default;var i=t(ax);e.decodeCodePoint=i.default;var s=ax;Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return s.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return s.fromCodePoint}});var a;(function(p){p[p.NUM=35]="NUM",p[p.SEMI=59]="SEMI",p[p.ZERO=48]="ZERO",p[p.NINE=57]="NINE",p[p.LOWER_A=97]="LOWER_A",p[p.LOWER_F=102]="LOWER_F",p[p.LOWER_X=120]="LOWER_X",p[p.To_LOWER_BIT=32]="To_LOWER_BIT"})(a||(a={}));var u;(function(p){p[p.VALUE_LENGTH=49152]="VALUE_LENGTH",p[p.BRANCH_LENGTH=16256]="BRANCH_LENGTH",p[p.JUMP_TABLE=127]="JUMP_TABLE"})(u=e.BinTrieFlags||(e.BinTrieFlags={}));function o(p){return function(b,y){for(var v="",_=0,x=0;(x=b.indexOf("&",x))>=0;){if(v+=b.slice(_,x),_=x,x+=1,b.charCodeAt(x)===a.NUM){var E=x+1,w=10,k=b.charCodeAt(E);(k|a.To_LOWER_BIT)===a.LOWER_X&&(w=16,x+=1,E+=1);do k=b.charCodeAt(++x);while(k>=a.ZERO&&k<=a.NINE||w===16&&(k|a.To_LOWER_BIT)>=a.LOWER_A&&(k|a.To_LOWER_BIT)<=a.LOWER_F);if(E!==x){var A=b.substring(E,x),N=parseInt(A,w);if(b.charCodeAt(x)===a.SEMI)x+=1;else if(y)continue;v+=(0,i.default)(N),_=x}continue}for(var O=0,$=1,C=0,T=p[C];x<b.length&&(C=l(p,T,C+1,b.charCodeAt(x)),!(C<0));x++,$++){T=p[C];var S=T&u.VALUE_LENGTH;if(S){(!y||b.charCodeAt(x)===a.SEMI)&&(O=C,$=0);var M=(S>>14)-1;if(M===0)break;C+=M}}if(O!==0){var M=(p[O]&u.VALUE_LENGTH)>>14;v+=M===1?String.fromCharCode(p[O]&~u.VALUE_LENGTH):M===2?String.fromCharCode(p[O+1]):String.fromCharCode(p[O+1],p[O+2]),_=x-$+1}}return v+b.slice(_)}}function l(p,m,b,y){var v=(m&u.BRANCH_LENGTH)>>7,_=m&u.JUMP_TABLE;if(v===0)return _!==0&&y===_?b:-1;if(_){var x=y-_;return x<0||x>=v?-1:p[b+x]-1}for(var E=b,w=E+v-1;E<=w;){var k=E+w>>>1,A=p[k];if(A<y)E=k+1;else if(A>y)w=k-1;else return p[k+v]}return-1}e.determineBranch=l;var c=o(n.default),f=o(r.default);function d(p){return c(p,!1)}e.decodeHTML=d;function h(p){return c(p,!0)}e.decodeHTMLStrict=h;function g(p){return f(p,!0)}e.decodeXML=g})(Jh);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t=Jh,n;(function(d){d[d.Tab=9]="Tab",d[d.NewLine=10]="NewLine",d[d.FormFeed=12]="FormFeed",d[d.CarriageReturn=13]="CarriageReturn",d[d.Space=32]="Space",d[d.ExclamationMark=33]="ExclamationMark",d[d.Num=35]="Num",d[d.Amp=38]="Amp",d[d.SingleQuote=39]="SingleQuote",d[d.DoubleQuote=34]="DoubleQuote",d[d.Dash=45]="Dash",d[d.Slash=47]="Slash",d[d.Zero=48]="Zero",d[d.Nine=57]="Nine",d[d.Semi=59]="Semi",d[d.Lt=60]="Lt",d[d.Eq=61]="Eq",d[d.Gt=62]="Gt",d[d.Questionmark=63]="Questionmark",d[d.UpperA=65]="UpperA",d[d.LowerA=97]="LowerA",d[d.UpperF=70]="UpperF",d[d.LowerF=102]="LowerF",d[d.UpperZ=90]="UpperZ",d[d.LowerZ=122]="LowerZ",d[d.LowerX=120]="LowerX",d[d.OpeningSquareBracket=91]="OpeningSquareBracket"})(n||(n={}));var r;(function(d){d[d.Text=1]="Text",d[d.BeforeTagName=2]="BeforeTagName",d[d.InTagName=3]="InTagName",d[d.InSelfClosingTag=4]="InSelfClosingTag",d[d.BeforeClosingTagName=5]="BeforeClosingTagName",d[d.InClosingTagName=6]="InClosingTagName",d[d.AfterClosingTagName=7]="AfterClosingTagName",d[d.BeforeAttributeName=8]="BeforeAttributeName",d[d.InAttributeName=9]="InAttributeName",d[d.AfterAttributeName=10]="AfterAttributeName",d[d.BeforeAttributeValue=11]="BeforeAttributeValue",d[d.InAttributeValueDq=12]="InAttributeValueDq",d[d.InAttributeValueSq=13]="InAttributeValueSq",d[d.InAttributeValueNq=14]="InAttributeValueNq",d[d.BeforeDeclaration=15]="BeforeDeclaration",d[d.InDeclaration=16]="InDeclaration",d[d.InProcessingInstruction=17]="InProcessingInstruction",d[d.BeforeComment=18]="BeforeComment",d[d.CDATASequence=19]="CDATASequence",d[d.InSpecialComment=20]="InSpecialComment",d[d.InCommentLike=21]="InCommentLike",d[d.BeforeSpecialS=22]="BeforeSpecialS",d[d.SpecialStartSequence=23]="SpecialStartSequence",d[d.InSpecialTag=24]="InSpecialTag",d[d.BeforeEntity=25]="BeforeEntity",d[d.BeforeNumericEntity=26]="BeforeNumericEntity",d[d.InNamedEntity=27]="InNamedEntity",d[d.InNumericEntity=28]="InNumericEntity",d[d.InHexEntity=29]="InHexEntity"})(r||(r={}));function i(d){return d===n.Space||d===n.NewLine||d===n.Tab||d===n.FormFeed||d===n.CarriageReturn}function s(d){return d===n.Slash||d===n.Gt||i(d)}function a(d){return d>=n.Zero&&d<=n.Nine}function u(d){return d>=n.LowerA&&d<=n.LowerZ||d>=n.UpperA&&d<=n.UpperZ}function o(d){return d>=n.UpperA&&d<=n.UpperF||d>=n.LowerA&&d<=n.LowerF}var l;(function(d){d[d.NoValue=0]="NoValue",d[d.Unquoted=1]="Unquoted",d[d.Single=2]="Single",d[d.Double=3]="Double"})(l=e.QuoteType||(e.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},f=function(){function d(h,g){var p=h.xmlMode,m=p===void 0?!1:p,b=h.decodeEntities,y=b===void 0?!0:b;this.cbs=g,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=m,this.decodeEntities=y,this.entityTrie=m?t.xmlDecodeTree:t.htmlDecodeTree}return d.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},d.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},d.prototype.end=function(){this.running&&this.finish()},d.prototype.pause=function(){this.running=!1},d.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},d.prototype.getIndex=function(){return this.index},d.prototype.getSectionStart=function(){return this.sectionStart},d.prototype.stateText=function(h){h===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===n.Amp&&(this.state=r.BeforeEntity)},d.prototype.stateSpecialStartSequence=function(h){var g=this.sequenceIndex===this.currentSequence.length,p=g?s(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!p)this.isSpecial=!1;else if(!g){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(h)},d.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===n.Gt||i(h)){var g=this.index-this.currentSequence.length;if(this.sectionStart<g){var p=this.index;this.index=g,this.cbs.ontext(this.sectionStart,g),this.index=p}this.isSpecial=!1,this.sectionStart=g+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===c.TitleEnd?this.decodeEntities&&h===n.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(h===n.Lt)},d.prototype.stateCDATASequence=function(h){h===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(h))},d.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},d.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},d.prototype.isTagStartChar=function(h){return this.xmlMode?!s(h):u(h)},d.prototype.startSpecial=function(h,g){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=g,this.state=r.SpecialStartSequence},d.prototype.stateBeforeTagName=function(h){if(h===n.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===n.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var g=h|32;this.sectionStart=this.index,!this.xmlMode&&g===c.TitleEnd[2]?this.startSpecial(c.TitleEnd,3):this.state=!this.xmlMode&&g===c.ScriptEnd[2]?r.BeforeSpecialS:r.InTagName}else h===n.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(h))},d.prototype.stateInTagName=function(h){s(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(h))},d.prototype.stateBeforeClosingTagName=function(h){i(h)||(h===n.Gt?this.state=r.Text:(this.state=this.isTagStartChar(h)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},d.prototype.stateInClosingTagName=function(h){(h===n.Gt||i(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(h))},d.prototype.stateAfterClosingTagName=function(h){(h===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=r.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeAttributeName=function(h){h===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===n.Slash?this.state=r.InSelfClosingTag:i(h)||(this.state=r.InAttributeName,this.sectionStart=this.index)},d.prototype.stateInSelfClosingTag=function(h){h===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):i(h)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(h))},d.prototype.stateInAttributeName=function(h){(h===n.Eq||s(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(h))},d.prototype.stateAfterAttributeName=function(h){h===n.Eq?this.state=r.BeforeAttributeValue:h===n.Slash||h===n.Gt?(this.cbs.onattribend(l.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(h)):i(h)||(this.cbs.onattribend(l.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},d.prototype.stateBeforeAttributeValue=function(h){h===n.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):h===n.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):i(h)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},d.prototype.handleInAttributeValue=function(h,g){h===g||!this.decodeEntities&&this.fastForwardTo(g)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(g===n.DoubleQuote?l.Double:l.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&h===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},d.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,n.DoubleQuote)},d.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,n.SingleQuote)},d.prototype.stateInAttributeValueNoQuotes=function(h){i(h)||h===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},d.prototype.stateBeforeDeclaration=function(h){h===n.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=h===n.Dash?r.BeforeComment:r.InDeclaration},d.prototype.stateInDeclaration=function(h){(h===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},d.prototype.stateInProcessingInstruction=function(h){(h===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeComment=function(h){h===n.Dash?(this.state=r.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},d.prototype.stateInSpecialComment=function(h){(h===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeSpecialS=function(h){var g=h|32;g===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):g===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(h))},d.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===n.Num?this.state=r.BeforeNumericEntity:h===n.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(h))},d.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var g=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(g){var p=(g>>14)-1;if(!this.allowLegacyEntity()&&h!==n.Semi)this.trieIndex+=p;else{var m=this.index-this.entityExcess+1;m>this.sectionStart&&this.emitPartial(this.sectionStart,m),this.entityResult=this.trieIndex,this.trieIndex+=p,this.entityExcess=0,this.sectionStart=this.index+1,p===0&&this.emitNamedEntity()}}},d.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},d.prototype.stateBeforeNumericEntity=function(h){(h|32)===n.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(h))},d.prototype.emitNumericEntity=function(h){var g=this.index-this.entityExcess-1,p=g+2+Number(this.state===r.InHexEntity);p!==this.index&&(g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},d.prototype.stateInNumericEntity=function(h){h===n.Semi?this.emitNumericEntity(!0):a(h)?(this.entityResult=this.entityResult*10+(h-n.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},d.prototype.stateInHexEntity=function(h){h===n.Semi?this.emitNumericEntity(!0):a(h)?(this.entityResult=this.entityResult*16+(h-n.Zero),this.entityExcess++):o(h)?(this.entityResult=this.entityResult*16+((h|32)-n.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},d.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},d.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},d.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},d.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);this.state===r.Text?this.stateText(h):this.state===r.SpecialStartSequence?this.stateSpecialStartSequence(h):this.state===r.InSpecialTag?this.stateInSpecialTag(h):this.state===r.CDATASequence?this.stateCDATASequence(h):this.state===r.InAttributeValueDq?this.stateInAttributeValueDoubleQuotes(h):this.state===r.InAttributeName?this.stateInAttributeName(h):this.state===r.InCommentLike?this.stateInCommentLike(h):this.state===r.InSpecialComment?this.stateInSpecialComment(h):this.state===r.BeforeAttributeName?this.stateBeforeAttributeName(h):this.state===r.InTagName?this.stateInTagName(h):this.state===r.InClosingTagName?this.stateInClosingTagName(h):this.state===r.BeforeTagName?this.stateBeforeTagName(h):this.state===r.AfterAttributeName?this.stateAfterAttributeName(h):this.state===r.InAttributeValueSq?this.stateInAttributeValueSingleQuotes(h):this.state===r.BeforeAttributeValue?this.stateBeforeAttributeValue(h):this.state===r.BeforeClosingTagName?this.stateBeforeClosingTagName(h):this.state===r.AfterClosingTagName?this.stateAfterClosingTagName(h):this.state===r.BeforeSpecialS?this.stateBeforeSpecialS(h):this.state===r.InAttributeValueNq?this.stateInAttributeValueNoQuotes(h):this.state===r.InSelfClosingTag?this.stateInSelfClosingTag(h):this.state===r.InDeclaration?this.stateInDeclaration(h):this.state===r.BeforeDeclaration?this.stateBeforeDeclaration(h):this.state===r.BeforeComment?this.stateBeforeComment(h):this.state===r.InProcessingInstruction?this.stateInProcessingInstruction(h):this.state===r.InNamedEntity?this.stateInNamedEntity(h):this.state===r.BeforeEntity?this.stateBeforeEntity(h):this.state===r.InHexEntity?this.stateInHexEntity(h):this.state===r.InNumericEntity?this.stateInNumericEntity(h):this.stateBeforeNumericEntity(h),this.index++}this.cleanup()},d.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},d.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},d.prototype.emitPartial=function(h,g){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(h,g):this.cbs.ontext(h,g)},d.prototype.emitCodePoint=function(h){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},d}();e.default=f})(o6);var aY=Ue&&Ue.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),uY=Ue&&Ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),oY=Ue&&Ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&aY(t,e,n);return uY(t,e),t};Object.defineProperty(Fb,"__esModule",{value:!0});Fb.Parser=void 0;var ap=oY(o6),IA=Jh,Tc=new Set(["input","option","optgroup","select","button","datalist","textarea"]),St=new Set(["p"]),PA=new Set(["thead","tbody"]),jA=new Set(["dd","dt"]),LA=new Set(["rt","rp"]),lY=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",St],["h1",St],["h2",St],["h3",St],["h4",St],["h5",St],["h6",St],["select",Tc],["input",Tc],["output",Tc],["button",Tc],["datalist",Tc],["textarea",Tc],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",jA],["dt",jA],["address",St],["article",St],["aside",St],["blockquote",St],["details",St],["div",St],["dl",St],["fieldset",St],["figcaption",St],["figure",St],["footer",St],["form",St],["header",St],["hr",St],["main",St],["nav",St],["ol",St],["pre",St],["section",St],["table",St],["ul",St],["rt",LA],["rp",LA],["tbody",PA],["tfoot",PA]]),cY=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),zA=new Set(["math","svg"]),BA=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),fY=/\s|\//,dY=function(){function e(t,n){n===void 0&&(n={});var r,i,s,a,u;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.lowerCaseTagNames=(r=n.lowerCaseTags)!==null&&r!==void 0?r:!n.xmlMode,this.lowerCaseAttributeNames=(i=n.lowerCaseAttributeNames)!==null&&i!==void 0?i:!n.xmlMode,this.tokenizer=new((s=n.Tokenizer)!==null&&s!==void 0?s:ap.default)(this.options,this),(u=(a=this.cbs).onparserinit)===null||u===void 0||u.call(a,this)}return e.prototype.ontext=function(t,n){var r,i,s=this.getSlice(t,n);this.endIndex=n-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,s),this.startIndex=n},e.prototype.ontextentity=function(t){var n,r,i=this.tokenizer.getSectionStart();this.endIndex=i-1,(r=(n=this.cbs).ontext)===null||r===void 0||r.call(n,(0,IA.fromCodePoint)(t)),this.startIndex=i},e.prototype.isVoidElement=function(t){return!this.options.xmlMode&&cY.has(t)},e.prototype.onopentagname=function(t,n){this.endIndex=n;var r=this.getSlice(t,n);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)},e.prototype.emitOpenTag=function(t){var n,r,i,s;this.openTagStart=this.startIndex,this.tagname=t;var a=!this.options.xmlMode&&lY.get(t);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){var u=this.stack.pop();(r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,u,!0)}this.isVoidElement(t)||(this.stack.push(t),zA.has(t)?this.foreignContext.push(!0):BA.has(t)&&this.foreignContext.push(!1)),(s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,t),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(t){var n,r;this.startIndex=this.openTagStart,this.attribs&&((r=(n=this.cbs).onopentag)===null||r===void 0||r.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1},e.prototype.onclosetag=function(t,n){var r,i,s,a,u,o;this.endIndex=n;var l=this.getSlice(t,n);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(zA.has(l)||BA.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((i=(r=this.cbs).onopentagname)===null||i===void 0||i.call(r,"br"),(a=(s=this.cbs).onopentag)===null||a===void 0||a.call(s,"br",{},!0),(o=(u=this.cbs).onclosetag)===null||o===void 0||o.call(u,"br",!1));else{var c=this.stack.lastIndexOf(l);if(c!==-1)if(this.cbs.onclosetag)for(var f=this.stack.length-c;f--;)this.cbs.onclosetag(this.stack.pop(),f!==0);else this.stack.length=c;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1},e.prototype.onselfclosingtag=function(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)},e.prototype.closeCurrentTag=function(t){var n,r,i=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===i&&((r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,i,!t),this.stack.pop())},e.prototype.onattribname=function(t,n){this.startIndex=t;var r=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r},e.prototype.onattribdata=function(t,n){this.attribvalue+=this.getSlice(t,n)},e.prototype.onattribentity=function(t){this.attribvalue+=(0,IA.fromCodePoint)(t)},e.prototype.onattribend=function(t,n){var r,i;this.endIndex=n,(i=(r=this.cbs).onattribute)===null||i===void 0||i.call(r,this.attribname,this.attribvalue,t===ap.QuoteType.Double?'"':t===ap.QuoteType.Single?"'":t===ap.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(t){var n=t.search(fY),r=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(t,n){this.endIndex=n;var r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(r);this.cbs.onprocessinginstruction("!".concat(i),"!".concat(r))}this.startIndex=n+1},e.prototype.onprocessinginstruction=function(t,n){this.endIndex=n;var r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(r);this.cbs.onprocessinginstruction("?".concat(i),"?".concat(r))}this.startIndex=n+1},e.prototype.oncomment=function(t,n,r){var i,s,a,u;this.endIndex=n,(s=(i=this.cbs).oncomment)===null||s===void 0||s.call(i,this.getSlice(t,n-r)),(u=(a=this.cbs).oncommentend)===null||u===void 0||u.call(a),this.startIndex=n+1},e.prototype.oncdata=function(t,n,r){var i,s,a,u,o,l,c,f,d,h;this.endIndex=n;var g=this.getSlice(t,n-r);this.options.xmlMode||this.options.recognizeCDATA?((s=(i=this.cbs).oncdatastart)===null||s===void 0||s.call(i),(u=(a=this.cbs).ontext)===null||u===void 0||u.call(a,g),(l=(o=this.cbs).oncdataend)===null||l===void 0||l.call(o)):((f=(c=this.cbs).oncomment)===null||f===void 0||f.call(c,"[CDATA[".concat(g,"]]")),(h=(d=this.cbs).oncommentend)===null||h===void 0||h.call(d)),this.startIndex=n+1},e.prototype.onend=function(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)},e.prototype.reset=function(){var t,n,r,i;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(r=this.cbs).onparserinit)===null||i===void 0||i.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(t){this.reset(),this.end(t)},e.prototype.getSlice=function(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var r=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,n-this.bufferOffset);return r},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)},e.prototype.end=function(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(t){this.write(t)},e.prototype.done=function(t){this.end(t)},e}();Fb.Parser=dY;var ro={},nd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(nd);var Ke={},io=Ue&&Ue.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dh=Ue&&Ue.__assign||function(){return Dh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Dh.apply(this,arguments)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.cloneNode=Ke.hasChildren=Ke.isDocument=Ke.isDirective=Ke.isComment=Ke.isText=Ke.isCDATA=Ke.isTag=Ke.Element=Ke.Document=Ke.CDATA=Ke.NodeWithChildren=Ke.ProcessingInstruction=Ke.Comment=Ke.Text=Ke.DataNode=Ke.Node=void 0;var Ar=nd,f6=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),d6(this,t)},e}();Ke.Node=f6;var Rb=function(e){io(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(f6);Ke.DataNode=Rb;var PD=function(e){io(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ar.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Rb);Ke.Text=PD;var jD=function(e){io(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ar.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Rb);Ke.Comment=jD;var LD=function(e){io(t,e);function t(n,r){var i=e.call(this,r)||this;return i.name=n,i.type=Ar.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Rb);Ke.ProcessingInstruction=LD;var Ib=function(e){io(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(f6);Ke.NodeWithChildren=Ib;var zD=function(e){io(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ar.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Ib);Ke.CDATA=zD;var BD=function(e){io(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ar.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Ib);Ke.Document=BD;var UD=function(e){io(t,e);function t(n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=n==="script"?Ar.ElementType.Script:n==="style"?Ar.ElementType.Style:Ar.ElementType.Tag);var a=e.call(this,i)||this;return a.name=n,a.attribs=r,a.type=s,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,s;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[r]}})},enumerable:!1,configurable:!0}),t}(Ib);Ke.Element=UD;function qD(e){return(0,Ar.isTag)(e)}Ke.isTag=qD;function HD(e){return e.type===Ar.ElementType.CDATA}Ke.isCDATA=HD;function VD(e){return e.type===Ar.ElementType.Text}Ke.isText=VD;function GD(e){return e.type===Ar.ElementType.Comment}Ke.isComment=GD;function WD(e){return e.type===Ar.ElementType.Directive}Ke.isDirective=WD;function XD(e){return e.type===Ar.ElementType.Root}Ke.isDocument=XD;function hY(e){return Object.prototype.hasOwnProperty.call(e,"children")}Ke.hasChildren=hY;function d6(e,t){t===void 0&&(t=!1);var n;if(VD(e))n=new PD(e.data);else if(GD(e))n=new jD(e.data);else if(qD(e)){var r=t?S2(e.children):[],i=new UD(e.name,Dh({},e.attribs),r);r.forEach(function(o){return o.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=Dh({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=Dh({},e["x-attribsPrefix"])),n=i}else if(HD(e)){var r=t?S2(e.children):[],s=new zD(r);r.forEach(function(l){return l.parent=s}),n=s}else if(XD(e)){var r=t?S2(e.children):[],a=new BD(r);r.forEach(function(l){return l.parent=a}),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else if(WD(e)){var u=new LD(e.name,e.data);e["x-name"]!=null&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}Ke.cloneNode=d6;function S2(e){for(var t=e.map(function(r){return d6(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=Ue&&Ue.__createBinding||(Object.create?function(u,o,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(o,l);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(u,c,f)}:function(u,o,l,c){c===void 0&&(c=l),u[c]=o[l]}),n=Ue&&Ue.__exportStar||function(u,o){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&t(o,u,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=nd,i=Ke;n(Ke,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function u(o,l,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof l=="function"&&(c=l,l=s),typeof o=="object"&&(l=o,o=void 0),this.callback=o??null,this.options=l??s,this.elementCB=c??null}return u.prototype.onparserinit=function(o){this.parser=o},u.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(o){this.handleCallback(o)},u.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},u.prototype.onopentag=function(o,l){var c=this.options.xmlMode?r.ElementType.Tag:void 0,f=new i.Element(o,l,void 0,c);this.addNode(f),this.tagStack.push(f)},u.prototype.ontext=function(o){var l=this.lastNode;if(l&&l.type===r.ElementType.Text)l.data+=o,this.options.withEndIndices&&(l.endIndex=this.parser.endIndex);else{var c=new i.Text(o);this.addNode(c),this.lastNode=c}},u.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=o;return}var l=new i.Comment(o);this.addNode(l),this.lastNode=l},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var o=new i.Text(""),l=new i.CDATA([o]);this.addNode(l),o.parent=l,this.lastNode=o},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(o,l){var c=new i.ProcessingInstruction(o,l);this.addNode(c)},u.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},u.prototype.addNode=function(o){var l=this.tagStack[this.tagStack.length-1],c=l.children[l.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),l.children.push(o),c&&(o.prev=c,c.next=o),o.parent=l,this.lastNode=null},u}();e.DomHandler=a,e.default=a})(ro);var ux={},Wr={},q0={},YD={},bl={},h6={};Object.defineProperty(h6,"__esModule",{value:!0});function up(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}h6.default=new Map(up([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(up([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(up([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(up([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var zm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);e.getCodePoint=String.prototype.codePointAt!=null?function(i,s){return i.codePointAt(s)}:function(i,s){return(i.charCodeAt(s)&64512)===55296?(i.charCodeAt(s)-55296)*1024+i.charCodeAt(s+1)-56320+65536:i.charCodeAt(s)};function n(i){for(var s="",a=0,u;(u=e.xmlReplacer.exec(i))!==null;){var o=u.index,l=i.charCodeAt(o),c=t.get(l);c!==void 0?(s+=i.substring(a,o)+c,a=o+1):(s+="".concat(i.substring(a,o),"&#x").concat((0,e.getCodePoint)(i,o).toString(16),";"),a=e.xmlReplacer.lastIndex+=Number((l&64512)===55296))}return s+i.substr(a)}e.encodeXML=n,e.escape=n;function r(i,s){return function(u){for(var o,l=0,c="";o=i.exec(u);)l!==o.index&&(c+=u.substring(l,o.index)),c+=s.get(o[0].charCodeAt(0)),l=o.index+1;return c+u.substring(l)}}e.escapeUTF8=r(/[&<>'"]/g,t),e.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(zm);var gY=Ue&&Ue.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bl,"__esModule",{value:!0});bl.encodeNonAsciiHTML=bl.encodeHTML=void 0;var pY=gY(h6),ZD=zm,mY=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function bY(e){return QD(mY,e)}bl.encodeHTML=bY;function yY(e){return QD(ZD.xmlReplacer,e)}bl.encodeNonAsciiHTML=yY;function QD(e,t){for(var n="",r=0,i;(i=e.exec(t))!==null;){var s=i.index;n+=t.substring(r,s);var a=t.charCodeAt(s),u=pY.default.get(a);if(typeof u=="object"){if(s+1<t.length){var o=t.charCodeAt(s+1),l=typeof u.n=="number"?u.n===o?u.o:void 0:u.n.get(o);if(l!==void 0){n+=l,r=e.lastIndex+=1;continue}}u=u.v}if(u!==void 0)n+=u,r=s+1;else{var c=(0,ZD.getCodePoint)(t,s);n+="&#x".concat(c.toString(16),";"),r=e.lastIndex+=Number(c!==a)}}return n+t.substr(r)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.DecodingMode=e.EntityLevel=void 0;var t=Jh,n=bl,r=zm,i;(function(h){h[h.XML=0]="XML",h[h.HTML=1]="HTML"})(i=e.EntityLevel||(e.EntityLevel={}));var s;(function(h){h[h.Legacy=0]="Legacy",h[h.Strict=1]="Strict"})(s=e.DecodingMode||(e.DecodingMode={}));var a;(function(h){h[h.UTF8=0]="UTF8",h[h.ASCII=1]="ASCII",h[h.Extensive=2]="Extensive",h[h.Attribute=3]="Attribute",h[h.Text=4]="Text"})(a=e.EncodingMode||(e.EncodingMode={}));function u(h,g){g===void 0&&(g=i.XML);var p=typeof g=="number"?{level:g}:g;return p.level===i.HTML?p.mode===s.Strict?(0,t.decodeHTMLStrict)(h):(0,t.decodeHTML)(h):(0,t.decodeXML)(h)}e.decode=u;function o(h,g){g===void 0&&(g=i.XML);var p=typeof g=="number"?{level:g}:g;return p.level===i.HTML?p.mode===s.Legacy?(0,t.decodeHTML)(h):(0,t.decodeHTMLStrict)(h):(0,t.decodeXML)(h)}e.decodeStrict=o;function l(h,g){g===void 0&&(g=i.XML);var p=typeof g=="number"?{level:g}:g;return p.mode===a.UTF8?(0,r.escapeUTF8)(h):p.mode===a.Attribute?(0,r.escapeAttribute)(h):p.mode===a.Text?(0,r.escapeText)(h):p.level===i.HTML?p.mode===a.ASCII?(0,n.encodeNonAsciiHTML)(h):(0,n.encodeHTML)(h):(0,r.encodeXML)(h)}e.encode=l;var c=zm;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var f=bl;Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return f.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return f.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return f.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return f.encodeHTML}});var d=Jh;Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})})(YD);var gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.attributeNames=gf.elementNames=void 0;gf.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]}));gf.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var Vc=Ue&&Ue.__assign||function(){return Vc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Vc.apply(this,arguments)},vY=Ue&&Ue.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),_Y=Ue&&Ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),xY=Ue&&Ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&vY(t,e,n);return _Y(t,e),t};Object.defineProperty(q0,"__esModule",{value:!0});q0.render=void 0;var Ys=xY(nd),Bm=YD,JD=gf,wY=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function EY(e){return e.replace(/"/g,"&quot;")}function SY(e,t){var n;if(e){var r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?EY:t.xmlMode||t.encodeEntities!=="utf8"?Bm.encodeXML:Bm.escapeAttribute;return Object.keys(e).map(function(i){var s,a,u=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(a=JD.attributeNames.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&u===""?i:"".concat(i,'="').concat(r(u),'"')}).join(" ")}}var UA=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Pb(e,t){t===void 0&&(t={});for(var n=("length"in e)?e:[e],r="",i=0;i<n.length;i++)r+=kY(n[i],t);return r}q0.render=Pb;q0.default=Pb;function kY(e,t){switch(e.type){case Ys.Root:return Pb(e.children,t);case Ys.Doctype:case Ys.Directive:return TY(e);case Ys.Comment:return NY(e);case Ys.CDATA:return DY(e);case Ys.Script:case Ys.Style:case Ys.Tag:return CY(e,t);case Ys.Text:return MY(e,t)}}var OY=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),AY=new Set(["svg","math"]);function CY(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=JD.elementNames.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&OY.has(e.parent.name)&&(t=Vc(Vc({},t),{xmlMode:!1}))),!t.xmlMode&&AY.has(e.name)&&(t=Vc(Vc({},t),{xmlMode:"foreign"}));var r="<".concat(e.name),i=SY(e.attribs,t);return i&&(r+=" ".concat(i)),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&UA.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=Pb(e.children,t)),(t.xmlMode||!UA.has(e.name))&&(r+="</".concat(e.name,">"))),r}function TY(e){return"<".concat(e.data,">")}function MY(e,t){var n,r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&wY.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?(0,Bm.encodeXML)(r):(0,Bm.escapeText)(r)),r}function DY(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}function NY(e){return"<!--".concat(e.data,"-->")}var $Y=Ue&&Ue.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.innerText=Wr.textContent=Wr.getText=Wr.getInnerHTML=Wr.getOuterHTML=void 0;var bs=ro,FY=$Y(q0),RY=nd;function KD(e,t){return(0,FY.default)(e,t)}Wr.getOuterHTML=KD;function IY(e,t){return(0,bs.hasChildren)(e)?e.children.map(function(n){return KD(n,t)}).join(""):""}Wr.getInnerHTML=IY;function sm(e){return Array.isArray(e)?e.map(sm).join(""):(0,bs.isTag)(e)?e.name==="br"?`
`:sm(e.children):(0,bs.isCDATA)(e)?sm(e.children):(0,bs.isText)(e)?e.data:""}Wr.getText=sm;function ox(e){return Array.isArray(e)?e.map(ox).join(""):(0,bs.hasChildren)(e)&&!(0,bs.isComment)(e)?ox(e.children):(0,bs.isText)(e)?e.data:""}Wr.textContent=ox;function lx(e){return Array.isArray(e)?e.map(lx).join(""):(0,bs.hasChildren)(e)&&(e.type===RY.ElementType.Tag||(0,bs.isCDATA)(e))?lx(e.children):(0,bs.isText)(e)?e.data:""}Wr.innerText=lx;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.prevElementSibling=bn.nextElementSibling=bn.getName=bn.hasAttrib=bn.getAttributeValue=bn.getSiblings=bn.getParent=bn.getChildren=void 0;var g6=ro;function eN(e){return(0,g6.hasChildren)(e)?e.children:[]}bn.getChildren=eN;function tN(e){return e.parent||null}bn.getParent=tN;function PY(e){var t,n,r=tN(e);if(r!=null)return eN(r);for(var i=[e],s=e.prev,a=e.next;s!=null;)i.unshift(s),t=s,s=t.prev;for(;a!=null;)i.push(a),n=a,a=n.next;return i}bn.getSiblings=PY;function jY(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}bn.getAttributeValue=jY;function LY(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}bn.hasAttrib=LY;function zY(e){return e.name}bn.getName=zY;function BY(e){for(var t,n=e.next;n!==null&&!(0,g6.isTag)(n);)t=n,n=t.next;return n}bn.nextElementSibling=BY;function UY(e){for(var t,n=e.prev;n!==null&&!(0,g6.isTag)(n);)t=n,n=t.prev;return n}bn.prevElementSibling=UY;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.prepend=xr.prependChild=xr.append=xr.appendChild=xr.replaceElement=xr.removeElement=void 0;function H0(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}xr.removeElement=H0;function qY(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var s=i.children;s[s.lastIndexOf(e)]=t,e.parent=null}}xr.replaceElement=qY;function HY(e,t){if(H0(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}xr.appendChild=HY;function VY(e,t){H0(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)}xr.append=VY;function GY(e,t){if(H0(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){var n=e.children[1];n.prev=t,t.next=n}else t.next=null}xr.prependChild=GY;function WY(e,t){H0(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}xr.prepend=WY;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.findAll=sr.existsOne=sr.findOne=sr.findOneChild=sr.find=sr.filter=void 0;var Kh=ro;function XY(e,t,n,r){return n===void 0&&(n=!0),r===void 0&&(r=1/0),Array.isArray(t)||(t=[t]),p6(e,t,n,r)}sr.filter=XY;function p6(e,t,n,r){for(var i=[],s=0,a=t;s<a.length;s++){var u=a[s];if(e(u)&&(i.push(u),--r<=0))break;if(n&&(0,Kh.hasChildren)(u)&&u.children.length>0){var o=p6(e,u.children,n,r);if(i.push.apply(i,o),r-=o.length,r<=0)break}}return i}sr.find=p6;function YY(e,t){return t.find(e)}sr.findOneChild=YY;function nN(e,t,n){n===void 0&&(n=!0);for(var r=null,i=0;i<t.length&&!r;i++){var s=t[i];if((0,Kh.isTag)(s))e(s)?r=s:n&&s.children.length>0&&(r=nN(e,s.children,!0));else continue}return r}sr.findOne=nN;function rN(e,t){return t.some(function(n){return(0,Kh.isTag)(n)&&(e(n)||n.children.length>0&&rN(e,n.children))})}sr.existsOne=rN;function ZY(e,t){for(var n,r=[],i=t.filter(Kh.isTag),s;s=i.shift();){var a=(n=s.children)===null||n===void 0?void 0:n.filter(Kh.isTag);a&&a.length>0&&i.unshift.apply(i,a),e(s)&&r.push(s)}return r}sr.findAll=ZY;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.getElementsByTagType=Xr.getElementsByTagName=Xr.getElementById=Xr.getElements=Xr.testElement=void 0;var Go=ro,jb=sr,Um={tag_name:function(e){return typeof e=="function"?function(t){return(0,Go.isTag)(t)&&e(t.name)}:e==="*"?Go.isTag:function(t){return(0,Go.isTag)(t)&&t.name===e}},tag_type:function(e){return typeof e=="function"?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return typeof e=="function"?function(t){return(0,Go.isText)(t)&&e(t.data)}:function(t){return(0,Go.isText)(t)&&t.data===e}}};function iN(e,t){return typeof t=="function"?function(n){return(0,Go.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,Go.isTag)(n)&&n.attribs[e]===t}}function QY(e,t){return function(n){return e(n)||t(n)}}function sN(e){var t=Object.keys(e).map(function(n){var r=e[n];return Object.prototype.hasOwnProperty.call(Um,n)?Um[n](r):iN(n,r)});return t.length===0?null:t.reduce(QY)}function JY(e,t){var n=sN(e);return n?n(t):!0}Xr.testElement=JY;function KY(e,t,n,r){r===void 0&&(r=1/0);var i=sN(e);return i?(0,jb.filter)(i,t,n,r):[]}Xr.getElements=KY;function eZ(e,t,n){return n===void 0&&(n=!0),Array.isArray(t)||(t=[t]),(0,jb.findOne)(iN("id",e),t,n)}Xr.getElementById=eZ;function tZ(e,t,n,r){return n===void 0&&(n=!0),r===void 0&&(r=1/0),(0,jb.filter)(Um.tag_name(e),t,n,r)}Xr.getElementsByTagName=tZ;function nZ(e,t,n,r){return n===void 0&&(n=!0),r===void 0&&(r=1/0),(0,jb.filter)(Um.tag_type(e),t,n,r)}Xr.getElementsByTagType=nZ;var aN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.DocumentPosition=e.removeSubsets=void 0;var t=ro;function n(a){for(var u=a.length;--u>=0;){var o=a[u];if(u>0&&a.lastIndexOf(o,u-1)>=0){a.splice(u,1);continue}for(var l=o.parent;l;l=l.parent)if(a.includes(l)){a.splice(u,1);break}}return a}e.removeSubsets=n;var r;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(r=e.DocumentPosition||(e.DocumentPosition={}));function i(a,u){var o=[],l=[];if(a===u)return 0;for(var c=(0,t.hasChildren)(a)?a:a.parent;c;)o.unshift(c),c=c.parent;for(c=(0,t.hasChildren)(u)?u:u.parent;c;)l.unshift(c),c=c.parent;for(var f=Math.min(o.length,l.length),d=0;d<f&&o[d]===l[d];)d++;if(d===0)return r.DISCONNECTED;var h=o[d-1],g=h.children,p=o[d],m=l[d];return g.indexOf(p)>g.indexOf(m)?h===u?r.FOLLOWING|r.CONTAINED_BY:r.FOLLOWING:h===a?r.PRECEDING|r.CONTAINS:r.PRECEDING}e.compareDocumentPosition=i;function s(a){return a=a.filter(function(u,o,l){return!l.includes(u,o+1)}),a.sort(function(u,o){var l=i(u,o);return l&r.PRECEDING?-1:l&r.FOLLOWING?1:0}),a}e.uniqueSort=s})(aN);var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0});Lb.getFeed=void 0;var rZ=Wr,V0=Xr;function iZ(e){var t=qm(lZ,e);return t?t.name==="feed"?sZ(t):aZ(t):null}Lb.getFeed=iZ;function sZ(e){var t,n=e.children,r={type:"atom",items:(0,V0.getElementsByTagName)("entry",n).map(function(a){var u,o=a.children,l={media:uN(o)};vr(l,"id","id",o),vr(l,"title","title",o);var c=(u=qm("link",o))===null||u===void 0?void 0:u.attribs.href;c&&(l.link=c);var f=Ko("summary",o)||Ko("content",o);f&&(l.description=f);var d=Ko("updated",o);return d&&(l.pubDate=new Date(d)),l})};vr(r,"id","id",n),vr(r,"title","title",n);var i=(t=qm("link",n))===null||t===void 0?void 0:t.attribs.href;i&&(r.link=i),vr(r,"description","subtitle",n);var s=Ko("updated",n);return s&&(r.updated=new Date(s)),vr(r,"author","email",n,!0),r}function aZ(e){var t,n,r=(n=(t=qm("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],i={type:e.name.substr(0,3),id:"",items:(0,V0.getElementsByTagName)("item",e.children).map(function(a){var u=a.children,o={media:uN(u)};vr(o,"id","guid",u),vr(o,"title","title",u),vr(o,"link","link",u),vr(o,"description","description",u);var l=Ko("pubDate",u);return l&&(o.pubDate=new Date(l)),o})};vr(i,"title","title",r),vr(i,"link","link",r),vr(i,"description","description",r);var s=Ko("lastBuildDate",r);return s&&(i.updated=new Date(s)),vr(i,"author","managingEditor",r,!0),i}var uZ=["url","type","lang"],oZ=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function uN(e){return(0,V0.getElementsByTagName)("media:content",e).map(function(t){for(var n=t.attribs,r={medium:n.medium,isDefault:!!n.isDefault},i=0,s=uZ;i<s.length;i++){var a=s[i];n[a]&&(r[a]=n[a])}for(var u=0,o=oZ;u<o.length;u++){var a=o[u];n[a]&&(r[a]=parseInt(n[a],10))}return n.expression&&(r.expression=n.expression),r})}function qm(e,t){return(0,V0.getElementsByTagName)(e,t,!0,1)[0]}function Ko(e,t,n){return n===void 0&&(n=!1),(0,rZ.textContent)((0,V0.getElementsByTagName)(e,t,n,1)).trim()}function vr(e,t,n,r,i){i===void 0&&(i=!1);var s=Ko(n,r,i);s&&(e[t]=s)}function lZ(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}(function(e){var t=Ue&&Ue.__createBinding||(Object.create?function(i,s,a,u){u===void 0&&(u=a);var o=Object.getOwnPropertyDescriptor(s,a);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,u,o)}:function(i,s,a,u){u===void 0&&(u=a),i[u]=s[a]}),n=Ue&&Ue.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(Wr,e),n(bn,e),n(xr,e),n(sr,e),n(Xr,e),n(aN,e),n(Lb,e);var r=ro;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return r.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return r.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return r.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return r.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return r.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return r.hasChildren}})})(ux);(function(e){var t=Ue&&Ue.__createBinding||(Object.create?function(g,p,m,b){b===void 0&&(b=m);var y=Object.getOwnPropertyDescriptor(p,m);(!y||("get"in y?!p.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return p[m]}}),Object.defineProperty(g,b,y)}:function(g,p,m,b){b===void 0&&(b=m),g[b]=p[m]}),n=Ue&&Ue.__setModuleDefault||(Object.create?function(g,p){Object.defineProperty(g,"default",{enumerable:!0,value:p})}:function(g,p){g.default=p}),r=Ue&&Ue.__importStar||function(g){if(g&&g.__esModule)return g;var p={};if(g!=null)for(var m in g)m!=="default"&&Object.prototype.hasOwnProperty.call(g,m)&&t(p,g,m);return n(p,g),p},i=Ue&&Ue.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultHandler=e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DomHandler=e.Parser=void 0;var s=Fb;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return s.Parser}});var a=ro;Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return a.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return a.DomHandler}});function u(g,p){var m=new a.DomHandler(void 0,p);return new s.Parser(m,p).end(g),m.root}e.parseDocument=u;function o(g,p){return u(g,p).children}e.parseDOM=o;function l(g,p,m){var b=new a.DomHandler(g,p,m);return new s.Parser(b,p)}e.createDomStream=l;var c=o6;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(c).default}});var f=r(nd);e.ElementType=f;var d=ux;Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return d.getFeed}});function h(g,p){return p===void 0&&(p={xmlMode:!0}),(0,d.getFeed)(o(g,p))}e.parseFeed=h,e.DomUtils=r(ux)})(ID);var cZ=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},m6={};Object.defineProperty(m6,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function qA(e){return Object.prototype.toString.call(e)==="[object Object]"}function fZ(e){var t,n;return qA(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(qA(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}m6.isPlainObject=fZ;var dZ=function(t){return hZ(t)&&!gZ(t)};function hZ(e){return!!e&&typeof e=="object"}function gZ(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||bZ(e)}var pZ=typeof Symbol=="function"&&Symbol.for,mZ=pZ?Symbol.for("react.element"):60103;function bZ(e){return e.$$typeof===mZ}function yZ(e){return Array.isArray(e)?[]:{}}function e0(e,t){return t.clone!==!1&&t.isMergeableObject(e)?pf(yZ(e),e,t):e}function vZ(e,t,n){return e.concat(t).map(function(r){return e0(r,n)})}function _Z(e,t){if(!t.customMerge)return pf;var n=t.customMerge(e);return typeof n=="function"?n:pf}function xZ(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function HA(e){return Object.keys(e).concat(xZ(e))}function oN(e,t){try{return t in e}catch{return!1}}function wZ(e,t){return oN(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function EZ(e,t,n){var r={};return n.isMergeableObject(e)&&HA(e).forEach(function(i){r[i]=e0(e[i],n)}),HA(t).forEach(function(i){wZ(e,i)||(oN(e,i)&&n.isMergeableObject(t[i])?r[i]=_Z(i,n)(e[i],t[i],n):r[i]=e0(t[i],n))}),r}function pf(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||vZ,n.isMergeableObject=n.isMergeableObject||dZ,n.cloneUnlessOtherwiseSpecified=e0;var r=Array.isArray(t),i=Array.isArray(e),s=r===i;return s?r?n.arrayMerge(e,t,n):EZ(e,t,n):e0(t,n)}pf.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return pf(r,i,n)},{})};var SZ=pf,kZ=SZ,cx={},OZ={get exports(){return cx},set exports(e){cx=e}};(function(e){(function(t,n){e.exports?e.exports=n():t.parseSrcset=n()})(Ue,function(){return function(t){function n(_){return _===" "||_==="	"||_===`
`||_==="\f"||_==="\r"}function r(_){var x,E=_.exec(t.substring(m));if(E)return x=E[0],m+=x.length,x}for(var i=t.length,s=/^[ \t\n\r\u000c]+/,a=/^[, \t\n\r\u000c]+/,u=/^[^ \t\n\r\u000c]+/,o=/[,]+$/,l=/^\d+$/,c=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f,d,h,g,p,m=0,b=[];;){if(r(a),m>=i)return b;f=r(u),d=[],f.slice(-1)===","?(f=f.replace(o,""),v()):y()}function y(){for(r(s),h="",g="in descriptor";;){if(p=t.charAt(m),g==="in descriptor")if(n(p))h&&(d.push(h),h="",g="after descriptor");else if(p===","){m+=1,h&&d.push(h),v();return}else if(p==="(")h=h+p,g="in parens";else if(p===""){h&&d.push(h),v();return}else h=h+p;else if(g==="in parens")if(p===")")h=h+p,g="in descriptor";else if(p===""){d.push(h),v();return}else h=h+p;else if(g==="after descriptor"&&!n(p))if(p===""){v();return}else g="in descriptor",m-=1;m+=1}}function v(){var _=!1,x,E,w,k,A={},N,O,$,C,T;for(k=0;k<d.length;k++)N=d[k],O=N[N.length-1],$=N.substring(0,N.length-1),C=parseInt($,10),T=parseFloat($),l.test($)&&O==="w"?((x||E)&&(_=!0),C===0?_=!0:x=C):c.test($)&&O==="x"?((x||E||w)&&(_=!0),T<0?_=!0:E=T):l.test($)&&O==="h"?((w||E)&&(_=!0),C===0?_=!0:w=C):_=!0;_?console&&console.log&&console.log("Invalid srcset descriptor found in '"+t+"' at '"+N+"'."):(A.url=f,x&&(A.w=x),E&&(A.d=E),w&&(A.h=w),b.push(A))}}})})(OZ);var Hm={},AZ={get exports(){return Hm},set exports(e){Hm=e}},Lt=String,lN=function(){return{isColorSupported:!1,reset:Lt,bold:Lt,dim:Lt,italic:Lt,underline:Lt,inverse:Lt,hidden:Lt,strikethrough:Lt,black:Lt,red:Lt,green:Lt,yellow:Lt,blue:Lt,magenta:Lt,cyan:Lt,white:Lt,gray:Lt,bgBlack:Lt,bgRed:Lt,bgGreen:Lt,bgYellow:Lt,bgBlue:Lt,bgMagenta:Lt,bgCyan:Lt,bgWhite:Lt}};AZ.exports=lN();Hm.createColors=lN;const CZ={},TZ=Object.freeze(Object.defineProperty({__proto__:null,default:CZ},Symbol.toStringTag,{value:"Module"})),Zi=AM(TZ);let VA=Hm,GA=Zi,Vm=class extends Error{constructor(t,n,r,i,s,a){super(t),this.name="CssSyntaxError",this.reason=t,s&&(this.file=s),i&&(this.source=i),a&&(this.plugin=a),typeof n<"u"&&typeof r<"u"&&(typeof n=="number"?(this.line=n,this.column=r):(this.line=n.line,this.column=n.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Vm)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(t){if(!this.source)return"";let n=this.source;t==null&&(t=VA.isColorSupported),GA&&t&&(n=GA(n));let r=n.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,r.length),a=String(s).length,u,o;if(t){let{bold:l,red:c,gray:f}=VA.createColors(!0);u=d=>l(c(d)),o=d=>f(d)}else u=o=l=>l;return r.slice(i,s).map((l,c)=>{let f=i+1+c,d=" "+(" "+f).slice(-a)+" | ";if(f===this.line){let h=o(d.replace(/\d/g," "))+l.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+o(d)+l+`
 `+h+u("^")}return" "+o(d)+l}).join(`
`)}toString(){let t=this.showSourceCode();return t&&(t=`

`+t+`
`),this.name+": "+this.message+t}};var b6=Vm;Vm.default=Vm;var G0={};G0.isClean=Symbol("isClean");G0.my=Symbol("my");const WA={colon:": ",indent:"    ",beforeDecl:`
`,beforeRule:`
`,beforeOpen:" ",beforeClose:`
`,beforeComment:`
`,after:`
`,emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};function MZ(e){return e[0].toUpperCase()+e.slice(1)}let fx=class{constructor(t){this.builder=t}stringify(t,n){if(!this[t.type])throw new Error("Unknown AST node type "+t.type+". Maybe you need to change PostCSS stringifier.");this[t.type](t,n)}document(t){this.body(t)}root(t){this.body(t),t.raws.after&&this.builder(t.raws.after)}comment(t){let n=this.raw(t,"left","commentLeft"),r=this.raw(t,"right","commentRight");this.builder("/*"+n+t.text+r+"*/",t)}decl(t,n){let r=this.raw(t,"between","colon"),i=t.prop+r+this.rawValue(t,"value");t.important&&(i+=t.raws.important||" !important"),n&&(i+=";"),this.builder(i,t)}rule(t){this.block(t,this.rawValue(t,"selector")),t.raws.ownSemicolon&&this.builder(t.raws.ownSemicolon,t,"end")}atrule(t,n){let r="@"+t.name,i=t.params?this.rawValue(t,"params"):"";if(typeof t.raws.afterName<"u"?r+=t.raws.afterName:i&&(r+=" "),t.nodes)this.block(t,r+i);else{let s=(t.raws.between||"")+(n?";":"");this.builder(r+i+s,t)}}body(t){let n=t.nodes.length-1;for(;n>0&&t.nodes[n].type==="comment";)n-=1;let r=this.raw(t,"semicolon");for(let i=0;i<t.nodes.length;i++){let s=t.nodes[i],a=this.raw(s,"before");a&&this.builder(a),this.stringify(s,n!==i||r)}}block(t,n){let r=this.raw(t,"between","beforeOpen");this.builder(n+r+"{",t,"start");let i;t.nodes&&t.nodes.length?(this.body(t),i=this.raw(t,"after")):i=this.raw(t,"after","emptyBody"),i&&this.builder(i),this.builder("}",t,"end")}raw(t,n,r){let i;if(r||(r=n),n&&(i=t.raws[n],typeof i<"u"))return i;let s=t.parent;if(r==="before"&&(!s||s.type==="root"&&s.first===t||s&&s.type==="document"))return"";if(!s)return WA[r];let a=t.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[r]<"u")return a.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(t,r);{let u="raw"+MZ(r);this[u]?i=this[u](a,t):a.walk(o=>{if(i=o.raws[n],typeof i<"u")return!1})}return typeof i>"u"&&(i=WA[r]),a.rawCache[r]=i,i}rawSemicolon(t){let n;return t.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(n=r.raws.semicolon,typeof n<"u"))return!1}),n}rawEmptyBody(t){let n;return t.walk(r=>{if(r.nodes&&r.nodes.length===0&&(n=r.raws.after,typeof n<"u"))return!1}),n}rawIndent(t){if(t.raws.indent)return t.raws.indent;let n;return t.walk(r=>{let i=r.parent;if(i&&i!==t&&i.parent&&i.parent===t&&typeof r.raws.before<"u"){let s=r.raws.before.split(`
`);return n=s[s.length-1],n=n.replace(/\S/g,""),!1}}),n}rawBeforeComment(t,n){let r;return t.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(n,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(t,n){let r;return t.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(n,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeRule(t){let n;return t.walk(r=>{if(r.nodes&&(r.parent!==t||t.first!==r)&&typeof r.raws.before<"u")return n=r.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeClose(t){let n;return t.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return n=r.raws.after,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(t){let n;return t.walk(r=>{if(r.type!=="decl"&&(n=r.raws.between,typeof n<"u"))return!1}),n}rawColon(t){let n;return t.walkDecls(r=>{if(typeof r.raws.between<"u")return n=r.raws.between.replace(/[^\s:]/g,""),!1}),n}beforeAfter(t,n){let r;t.type==="decl"?r=this.raw(t,null,"beforeDecl"):t.type==="comment"?r=this.raw(t,null,"beforeComment"):n==="before"?r=this.raw(t,null,"beforeRule"):r=this.raw(t,null,"beforeClose");let i=t.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(r.includes(`
`)){let a=this.raw(t,null,"indent");if(a.length)for(let u=0;u<s;u++)r+=a}return r}rawValue(t,n){let r=t[n],i=t.raws[n];return i&&i.value===r?i.raw:r}};var cN=fx;fx.default=fx;let DZ=cN;function dx(e,t){new DZ(t).stringify(e)}var zb=dx;dx.default=dx;let{isClean:op,my:NZ}=G0,$Z=b6,FZ=cN,RZ=zb;function hx(e,t){let n=new e.constructor;for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r)||r==="proxyCache")continue;let i=e[r],s=typeof i;r==="parent"&&s==="object"?t&&(n[r]=t):r==="source"?n[r]=i:Array.isArray(i)?n[r]=i.map(a=>hx(a,n)):(s==="object"&&i!==null&&(i=hx(i)),n[r]=i)}return n}let gx=class{constructor(t={}){this.raws={},this[op]=!1,this[NZ]=!0;for(let n in t)if(n==="nodes"){this.nodes=[];for(let r of t[n])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[n]=t[n]}error(t,n={}){if(this.source){let{start:r,end:i}=this.rangeBy(n);return this.source.input.error(t,{line:r.line,column:r.column},{line:i.line,column:i.column},n)}return new $Z(t)}warn(t,n,r){let i={node:this};for(let s in r)i[s]=r[s];return t.warn(n,i)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(t=RZ){t.stringify&&(t=t.stringify);let n="";return t(this,r=>{n+=r}),n}assign(t={}){for(let n in t)this[n]=t[n];return this}clone(t={}){let n=hx(this);for(let r in t)n[r]=t[r];return n}cloneBefore(t={}){let n=this.clone(t);return this.parent.insertBefore(this,n),n}cloneAfter(t={}){let n=this.clone(t);return this.parent.insertAfter(this,n),n}replaceWith(...t){if(this.parent){let n=this,r=!1;for(let i of t)i===this?r=!0:r?(this.parent.insertAfter(n,i),n=i):this.parent.insertBefore(n,i);r||this.remove()}return this}next(){if(!this.parent)return;let t=this.parent.index(this);return this.parent.nodes[t+1]}prev(){if(!this.parent)return;let t=this.parent.index(this);return this.parent.nodes[t-1]}before(t){return this.parent.insertBefore(this,t),this}after(t){return this.parent.insertAfter(this,t),this}root(){let t=this;for(;t.parent&&t.parent.type!=="document";)t=t.parent;return t}raw(t,n){return new FZ().raw(this,t,n)}cleanRaws(t){delete this.raws.before,delete this.raws.after,t||delete this.raws.between}toJSON(t,n){let r={},i=n==null;n=n||new Map;let s=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let u=this[a];if(Array.isArray(u))r[a]=u.map(o=>typeof o=="object"&&o.toJSON?o.toJSON(null,n):o);else if(typeof u=="object"&&u.toJSON)r[a]=u.toJSON(null,n);else if(a==="source"){let o=n.get(u.input);o==null&&(o=s,n.set(u.input,s),s++),r[a]={inputId:o,start:u.start,end:u.end}}else r[a]=u}return i&&(r.inputs=[...n.keys()].map(a=>a.toJSON())),r}positionInside(t){let n=this.toString(),r=this.source.start.column,i=this.source.start.line;for(let s=0;s<t;s++)n[s]===`
`?(r=1,i+=1):r+=1;return{line:i,column:r}}positionBy(t){let n=this.source.start;if(t.index)n=this.positionInside(t.index);else if(t.word){let r=this.toString().indexOf(t.word);r!==-1&&(n=this.positionInside(r))}return n}rangeBy(t){let n={line:this.source.start.line,column:this.source.start.column},r=this.source.end?{line:this.source.end.line,column:this.source.end.column+1}:{line:n.line,column:n.column+1};if(t.word){let i=this.toString().indexOf(t.word);i!==-1&&(n=this.positionInside(i),r=this.positionInside(i+t.word.length))}else t.start?n={line:t.start.line,column:t.start.column}:t.index&&(n=this.positionInside(t.index)),t.end?r={line:t.end.line,column:t.end.column}:t.endIndex?r=this.positionInside(t.endIndex):t.index&&(r=this.positionInside(t.index+1));return(r.line<n.line||r.line===n.line&&r.column<=n.column)&&(r={line:n.line,column:n.column+1}),{start:n,end:r}}getProxyProcessor(){return{set(t,n,r){return t[n]===r||(t[n]=r,(n==="prop"||n==="value"||n==="name"||n==="params"||n==="important"||n==="text")&&t.markDirty()),!0},get(t,n){return n==="proxyOf"?t:n==="root"?()=>t.root().toProxy():t[n]}}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(t){if(t.postcssNode=this,t.stack&&this.source&&/\n\s{4}at /.test(t.stack)){let n=this.source;t.stack=t.stack.replace(/\n\s{4}at /,`$&${n.input.from}:${n.start.line}:${n.start.column}$&`)}return t}markDirty(){if(this[op]){this[op]=!1;let t=this;for(;t=t.parent;)t[op]=!1}}get proxyOf(){return this}};var Bb=gx;gx.default=gx;let IZ=Bb,px=class extends IZ{constructor(t){t&&typeof t.value<"u"&&typeof t.value!="string"&&(t={...t,value:String(t.value)}),super(t),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var Ub=px;px.default=px;let PZ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",jZ=(e,t=21)=>(n=t)=>{let r="",i=n;for(;i--;)r+=e[Math.random()*e.length|0];return r},LZ=(e=21)=>{let t="",n=e;for(;n--;)t+=PZ[Math.random()*64|0];return t};const zZ=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:jZ,nanoid:LZ},Symbol.toStringTag,{value:"Module"})),BZ=AM(zZ);let{SourceMapConsumer:XA,SourceMapGenerator:YA}=Zi,{existsSync:UZ,readFileSync:qZ}=Zi,{dirname:k2,join:HZ}=Zi;function VZ(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let mx=class{constructor(t,n){if(n.map===!1)return;this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:");let r=n.map?n.map.prev:void 0,i=this.loadMap(n.from,r);!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=k2(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new XA(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(t,n){return t?t.substr(0,n.length)===n:!1}getAnnotationURL(t){return t.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(t){let n=t.match(/\/\*\s*# sourceMappingURL=/gm);if(!n)return;let r=t.lastIndexOf(n.pop()),i=t.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(t.substring(r,i)))}decodeInline(t){let n=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(i.test(t)||s.test(t))return decodeURIComponent(t.substr(RegExp.lastMatch.length));if(n.test(t)||r.test(t))return VZ(t.substr(RegExp.lastMatch.length));let a=t.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}loadFile(t){if(this.root=k2(t),UZ(t))return this.mapFile=t,qZ(t,"utf-8").toString().trim()}loadMap(t,n){if(n===!1)return!1;if(n){if(typeof n=="string")return n;if(typeof n=="function"){let r=n(t);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(n instanceof XA)return YA.fromSourceMap(n).toString();if(n instanceof YA)return n.toString();if(this.isMap(n))return JSON.stringify(n);throw new Error("Unsupported previous source map format: "+n.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return t&&(r=HZ(k2(t),r)),this.loadFile(r)}}}isMap(t){return typeof t!="object"?!1:typeof t.mappings=="string"||typeof t._mappings=="string"||Array.isArray(t.sections)}};var fN=mx;mx.default=mx;let{SourceMapConsumer:GZ,SourceMapGenerator:WZ}=Zi,{fileURLToPath:ZA,pathToFileURL:lp}=Zi,{resolve:bx,isAbsolute:yx}=Zi,{nanoid:XZ}=BZ,O2=Zi,QA=b6,YZ=fN,A2=Symbol("fromOffsetCache"),ZZ=Boolean(GZ&&WZ),JA=Boolean(bx&&yx),Gm=class{constructor(t,n={}){if(t===null||typeof t>"u"||typeof t=="object"&&!t.toString)throw new Error(`PostCSS received ${t} instead of CSS string`);if(this.css=t.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!JA||/^\w+:\/\//.test(n.from)||yx(n.from)?this.file=n.from:this.file=bx(n.from)),JA&&ZZ){let r=new YZ(this.css,n);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+XZ(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(t){let n,r;if(this[A2])r=this[A2];else{let s=this.css.split(`
`);r=new Array(s.length);let a=0;for(let u=0,o=s.length;u<o;u++)r[u]=a,a+=s[u].length+1;this[A2]=r}n=r[r.length-1];let i=0;if(t>=n)i=r.length-1;else{let s=r.length-2,a;for(;i<s;)if(a=i+(s-i>>1),t<r[a])s=a-1;else if(t>=r[a+1])i=a+1;else{i=a;break}}return{line:i+1,col:t-r[i]+1}}error(t,n,r,i={}){let s,a,u;if(n&&typeof n=="object"){let l=n,c=r;if(typeof l.offset=="number"){let f=this.fromOffset(l.offset);n=f.line,r=f.col}else n=l.line,r=l.column;if(typeof c.offset=="number"){let f=this.fromOffset(c.offset);a=f.line,u=f.col}else a=c.line,u=c.column}else if(!r){let l=this.fromOffset(n);n=l.line,r=l.col}let o=this.origin(n,r,a,u);return o?s=new QA(t,o.endLine===void 0?o.line:{line:o.line,column:o.column},o.endLine===void 0?o.column:{line:o.endLine,column:o.endColumn},o.source,o.file,i.plugin):s=new QA(t,a===void 0?n:{line:n,column:r},a===void 0?r:{line:a,column:u},this.css,this.file,i.plugin),s.input={line:n,column:r,endLine:a,endColumn:u,source:this.css},this.file&&(lp&&(s.input.url=lp(this.file).toString()),s.input.file=this.file),s}origin(t,n,r,i){if(!this.map)return!1;let s=this.map.consumer(),a=s.originalPositionFor({line:t,column:n});if(!a.source)return!1;let u;typeof r=="number"&&(u=s.originalPositionFor({line:r,column:i}));let o;yx(a.source)?o=lp(a.source):o=new URL(a.source,this.map.consumer().sourceRoot||lp(this.map.mapFile));let l={url:o.toString(),line:a.line,column:a.column,endLine:u&&u.line,endColumn:u&&u.column};if(o.protocol==="file:")if(ZA)l.file=ZA(o);else throw new Error("file: protocol is not available in this PostCSS build");let c=s.sourceContentFor(a.source);return c&&(l.source=c),l}mapResolve(t){return/^\w+:\/\//.test(t)?t:bx(this.map.consumer().sourceRoot||this.map.root||".",t)}get from(){return this.file||this.id}toJSON(){let t={};for(let n of["hasBOM","css","file","id"])this[n]!=null&&(t[n]=this[n]);return this.map&&(t.map={...this.map},t.map.consumerCache&&(t.map.consumerCache=void 0)),t}};var qb=Gm;Gm.default=Gm;O2&&O2.registerInput&&O2.registerInput(Gm);let{SourceMapConsumer:dN,SourceMapGenerator:am}=Zi,{dirname:um,resolve:hN,relative:gN,sep:pN}=Zi,{pathToFileURL:KA}=Zi,QZ=qb,JZ=Boolean(dN&&am),KZ=Boolean(um&&hN&&gN&&pN),eQ=class{constructor(t,n,r,i){this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.css=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(t=>{if(t.source&&t.source.input.map){let n=t.source.input.map;this.previousMaps.includes(n)||this.previousMaps.push(n)}});else{let t=new QZ(this.css,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let t=this.mapOpts.annotation;return typeof t<"u"&&t!==!0?!1:this.previous().length?this.previous().some(n=>n.inline):!0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(t=>t.withContent()):!0}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let t;for(let n=this.root.nodes.length-1;n>=0;n--)t=this.root.nodes[n],t.type==="comment"&&t.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(n)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}setSourcesContent(){let t={};if(this.root)this.root.walk(n=>{if(n.source){let r=n.source.input.from;if(r&&!t[r]){t[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,n.source.input.css)}}});else if(this.css){let n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}applyPrevMaps(){for(let t of this.previous()){let n=this.toUrl(this.path(t.file)),r=t.root||um(t.file),i;this.mapOpts.sourcesContent===!1?(i=new dN(t.text),i.sourcesContent&&(i.sourcesContent=i.sourcesContent.map(()=>null))):i=t.consumer(),this.map.applySourceMap(i,n,this.toUrl(this.path(r)))}}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(t=>t.annotation):!0}toBase64(t){return Buffer?Buffer.from(t).toString("base64"):window.btoa(unescape(encodeURIComponent(t)))}addAnnotation(){let t;this.isInline()?t="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?t=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?t=this.mapOpts.annotation(this.opts.to,this.root):t=this.outputFile()+".map";let n=`
`;this.css.includes(`\r
`)&&(n=`\r
`),this.css+=n+"/*# sourceMappingURL="+t+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let t=this.previous()[0].consumer();t.file=this.outputFile(),this.map=am.fromSourceMap(t)}else this.map=new am({file:this.outputFile()}),this.map.addMapping({source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>",generated:{line:1,column:0},original:{line:1,column:0}});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(t){if(t.indexOf("<")===0||/^\w+:\/\//.test(t)||this.mapOpts.absolute)return t;let n=this.opts.to?um(this.opts.to):".";return typeof this.mapOpts.annotation=="string"&&(n=um(hN(n,this.mapOpts.annotation))),t=gN(n,t),t}toUrl(t){return pN==="\\"&&(t=t.replace(/\\/g,"/")),encodeURI(t).replace(/[#?]/g,encodeURIComponent)}toFileUrl(t){if(KA)return KA(t).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}sourcePath(t){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(t.source.input.from):this.toUrl(this.path(t.source.input.from))}generateString(){this.css="",this.map=new am({file:this.outputFile()});let t=1,n=1,r="<no source>",i={source:"",generated:{line:0,column:0},original:{line:0,column:0}},s,a;this.stringify(this.root,(u,o,l)=>{if(this.css+=u,o&&l!=="end"&&(i.generated.line=t,i.generated.column=n-1,o.source&&o.source.start?(i.source=this.sourcePath(o),i.original.line=o.source.start.line,i.original.column=o.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),s=u.match(/\n/g),s?(t+=s.length,a=u.lastIndexOf(`
`),n=u.length-a):n+=u.length,o&&l!=="start"){let c=o.parent||{raws:{}};(!(o.type==="decl"||o.type==="atrule"&&!o.nodes)||o!==c.last||c.raws.semicolon)&&(o.source&&o.source.end?(i.source=this.sourcePath(o),i.original.line=o.source.end.line,i.original.column=o.source.end.column-1,i.generated.line=t,i.generated.column=n-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=t,i.generated.column=n-1,this.map.addMapping(i)))}})}generate(){if(this.clearAnnotation(),KZ&&JZ&&this.isMap())return this.generateMap();{let t="";return this.stringify(this.root,n=>{t+=n}),[t]}}};var mN=eQ;let tQ=Bb,vx=class extends tQ{constructor(t){super(t),this.type="comment"}};var Hb=vx;vx.default=vx;let{isClean:bN,my:yN}=G0,vN=Ub,_N=Hb,nQ=Bb,xN,y6,v6,wN;function EN(e){return e.map(t=>(t.nodes&&(t.nodes=EN(t.nodes)),delete t.source,t))}function SN(e){if(e[bN]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)SN(t)}let Ss=class extends nQ{push(t){return t.parent=this,this.proxyOf.nodes.push(t),this}each(t){if(!this.proxyOf.nodes)return;let n=this.getIterator(),r,i;for(;this.indexes[n]<this.proxyOf.nodes.length&&(r=this.indexes[n],i=t(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[n]+=1;return delete this.indexes[n],i}walk(t){return this.each((n,r)=>{let i;try{i=t(n,r)}catch(s){throw n.addToError(s)}return i!==!1&&n.walk&&(i=n.walk(t)),i})}walkDecls(t,n){return n?t instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&t.test(r.prop))return n(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===t)return n(r,i)}):(n=t,this.walk((r,i)=>{if(r.type==="decl")return n(r,i)}))}walkRules(t,n){return n?t instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&t.test(r.selector))return n(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===t)return n(r,i)}):(n=t,this.walk((r,i)=>{if(r.type==="rule")return n(r,i)}))}walkAtRules(t,n){return n?t instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&t.test(r.name))return n(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===t)return n(r,i)}):(n=t,this.walk((r,i)=>{if(r.type==="atrule")return n(r,i)}))}walkComments(t){return this.walk((n,r)=>{if(n.type==="comment")return t(n,r)})}append(...t){for(let n of t){let r=this.normalize(n,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}prepend(...t){t=t.reverse();for(let n of t){let r=this.normalize(n,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}cleanRaws(t){if(super.cleanRaws(t),this.nodes)for(let n of this.nodes)n.cleanRaws(t)}insertBefore(t,n){let r=this.index(t),i=r===0?"prepend":!1,s=this.normalize(n,this.proxyOf.nodes[r],i).reverse();r=this.index(t);for(let u of s)this.proxyOf.nodes.splice(r,0,u);let a;for(let u in this.indexes)a=this.indexes[u],r<=a&&(this.indexes[u]=a+s.length);return this.markDirty(),this}insertAfter(t,n){let r=this.index(t),i=this.normalize(n,this.proxyOf.nodes[r]).reverse();r=this.index(t);for(let a of i)this.proxyOf.nodes.splice(r+1,0,a);let s;for(let a in this.indexes)s=this.indexes[a],r<s&&(this.indexes[a]=s+i.length);return this.markDirty(),this}removeChild(t){t=this.index(t),this.proxyOf.nodes[t].parent=void 0,this.proxyOf.nodes.splice(t,1);let n;for(let r in this.indexes)n=this.indexes[r],n>=t&&(this.indexes[r]=n-1);return this.markDirty(),this}removeAll(){for(let t of this.proxyOf.nodes)t.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(t,n,r){return r||(r=n,n={}),this.walkDecls(i=>{n.props&&!n.props.includes(i.prop)||n.fast&&!i.value.includes(n.fast)||(i.value=i.value.replace(t,r))}),this.markDirty(),this}every(t){return this.nodes.every(t)}some(t){return this.nodes.some(t)}index(t){return typeof t=="number"?t:(t.proxyOf&&(t=t.proxyOf),this.proxyOf.nodes.indexOf(t))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(t,n){if(typeof t=="string")t=EN(xN(t).nodes);else if(Array.isArray(t)){t=t.slice(0);for(let i of t)i.parent&&i.parent.removeChild(i,"ignore")}else if(t.type==="root"&&this.type!=="document"){t=t.nodes.slice(0);for(let i of t)i.parent&&i.parent.removeChild(i,"ignore")}else if(t.type)t=[t];else if(t.prop){if(typeof t.value>"u")throw new Error("Value field is missed in node creation");typeof t.value!="string"&&(t.value=String(t.value)),t=[new vN(t)]}else if(t.selector)t=[new y6(t)];else if(t.name)t=[new v6(t)];else if(t.text)t=[new _N(t)];else throw new Error("Unknown node type in node creation");return t.map(i=>(i[yN]||Ss.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[bN]&&SN(i),typeof i.raws.before>"u"&&n&&typeof n.raws.before<"u"&&(i.raws.before=n.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}getProxyProcessor(){return{set(t,n,r){return t[n]===r||(t[n]=r,(n==="name"||n==="params"||n==="selector")&&t.markDirty()),!0},get(t,n){return n==="proxyOf"?t:t[n]?n==="each"||typeof n=="string"&&n.startsWith("walk")?(...r)=>t[n](...r.map(i=>typeof i=="function"?(s,a)=>i(s.toProxy(),a):i)):n==="every"||n==="some"?r=>t[n]((i,...s)=>r(i.toProxy(),...s)):n==="root"?()=>t.root().toProxy():n==="nodes"?t.nodes.map(r=>r.toProxy()):n==="first"||n==="last"?t[n].toProxy():t[n]:t[n]}}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let t=this.lastEach;return this.indexes[t]=0,t}};Ss.registerParse=e=>{xN=e};Ss.registerRule=e=>{y6=e};Ss.registerAtRule=e=>{v6=e};Ss.registerRoot=e=>{wN=e};var Hl=Ss;Ss.default=Ss;Ss.rebuild=e=>{e.type==="atrule"?Object.setPrototypeOf(e,v6.prototype):e.type==="rule"?Object.setPrototypeOf(e,y6.prototype):e.type==="decl"?Object.setPrototypeOf(e,vN.prototype):e.type==="comment"?Object.setPrototypeOf(e,_N.prototype):e.type==="root"&&Object.setPrototypeOf(e,wN.prototype),e[yN]=!0,e.nodes&&e.nodes.forEach(t=>{Ss.rebuild(t)})};let rQ=Hl,kN,ON,t0=class extends rQ{constructor(t){super({type:"document",...t}),this.nodes||(this.nodes=[])}toResult(t={}){return new kN(new ON,this,t).stringify()}};t0.registerLazyResult=e=>{kN=e};t0.registerProcessor=e=>{ON=e};var _6=t0;t0.default=t0;let _x=class{constructor(t,n={}){if(this.type="warning",this.text=t,n.node&&n.node.source){let r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in n)this[r]=n[r]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var AN=_x;_x.default=_x;let iQ=AN,xx=class{constructor(t,n,r){this.processor=t,this.messages=[],this.root=n,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(t,n={}){n.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(n.plugin=this.lastPlugin.postcssPlugin);let r=new iQ(t,n);return this.messages.push(r),r}warnings(){return this.messages.filter(t=>t.type==="warning")}get content(){return this.css}};var x6=xx;xx.default=xx;const C2="'".charCodeAt(0),e8='"'.charCodeAt(0),cp="\\".charCodeAt(0),t8="/".charCodeAt(0),fp=`
`.charCodeAt(0),Ld=" ".charCodeAt(0),dp="\f".charCodeAt(0),hp="	".charCodeAt(0),gp="\r".charCodeAt(0),sQ="[".charCodeAt(0),aQ="]".charCodeAt(0),uQ="(".charCodeAt(0),oQ=")".charCodeAt(0),lQ="{".charCodeAt(0),cQ="}".charCodeAt(0),fQ=";".charCodeAt(0),dQ="*".charCodeAt(0),hQ=":".charCodeAt(0),gQ="@".charCodeAt(0),pp=/[\t\n\f\r "#'()/;[\\\]{}]/g,mp=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,pQ=/.[\n"'(/\\]/,n8=/[\da-f]/i;var mQ=function(t,n={}){let r=t.css.valueOf(),i=n.ignoreErrors,s,a,u,o,l,c,f,d,h,g,p=r.length,m=0,b=[],y=[];function v(){return m}function _(k){throw t.error("Unclosed "+k,m)}function x(){return y.length===0&&m>=p}function E(k){if(y.length)return y.pop();if(m>=p)return;let A=k?k.ignoreUnclosed:!1;switch(s=r.charCodeAt(m),s){case fp:case Ld:case hp:case gp:case dp:{a=m;do a+=1,s=r.charCodeAt(a);while(s===Ld||s===fp||s===hp||s===gp||s===dp);g=["space",r.slice(m,a)],m=a-1;break}case sQ:case aQ:case lQ:case cQ:case hQ:case fQ:case oQ:{let N=String.fromCharCode(s);g=[N,N,m];break}case uQ:{if(d=b.length?b.pop()[1]:"",h=r.charCodeAt(m+1),d==="url"&&h!==C2&&h!==e8&&h!==Ld&&h!==fp&&h!==hp&&h!==dp&&h!==gp){a=m;do{if(c=!1,a=r.indexOf(")",a+1),a===-1)if(i||A){a=m;break}else _("bracket");for(f=a;r.charCodeAt(f-1)===cp;)f-=1,c=!c}while(c);g=["brackets",r.slice(m,a+1),m,a],m=a}else a=r.indexOf(")",m+1),o=r.slice(m,a+1),a===-1||pQ.test(o)?g=["(","(",m]:(g=["brackets",o,m,a],m=a);break}case C2:case e8:{u=s===C2?"'":'"',a=m;do{if(c=!1,a=r.indexOf(u,a+1),a===-1)if(i||A){a=m+1;break}else _("string");for(f=a;r.charCodeAt(f-1)===cp;)f-=1,c=!c}while(c);g=["string",r.slice(m,a+1),m,a],m=a;break}case gQ:{pp.lastIndex=m+1,pp.test(r),pp.lastIndex===0?a=r.length-1:a=pp.lastIndex-2,g=["at-word",r.slice(m,a+1),m,a],m=a;break}case cp:{for(a=m,l=!0;r.charCodeAt(a+1)===cp;)a+=1,l=!l;if(s=r.charCodeAt(a+1),l&&s!==t8&&s!==Ld&&s!==fp&&s!==hp&&s!==gp&&s!==dp&&(a+=1,n8.test(r.charAt(a)))){for(;n8.test(r.charAt(a+1));)a+=1;r.charCodeAt(a+1)===Ld&&(a+=1)}g=["word",r.slice(m,a+1),m,a],m=a;break}default:{s===t8&&r.charCodeAt(m+1)===dQ?(a=r.indexOf("*/",m+2)+1,a===0&&(i||A?a=r.length:_("comment")),g=["comment",r.slice(m,a+1),m,a],m=a):(mp.lastIndex=m+1,mp.test(r),mp.lastIndex===0?a=r.length-1:a=mp.lastIndex-2,g=["word",r.slice(m,a+1),m,a],b.push(g),m=a);break}}return m++,g}function w(k){y.push(k)}return{back:w,nextToken:E,endOfFile:x,position:v}};let CN=Hl,Wm=class extends CN{constructor(t){super(t),this.type="atrule"}append(...t){return this.proxyOf.nodes||(this.nodes=[]),super.append(...t)}prepend(...t){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...t)}};var w6=Wm;Wm.default=Wm;CN.registerAtRule(Wm);let TN=Hl,MN,DN,mf=class extends TN{constructor(t){super(t),this.type="root",this.nodes||(this.nodes=[])}removeChild(t,n){let r=this.index(t);return!n&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(t)}normalize(t,n,r){let i=super.normalize(t);if(n){if(r==="prepend")this.nodes.length>1?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n)for(let s of i)s.raws.before=n.raws.before}return i}toResult(t={}){return new MN(new DN,this,t).stringify()}};mf.registerLazyResult=e=>{MN=e};mf.registerProcessor=e=>{DN=e};var W0=mf;mf.default=mf;TN.registerRoot(mf);let n0={split(e,t,n){let r=[],i="",s=!1,a=0,u=!1,o="",l=!1;for(let c of e)l?l=!1:c==="\\"?l=!0:u?c===o&&(u=!1):c==='"'||c==="'"?(u=!0,o=c):c==="("?a+=1:c===")"?a>0&&(a-=1):a===0&&t.includes(c)&&(s=!0),s?(i!==""&&r.push(i.trim()),i="",s=!1):i+=c;return(n||i!=="")&&r.push(i.trim()),r},space(e){let t=[" ",`
`,"	"];return n0.split(e,t)},comma(e){return n0.split(e,[","],!0)}};var NN=n0;n0.default=n0;let $N=Hl,bQ=NN,Xm=class extends $N{constructor(t){super(t),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return bQ.comma(this.selector)}set selectors(t){let n=this.selector?this.selector.match(/,\s*/):null,r=n?n[0]:","+this.raw("between","beforeOpen");this.selector=t.join(r)}};var E6=Xm;Xm.default=Xm;$N.registerRule(Xm);let yQ=Ub,vQ=mQ,_Q=Hb,xQ=w6,wQ=W0,r8=E6;const i8={empty:!0,space:!0};function EQ(e){for(let t=e.length-1;t>=0;t--){let n=e[t],r=n[3]||n[2];if(r)return r}}let SQ=class{constructor(t){this.input=t,this.root=new wQ,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:t,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=vQ(this.input)}parse(){let t;for(;!this.tokenizer.endOfFile();)switch(t=this.tokenizer.nextToken(),t[0]){case"space":this.spaces+=t[1];break;case";":this.freeSemicolon(t);break;case"}":this.end(t);break;case"comment":this.comment(t);break;case"at-word":this.atrule(t);break;case"{":this.emptyRule(t);break;default:this.other(t);break}this.endFile()}comment(t){let n=new _Q;this.init(n,t[2]),n.source.end=this.getPosition(t[3]||t[2]);let r=t[1].slice(2,-2);if(/^\s*$/.test(r))n.text="",n.raws.left=r,n.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);n.text=i[2],n.raws.left=i[1],n.raws.right=i[3]}}emptyRule(t){let n=new r8;this.init(n,t[2]),n.selector="",n.raws.between="",this.current=n}other(t){let n=!1,r=null,i=!1,s=null,a=[],u=t[1].startsWith("--"),o=[],l=t;for(;l;){if(r=l[0],o.push(l),r==="("||r==="[")s||(s=l),a.push(r==="("?")":"]");else if(u&&i&&r==="{")s||(s=l),a.push("}");else if(a.length===0)if(r===";")if(i){this.decl(o,u);return}else break;else if(r==="{"){this.rule(o);return}else if(r==="}"){this.tokenizer.back(o.pop()),n=!0;break}else r===":"&&(i=!0);else r===a[a.length-1]&&(a.pop(),a.length===0&&(s=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(n=!0),a.length>0&&this.unclosedBracket(s),n&&i){if(!u)for(;o.length&&(l=o[o.length-1][0],!(l!=="space"&&l!=="comment"));)this.tokenizer.back(o.pop());this.decl(o,u)}else this.unknownWord(o)}rule(t){t.pop();let n=new r8;this.init(n,t[0][2]),n.raws.between=this.spacesAndCommentsFromEnd(t),this.raw(n,"selector",t),this.current=n}decl(t,n){let r=new yQ;this.init(r,t[0][2]);let i=t[t.length-1];for(i[0]===";"&&(this.semicolon=!0,t.pop()),r.source.end=this.getPosition(i[3]||i[2]||EQ(t));t[0][0]!=="word";)t.length===1&&this.unknownWord(t),r.raws.before+=t.shift()[1];for(r.source.start=this.getPosition(t[0][2]),r.prop="";t.length;){let l=t[0][0];if(l===":"||l==="space"||l==="comment")break;r.prop+=t.shift()[1]}r.raws.between="";let s;for(;t.length;)if(s=t.shift(),s[0]===":"){r.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let a=[],u;for(;t.length&&(u=t[0][0],!(u!=="space"&&u!=="comment"));)a.push(t.shift());this.precheckMissedSemicolon(t);for(let l=t.length-1;l>=0;l--){if(s=t[l],s[1].toLowerCase()==="!important"){r.important=!0;let c=this.stringFrom(t,l);c=this.spacesFromEnd(t)+c,c!==" !important"&&(r.raws.important=c);break}else if(s[1].toLowerCase()==="important"){let c=t.slice(0),f="";for(let d=l;d>0;d--){let h=c[d][0];if(f.trim().indexOf("!")===0&&h!=="space")break;f=c.pop()[1]+f}f.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=f,t=c)}if(s[0]!=="space"&&s[0]!=="comment")break}t.some(l=>l[0]!=="space"&&l[0]!=="comment")&&(r.raws.between+=a.map(l=>l[1]).join(""),a=[]),this.raw(r,"value",a.concat(t),n),r.value.includes(":")&&!n&&this.checkMissedSemicolon(t)}atrule(t){let n=new xQ;n.name=t[1].slice(1),n.name===""&&this.unnamedAtrule(n,t),this.init(n,t[2]);let r,i,s,a=!1,u=!1,o=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=this.tokenizer.nextToken(),r=t[0],r==="("||r==="["?l.push(r==="("?")":"]"):r==="{"&&l.length>0?l.push("}"):r===l[l.length-1]&&l.pop(),l.length===0)if(r===";"){n.source.end=this.getPosition(t[2]),this.semicolon=!0;break}else if(r==="{"){u=!0;break}else if(r==="}"){if(o.length>0){for(s=o.length-1,i=o[s];i&&i[0]==="space";)i=o[--s];i&&(n.source.end=this.getPosition(i[3]||i[2]))}this.end(t);break}else o.push(t);else o.push(t);if(this.tokenizer.endOfFile()){a=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(o),o.length?(n.raws.afterName=this.spacesAndCommentsFromStart(o),this.raw(n,"params",o),a&&(t=o[o.length-1],n.source.end=this.getPosition(t[3]||t[2]),this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),u&&(n.nodes=[],this.current=n)}end(t){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(t[2]),this.current=this.current.parent):this.unexpectedClose(t)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(t){if(this.spaces+=t[1],this.current.nodes){let n=this.current.nodes[this.current.nodes.length-1];n&&n.type==="rule"&&!n.raws.ownSemicolon&&(n.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(t){let n=this.input.fromOffset(t);return{offset:t,line:n.line,column:n.col}}init(t,n){this.current.push(t),t.source={start:this.getPosition(n),input:this.input},t.raws.before=this.spaces,this.spaces="",t.type!=="comment"&&(this.semicolon=!1)}raw(t,n,r,i){let s,a,u=r.length,o="",l=!0,c,f;for(let d=0;d<u;d+=1)s=r[d],a=s[0],a==="space"&&d===u-1&&!i?l=!1:a==="comment"?(f=r[d-1]?r[d-1][0]:"empty",c=r[d+1]?r[d+1][0]:"empty",!i8[f]&&!i8[c]?o.slice(-1)===","?l=!1:o+=s[1]:l=!1):o+=s[1];if(!l){let d=r.reduce((h,g)=>h+g[1],"");t.raws[n]={value:o,raw:d}}t[n]=o}spacesAndCommentsFromEnd(t){let n,r="";for(;t.length&&(n=t[t.length-1][0],!(n!=="space"&&n!=="comment"));)r=t.pop()[1]+r;return r}spacesAndCommentsFromStart(t){let n,r="";for(;t.length&&(n=t[0][0],!(n!=="space"&&n!=="comment"));)r+=t.shift()[1];return r}spacesFromEnd(t){let n,r="";for(;t.length&&(n=t[t.length-1][0],n==="space");)r=t.pop()[1]+r;return r}stringFrom(t,n){let r="";for(let i=n;i<t.length;i++)r+=t[i][1];return t.splice(n,t.length-n),r}colon(t){let n=0,r,i,s;for(let[a,u]of t.entries()){if(r=u,i=r[0],i==="("&&(n+=1),i===")"&&(n-=1),n===0&&i===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return a}s=r}return!1}unclosedBracket(t){throw this.input.error("Unclosed bracket",{offset:t[2]},{offset:t[2]+1})}unknownWord(t){throw this.input.error("Unknown word",{offset:t[0][2]},{offset:t[0][2]+t[0][1].length})}unexpectedClose(t){throw this.input.error("Unexpected }",{offset:t[2]},{offset:t[2]+1})}unclosedBlock(){let t=this.current.source.start;throw this.input.error("Unclosed block",t.line,t.column)}doubleColon(t){throw this.input.error("Double colon",{offset:t[2]},{offset:t[2]+t[1].length})}unnamedAtrule(t,n){throw this.input.error("At-rule without name",{offset:n[2]},{offset:n[2]+n[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(t){let n=this.colon(t);if(n===!1)return;let r=0,i;for(let s=n-1;s>=0&&(i=t[s],!(i[0]!=="space"&&(r+=1,r===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}};var kQ=SQ;let OQ=Hl,AQ=kQ,CQ=qb;function Ym(e,t){let n=new CQ(e,t),r=new AQ(n);try{r.parse()}catch(i){throw i}return r.root}var S6=Ym;Ym.default=Ym;OQ.registerParse(Ym);let{isClean:ss,my:TQ}=G0,MQ=mN,DQ=zb,NQ=Hl,$Q=_6,s8=x6,FQ=S6,RQ=W0;const IQ={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},PQ={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},jQ={postcssPlugin:!0,prepare:!0,Once:!0},bf=0;function zd(e){return typeof e=="object"&&typeof e.then=="function"}function FN(e){let t=!1,n=IQ[e.type];return e.type==="decl"?t=e.prop.toLowerCase():e.type==="atrule"&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,bf,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,bf,n+"Exit"]:[n,n+"Exit"]}function a8(e){let t;return e.type==="document"?t=["Document",bf,"DocumentExit"]:e.type==="root"?t=["Root",bf,"RootExit"]:t=FN(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function wx(e){return e[ss]=!1,e.nodes&&e.nodes.forEach(t=>wx(t)),e}let Ex={},yl=class{constructor(t,n,r){this.stringified=!1,this.processed=!1;let i;if(typeof n=="object"&&n!==null&&(n.type==="root"||n.type==="document"))i=wx(n);else if(n instanceof yl||n instanceof s8)i=wx(n.root),n.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map);else{let s=FQ;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(n,r)}catch(a){this.processed=!0,this.error=a}i&&!i[TQ]&&NQ.rebuild(i)}this.result=new s8(t,i,r),this.helpers={...Ex,result:this.result,postcss:Ex},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(t,n){return this.async().then(t,n)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let t of this.plugins){let n=this.runOnRoot(t);if(zd(n))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[ss];)t[ss]=!0,this.walkSync(t);if(this.listeners.OnceExit)if(t.type==="document")for(let n of t.nodes)this.visitSync(this.listeners.OnceExit,n);else this.visitSync(this.listeners.OnceExit,t)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let t=this.result.opts,n=DQ;t.syntax&&(n=t.syntax.stringify),t.stringifier&&(n=t.stringifier),n.stringify&&(n=n.stringify);let i=new MQ(n,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}walkSync(t){t[ss]=!0;let n=FN(t);for(let r of n)if(r===bf)t.nodes&&t.each(i=>{i[ss]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,t.toProxy()))return}}visitSync(t,n){for(let[r,i]of t){this.result.lastPlugin=r;let s;try{s=i(n,this.helpers)}catch(a){throw this.handleError(a,n.proxyOf)}if(n.type!=="root"&&n.type!=="document"&&!n.parent)return!0;if(zd(s))throw this.getAsyncError()}}runOnRoot(t){this.result.lastPlugin=t;try{if(typeof t=="object"&&t.Once){if(this.result.root.type==="document"){let n=this.result.root.nodes.map(r=>t.Once(r,this.helpers));return zd(n[0])?Promise.all(n):n}return t.Once(this.result.root,this.helpers)}else if(typeof t=="function")return t(this.result.root,this.result)}catch(n){throw this.handleError(n)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(t,n){let r=this.result.lastPlugin;try{n&&n.addToError(t),this.error=t,t.name==="CssSyntaxError"&&!t.plugin?(t.plugin=r.postcssPlugin,t.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return t}async runAsync(){this.plugin=0;for(let t=0;t<this.plugins.length;t++){let n=this.plugins[t],r=this.runOnRoot(n);if(zd(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[ss];){t[ss]=!0;let n=[a8(t)];for(;n.length>0;){let r=this.visitTick(n);if(zd(r))try{await r}catch(i){let s=n[n.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[n,r]of this.listeners.OnceExit){this.result.lastPlugin=n;try{if(t.type==="document"){let i=t.nodes.map(s=>r(s,this.helpers));await Promise.all(i)}else await r(t,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let t=(n,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([n,i])};for(let n of this.plugins)if(typeof n=="object")for(let r in n){if(!PQ[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${n.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!jQ[r])if(typeof n[r]=="object")for(let i in n[r])i==="*"?t(n,r,n[r][i]):t(n,r+"-"+i.toLowerCase(),n[r][i]);else typeof n[r]=="function"&&t(n,r,n[r])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(t){let n=t[t.length-1],{node:r,visitors:i}=n;if(r.type!=="root"&&r.type!=="document"&&!r.parent){t.pop();return}if(i.length>0&&n.visitorIndex<i.length){let[a,u]=i[n.visitorIndex];n.visitorIndex+=1,n.visitorIndex===i.length&&(n.visitors=[],n.visitorIndex=0),this.result.lastPlugin=a;try{return u(r.toProxy(),this.helpers)}catch(o){throw this.handleError(o,r)}}if(n.iterator!==0){let a=n.iterator,u;for(;u=r.nodes[r.indexes[a]];)if(r.indexes[a]+=1,!u[ss]){u[ss]=!0,t.push(a8(u));return}n.iterator=0,delete r.indexes[a]}let s=n.events;for(;n.eventIndex<s.length;){let a=s[n.eventIndex];if(n.eventIndex+=1,a===bf){r.nodes&&r.nodes.length&&(r[ss]=!0,n.iterator=r.getIterator());return}else if(this.listeners[a]){n.visitors=this.listeners[a];return}}t.pop()}};yl.registerPostcss=e=>{Ex=e};var RN=yl;yl.default=yl;RQ.registerLazyResult(yl);$Q.registerLazyResult(yl);let LQ=mN,zQ=zb,BQ=S6;const UQ=x6;let Sx=class{constructor(t,n,r){n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0;let i,s=zQ;this.result=new UQ(this._processor,i,this._opts),this.result.css=n;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let u=new LQ(s,i,this._opts,n);if(u.isMap()){let[o,l]=u.generate();o&&(this.result.css=o),l&&(this.result.map=l)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let t,n=BQ;try{t=n(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=t,t}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(t,n){return this.async().then(t,n)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}};var qQ=Sx;Sx.default=Sx;let HQ=qQ,VQ=RN,GQ=_6,WQ=W0,r0=class{constructor(t=[]){this.version="8.4.21",this.plugins=this.normalize(t)}use(t){return this.plugins=this.plugins.concat(this.normalize([t])),this}process(t,n={}){return this.plugins.length===0&&typeof n.parser>"u"&&typeof n.stringifier>"u"&&typeof n.syntax>"u"?new HQ(this,t,n):new VQ(this,t,n)}normalize(t){let n=[];for(let r of t)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))n=n.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)n.push(r);else if(typeof r=="function")n.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return n}};var XQ=r0;r0.default=r0;WQ.registerProcessor(r0);GQ.registerProcessor(r0);let YQ=Ub,ZQ=fN,QQ=Hb,JQ=w6,KQ=qb,eJ=W0,tJ=E6;function i0(e,t){if(Array.isArray(e))return e.map(i=>i0(i));let{inputs:n,...r}=e;if(n){t=[];for(let i of n){let s={...i,__proto__:KQ.prototype};s.map&&(s.map={...s.map,__proto__:ZQ.prototype}),t.push(s)}}if(r.nodes&&(r.nodes=e.nodes.map(i=>i0(i,t))),r.source){let{inputId:i,...s}=r.source;r.source=s,i!=null&&(r.source.input=t[i])}if(r.type==="root")return new eJ(r);if(r.type==="decl")return new YQ(r);if(r.type==="rule")return new tJ(r);if(r.type==="comment")return new QQ(r);if(r.type==="atrule")return new JQ(r);throw new Error("Unknown node type: "+e.type)}var nJ=i0;i0.default=i0;let rJ=b6,IN=Ub,iJ=RN,sJ=Hl,k6=XQ,aJ=zb,uJ=nJ,PN=_6,oJ=AN,jN=Hb,LN=w6,lJ=x6,cJ=qb,fJ=S6,dJ=NN,zN=E6,BN=W0,hJ=Bb;function wt(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new k6(e)}wt.plugin=function(t,n){let r=!1;function i(...a){console&&console.warn&&!r&&(r=!0,console.warn(t+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),{}.LANG&&{}.LANG.startsWith("cn")&&console.warn(t+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let u=n(...a);return u.postcssPlugin=t,u.postcssVersion=new k6().version,u}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(a,u,o){return wt([i(o)]).process(a,u)},i};wt.stringify=aJ;wt.parse=fJ;wt.fromJSON=uJ;wt.list=dJ;wt.comment=e=>new jN(e);wt.atRule=e=>new LN(e);wt.decl=e=>new IN(e);wt.rule=e=>new zN(e);wt.root=e=>new BN(e);wt.document=e=>new PN(e);wt.CssSyntaxError=rJ;wt.Declaration=IN;wt.Container=sJ;wt.Processor=k6;wt.Document=PN;wt.Comment=jN;wt.Warning=oJ;wt.AtRule=LN;wt.Result=lJ;wt.Input=cJ;wt.Rule=zN;wt.Root=BN;wt.Node=hJ;iJ.registerPostcss(wt);var gJ=wt;wt.default=wt;const pJ=ID,u8=cZ,{isPlainObject:mJ}=m6,o8=kZ,bJ=cx,{parse:yJ}=gJ,vJ=["img","audio","video","picture","svg","object","map","iframe","embed"],_J=["script","style"];function oh(e,t){e&&Object.keys(e).forEach(function(n){t(e[n],n)})}function ea(e,t){return{}.hasOwnProperty.call(e,t)}function l8(e,t){const n=[];return oh(e,function(r){t(r)&&n.push(r)}),n}function xJ(e){for(const t in e)if(ea(e,t))return!1;return!0}function wJ(e){return e.map(function(t){if(!t.url)throw new Error("URL missing");return t.url+(t.w?` ${t.w}w`:"")+(t.h?` ${t.h}h`:"")+(t.d?` ${t.d}x`:"")}).join(", ")}var EJ=s0;const SJ=/^[^\0\t\n\f\r /<=>]+$/;function s0(e,t,n){if(e==null)return"";typeof e=="number"&&(e=e.toString());let r="",i="";function s(T,S){const M=this;this.tag=T,this.attribs=S||{},this.tagPosition=r.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(p.length){const F=p[p.length-1];F.text+=M.text}},this.updateParentNodeMediaChildren=function(){p.length&&vJ.includes(this.tag)&&p[p.length-1].mediaChildren.push(this.tag)}}t=Object.assign({},s0.defaults,t),t.parser=Object.assign({},kJ,t.parser),_J.forEach(function(T){t.allowedTags!==!1&&(t.allowedTags||[]).indexOf(T)>-1&&!t.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${T}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const a=t.nonTextTags||["script","style","textarea","option"];let u,o;t.allowedAttributes&&(u={},o={},oh(t.allowedAttributes,function(T,S){u[S]=[];const M=[];T.forEach(function(F){typeof F=="string"&&F.indexOf("*")>=0?M.push(u8(F).replace(/\\\*/g,".*")):u[S].push(F)}),M.length&&(o[S]=new RegExp("^("+M.join("|")+")$"))}));const l={},c={},f={};oh(t.allowedClasses,function(T,S){u&&(ea(u,S)||(u[S]=[]),u[S].push("class")),l[S]=[],f[S]=[];const M=[];T.forEach(function(F){typeof F=="string"&&F.indexOf("*")>=0?M.push(u8(F).replace(/\\\*/g,".*")):F instanceof RegExp?f[S].push(F):l[S].push(F)}),M.length&&(c[S]=new RegExp("^("+M.join("|")+")$"))});const d={};let h;oh(t.transformTags,function(T,S){let M;typeof T=="function"?M=T:typeof T=="string"&&(M=s0.simpleTransform(T)),S==="*"?h=M:d[S]=M});let g,p,m,b,y,v,_=!1;E();const x=new pJ.Parser({onopentag:function(T,S){if(t.enforceHtmlBoundary&&T==="html"&&E(),y){v++;return}const M=new s(T,S);p.push(M);let F=!1;const L=!!M.text;let H;if(ea(d,T)&&(H=d[T](T,S),M.attribs=S=H.attribs,H.text!==void 0&&(M.innerText=H.text),T!==H.tagName&&(M.name=T=H.tagName,b[g]=H.tagName)),h&&(H=h(T,S),M.attribs=S=H.attribs,T!==H.tagName&&(M.name=T=H.tagName,b[g]=H.tagName)),(t.allowedTags!==!1&&(t.allowedTags||[]).indexOf(T)===-1||t.disallowedTagsMode==="recursiveEscape"&&!xJ(m)||t.nestingLimit!=null&&g>=t.nestingLimit)&&(F=!0,m[g]=!0,t.disallowedTagsMode==="discard"&&a.indexOf(T)!==-1&&(y=!0,v=1),m[g]=!0),g++,F){if(t.disallowedTagsMode==="discard")return;i=r,r=""}r+="<"+T,T==="script"&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(M.innerText=""),(!u||ea(u,T)||u["*"])&&oh(S,function(J,ge){if(!SJ.test(ge)){delete M.attribs[ge];return}let ke=!1;if(!u||ea(u,T)&&u[T].indexOf(ge)!==-1||u["*"]&&u["*"].indexOf(ge)!==-1||ea(o,T)&&o[T].test(ge)||o["*"]&&o["*"].test(ge))ke=!0;else if(u&&u[T]){for(const Y of u[T])if(mJ(Y)&&Y.name&&Y.name===ge){ke=!0;let ye="";if(Y.multiple===!0){const Ne=J.split(" ");for(const ut of Ne)Y.values.indexOf(ut)!==-1&&(ye===""?ye=ut:ye+=" "+ut)}else Y.values.indexOf(J)>=0&&(ye=J);J=ye}}if(ke){if(t.allowedSchemesAppliedToAttributes.indexOf(ge)!==-1&&k(T,J)){delete M.attribs[ge];return}if(T==="script"&&ge==="src"){let Y=!0;try{const ye=A(J);if(t.allowedScriptHostnames||t.allowedScriptDomains){const Ne=(t.allowedScriptHostnames||[]).find(function(ot){return ot===ye.url.hostname}),ut=(t.allowedScriptDomains||[]).find(function(ot){return ye.url.hostname===ot||ye.url.hostname.endsWith(`.${ot}`)});Y=Ne||ut}}catch{Y=!1}if(!Y){delete M.attribs[ge];return}}if(T==="iframe"&&ge==="src"){let Y=!0;try{const ye=A(J);if(ye.isRelativeUrl)Y=ea(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const Ne=(t.allowedIframeHostnames||[]).find(function(ot){return ot===ye.url.hostname}),ut=(t.allowedIframeDomains||[]).find(function(ot){return ye.url.hostname===ot||ye.url.hostname.endsWith(`.${ot}`)});Y=Ne||ut}}catch{Y=!1}if(!Y){delete M.attribs[ge];return}}if(ge==="srcset")try{let Y=bJ(J);if(Y.forEach(function(ye){k("srcset",ye.url)&&(ye.evil=!0)}),Y=l8(Y,function(ye){return!ye.evil}),Y.length)J=wJ(l8(Y,function(ye){return!ye.evil})),M.attribs[ge]=J;else{delete M.attribs[ge];return}}catch{delete M.attribs[ge];return}if(ge==="class"){const Y=l[T],ye=l["*"],Ne=c[T],ut=f[T],ot=c["*"],ln=[Ne,ot].concat(ut).filter(function(he){return he});if(Y&&ye?J=C(J,o8(Y,ye),ln):J=C(J,Y||ye,ln),!J.length){delete M.attribs[ge];return}}if(ge==="style"){if(t.parseStyleAttributes)try{const Y=yJ(T+" {"+J+"}"),ye=N(Y,t.allowedStyles);if(J=O(ye),J.length===0){delete M.attribs[ge];return}}catch{console.warn('Failed to parse "'+T+" {"+J+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete M.attribs[ge];return}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}r+=" "+ge,J&&J.length&&(r+='="'+w(J,!0)+'"')}else delete M.attribs[ge]}),t.selfClosing.indexOf(T)!==-1?r+=" />":(r+=">",M.innerText&&!L&&!t.textFilter&&(r+=w(M.innerText),_=!0)),F&&(r=i+w(r),i="")},ontext:function(T){if(y)return;const S=p[p.length-1];let M;if(S&&(M=S.tag,T=S.innerText!==void 0?S.innerText:T),t.disallowedTagsMode==="discard"&&(M==="script"||M==="style"))r+=T;else{const F=w(T,!1);t.textFilter&&!_?r+=t.textFilter(F,M):_||(r+=F)}if(p.length){const F=p[p.length-1];F.text+=T}},onclosetag:function(T){if(y)if(v--,!v)y=!1;else return;const S=p.pop();if(!S)return;if(S.tag!==T){p.push(S);return}y=t.enforceHtmlBoundary?T==="html":!1,g--;const M=m[g];if(M){if(delete m[g],t.disallowedTagsMode==="discard"){S.updateParentNodeText();return}i=r,r=""}if(b[g]&&(T=b[g],delete b[g]),t.exclusiveFilter&&t.exclusiveFilter(S)){r=r.substr(0,S.tagPosition);return}if(S.updateParentNodeMediaChildren(),S.updateParentNodeText(),t.selfClosing.indexOf(T)!==-1){M&&(r=i,i="");return}r+="</"+T+">",M&&(r=i+w(r),i=""),_=!1}},t.parser);return x.write(e),x.end(),r;function E(){r="",g=0,p=[],m={},b={},y=!1,v=0}function w(T,S){return typeof T!="string"&&(T=T+""),t.parser.decodeEntities&&(T=T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),S&&(T=T.replace(/"/g,"&quot;"))),T=T.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),S&&(T=T.replace(/"/g,"&quot;")),T}function k(T,S){for(S=S.replace(/[\x00-\x20]+/g,"");;){const L=S.indexOf("<!--");if(L===-1)break;const H=S.indexOf("-->",L+4);if(H===-1)break;S=S.substring(0,L)+S.substring(H+3)}const M=S.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!M)return S.match(/^[/\\]{2}/)?!t.allowProtocolRelative:!1;const F=M[1].toLowerCase();return ea(t.allowedSchemesByTag,T)?t.allowedSchemesByTag[T].indexOf(F)===-1:!t.allowedSchemes||t.allowedSchemes.indexOf(F)===-1}function A(T){if(T=T.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),T.startsWith("relative:"))throw new Error("relative: exploit attempt");let S="relative://relative-site";for(let L=0;L<100;L++)S+=`/${L}`;const M=new URL(T,S);return{isRelativeUrl:M&&M.hostname==="relative-site"&&M.protocol==="relative:",url:M}}function N(T,S){if(!S)return T;const M=T.nodes[0];let F;return S[M.selector]&&S["*"]?F=o8(S[M.selector],S["*"]):F=S[M.selector]||S["*"],F&&(T.nodes[0].nodes=M.nodes.reduce($(F),[])),T}function O(T){return T.nodes[0].nodes.reduce(function(S,M){return S.push(`${M.prop}:${M.value}${M.important?" !important":""}`),S},[]).join(";")}function $(T){return function(S,M){return ea(T,M.prop)&&T[M.prop].some(function(L){return L.test(M.value)})&&S.push(M),S}}function C(T,S,M){return S?(T=T.split(/\s+/),T.filter(function(F){return S.indexOf(F)!==-1||M.some(function(L){return L.test(F)})}).join(" ")):T}}const kJ={decodeEntities:!0};s0.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0};s0.simpleTransform=function(e,t,n){return n=n===void 0?!0:n,t=t||{},function(r,i){let s;if(n)for(s in t)i[s]=t[s];else i=t;return{tagName:e,attribs:i}}};const OJ=EJ;function AJ(e){let t,n;return{c(){t=z("div"),n=z("iframe"),this.h()},l(r){t=B(r,"DIV",{class:!0});var i=U(t);n=B(i,"IFRAME",{srcdoc:!0,title:!0,class:!0,frameborder:!0,style:!0}),U(n).forEach(D),i.forEach(D),this.h()},h(){I(n,"srcdoc",e[1]),I(n,"title","title"),I(n,"class","rounded-md"),I(n,"frameborder","0"),df(n,"height","100%"),df(n,"width","100%"),I(t,"class","h-full w-full rounded-md shadow-md border-black")},m(r,i){q(r,t,i),P(t,n)},p(r,i){i&2&&I(n,"srcdoc",r[1])},i:xe,o:xe,d(r){r&&D(t)}}}function CJ(e){let t,n;return{c(){t=z("div"),n=z("iframe"),this.h()},l(r){t=B(r,"DIV",{class:!0});var i=U(t);n=B(i,"IFRAME",{srcdoc:!0,title:!0,class:!0,frameborder:!0,style:!0}),U(n).forEach(D),i.forEach(D),this.h()},h(){I(n,"srcdoc",e[1]),I(n,"title","title"),I(n,"class","rounded-md"),I(n,"frameborder","0"),df(n,"height","100%"),df(n,"width","100%"),I(t,"class","thumbnail h-full aspect-square rounded-md shadow-md border-black svelte-12l5iv3")},m(r,i){q(r,t,i),P(t,n)},p(r,i){i&2&&I(n,"srcdoc",r[1])},i:xe,o:xe,d(r){r&&D(t)}}}function TJ(e){let t,n,r;return n=new cG({}),{c(){t=z("span"),re(n.$$.fragment)},l(i){t=B(i,"SPAN",{});var s=U(t);ae(n.$$.fragment,s),s.forEach(D)},m(i,s){q(i,t,s),ie(n,t,null),r=!0},p:xe,i(i){r||(R(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&D(t),se(n)}}}function MJ(e){let t,n,r,i;const s=[TJ,CJ,AJ],a=[];function u(o,l){return o[0]==="logo"?0:o[0]==="thumbnail"?1:2}return t=u(e),n=a[t]=s[t](e),{c(){n.c(),r=Le()},l(o){n.l(o),r=Le()},m(o,l){a[t].m(o,l),q(o,r,l),i=!0},p(o,[l]){let c=t;t=u(o),t===c?a[t].p(o,l):(Rt(),j(a[c],1,1,()=>{a[c]=null}),It(),n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r))},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){a[t].d(o),o&&D(r)}}}function DJ(e,t,n){let r,{html:i}=t,{view:s="full"}=t;return e.$$set=a=>{"html"in a&&n(2,i=a.html),"view"in a&&n(0,s=a.view)},e.$$.update=()=>{e.$$.dirty&4&&n(1,r=OJ(i))},[s,r,i]}class NJ extends He{constructor(t){super(),Ve(this,t,DJ,MJ,Be,{html:2,view:0})}}function $J(e){let t,n,r,i,s,a;function u(f){e[7](f)}function o(f){e[8](f)}function l(f){e[9](f)}let c={defaultClass:"bg-purple-200 border-purple-500 ring-purple-200 ring-offset-0 ring-0 focus:border-purple-500 focus:ring-purple-200 focus:ring-offset-0 focus:ring-0 p-2 rounded-lg w-fit"};return e[3]!==void 0&&(c.items=e[3]),e[0]!==void 0&&(c.value=e[0]),e[1]!==void 0&&(c.disabled=e[1]),n=new wV({props:c}),Qt.push(()=>tn(n,"items",u)),Qt.push(()=>tn(n,"value",o)),Qt.push(()=>tn(n,"disabled",l)),n.$on("change",e[10]),{c(){t=z("div"),re(n.$$.fragment),this.h()},l(f){t=B(f,"DIV",{class:!0});var d=U(t);ae(n.$$.fragment,d),d.forEach(D),this.h()},h(){I(t,"class",e[2])},m(f,d){q(f,t,d),ie(n,t,null),a=!0},p(f,[d]){const h={};!r&&d&8&&(r=!0,h.items=f[3],nn(()=>r=!1)),!i&&d&1&&(i=!0,h.value=f[0],nn(()=>i=!1)),!s&&d&2&&(s=!0,h.disabled=f[1],nn(()=>s=!1)),n.$set(h),(!a||d&4)&&I(t,"class",f[2])},i(f){a||(R(n.$$.fragment,f),a=!0)},o(f){j(n.$$.fragment,f),a=!1},d(f){f&&D(t),se(n)}}}function FJ(e,t,n){let r,{values:i}=t,{labels:s}=t,{value:a}=t,{disabled:u=!1}=t,{classes:o=""}=t;const l=Ca();function c(g){r=g,n(3,r),n(5,i),n(6,s)}function f(g){a=g,n(0,a)}function d(g){u=g,n(1,u)}const h=g=>l("change",{value:a});return e.$$set=g=>{"values"in g&&n(5,i=g.values),"labels"in g&&n(6,s=g.labels),"value"in g&&n(0,a=g.value),"disabled"in g&&n(1,u=g.disabled),"classes"in g&&n(2,o=g.classes)},e.$$.update=()=>{e.$$.dirty&96&&n(3,r=i.map((g,p)=>({value:g,name:s[p]})))},[a,u,o,r,l,i,s,c,f,d,h]}class RJ extends He{constructor(t){super(),Ve(this,t,FJ,$J,Be,{values:5,labels:6,value:0,disabled:1,classes:2})}}function IJ(e){let t,n,r,i=[{type:"range"},e[2],{class:e[1]}],s={};for(let a=0;a<i.length;a+=1)s=_e(s,i[a]);return{c(){t=z("input"),this.h()},l(a){t=B(a,"INPUT",{type:!0,class:!0}),this.h()},h(){at(t,s)},m(a,u){q(a,t,u),t.autofocus&&t.focus(),Iu(t,e[0]),n||(r=[Z(t,"change",e[8]),Z(t,"input",e[8]),Z(t,"change",e[3]),Z(t,"click",e[4]),Z(t,"keydown",e[5]),Z(t,"keypress",e[6]),Z(t,"keyup",e[7])],n=!0)},p(a,[u]){at(t,s=Ut(i,[{type:"range"},u&4&&a[2],u&2&&{class:a[1]}])),u&1&&Iu(t,a[0])},i:xe,o:xe,d(a){a&&D(t),n=!1,ii(r)}}}function PJ(e,t,n){const r=["value","classes"];let i=Qe(t,r),{value:s}=t,{classes:a=""}=t;function u(h){K.call(this,e,h)}function o(h){K.call(this,e,h)}function l(h){K.call(this,e,h)}function c(h){K.call(this,e,h)}function f(h){K.call(this,e,h)}function d(){s=yH(this.value),n(0,s)}return e.$$set=h=>{t=_e(_e({},t),tt(h)),n(2,i=Qe(t,r)),"value"in h&&n(0,s=h.value),"classes"in h&&n(1,a=h.classes)},[s,a,i,u,o,l,c,f,d]}class jJ extends He{constructor(t){super(),Ve(this,t,PJ,IJ,Be,{value:0,classes:1})}}function LJ(e){let t,n,r,i,s,a,u,o,l,c,f,d,h,g,p,m,b,y,v,_,x;function E($){e[7]($)}function w($){e[8]($)}function k($){e[9]($)}function A($){e[10]($)}function N($){e[11]($)}let O={classes:"accent-purple-500"};return e[0]!==void 0&&(O.value=e[0]),e[1]!==void 0&&(O.min=e[1]),e[2]!==void 0&&(O.max=e[2]),e[3]!==void 0&&(O.step=e[3]),e[4]!==void 0&&(O.disabled=e[4]),o=new jJ({props:O}),Qt.push(()=>tn(o,"value",E)),Qt.push(()=>tn(o,"min",w)),Qt.push(()=>tn(o,"max",k)),Qt.push(()=>tn(o,"step",A)),Qt.push(()=>tn(o,"disabled",N)),o.$on("change",e[12]),{c(){t=z("div"),n=z("div"),r=z("div"),i=z("p"),s=Fe(e[0]),u=ue(),re(o.$$.fragment),g=ue(),p=z("div"),m=z("div"),b=Fe(e[1]),y=ue(),v=z("div"),_=Fe(e[2]),this.h()},l($){t=B($,"DIV",{class:!0});var C=U(t);n=B(C,"DIV",{class:!0});var T=U(n);r=B(T,"DIV",{class:!0});var S=U(r);i=B(S,"P",{class:!0,style:!0});var M=U(i);s=Re(M,e[0]),M.forEach(D),S.forEach(D),u=oe(T),ae(o.$$.fragment,T),g=oe(T),p=B(T,"DIV",{class:!0});var F=U(p);m=B(F,"DIV",{class:!0});var L=U(m);b=Re(L,e[1]),L.forEach(D),y=oe(F),v=B(F,"DIV",{class:!0});var H=U(v);_=Re(H,e[2]),H.forEach(D),F.forEach(D),T.forEach(D),C.forEach(D),this.h()},h(){I(i,"class","text-sm text-purple-500"),I(i,"style",a=`margin-left: ${(e[0]-e[1])/(e[2]-e[1])*100}%`),I(r,"class","-ml-2 px-2 w-full"),I(m,"class","flex-1 text-sm text-purple-400"),I(v,"class","flex-1 text-sm text-purple-400 text-right"),I(p,"class","flex"),I(n,"class","flex flex-col"),I(t,"class",e[5])},m($,C){q($,t,C),P(t,n),P(n,r),P(r,i),P(i,s),P(n,u),ie(o,n,null),P(n,g),P(n,p),P(p,m),P(m,b),P(p,y),P(p,v),P(v,_),x=!0},p($,[C]){(!x||C&1)&&$t(s,$[0]),(!x||C&7&&a!==(a=`margin-left: ${($[0]-$[1])/($[2]-$[1])*100}%`))&&I(i,"style",a);const T={};!l&&C&1&&(l=!0,T.value=$[0],nn(()=>l=!1)),!c&&C&2&&(c=!0,T.min=$[1],nn(()=>c=!1)),!f&&C&4&&(f=!0,T.max=$[2],nn(()=>f=!1)),!d&&C&8&&(d=!0,T.step=$[3],nn(()=>d=!1)),!h&&C&16&&(h=!0,T.disabled=$[4],nn(()=>h=!1)),o.$set(T),(!x||C&2)&&$t(b,$[1]),(!x||C&4)&&$t(_,$[2]),(!x||C&32)&&I(t,"class",$[5])},i($){x||(R(o.$$.fragment,$),x=!0)},o($){j(o.$$.fragment,$),x=!1},d($){$&&D(t),se(o)}}}function zJ(e,t,n){let{value:r=0}=t,{min:i=0}=t,{max:s=100}=t,{step:a=1}=t,{disabled:u=!1}=t,{classes:o="bg-violet-50 p-2 rounded-lg w-fit"}=t;const l=Ca();function c(m){r=m,n(0,r)}function f(m){i=m,n(1,i)}function d(m){s=m,n(2,s)}function h(m){a=m,n(3,a)}function g(m){u=m,n(4,u)}const p=m=>l("change",{value:r});return e.$$set=m=>{"value"in m&&n(0,r=m.value),"min"in m&&n(1,i=m.min),"max"in m&&n(2,s=m.max),"step"in m&&n(3,a=m.step),"disabled"in m&&n(4,u=m.disabled),"classes"in m&&n(5,o=m.classes)},[r,i,s,a,u,o,l,c,f,d,h,g,p]}class BJ extends He{constructor(t){super(),Ve(this,t,zJ,LJ,Be,{value:0,min:1,max:2,step:3,disabled:4,classes:5})}}function c8(e,t,n){const r=e.slice();return r[2]=t[n][0],r[3]=t[n][1],r}function f8(e){let t,n,r=e[2]+"",i,s,a,u=e[1](e[3])+"",o,l;return{c(){t=z("div"),n=z("div"),i=Fe(r),s=ue(),a=z("div"),o=Fe(u),l=ue(),this.h()},l(c){t=B(c,"DIV",{class:!0});var f=U(t);n=B(f,"DIV",{class:!0});var d=U(n);i=Re(d,r),d.forEach(D),s=oe(f),a=B(f,"DIV",{class:!0});var h=U(a);o=Re(h,u),h.forEach(D),l=oe(f),f.forEach(D),this.h()},h(){I(n,"class","text-slate-400 text-md px-2 self-center"),I(a,"class","font-bold text-xl self-center"),I(t,"class","bg-slate-100 rounded-md flex flex-col shadow-sm py-0.5")},m(c,f){q(c,t,f),P(t,n),P(n,i),P(t,s),P(t,a),P(a,o),P(t,l)},p(c,f){f&1&&r!==(r=c[2]+"")&&$t(i,r),f&1&&u!==(u=c[1](c[3])+"")&&$t(o,u)},d(c){c&&D(t)}}}function UJ(e){let t,n=Object.entries(e[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=f8(c8(e,n,i));return{c(){t=z("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=B(i,"DIV",{class:!0});var s=U(t);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(D),this.h()},h(){I(t,"class","m-2 flex flex-wrap justify-center gap-x-2 gap-y-2")},m(i,s){q(i,t,s);for(let a=0;a<r.length;a+=1)r[a].m(t,null)},p(i,[s]){if(s&3){n=Object.entries(i[0]);let a;for(a=0;a<n.length;a+=1){const u=c8(i,n,a);r[a]?r[a].p(u,s):(r[a]=f8(u),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:xe,o:xe,d(i){i&&D(t),Pu(r,i)}}}function qJ(e,t,n){let{data:r={}}=t;const i=s=>{if(Number.isInteger(s)&&s<1e3)return s.toString();const a=[["B",9],["M",6],["K",3]];let u=s.toFixed(2);for(let o=0;o<a.length;o++){const l=a[o][0],c=Math.pow(10,a[o][1]);if(s>=c){u=`${(s/c).toFixed(2)}${l}`;break}}return u};return e.$$set=s=>{"data"in s&&n(0,r=s.data)},[r,i]}class HJ extends He{constructor(t){super(),Ve(this,t,qJ,UJ,Be,{data:0})}}function d8(e,t,n){const r=e.slice();return r[4]=t[n].id,r[5]=t[n].component,r}function h8(e,t,n){const r=e.slice();return r[8]=t[n].label,r[4]=t[n].id,r}function g8(e){let t,n=e[8]+"",r,i,s,a,u;function o(){return e[3](e[4])}return{c(){t=z("button"),r=Fe(n),i=ue(),this.h()},l(l){t=B(l,"BUTTON",{class:!0});var c=U(t);r=Re(c,n),i=oe(c),c.forEach(D),this.h()},h(){I(t,"class",s=e[1]===e[4]?"active inline-block py-1 px-4 text-lg font-medium text-center text-white bg-violet-600 rounded-lg":"inline-block py-1 px-4 text-lg font-medium text-center text-gray-500 rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white")},m(l,c){q(l,t,c),P(t,r),P(t,i),a||(u=Z(t,"click",o),a=!0)},p(l,c){e=l,c&1&&n!==(n=e[8]+"")&&$t(r,n),c&3&&s!==(s=e[1]===e[4]?"active inline-block py-1 px-4 text-lg font-medium text-center text-white bg-violet-600 rounded-lg":"inline-block py-1 px-4 text-lg font-medium text-center text-gray-500 rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white")&&I(t,"class",s)},d(l){l&&D(t),a=!1,u()}}}function p8(e){let t,n;const r=[e[5]];let i={};for(let s=0;s<r.length;s+=1)i=_e(i,r[s]);return t=new MM({props:i}),{c(){re(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,a){ie(t,s,a),n=!0},p(s,a){const u=a&1?Ut(r,[j0(s[5])]):{};t.$set(u)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){j(t.$$.fragment,s),n=!1},d(s){se(t,s)}}}function m8(e){let t,n,r=e[4]===e[1]&&p8(e);return{c(){r&&r.c(),t=Le()},l(i){r&&r.l(i),t=Le()},m(i,s){r&&r.m(i,s),q(i,t,s),n=!0},p(i,s){i[4]===i[1]?r?(r.p(i,s),s&3&&R(r,1)):(r=p8(i),r.c(),R(r,1),r.m(t.parentNode,t)):r&&(Rt(),j(r,1,1,()=>{r=null}),It())},i(i){n||(R(r),n=!0)},o(i){j(r),n=!1},d(i){r&&r.d(i),i&&D(t)}}}function VJ(e){let t,n,r,i,s,a=e[0],u=[];for(let f=0;f<a.length;f+=1)u[f]=g8(h8(e,a,f));let o=e[0],l=[];for(let f=0;f<o.length;f+=1)l[f]=m8(d8(e,o,f));const c=f=>j(l[f],1,1,()=>{l[f]=null});return{c(){t=z("div"),n=z("div");for(let f=0;f<u.length;f+=1)u[f].c();r=ue();for(let f=0;f<l.length;f+=1)l[f].c();i=Le(),this.h()},l(f){t=B(f,"DIV",{class:!0});var d=U(t);n=B(d,"DIV",{class:!0});var h=U(n);for(let g=0;g<u.length;g+=1)u[g].l(h);h.forEach(D),d.forEach(D),r=oe(f);for(let g=0;g<l.length;g+=1)l[g].l(f);i=Le(),this.h()},h(){I(n,"class","flex-grow flex justify-center"),I(t,"class","flex mb-2")},m(f,d){q(f,t,d),P(t,n);for(let h=0;h<u.length;h+=1)u[h].m(n,null);q(f,r,d);for(let h=0;h<l.length;h+=1)l[h].m(f,d);q(f,i,d),s=!0},p(f,[d]){if(d&7){a=f[0];let h;for(h=0;h<a.length;h+=1){const g=h8(f,a,h);u[h]?u[h].p(g,d):(u[h]=g8(g),u[h].c(),u[h].m(n,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}if(d&3){o=f[0];let h;for(h=0;h<o.length;h+=1){const g=d8(f,o,h);l[h]?(l[h].p(g,d),R(l[h],1)):(l[h]=m8(g),l[h].c(),R(l[h],1),l[h].m(i.parentNode,i))}for(Rt(),h=o.length;h<l.length;h+=1)c(h);It()}},i(f){if(!s){for(let d=0;d<o.length;d+=1)R(l[d]);s=!0}},o(f){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)j(l[d]);s=!1},d(f){f&&D(t),Pu(u,f),f&&D(r),Pu(l,f),f&&D(i)}}}function GJ(e,t,n){let{tabs:r=[]}=t,i=r[0].id;function s(u){u===i?n(1,i=""):n(1,i=u)}const a=u=>s(u);return e.$$set=u=>{"tabs"in u&&n(0,r=u.tabs)},[r,i,s,a]}class WJ extends He{constructor(t){super(),Ve(this,t,GJ,VJ,Be,{tabs:0})}}function XJ(e){let t,n,r;return n=new RD({props:{body:e[0]}}),{c(){t=z("div"),re(n.$$.fragment),this.h()},l(i){t=B(i,"DIV",{class:!0});var s=U(t);ae(n.$$.fragment,s),s.forEach(D),this.h()},h(){I(t,"class","whitespace-pre-line")},m(i,s){q(i,t,s),ie(n,t,null),r=!0},p(i,s){const a={};s&1&&(a.body=i[0]),n.$set(a)},i(i){r||(R(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&D(t),se(n)}}}function YJ(e){let t;function n(s,a){return s[2]?QJ:ZJ}let r=n(e),i=r(e);return{c(){i.c(),t=Le()},l(s){i.l(s),t=Le()},m(s,a){i.m(s,a),q(s,t,a)},p(s,a){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(t.parentNode,t)))},i:xe,o:xe,d(s){i.d(s),s&&D(t)}}}function ZJ(e){let t,n;return{c(){t=z("div"),n=Fe(e[0]),this.h()},l(r){t=B(r,"DIV",{class:!0});var i=U(t);n=Re(i,e[0]),i.forEach(D),this.h()},h(){I(t,"class","text-ellipsis whitespace-nowrap overflow-hidden")},m(r,i){q(r,t,i),P(t,n)},p(r,i){i&1&&$t(n,r[0])},d(r){r&&D(t)}}}function QJ(e){let t,n,r;return{c(){t=z("input"),this.h()},l(i){t=B(i,"INPUT",{class:!0}),this.h()},h(){I(t,"class","input input-bordered grow h-7 px-3 rounded-md shadow-md")},m(i,s){q(i,t,s),Iu(t,e[0]),n||(r=[Z(t,"change",e[4]),Z(t,"input",e[5])],n=!0)},p(i,s){s&1&&t.value!==i[0]&&Iu(t,i[0])},d(i){i&&D(t),n=!1,ii(r)}}}function JJ(e){let t,n,r,i;const s=[YJ,XJ],a=[];function u(o,l){return o[1]==="line"?0:o[1]==="wrapped"?1:-1}return~(t=u(e))&&(n=a[t]=s[t](e)),{c(){n&&n.c(),r=Le()},l(o){n&&n.l(o),r=Le()},m(o,l){~t&&a[t].m(o,l),q(o,r,l),i=!0},p(o,[l]){let c=t;t=u(o),t===c?~t&&a[t].p(o,l):(n&&(Rt(),j(a[c],1,1,()=>{a[c]=null}),It()),~t?(n=a[t],n?n.p(o,l):(n=a[t]=s[t](o),n.c()),R(n,1),n.m(r.parentNode,r)):n=null)},i(o){i||(R(n),i=!0)},o(o){j(n),i=!1},d(o){~t&&a[t].d(o),o&&D(r)}}}function KJ(e,t,n){let{data:r}=t,{view:i="line"}=t,{editable:s=!1}=t;const a=pl("cellEdit"),u=()=>{a(r)};function o(){r=this.value,n(0,r)}return e.$$set=l=>{"data"in l&&n(0,r=l.data),"view"in l&&n(1,i=l.view),"editable"in l&&n(2,s=l.editable)},[r,i,s,a,u,o]}class UN extends He{constructor(t){super(),Ve(this,t,KJ,JJ,Be,{data:0,view:1,editable:2})}}function eK(e){let t,n,r,i,s,a,u,o,l;return{c(){t=z("label"),n=z("input"),r=ue(),i=z("div"),s=ue(),a=z("span"),u=Fe(e[0]),this.h()},l(c){t=B(c,"LABEL",{class:!0});var f=U(t);n=B(f,"INPUT",{type:!0,class:!0}),r=oe(f),i=B(f,"DIV",{class:!0}),U(i).forEach(D),s=oe(f),a=B(f,"SPAN",{class:!0});var d=U(a);u=Re(d,e[0]),d.forEach(D),f.forEach(D),this.h()},h(){I(n,"type","checkbox"),n.value="",I(n,"class","sr-only peer"),n.checked=e[1],I(i,"class","w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"),I(a,"class","ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"),I(t,"class","relative inline-flex items-center cursor-pointer")},m(c,f){q(c,t,f),P(t,n),P(t,r),P(t,i),P(t,s),P(t,a),P(a,u),o||(l=Z(n,"change",e[3]),o=!0)},p(c,[f]){f&2&&(n.checked=c[1]),f&1&&$t(u,c[0])},i:xe,o:xe,d(c){c&&D(t),o=!1,l()}}}function tK(e,t,n){let r=Ca(),{title:i=""}=t,{value:s}=t;function a(o){r("toggle",{value:o})}const u=o=>{a(o.target.checked)};return e.$$set=o=>{"title"in o&&n(0,i=o.title),"value"in o&&n(1,s=o.value)},[i,s,a,u]}class nK extends He{constructor(t){super(),Ve(this,t,tK,eK,Be,{title:0,value:1})}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var rK=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iK=Object.prototype.hasOwnProperty;function kx(e,t){return iK.call(e,t)}function Ox(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)kx(e,i)&&r.push(i);return r}function Zr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Ax(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function qo(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function qN(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Cx(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Cx(e[t]))return!0}else if(typeof e=="object"){for(var r=Ox(e),i=r.length,s=0;s<i;s++)if(Cx(e[r[s]]))return!0}}return!1}function b8(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var HN=function(e){rK(t,e);function t(n,r,i,s,a){var u=this.constructor,o=e.call(this,b8(n,{name:r,index:i,operation:s,tree:a}))||this;return o.name=r,o.index=i,o.operation=s,o.tree=a,Object.setPrototypeOf(o,u.prototype),o.message=b8(n,{name:r,index:i,operation:s,tree:a}),o}return t}(Error),Zt=HN,sK=Zr,Gc={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Zm(n,this.path);r&&(r=Zr(r));var i=al(n,{op:"remove",path:this.from}).removed;return al(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Zm(n,this.from);return al(n,{op:"add",path:this.path,value:Zr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:a0(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},aK={add:function(e,t,n){return Ax(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Gc.move,copy:Gc.copy,test:Gc.test,_get:Gc._get};function Zm(e,t){if(t=="")return e;var n={op:"_get",path:t};return al(e,n),n.value}function al(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Qm(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Zm(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=a0(e,t.value),a.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return a}}else{r||(e=Zr(e));var u=t.path||"",o=u.split("/"),l=e,c=1,f=o.length,d=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=Qm;;){if(h=o[c],h&&h.indexOf("~")!=-1&&(h=qN(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=o.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&g(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Ax(h))throw new Zt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Ax(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Zt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var a=aK[t.op].call(t,l,h,e);if(a.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}}else if(c>=f){var a=Gc[t.op].call(t,l,h,e);if(a.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Zt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function O6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Zr(e));for(var s=new Array(t.length),a=0,u=t.length;a<u;a++)s[a]=al(e,t[a],n,!0,i,a),e=s[a].newDocument;return s.newDocument=e,s}function uK(e,t,n){var r=al(e,t);if(r.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Qm(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Zt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Gc[e.op]){if(typeof e.path!="string")throw new Zt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Zt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Zt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Cx(e.value))throw new Zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Zt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Zt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},u=VN([a],n);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new Zt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function VN(e,t,n){try{if(!Array.isArray(e))throw new Zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)O6(Zr(t),Zr(e),n||!0);else{n=n||Qm;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Zt)return i;throw i}}function a0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,a;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!a0(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var u=Object.keys(e);if(s=u.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(u[i]))return!1;for(i=s;i--!==0;)if(a=u[i],!a0(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const oK=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Zt,_areEquals:a0,applyOperation:al,applyPatch:O6,applyReducer:uK,deepClone:sK,getValueByPointer:Zm,validate:VN,validator:Qm},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var A6=new WeakMap,lK=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),cK=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function fK(e){return A6.get(e)}function dK(e,t){return e.observers.get(t)}function hK(e,t){e.observers.delete(t.callback)}function gK(e,t){t.unobserve()}function pK(e,t){var n=[],r,i=fK(e);if(!i)i=new lK(e),A6.set(e,i);else{var s=dK(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Zr(e),t){r.callback=t,r.next=null;var a=function(){Tx(r)},u=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u))}return r.patches=n,r.object=e,r.unobserve=function(){Tx(r),clearTimeout(r.next),hK(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u),window.removeEventListener("change",u))},i.observers.set(t,new cK(t,r)),r}function Tx(e,t){t===void 0&&(t=!1);var n=A6.get(e.object);C6(n.value,e.object,e.patches,"",t),e.patches.length&&O6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function C6(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Ox(t),a=Ox(e),u=!1,o=a.length-1;o>=0;o--){var l=a[o],c=e[l];if(kx(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?C6(c,f,n,r+"/"+qo(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+qo(l),value:Zr(c)}),n.push({op:"replace",path:r+"/"+qo(l),value:Zr(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+qo(l),value:Zr(c)}),n.push({op:"remove",path:r+"/"+qo(l)}),u=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!u&&s.length==a.length))for(var o=0;o<s.length;o++){var l=s[o];!kx(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+qo(l),value:Zr(t[l])})}}}function mK(e,t,n){n===void 0&&(n=!1);var r=[];return C6(e,t,r,"",n),r}const bK=Object.freeze(Object.defineProperty({__proto__:null,compare:mK,generate:Tx,observe:pK,unobserve:gK},Symbol.toStringTag,{value:"Module"}));Object.assign({},oK,bK,{JsonPatchError:HN,deepClone:Zr,escapePathComponent:qo,unescapePathComponent:qN});function Ur(e,t,n){return e.fields=t||[],e.fname=n,e}function Kt(e){return e==null?null:e.fname}function Gn(e){return e==null?null:e.fields}function GN(e){return e.length===1?yK(e[0]):vK(e)}const yK=e=>function(t){return t[e]},vK=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function W(e){throw Error(e)}function Rs(e){const t=[],n=e.length;let r=null,i=0,s="",a,u,o;e=e+"";function l(){t.push(s+e.substring(a,u)),s="",a=u+1}for(a=u=0;u<n;++u)if(o=e[u],o==="\\")s+=e.substring(a,u),s+=e.substring(++u,++u),a=u;else if(o===r)l(),r=null,i=-1;else{if(r)continue;a===i&&o==='"'||a===i&&o==="'"?(a=u+1,r=o):o==="."&&!i?u>a?l():a=u+1:o==="["?(u>a&&l(),i=a=u+1):o==="]"&&(i||W("Access path missing open bracket: "+e),i>0&&l(),i=0,a=u+1)}return i&&W("Access path missing closing bracket: "+e),r&&W("Access path missing closing quote: "+e),u>a&&(u++,l()),t}function Fr(e,t,n){const r=Rs(e);return e=r.length===1?r[0]:e,Ur((n&&n.get||GN)(r),[e],t||e)}const X0=Fr("id"),Qn=Ur(e=>e,[],"identity"),bu=Ur(()=>0,[],"zero"),rd=Ur(()=>1,[],"one"),hi=Ur(()=>!0,[],"true"),lu=Ur(()=>!1,[],"false");function _K(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const WN=0,T6=1,M6=2,XN=3,YN=4;function D6(e,t,n=_K){let r=e||WN;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=T6&&n(t||"error","ERROR",arguments),this},warn(){return r>=M6&&n(t||"warn","WARN",arguments),this},info(){return r>=XN&&n(t||"log","INFO",arguments),this},debug(){return r>=YN&&n(t||"log","DEBUG",arguments),this}}}var X=Array.isArray;function be(e){return e===Object(e)}const y8=e=>e!=="__proto__";function Vb(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=xK(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;Y0(t,r,n[r],i)}return t},{})}function Y0(e,t,n,r){if(!y8(t))return;let i,s;if(be(n)&&!X(n)){s=be(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Y0(s,i,n[i]):y8(i)&&(s[i]=n[i])}else e[t]=n}function xK(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function rt(e){return e[e.length-1]}function qn(e){return e==null||e===""?null:+e}const ZN=e=>t=>e*Math.exp(t),QN=e=>t=>Math.log(e*t),JN=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),KN=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Jm=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Gb(e,t,n,r){const i=n(e[0]),s=n(rt(e)),a=(s-i)*t;return[r(i-a),r(s-a)]}function e$(e,t){return Gb(e,t,qn,Qn)}function t$(e,t){var n=Math.sign(e[0]);return Gb(e,t,QN(n),ZN(n))}function n$(e,t,n){return Gb(e,t,Jm(n),Jm(1/n))}function r$(e,t,n){return Gb(e,t,JN(n),KN(n))}function Wb(e,t,n,r,i){const s=r(e[0]),a=r(rt(e)),u=t!=null?r(t):(s+a)/2;return[i(u+(s-u)*n),i(u+(a-u)*n)]}function N6(e,t,n){return Wb(e,t,n,qn,Qn)}function $6(e,t,n){const r=Math.sign(e[0]);return Wb(e,t,n,QN(r),ZN(r))}function Km(e,t,n,r){return Wb(e,t,n,Jm(r),Jm(1/r))}function F6(e,t,n,r){return Wb(e,t,n,JN(r),KN(r))}function i$(e){return 1+~~(new Date(e).getMonth()/3)}function s$(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pe(e){return e!=null?X(e)?e:[e]:[]}function a$(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function We(e){return typeof e=="function"}const wK="descending";function R6(e,t,n){n=n||{},t=pe(t)||[];const r=[],i=[],s={},a=n.comparator||EK;return pe(e).forEach((u,o)=>{u!=null&&(r.push(t[o]===wK?-1:1),i.push(u=We(u)?u:Fr(u,null,n)),(Gn(u)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ur(a(i,r),Object.keys(s))}const Xb=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),EK=(e,t)=>e.length===1?SK(e[0],t[0]):kK(e,t,e.length),SK=(e,t)=>function(n,r){return Xb(e(n),e(r))*t},kK=(e,t,n)=>(t.push(0),function(r,i){let s,a=0,u=-1;for(;a===0&&++u<n;)s=e[u],a=Xb(s(r),s(i));return a*t[u]});function Jn(e){return We(e)?e:()=>e}function I6(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Ge(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function ks(e,t){let n=0,r,i,s,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=a=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function u$(e,t){const n=e.length;let r=-1,i,s,a,u,o;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(u=o=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,u=r),a<s&&(a=s,o=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(u=o=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,u=r),a<s&&(a=s,o=r))}return[u,o]}const OK=Object.prototype.hasOwnProperty;function Se(e,t){return OK.call(e,t)}const bp={};function id(e){let t={},n;function r(s){return Se(t,s)&&t[s]!==bp}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,a){return r(s)||(++i.size,t[s]===bp&&--i.empty),t[s]=a,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=bp),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let a=0;for(const u in t){const o=t[u];o!==bp&&(!n||!n(o))&&(s[u]=o,++a)}i.size=a,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function o$(e,t,n,r,i,s){if(!n&&n!==0)return s;const a=+n;let u=e[0],o=rt(e),l;o<u&&(l=u,u=o,o=l),l=Math.abs(t-u);const c=Math.abs(o-t);return l<c&&l<=a?r:c<=a?i:s}function ce(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ge(r,n)}function Wc(e,t,n,r){let i=t[0],s=t[t.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Vl(e){return typeof e=="boolean"}function Au(e){return Object.prototype.toString.call(e)==="[object Date]"}function l$(e){return e&&We(e[Symbol.iterator])}function Ot(e){return typeof e=="number"}function c$(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function me(e){return typeof e=="string"}function P6(e,t,n){e&&(e=t?pe(e).map(u=>u.replace(/\\(.)/g,"$1")):pe(e));const r=e&&e.length,i=n&&n.get||GN,s=u=>i(t?[u]:Rs(u));let a;if(!r)a=function(){return""};else if(r===1){const u=s(e[0]);a=function(o){return""+u(o)}}else{const u=e.map(s);a=function(o){let l=""+u[0](o),c=0;for(;++c<r;)l+="|"+u[c](o);return l}}return Ur(a,e,"key")}function f$(e,t){const n=e[0],r=rt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const AK=1e4;function d$(e){e=+e||AK;let t,n,r;const i=()=>{t={},n={},r=0},s=(a,u)=>(++r>e&&(n=t,t={},r=1),t[a]=u);return i(),{clear:i,has:a=>Se(t,a)||Se(n,a),get:a=>Se(t,a)?t[a]:Se(n,a)?s(a,n[a]):void 0,set:(a,u)=>Se(t,a)?t[a]=u:s(a,u)}}function h$(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const a=r||new t.constructor(i+s);let u=0,o=0,l=0;for(;u<i&&o<s;++l)a[l]=e(t[u],n[o])>0?n[o++]:t[u++];for(;u<i;++u,++l)a[l]=t[u];for(;o<s;++o,++l)a[l]=n[o];return a}function lh(e,t){let n="";for(;--t>=0;)n+=e;return n}function g$(e,t,n,r){const i=n||" ",s=e+"",a=t-s.length;return a<=0?s:r==="left"?lh(i,a)+s:r==="center"?lh(i,~~(a/2))+s+lh(i,Math.ceil(a/2)):s+lh(i,a)}function Z0(e){return e&&rt(e)-e[0]||0}function fe(e){return X(e)?"["+e.map(fe)+"]":be(e)||me(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function j6(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const CK=e=>Ot(e)||Au(e)?e:Date.parse(e);function L6(e,t){return t=t||CK,e==null||e===""?null:t(e)}function z6(e){return e==null||e===""?null:e+""}function Vi(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function p$(e,t,n,r){const i=r??"",s=e+"",a=s.length,u=Math.max(0,t-i.length);return a<=t?s:n==="left"?i+s.slice(a-u):n==="center"?s.slice(0,Math.ceil(u/2))+i+s.slice(a-~~(u/2)):s.slice(0,u)+i}function du(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}var v8={},T2={},M2=34,Bd=10,D2=13;function m$(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function TK(e,t){var n=m$(e);return function(r,i){return t(n(r),i,e)}}function _8(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function yr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function MK(e){return e<0?"-"+yr(-e,6):e>9999?"+"+yr(e,6):yr(e,4)}function DK(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":MK(e.getUTCFullYear())+"-"+yr(e.getUTCMonth()+1,2)+"-"+yr(e.getUTCDate(),2)+(i?"T"+yr(t,2)+":"+yr(n,2)+":"+yr(r,2)+"."+yr(i,3)+"Z":r?"T"+yr(t,2)+":"+yr(n,2)+":"+yr(r,2)+"Z":n||t?"T"+yr(t,2)+":"+yr(n,2)+"Z":"")}function NK(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,g,p=i(f,function(m,b){if(h)return h(m,b-1);g=m,h=d?TK(m,d):m$(m)});return p.columns=g||[],p}function i(f,d){var h=[],g=f.length,p=0,m=0,b,y=g<=0,v=!1;f.charCodeAt(g-1)===Bd&&--g,f.charCodeAt(g-1)===D2&&--g;function _(){if(y)return T2;if(v)return v=!1,v8;var E,w=p,k;if(f.charCodeAt(w)===M2){for(;p++<g&&f.charCodeAt(p)!==M2||f.charCodeAt(++p)===M2;);return(E=p)>=g?y=!0:(k=f.charCodeAt(p++))===Bd?v=!0:k===D2&&(v=!0,f.charCodeAt(p)===Bd&&++p),f.slice(w+1,E-1).replace(/""/g,'"')}for(;p<g;){if((k=f.charCodeAt(E=p++))===Bd)v=!0;else if(k===D2)v=!0,f.charCodeAt(p)===Bd&&++p;else if(k!==n)continue;return f.slice(w,E)}return y=!0,f.slice(w,g)}for(;(b=_())!==T2;){for(var x=[];b!==v8&&b!==T2;)x.push(b),b=_();d&&(x=d(x,m++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(g){return c(h[g])}).join(e)})}function a(f,d){return d==null&&(d=_8(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function u(f,d){return d==null&&(d=_8(f)),s(f,d).join(`
`)}function o(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?DK(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:u,formatRows:o,formatRow:l,formatValue:c}}function $K(e){return e}function FK(e){if(e==null)return $K;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],a=e.translate[1];return function(u,o){o||(t=n=0);var l=2,c=u.length,f=new Array(c);for(f[0]=(t+=u[0])*r+s,f[1]=(n+=u[1])*i+a;l<c;)f[l]=u[l],++l;return f}}function RK(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function IK(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return x8(e,n)})}:x8(e,t)}function x8(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=b$(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function b$(e,t){var n=FK(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,g=d.length;h<g;++h)f.push(n(d[h],h));c<0&&RK(f,g)}function s(c){return n(c)}function a(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function u(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function o(c){return c.map(u)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=o(c.arcs);break;case"MultiPolygon":d=c.arcs.map(o);break;default:return null}return{type:f,coordinates:d}}return l(t)}function PK(e,t){var n={},r={},i={},s=[],a=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[c]=d)}),t.forEach(function(l){var c=u(l),f=c[0],d=c[1],h,g;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,g=r[d]){delete r[g.start];var p=g===h?h:h.concat(g);r[p.start=h.start]=i[p.end=g.end]=p}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,g=i[f]){delete i[g.end];var m=g===h?h:g.concat(h);r[m.start=g.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function u(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function o(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return o(i,r),o(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function jK(e){return b$(e,LK.apply(this,arguments))}function LK(e,t,n){var r,i,s;if(arguments.length>1)r=zK(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:PK(e,r)}}function zK(e,t,n){var r=[],i=[],s;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function u(f){f.forEach(a)}function o(f){f.forEach(u)}function l(f){f.forEach(o)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":u(f.arcs);break;case"MultiLineString":case"Polygon":o(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function pa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BK(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Q0(e){let t,n,r;e.length!==2?(t=pa,n=(u,o)=>pa(e(u),o),r=(u,o)=>e(u)-o):(t=e===pa||e===BK?e:UK,n=e,r=e);function i(u,o,l=0,c=u.length){if(l<c){if(t(o,o)!==0)return c;do{const f=l+c>>>1;n(u[f],o)<0?l=f+1:c=f}while(l<c)}return l}function s(u,o,l=0,c=u.length){if(l<c){if(t(o,o)!==0)return c;do{const f=l+c>>>1;n(u[f],o)<=0?l=f+1:c=f}while(l<c)}return l}function a(u,o,l=0,c=u.length){const f=i(u,o,l,c-1);return f>l&&r(u[f-1],o)>-r(u[f],o)?f-1:f}return{left:i,center:a,right:s}}function UK(){return 0}function y$(e){return e===null?NaN:+e}function*qK(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const v$=Q0(pa),e1=v$.right,HK=v$.left;Q0(y$).center;const J0=e1;function VK(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i));else{let a=-1;for(let u of e)(u=t(u,++a,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,s+=r*(u-i))}if(n>1)return s/(n-1)}function GK(e,t){const n=VK(e,t);return n&&Math.sqrt(n)}class fr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=t+s,u=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);u&&(n[r++]=u),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}class w8 extends Map{constructor(t,n=w$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Mx(this,t))}has(t){return super.has(Mx(this,t))}set(t,n){return super.set(_$(this,t),n)}delete(t){return super.delete(x$(this,t))}}class t1 extends Set{constructor(t,n=w$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Mx(this,t))}add(t){return super.add(_$(this,t))}delete(t){return super.delete(x$(this,t))}}function Mx({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function x$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function w$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function WK(e,t){return Array.from(t,n=>e[n])}function XK(e=pa){if(e===pa)return E$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function E$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YK=Math.sqrt(50),ZK=Math.sqrt(10),QK=Math.sqrt(2);function n1(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=YK?10:s>=ZK?5:s>=QK?2:1;let u,o,l;return i<0?(l=Math.pow(10,-i)/a,u=Math.round(e*l),o=Math.round(t*l),u/l<e&&++u,o/l>t&&--o,l=-l):(l=Math.pow(10,i)*a,u=Math.round(e/l),o=Math.round(t/l),u*l<e&&++u,o*l>t&&--o),o<u&&.5<=n&&n<2?n1(e,t,n*2):[u,o,l]}function Dx(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?n1(t,e,n):n1(e,t,n);if(!(s>=i))return[];const u=s-i+1,o=new Array(u);if(r)if(a<0)for(let l=0;l<u;++l)o[l]=(s-l)/-a;else for(let l=0;l<u;++l)o[l]=(s-l)*a;else if(a<0)for(let l=0;l<u;++l)o[l]=(i+l)/-a;else for(let l=0;l<u;++l)o[l]=(i+l)*a;return o}function Nx(e,t,n){return t=+t,e=+e,n=+n,n1(e,t,n)[2]}function ju(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Nx(t,e,n):Nx(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ul(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $x(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function S$(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?E$:XK(i);r>n;){if(r-n>600){const o=r-n+1,l=t-n+1,c=Math.log(o),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(o-f)/o)*(l-o/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/o+d)),g=Math.min(r,Math.floor(t+(o-l)*f/o+d));S$(e,t,h,g,i)}const s=e[t];let a=n,u=r;for(Ud(e,n,t),i(e[r],s)>0&&Ud(e,n,r);a<u;){for(Ud(e,a,u),++a,--u;i(e[a],s)<0;)++a;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Ud(e,n,u):(++u,Ud(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Ud(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Fx(e,t,n){if(e=Float64Array.from(qK(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return $x(e);if(t>=1)return ul(e);var r,i=(r-1)*t,s=Math.floor(i),a=ul(S$(e,s).subarray(0,s+1)),u=$x(e.subarray(s+1));return a+(u-a)*(i-s)}}function k$(e,t,n=y$){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return a+(u-a)*(i-s)}}function JK(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function O$(e,t){return Fx(e,.5,t)}function*KK(e){for(const t of e)yield*t}function A$(e){return Array.from(KK(e))}function Qr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function C$(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function eee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function r1(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yf(e){return e=r1(Math.abs(e)),e?e[1]:NaN}function tee(e,t){return function(n,r){for(var i=n.length,s=[],a=0,u=e[0],o=0;i>0&&u>0&&(o+u+1>r&&(u=Math.max(1,r-o)),s.push(n.substring(i-=u,i+u)),!((o+=u+1)>r));)u=e[a=(a+1)%e.length];return s.reverse().join(t)}}function nee(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ree=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vl(e){if(!(t=ree.exec(e)))throw new Error("invalid format: "+e);var t;return new B6({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vl.prototype=B6.prototype;function B6(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}B6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iee(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var T$;function see(e,t){var n=r1(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(T$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+r1(e,Math.max(0,t+s-1))[0]}function E8(e,t){var n=r1(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const S8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>E8(e*100,t),r:E8,s:see,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function k8(e){return e}var O8=Array.prototype.map,A8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function M$(e){var t=e.grouping===void 0||e.thousands===void 0?k8:tee(O8.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?k8:nee(O8.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",o=e.nan===void 0?"NaN":e.nan+"";function l(f){f=vl(f);var d=f.fill,h=f.align,g=f.sign,p=f.symbol,m=f.zero,b=f.width,y=f.comma,v=f.precision,_=f.trim,x=f.type;x==="n"?(y=!0,x="g"):S8[x]||(v===void 0&&(v=12),_=!0,x="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var E=p==="$"?n:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w=p==="$"?r:/[%p]/.test(x)?a:"",k=S8[x],A=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(O){var $=E,C=w,T,S,M;if(x==="c")C=k(O)+C,O="";else{O=+O;var F=O<0||1/O<0;if(O=isNaN(O)?o:k(Math.abs(O),v),_&&(O=iee(O)),F&&+O==0&&g!=="+"&&(F=!1),$=(F?g==="("?g:u:g==="-"||g==="("?"":g)+$,C=(x==="s"?A8[8+T$/3]:"")+C+(F&&g==="("?")":""),A){for(T=-1,S=O.length;++T<S;)if(M=O.charCodeAt(T),48>M||M>57){C=(M===46?i+O.slice(T+1):O.slice(T))+C,O=O.slice(0,T);break}}}y&&!m&&(O=t(O,1/0));var L=$.length+O.length+C.length,H=L<b?new Array(b-L+1).join(d):"";switch(y&&m&&(O=t(H+O,H.length?b-C.length:1/0),H=""),h){case"<":O=$+O+C+H;break;case"=":O=$+H+O+C;break;case"^":O=H.slice(0,L=H.length>>1)+$+O+C+H.slice(L);break;default:O=H+$+O+C;break}return s(O)}return N.toString=function(){return f+""},N}function c(f,d){var h=l((f=vl(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(yf(d)/3)))*3,p=Math.pow(10,-g),m=A8[8+g/3];return function(b){return h(p*b)+m}}return{format:l,formatPrefix:c}}var yp,Yb,U6;aee({thousands:",",grouping:[3],currency:["$",""]});function aee(e){return yp=M$(e),Yb=yp.format,U6=yp.formatPrefix,yp}function D$(e){return Math.max(0,-yf(Math.abs(e)))}function N$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yf(t)/3)))*3-yf(Math.abs(e)))}function $$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yf(t)-yf(e))+1}const N2=new Date,$2=new Date;function gn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),u=i.ceil(s);return s-a<u-s?a:u},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,u)=>{const o=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<a)||!(u>0))return o;let l;do o.push(l=new Date(+s)),t(s,u),e(s);while(l<s&&s<a);return o},i.filter=s=>gn(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;t(a,-1),!s(a););else for(;--u>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(N2.setTime(+s),$2.setTime(+a),e(N2),e($2),Math.floor(n(N2,$2))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const vf=gn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):vf);vf.range;const ua=1e3,ui=ua*60,oa=ui*60,Sa=oa*24,q6=Sa*7,C8=Sa*30,F2=Sa*365,la=gn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ua)},(e,t)=>(t-e)/ua,e=>e.getUTCSeconds());la.range;const Zb=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ua)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getMinutes());Zb.range;const Qb=gn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCMinutes());Qb.range;const Jb=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ua-e.getMinutes()*ui)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getHours());Jb.range;const Kb=gn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getUTCHours());Kb.range;const ma=gn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ui)/Sa,e=>e.getDate()-1);ma.range;const Cu=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sa,e=>e.getUTCDate()-1);Cu.range;const F$=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sa,e=>Math.floor(e/Sa));F$.range;function Gl(e){return gn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ui)/q6)}const sd=Gl(0),i1=Gl(1),uee=Gl(2),oee=Gl(3),_f=Gl(4),lee=Gl(5),cee=Gl(6);sd.range;i1.range;uee.range;oee.range;_f.range;lee.range;cee.range;function Wl(e){return gn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/q6)}const ad=Wl(0),s1=Wl(1),fee=Wl(2),dee=Wl(3),xf=Wl(4),hee=Wl(5),gee=Wl(6);ad.range;s1.range;fee.range;dee.range;xf.range;hee.range;gee.range;const u0=gn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());u0.range;const o0=gn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());o0.range;const Os=gn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Os.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Os.range;const As=gn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());As.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});As.range;function R$(e,t,n,r,i,s){const a=[[la,1,ua],[la,5,5*ua],[la,15,15*ua],[la,30,30*ua],[s,1,ui],[s,5,5*ui],[s,15,15*ui],[s,30,30*ui],[i,1,oa],[i,3,3*oa],[i,6,6*oa],[i,12,12*oa],[r,1,Sa],[r,2,2*Sa],[n,1,q6],[t,1,C8],[t,3,3*C8],[e,1,F2]];function u(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:o(l,c,f),g=h?h.range(l,+c+1):[];return d?g.reverse():g}function o(l,c,f){const d=Math.abs(c-l)/f,h=Q0(([,,m])=>m).right(a,d);if(h===a.length)return e.every(ju(l/F2,c/F2,f));if(h===0)return vf.every(Math.max(ju(l,c,f),1));const[g,p]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return g.every(p)}return[u,o]}const[pee,mee]=R$(As,o0,ad,F$,Kb,Qb),[bee,yee]=R$(Os,u0,sd,ma,Jb,Zb),$n="year",Rr="quarter",Wn="month",fn="week",Ir="date",Un="day",Cs="dayofyear",Kr="hours",ei="minutes",gi="seconds",Gi="milliseconds",H6=[$n,Rr,Wn,fn,Ir,Un,Cs,Kr,ei,gi,Gi],R2=H6.reduce((e,t,n)=>(e[t]=1+n,e),{});function V6(e){const t=pe(e).slice(),n={};return t.length||W("Missing time unit."),t.forEach(i=>{Se(R2,i)?n[i]=1:W("Invalid time unit: ".concat(i,"."))}),(n[fn]||n[Un]?1:0)+(n[Rr]||n[Wn]||n[Ir]?1:0)+(n[Cs]?1:0)>1&&W("Incompatible time units: ".concat(e)),t.sort((i,s)=>R2[i]-R2[s]),t}const vee={[$n]:"%Y ",[Rr]:"Q%q ",[Wn]:"%b ",[Ir]:"%d ",[fn]:"W%U ",[Un]:"%a ",[Cs]:"%j ",[Kr]:"%H:00",[ei]:"00:%M",[gi]:":%S",[Gi]:".%L",["".concat($n,"-").concat(Wn)]:"%Y-%m ",["".concat($n,"-").concat(Wn,"-").concat(Ir)]:"%Y-%m-%d ",["".concat(Kr,"-").concat(ei)]:"%H:%M"};function I$(e,t){const n=Ge({},vee,t),r=V6(e),i=r.length;let s="",a=0,u,o;for(a=0;a<i;)for(u=r.length;u>a;--u)if(o=r.slice(a,u).join("-"),n[o]!=null){s+=n[o],a=u;break}return s.trim()}const Wo=new Date;function G6(e){return Wo.setFullYear(e),Wo.setMonth(0),Wo.setDate(1),Wo.setHours(0,0,0,0),Wo}function P$(e){return L$(new Date(e))}function j$(e){return Rx(new Date(e))}function L$(e){return ma.count(G6(e.getFullYear())-1,e)}function Rx(e){return sd.count(G6(e.getFullYear())-1,e)}function Ix(e){return G6(e).getDay()}function _ee(e,t,n,r,i,s,a){if(0<=e&&e<100){const u=new Date(-1,t,n,r,i,s,a);return u.setFullYear(e),u}return new Date(e,t,n,r,i,s,a)}function z$(e){return U$(new Date(e))}function B$(e){return Px(new Date(e))}function U$(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Cu.count(t-1,e)}function Px(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ad.count(t-1,e)}function jx(e){return Wo.setTime(Date.UTC(e,0,1)),Wo.getUTCDay()}function xee(e,t,n,r,i,s,a){if(0<=e&&e<100){const u=new Date(Date.UTC(-1,t,n,r,i,s,a));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,r,i,s,a))}function q$(e,t,n,r,i){const s=t||1,a=rt(e),u=(b,y,v)=>(v=v||b,wee(n[v],r[v],b===a&&s,y)),o=new Date,l=Vi(e),c=l[$n]?u($n):Jn(2012),f=l[Wn]?u(Wn):l[Rr]?u(Rr):bu,d=l[fn]&&l[Un]?u(Un,1,fn+Un):l[fn]?u(fn,1):l[Un]?u(Un,1):l[Ir]?u(Ir,1):l[Cs]?u(Cs,1):rd,h=l[Kr]?u(Kr):bu,g=l[ei]?u(ei):bu,p=l[gi]?u(gi):bu,m=l[Gi]?u(Gi):bu;return function(b){o.setTime(+b);const y=c(o);return i(y,f(o),d(o,y),h(o),g(o),p(o),m(o))}}function wee(e,t,n,r){const i=n<=1?e:r?(s,a)=>r+n*Math.floor((e(s,a)-r)/n):(s,a)=>n*Math.floor(e(s,a)/n);return t?(s,a)=>t(i(s,a),a):i}function wf(e,t,n){return t+e*7-(n+6)%7}const Eee={[$n]:e=>e.getFullYear(),[Rr]:e=>Math.floor(e.getMonth()/3),[Wn]:e=>e.getMonth(),[Ir]:e=>e.getDate(),[Kr]:e=>e.getHours(),[ei]:e=>e.getMinutes(),[gi]:e=>e.getSeconds(),[Gi]:e=>e.getMilliseconds(),[Cs]:e=>L$(e),[fn]:e=>Rx(e),[fn+Un]:(e,t)=>wf(Rx(e),e.getDay(),Ix(t)),[Un]:(e,t)=>wf(1,e.getDay(),Ix(t))},See={[Rr]:e=>3*e,[fn]:(e,t)=>wf(e,0,Ix(t))};function H$(e,t){return q$(e,t||1,Eee,See,_ee)}const kee={[$n]:e=>e.getUTCFullYear(),[Rr]:e=>Math.floor(e.getUTCMonth()/3),[Wn]:e=>e.getUTCMonth(),[Ir]:e=>e.getUTCDate(),[Kr]:e=>e.getUTCHours(),[ei]:e=>e.getUTCMinutes(),[gi]:e=>e.getUTCSeconds(),[Gi]:e=>e.getUTCMilliseconds(),[Cs]:e=>U$(e),[fn]:e=>Px(e),[Un]:(e,t)=>wf(1,e.getUTCDay(),jx(t)),[fn+Un]:(e,t)=>wf(Px(e),e.getUTCDay(),jx(t))},Oee={[Rr]:e=>3*e,[fn]:(e,t)=>wf(e,0,jx(t))};function V$(e,t){return q$(e,t||1,kee,Oee,xee)}const Aee={[$n]:Os,[Rr]:u0.every(3),[Wn]:u0,[fn]:sd,[Ir]:ma,[Un]:ma,[Cs]:ma,[Kr]:Jb,[ei]:Zb,[gi]:la,[Gi]:vf},Cee={[$n]:As,[Rr]:o0.every(3),[Wn]:o0,[fn]:ad,[Ir]:Cu,[Un]:Cu,[Cs]:Cu,[Kr]:Kb,[ei]:Qb,[gi]:la,[Gi]:vf};function ud(e){return Aee[e]}function od(e){return Cee[e]}function G$(e,t,n){return e?e.offset(t,n):void 0}function W$(e,t,n){return G$(ud(e),t,n)}function X$(e,t,n){return G$(od(e),t,n)}function Y$(e,t,n,r){return e?e.range(t,n,r):void 0}function Z$(e,t,n,r){return Y$(ud(e),t,n,r)}function Q$(e,t,n,r){return Y$(od(e),t,n,r)}const ch=1e3,fh=ch*60,dh=fh*60,ey=dh*24,Tee=ey*7,T8=ey*30,Lx=ey*365,J$=[$n,Wn,Ir,Kr,ei,gi,Gi],hh=J$.slice(0,-1),gh=hh.slice(0,-1),ph=gh.slice(0,-1),Mee=ph.slice(0,-1),Dee=[$n,fn],M8=[$n,Wn],K$=[$n],qd=[[hh,1,ch],[hh,5,5*ch],[hh,15,15*ch],[hh,30,30*ch],[gh,1,fh],[gh,5,5*fh],[gh,15,15*fh],[gh,30,30*fh],[ph,1,dh],[ph,3,3*dh],[ph,6,6*dh],[ph,12,12*dh],[Mee,1,ey],[Dee,1,Tee],[M8,1,T8],[M8,3,3*T8],[K$,1,Lx]];function eF(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Z0(t))/n;let i=Q0(u=>u[2]).right(qd,r),s,a;return i===qd.length?(s=K$,a=ju(t[0]/Lx,t[1]/Lx,n)):i?(i=qd[r/qd[i-1][2]<qd[i][2]/r?i-1:i],s=i[0],a=i[1]):(s=J$,a=Math.max(ju(t[0],t[1],n),1)),{units:s,step:a}}function I2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function P2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function tF(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,u=e.months,o=e.shortMonths,l=Vd(i),c=Gd(i),f=Vd(s),d=Gd(s),h=Vd(a),g=Gd(a),p=Vd(u),m=Gd(u),b=Vd(o),y=Gd(o),v={a:F,A:L,b:H,B:J,c:null,d:I8,e:I8,f:ete,g:cte,G:dte,H:Qee,I:Jee,j:Kee,L:nF,m:tte,M:nte,p:ge,q:ke,Q:L8,s:z8,S:rte,u:ite,U:ste,V:ate,w:ute,W:ote,x:null,X:null,y:lte,Y:fte,Z:hte,"%":j8},_={a:Y,A:ye,b:Ne,B:ut,c:null,d:P8,e:P8,f:bte,g:Ate,G:Tte,H:gte,I:pte,j:mte,L:iF,m:yte,M:vte,p:ot,q:ln,Q:L8,s:z8,S:_te,u:xte,U:wte,V:Ete,w:Ste,W:kte,x:null,X:null,y:Ote,Y:Cte,Z:Mte,"%":j8},x={a:N,A:O,b:$,B:C,c:T,d:F8,e:F8,f:Wee,g:$8,G:N8,H:R8,I:R8,j:qee,L:Gee,m:Uee,M:Hee,p:A,q:Bee,Q:Yee,s:Zee,S:Vee,u:Iee,U:Pee,V:jee,w:Ree,W:Lee,x:S,X:M,y:$8,Y:N8,Z:zee,"%":Xee};v.x=E(n,v),v.X=E(r,v),v.c=E(t,v),_.x=E(n,_),_.X=E(r,_),_.c=E(t,_);function E(he,Me){return function(Ie){var te=[],Et=-1,Je=0,Xt=he.length,jt,In,Ei;for(Ie instanceof Date||(Ie=new Date(+Ie));++Et<Xt;)he.charCodeAt(Et)===37&&(te.push(he.slice(Je,Et)),(In=D8[jt=he.charAt(++Et)])!=null?jt=he.charAt(++Et):In=jt==="e"?" ":"0",(Ei=Me[jt])&&(jt=Ei(Ie,In)),te.push(jt),Je=Et+1);return te.push(he.slice(Je,Et)),te.join("")}}function w(he,Me){return function(Ie){var te=Hd(1900,void 0,1),Et=k(te,he,Ie+="",0),Je,Xt;if(Et!=Ie.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Me&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Je=P2(Hd(te.y,0,1)),Xt=Je.getUTCDay(),Je=Xt>4||Xt===0?s1.ceil(Je):s1(Je),Je=Cu.offset(Je,(te.V-1)*7),te.y=Je.getUTCFullYear(),te.m=Je.getUTCMonth(),te.d=Je.getUTCDate()+(te.w+6)%7):(Je=I2(Hd(te.y,0,1)),Xt=Je.getDay(),Je=Xt>4||Xt===0?i1.ceil(Je):i1(Je),Je=ma.offset(Je,(te.V-1)*7),te.y=Je.getFullYear(),te.m=Je.getMonth(),te.d=Je.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Xt="Z"in te?P2(Hd(te.y,0,1)).getUTCDay():I2(Hd(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Xt+5)%7:te.w+te.U*7-(Xt+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,P2(te)):I2(te)}}function k(he,Me,Ie,te){for(var Et=0,Je=Me.length,Xt=Ie.length,jt,In;Et<Je;){if(te>=Xt)return-1;if(jt=Me.charCodeAt(Et++),jt===37){if(jt=Me.charAt(Et++),In=x[jt in D8?Me.charAt(Et++):jt],!In||(te=In(he,Ie,te))<0)return-1}else if(jt!=Ie.charCodeAt(te++))return-1}return te}function A(he,Me,Ie){var te=l.exec(Me.slice(Ie));return te?(he.p=c.get(te[0].toLowerCase()),Ie+te[0].length):-1}function N(he,Me,Ie){var te=h.exec(Me.slice(Ie));return te?(he.w=g.get(te[0].toLowerCase()),Ie+te[0].length):-1}function O(he,Me,Ie){var te=f.exec(Me.slice(Ie));return te?(he.w=d.get(te[0].toLowerCase()),Ie+te[0].length):-1}function $(he,Me,Ie){var te=b.exec(Me.slice(Ie));return te?(he.m=y.get(te[0].toLowerCase()),Ie+te[0].length):-1}function C(he,Me,Ie){var te=p.exec(Me.slice(Ie));return te?(he.m=m.get(te[0].toLowerCase()),Ie+te[0].length):-1}function T(he,Me,Ie){return k(he,t,Me,Ie)}function S(he,Me,Ie){return k(he,n,Me,Ie)}function M(he,Me,Ie){return k(he,r,Me,Ie)}function F(he){return a[he.getDay()]}function L(he){return s[he.getDay()]}function H(he){return o[he.getMonth()]}function J(he){return u[he.getMonth()]}function ge(he){return i[+(he.getHours()>=12)]}function ke(he){return 1+~~(he.getMonth()/3)}function Y(he){return a[he.getUTCDay()]}function ye(he){return s[he.getUTCDay()]}function Ne(he){return o[he.getUTCMonth()]}function ut(he){return u[he.getUTCMonth()]}function ot(he){return i[+(he.getUTCHours()>=12)]}function ln(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var Me=E(he+="",v);return Me.toString=function(){return he},Me},parse:function(he){var Me=w(he+="",!1);return Me.toString=function(){return he},Me},utcFormat:function(he){var Me=E(he+="",_);return Me.toString=function(){return he},Me},utcParse:function(he){var Me=w(he+="",!0);return Me.toString=function(){return he},Me}}}var D8={"-":"",_:" ",0:"0"},Cn=/^\s*\d+/,Nee=/^%/,$ee=/[\\^$*+?|[\]().{}]/g;function ct(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Fee(e){return e.replace($ee,"\\$&")}function Vd(e){return new RegExp("^(?:"+e.map(Fee).join("|")+")","i")}function Gd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Ree(e,t,n){var r=Cn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Iee(e,t,n){var r=Cn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Pee(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function jee(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Lee(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function N8(e,t,n){var r=Cn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function zee(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Bee(e,t,n){var r=Cn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Uee(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function F8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function qee(e,t,n){var r=Cn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function R8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Hee(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Vee(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Gee(e,t,n){var r=Cn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Wee(e,t,n){var r=Cn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Xee(e,t,n){var r=Nee.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Yee(e,t,n){var r=Cn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Zee(e,t,n){var r=Cn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function I8(e,t){return ct(e.getDate(),t,2)}function Qee(e,t){return ct(e.getHours(),t,2)}function Jee(e,t){return ct(e.getHours()%12||12,t,2)}function Kee(e,t){return ct(1+ma.count(Os(e),e),t,3)}function nF(e,t){return ct(e.getMilliseconds(),t,3)}function ete(e,t){return nF(e,t)+"000"}function tte(e,t){return ct(e.getMonth()+1,t,2)}function nte(e,t){return ct(e.getMinutes(),t,2)}function rte(e,t){return ct(e.getSeconds(),t,2)}function ite(e){var t=e.getDay();return t===0?7:t}function ste(e,t){return ct(sd.count(Os(e)-1,e),t,2)}function rF(e){var t=e.getDay();return t>=4||t===0?_f(e):_f.ceil(e)}function ate(e,t){return e=rF(e),ct(_f.count(Os(e),e)+(Os(e).getDay()===4),t,2)}function ute(e){return e.getDay()}function ote(e,t){return ct(i1.count(Os(e)-1,e),t,2)}function lte(e,t){return ct(e.getFullYear()%100,t,2)}function cte(e,t){return e=rF(e),ct(e.getFullYear()%100,t,2)}function fte(e,t){return ct(e.getFullYear()%1e4,t,4)}function dte(e,t){var n=e.getDay();return e=n>=4||n===0?_f(e):_f.ceil(e),ct(e.getFullYear()%1e4,t,4)}function hte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ct(t/60|0,"0",2)+ct(t%60,"0",2)}function P8(e,t){return ct(e.getUTCDate(),t,2)}function gte(e,t){return ct(e.getUTCHours(),t,2)}function pte(e,t){return ct(e.getUTCHours()%12||12,t,2)}function mte(e,t){return ct(1+Cu.count(As(e),e),t,3)}function iF(e,t){return ct(e.getUTCMilliseconds(),t,3)}function bte(e,t){return iF(e,t)+"000"}function yte(e,t){return ct(e.getUTCMonth()+1,t,2)}function vte(e,t){return ct(e.getUTCMinutes(),t,2)}function _te(e,t){return ct(e.getUTCSeconds(),t,2)}function xte(e){var t=e.getUTCDay();return t===0?7:t}function wte(e,t){return ct(ad.count(As(e)-1,e),t,2)}function sF(e){var t=e.getUTCDay();return t>=4||t===0?xf(e):xf.ceil(e)}function Ete(e,t){return e=sF(e),ct(xf.count(As(e),e)+(As(e).getUTCDay()===4),t,2)}function Ste(e){return e.getUTCDay()}function kte(e,t){return ct(s1.count(As(e)-1,e),t,2)}function Ote(e,t){return ct(e.getUTCFullYear()%100,t,2)}function Ate(e,t){return e=sF(e),ct(e.getUTCFullYear()%100,t,2)}function Cte(e,t){return ct(e.getUTCFullYear()%1e4,t,4)}function Tte(e,t){var n=e.getUTCDay();return e=n>=4||n===0?xf(e):xf.ceil(e),ct(e.getUTCFullYear()%1e4,t,4)}function Mte(){return"+0000"}function j8(){return"%"}function L8(e){return+e}function z8(e){return Math.floor(+e/1e3)}var Mc,W6,aF,X6,uF;Dte({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Dte(e){return Mc=tF(e),W6=Mc.format,aF=Mc.parse,X6=Mc.utcFormat,uF=Mc.utcParse,Mc}function mh(e){const t={};return n=>t[n]||(t[n]=e(n))}function Nte(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=$te(r,i);const a=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+a}}function $te(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function oF(e){const t=mh(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=vl(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Nte(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,a){a=vl(a??",f");const u=ju(r,i,s),o=Math.max(Math.abs(r),Math.abs(i));let l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=N$(u,o))||(a.precision=l),n(a,o);case"":case"e":case"g":case"p":case"r":{isNaN(l=$$(u,o))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=D$(u))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}let zx;lF();function lF(){return zx=oF({format:Yb,formatPrefix:U6})}function cF(e){return oF(M$(e))}function a1(e){return arguments.length?zx=cF(e):zx}function B8(e,t,n){n=n||{},be(n)||W("Invalid time multi-format specifier: ".concat(n));const r=t(gi),i=t(ei),s=t(Kr),a=t(Ir),u=t(fn),o=t(Wn),l=t(Rr),c=t($n),f=e(n[Gi]||".%L"),d=e(n[gi]||":%S"),h=e(n[ei]||"%I:%M"),g=e(n[Kr]||"%I %p"),p=e(n[Ir]||n[Un]||"%a %d"),m=e(n[fn]||"%b %d"),b=e(n[Wn]||"%B"),y=e(n[Rr]||"%B"),v=e(n[$n]||"%Y");return _=>(r(_)<_?f:i(_)<_?d:s(_)<_?h:a(_)<_?g:o(_)<_?u(_)<_?p:m:c(_)<_?l(_)<_?b:y:v)(_)}function fF(e){const t=mh(e.format),n=mh(e.utcFormat);return{timeFormat:r=>me(r)?t(r):B8(t,ud,r),utcFormat:r=>me(r)?n(r):B8(n,od,r),timeParse:mh(e.parse),utcParse:mh(e.utcParse)}}let Bx;dF();function dF(){return Bx=fF({format:W6,parse:aF,utcFormat:X6,utcParse:uF})}function hF(e){return fF(tF(e))}function l0(e){return arguments.length?Bx=hF(e):Bx}const Ux=(e,t)=>Ge({},e,t);function gF(e,t){const n=e?cF(e):a1(),r=t?hF(t):l0();return Ux(n,r)}function Y6(e,t){const n=arguments.length;return n&&n!==2&&W("defaultLocale expects either zero or two arguments."),n?Ux(a1(e),l0(t)):Ux(a1(),l0())}function Fte(){return lF(),dF(),Y6()}const Rte=/^(data:|([A-Za-z]+:)?\/\/)/,Ite=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Pte=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,U8="file://";function jte(e,t){return n=>({options:n||{},sanitize:zte,load:Lte,fileAccess:!!t,file:Bte(t),http:qte(e)})}async function Lte(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function zte(e,t){t=Ge({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,a;const u=Ite.test(e.replace(Pte,""));(e==null||typeof e!="string"||!u)&&W("Sanitize failure, invalid URI: "+fe(e));const o=Rte.test(e);return(a=t.baseURL)&&!o&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),s=(i=e.startsWith(U8))||t.mode==="file"||t.mode!=="http"&&!o&&n,i?e=e.slice(U8.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Bte(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Ute}async function Ute(){W("No file system access.")}function qte(e){return e?async function(t,n){const r=Ge({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?We(s[i])?s[i]():s.text():W(s.status+""+s.statusText)}:Hte}async function Hte(){W("No HTTP fetch method available.")}const Vte=e=>e!=null&&e===e,Gte=e=>e==="true"||e==="false"||e===!0||e===!1,Wte=e=>!Number.isNaN(Date.parse(e)),pF=e=>!Number.isNaN(+e)&&!(e instanceof Date),Xte=e=>pF(e)&&Number.isInteger(+e),qx={boolean:j6,integer:qn,number:qn,date:L6,string:z6,unknown:Qn},vp=[Gte,Xte,pF,Wte],Yte=["boolean","integer","number","date"];function mF(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=vp.length,i=vp.map((s,a)=>a+1);for(let s=0,a=0,u,o;s<n;++s)for(o=t?e[s][t]:e[s],u=0;u<r;++u)if(i[u]&&Vte(o)&&!vp[u](o)&&(i[u]=0,++a,a===vp.length))return"string";return Yte[i.reduce((s,a)=>s===0?a:s,0)-1]}function bF(e,t){return t.reduce((n,r)=>(n[r]=mF(e,r),n),{})}function q8(e){const t=function(n,r){const i={delimiter:e};return Z6(n,r?Ge(r,i):i)};return t.responseType="text",t}function Z6(e,t){return t.header&&(e=t.header.map(fe).join(t.delimiter)+`
`+e),NK(t.delimiter).parse(e+"")}Z6.responseType="text";function Zte(e){return typeof Buffer=="function"&&We(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Q6(e,t){const n=t&&t.property?Fr(t.property):Qn;return be(e)&&!Zte(e)?Qte(n(e),t):n(JSON.parse(e))}Q6.responseType="json";function Qte(e,t){return!X(e)&&l$(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Jte={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function yF(e,t){let n,r,i,s;return e=Q6(e,t),t&&t.feature?(n=IK,i=t.feature):t&&t.mesh?(n=jK,i=t.mesh,s=Jte[t.filter]):W("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):W("Invalid TopoJSON object: "+i),r&&r.features||[r]}yF.responseType="json";const om={dsv:Z6,csv:q8(","),tsv:q8("	"),json:Q6,topojson:yF};function J6(e,t){return arguments.length>1?(om[e]=t,this):Se(om,e)?om[e]:null}function vF(e){const t=J6(e);return t&&t.responseType||"text"}function _F(e,t,n,r){t=t||{};const i=J6(t.type||"json");return i||W("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Kte(e,t.parse,n,r),Se(e,"columns")&&delete e.columns,e}function Kte(e,t,n,r){if(!e.length)return;const i=l0();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),a,u,o,l,c,f;t==="auto"&&(t=bF(e,s)),s=Object.keys(t);const d=s.map(h=>{const g=t[h];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?r:n)(m);if(!qx[g])throw Error("Illegal format pattern: "+h+":"+g);return qx[g]});for(o=0,c=e.length,f=s.length;o<c;++o)for(a=e[o],l=0;l<f;++l)u=s[l],a[u]=d[l](a[u])}const ty=jte(typeof fetch<"u"&&fetch,null);function ny(e){const t=e||Qn,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function lm(e,t){try{await t(e)}catch(n){e.error(n)}}const xF=Symbol("vega_id");let ene=1;function ry(e){return!!(e&&Ae(e))}function Ae(e){return e[xF]}function wF(e,t){return e[xF]=t,e}function ht(e){const t=e===Object(e)?e:{data:e};return Ae(t)?t:wF(t,ene++)}function K6(e){return iy(e,ht({}))}function iy(e,t){for(const n in e)t[n]=e[n];return t}function EF(e,t){return wF(t,Ae(e))}function Xl(e,t){return e?t?(n,r)=>e(n,r)||Ae(t(n))-Ae(t(r)):(n,r)=>e(n,r)||Ae(n)-Ae(r):null}function SF(e){return e&&e.constructor===Yl}function Yl(){const e=[],t=[],n=[],r=[],i=[];let s=null,a=!1;return{constructor:Yl,insert(u){const o=pe(u),l=o.length;for(let c=0;c<l;++c)e.push(o[c]);return this},remove(u){const o=We(u)?r:t,l=pe(u),c=l.length;for(let f=0;f<c;++f)o.push(l[f]);return this},modify(u,o,l){const c={field:o,value:Jn(l)};return We(u)?(c.filter=u,i.push(c)):(c.tuple=u,n.push(c)),this},encode(u,o){return We(u)?i.push({filter:u,field:o}):n.push({tuple:u,field:o}),this},clean(u){return s=u,this},reflow(){return a=!0,this},pulse(u,o){const l={},c={};let f,d,h,g,p,m;for(f=0,d=o.length;f<d;++f)l[Ae(o[f])]=1;for(f=0,d=t.length;f<d;++f)p=t[f],l[Ae(p)]=-1;for(f=0,d=r.length;f<d;++f)g=r[f],o.forEach(y=>{g(y)&&(l[Ae(y)]=-1)});for(f=0,d=e.length;f<d;++f)p=e[f],m=Ae(p),l[m]?l[m]=1:u.add.push(ht(e[f]));for(f=0,d=o.length;f<d;++f)p=o[f],l[Ae(p)]<0&&u.rem.push(p);function b(y,v,_){_?y[v]=_(y):u.encode=v,a||(c[Ae(y)]=y)}for(f=0,d=n.length;f<d;++f)h=n[f],p=h.tuple,g=h.field,m=l[Ae(p)],m>0&&(b(p,g,h.value),u.modifies(g));for(f=0,d=i.length;f<d;++f)h=i[f],g=h.filter,o.forEach(y=>{g(y)&&l[Ae(y)]>0&&b(y,h.field,h.value)}),u.modifies(h.field);if(a)u.mod=t.length||r.length?o.filter(y=>l[Ae(y)]>0):o.slice();else for(m in c)u.mod.push(c[m]);return(s||s==null&&(t.length||r.length))&&u.clean(!0),u}}}const cm="_:mod:_";function sy(){Object.defineProperty(this,cm,{writable:!0,value:{}})}sy.prototype={set(e,t,n,r){const i=this,s=i[e],a=i[cm];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,a[t+":"+e]=-1,a[e]=-1):(s!==n||r)&&(i[e]=n,a[e]=X(n)?1+n.length:-1),i},modified(e,t){const n=this[cm];if(arguments.length){if(X(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[cm]={},this}};let tne=0;const nne="pulse",rne=new sy,ine=1,sne=2;function Tt(e,t,n,r){this.id=++tne,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function H8(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Tt.prototype={targets(){return this._targets||(this._targets=ny(X0))},set(e){return this.value!==e?(this.value=e,1):0},skip:H8(ine),modified:H8(sne),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new sy,i=this._argops=this._argops||[],s=[];let a,u,o,l;const c=(f,d,h)=>{h instanceof Tt?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(a in e)if(u=e[a],a===nne)pe(u).forEach(f=>{f instanceof Tt?f!==this&&(f.targets().add(this),s.push(f)):W("Pulse parameters must be operator instances.")}),this.source=u;else if(X(u))for(r.set(a,-1,Array(o=u.length)),l=0;l<o;++l)c(a,l,u[l]);else c(a,-1,u);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||rne,n=this._argops;let r,i,s,a;if(n){const u=n.length;for(i=0;i<u;++i)r=n[i],s=r.op,a=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,a);if(n.initonly){for(i=0;i<u;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function ane(e,t,n,r){let i=1,s;return e instanceof Tt?s=e:e&&e.prototype instanceof Tt?s=new e:We(e)?s=new Tt(null,e):(i=0,s=new Tt(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function une(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let one=0;function ay(e,t,n){this.id=++one,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function cu(e,t,n){return new ay(e,t,n)}ay.prototype={_filter:hi,_apply:Qn,targets(){return this._targets||(this._targets=ny(X0))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=cu(e);return this.targets().add(t),t},apply(e){const t=cu(null,e);return this.targets().add(t),t},merge(){const e=cu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=cu();return this.targets().add(cu(null,null,I6(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(cu(null,null,()=>n=!0)),t.targets().add(cu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=hi,this._targets=null}};function lne(e,t,n,r){const i=this,s=cu(n,r),a=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let u;typeof e=="string"&&typeof document<"u"?u=document.querySelectorAll(e):u=pe(e);const o=u.length;for(let l=0;l<o;++l)u[l].addEventListener(t,a);return s}function cne(e,t){const n=this.locale();return _F(e,t,n.timeParse,n.utcParse)}function fne(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function dne(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:vF(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function hne(e,t,n){const r=this,i=r._pending||gne(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(hi).insert(s.data||[])),i.done(),s}function gne(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const pne={skip:!0};function mne(e,t,n,r,i){return(e instanceof Tt?yne:bne)(this,e,t,n,r,i),this}function bne(e,t,n,r,i,s){const a=Ge({},s,pne);let u,o;We(n)||(n=Jn(n)),r===void 0?u=l=>e.touch(n(l)):We(r)?(o=new Tt(null,r,i,!1),u=l=>{o.evaluate(l);const c=n(l),f=o.value;SF(f)?e.pulse(c,f,s):e.update(c,f,a)}):u=l=>e.update(n(l),r,a),t.apply(u)}function yne(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const a=s||{},u=new Tt(null,vne(n,r),i,!1);u.modified(a.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}function vne(e,t){return t=We(t)?t:Jn(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function _ne(e){e.rank=++this._rank}function xne(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&W("Cycle detected in dataflow graph.")}const u1={},us=1<<0,hu=1<<1,ta=1<<2,wne=us|hu,V8=us|ta,Dc=us|hu|ta,G8=1<<3,Wd=1<<4,W8=1<<5,X8=1<<6;function Tu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function j2(e,t){const n=[];return du(e,t,r=>n.push(r)),n}function Y8(e,t){const n={};return e.visit(t,r=>{n[Ae(r)]=1}),r=>n[Ae(r)]?null:r}function _p(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Tu.prototype={StopPropagation:u1,ADD:us,REM:hu,MOD:ta,ADD_REM:wne,ADD_MOD:V8,ALL:Dc,REFLOW:G8,SOURCE:Wd,NO_SOURCE:W8,NO_FIELDS:X8,fork(e){return new Tu(this.dataflow).init(this,e)},clone(){const e=this.fork(Dc);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Dc|Wd)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Tu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&X8)&&(n.fields=e.fields),t&us?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&hu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ta?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&W8?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Dc;return t&us&&this.add.length||t&hu&&this.rem.length||t&ta&&this.mod.length},reflow(e){if(e)return this.fork(Dc).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ta,Y8(this,us))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return X(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?X(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&us&&(n.addF=_p(n.addF,t)),e&hu&&(n.remF=_p(n.remF,t)),e&ta&&(n.modF=_p(n.modF,t)),e&Wd&&(n.srcF=_p(n.srcF,t)),n},materialize(e){e=e||Dc;const t=this;return e&us&&t.addF&&(t.add=j2(t.add,t.addF),t.addF=null),e&hu&&t.remF&&(t.rem=j2(t.rem,t.remF),t.remF=null),e&ta&&t.modF&&(t.mod=j2(t.mod,t.modF),t.modF=null),e&Wd&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Wd)return du(n.source,n.srcF,r),n;e&us&&du(n.add,n.addF,r),e&hu&&du(n.rem,n.remF,r),e&ta&&du(n.mod,n.modF,r);const i=n.source;if(e&G8&&i){const s=n.add.length+n.mod.length;s===i.length||(s?du(i,Y8(n,V8),r):du(i,n.srcF,r))}return n}};function eE(e,t,n,r){const i=this,s=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let u=0;u<s;++u){const o=n[u];if(o.stamp===t){if(o.fields){const l=i.fields||(i.fields={});for(const c in o.fields)l[c]=1}o.changed(i.ADD)&&(a|=i.ADD),o.changed(i.REM)&&(a|=i.REM),o.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}ce(eE,Tu,{fork(e){const t=new Tu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?X(e)?e.some(r=>n[r]):n[e]:0},filter(){W("MultiPulse does not support filtering.")},materialize(){W("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Ene(e,t,n){const r=this,i=[];if(r._pulse)return kF(r);if(r._pending&&await r._pending,t&&await lm(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Tu(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=ny(X0);let a=0,u,o,l;try{for(;r._heap.size()>0;){if(u=r._heap.pop(),u.rank!==u.qrank){r._enqueue(u,!0);continue}o=u.run(r._getPulse(u,e)),o.then?o=await o:o.async&&(i.push(o.async),o=u1),o!==u1&&u._targets&&u._targets.forEach(c=>r._enqueue(c)),++a}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await lm(r,c[f].callback)}return n&&await lm(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Sne(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function kne(e,t,n){return this._pulse?kF(this):(this.evaluate(e,t,n),this)}function One(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function kF(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Ane(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Cne(e,t){const n=e.source,r=this._clock;return n&&X(n)?new eE(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Tne(this._pulse,n&&n.pulse)}function Tne(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==u1&&(e.source=t.source),e)}const tE={skip:!1,force:!1};function Mne(e,t){const n=t||tE;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Dne(e,t,n){const r=n||tE;return(e.set(t)||r.force)&&this.touch(e,r),this}function Nne(e,t,n){this.touch(e,n||tE);const r=new Tu(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function $ne(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),OF(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Fne(t,0,e)):r=n,r}}}function OF(e,t,n,r){let i,s;const a=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(a,i)<0){e[n]=i,n=s;continue}break}return e[n]=a}function Fne(e,t,n){const r=t,i=e.length,s=e[t];let a=(t<<1)+1,u;for(;a<i;)u=a+1,u<i&&n(e[a],e[u])>=0&&(a=u),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=s,OF(e,r,t,n)}function Kc(){this.logger(D6()),this.logLevel(T6),this._clock=0,this._rank=0,this._locale=Y6();try{this._loader=ty()}catch{}this._touched=ny(X0),this._input={},this._pulse=null,this._heap=$ne((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Xd(e){return function(){return this._log[e].apply(this,arguments)}}Kc.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Xd("error"),warn:Xd("warn"),info:Xd("info"),debug:Xd("debug"),logLevel:Xd("level"),cleanThreshold:1e4,add:ane,connect:une,rank:_ne,rerank:xne,pulse:Nne,touch:Mne,update:Dne,changeset:Yl,ingest:fne,parse:cne,preload:hne,request:dne,events:lne,on:mne,evaluate:Ene,run:kne,runAsync:Sne,runAfter:One,_enqueue:Ane,_getPulse:Cne};function V(e,t){Tt.call(this,e,null,t)}ce(V,Tt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Ef={};function AF(e){const t=CF(e);return t&&t.Definition||null}function CF(e){return e=e&&e.toLowerCase(),Se(Ef,e)?Ef[e]:null}function*TF(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function nE(e,t,n){const r=Float64Array.from(TF(e,n));return r.sort(pa),t.map(i=>k$(r,i))}function rE(e,t){return nE(e,[.25,.5,.75],t)}function iE(e,t){const n=e.length,r=GK(e,t),i=rE(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function MF(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],a=e.extent[1],u,o,l,c,f,d;const h=e.span||a-s||Math.abs(s)||1;if(e.step)u=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);u=e.steps[Math.max(0,f-1)]}else{for(o=Math.ceil(Math.log(t)/r),l=e.minstep||0,u=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-o));Math.ceil(h/u)>t;)u*=n;for(f=0,d=i.length;f<d;++f)c=u/i[f],c>=l&&h/c<=t&&(u=c)}c=Math.log(u);const g=c>=0?0:~~(-c/r)+1,p=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/u+p)*u,s=s<c?c-u:c,a=Math.ceil(a/u)*u),{start:s,stop:a===s?s+u:a,step:u}}var pi=Math.random;function Rne(e){pi=e}function DF(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(TF(e,r)),s=i.length,a=t;let u,o,l,c;for(l=0,c=Array(a);l<a;++l){for(u=0,o=0;o<s;++o)u+=i[~~(pi()*s)];c[l]=u/s}return c.sort(pa),[Fx(c,n/2),Fx(c,1-n/2)]}function NF(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let a=0,u=1,o=r(e[0]),l=o,c=o+t,f;for(;u<i;++u){if(f=r(e[u]),f>=c){for(l=(o+l)/2;a<u;++a)s[a]=l;c=f+t,o=f}l=f}for(l=(o+l)/2;a<u;++a)s[a]=l;return n?Ine(s,t+t/4):s}function Ine(e,t){const n=e.length;let r=0,i=1,s,a;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(a=i+(r+s-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=s}return e}function Pne(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function jne(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(a){return arguments.length?(n=a||0,i=r-n,s):n},max(a){return arguments.length?(r=a||0,i=r-n,s):r},sample(){return n+Math.floor(i*pi())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const u=Math.floor(a);return u<n?0:u>=r?1:(u-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(e).max(t)}const $F=Math.sqrt(2*Math.PI),Lne=Math.SQRT2;let Yd=NaN;function uy(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(Yd===Yd)n=Yd,Yd=NaN;else{do n=pi()*2-1,r=pi()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,Yd=r*s}return e+n*t}function sE(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*$F)}function oy(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const a=Math.exp(-i*i/2);let u;i<7.07106781186547?(u=.0352624965998911*i+.700383064443688,u=u*i+6.37396220353165,u=u*i+33.912866078383,u=u*i+112.079291497871,u=u*i+221.213596169931,u=u*i+220.206867912376,s=a*u,u=.0883883476483184*i+1.75566716318264,u=u*i+16.064177579207,u=u*i+86.7807322029461,u=u*i+296.564248779674,u=u*i+637.333633378831,u=u*i+793.826512519948,u=u*i+440.413735824752,s=s/u):(u=i+.65,u=i+4/u,u=i+3/u,u=i+2/u,u=i+1/u,s=a/u/2.506628274631)}return r>0?1-s:s}function ly(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Lne*zne(2*e-1)}function zne(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function aE(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>uy(n,r),pdf:s=>sE(s,n,r),cdf:s=>oy(s,n,r),icdf:s=>ly(s,n,r)};return i.mean(e).stdev(t)}function uE(e,t){const n=aE();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=iE(e)),i):t},sample(){return e[~~(pi()*r)]+t*n.sample()},pdf(s){let a=0,u=0;for(;u<r;++u)a+=n.pdf((s-e[u])/t);return a/t/r},cdf(s){let a=0,u=0;for(;u<r;++u)a+=n.cdf((s-e[u])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function oE(e,t){return e=e||0,t=t??1,Math.exp(e+uy()*t)}function lE(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*$F*e)}function cE(e,t,n){return oy(Math.log(e),t,n)}function fE(e,t,n){return Math.exp(ly(e,t,n))}function FF(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>oE(n,r),pdf:s=>lE(s,n,r),cdf:s=>cE(s,n,r),icdf:s=>fE(s,n,r)};return i.mean(e).stdev(t)}function RF(e,t){let n=0,r;function i(a){const u=[];let o=0,l;for(l=0;l<n;++l)o+=u[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)u[l]/=o;return u}const s={weights(a){return arguments.length?(r=i(t=a||[]),s):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),s.weights(t)):e},sample(){const a=pi();let u=e[n-1],o=r[0],l=0;for(;l<n-1;o+=r[++l])if(a<o){u=e[l];break}return u.sample()},pdf(a){let u=0,o=0;for(;o<n;++o)u+=r[o]*e[o].pdf(a);return u},cdf(a){let u=0,o=0;for(;o<n;++o)u+=r[o]*e[o].cdf(a);return u},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function dE(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*pi()}function hE(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function gE(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function pE(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function IF(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>dE(n,r),pdf:s=>hE(s,n,r),cdf:s=>gE(s,n,r),icdf:s=>pE(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function K0(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function cy(e,t,n,r){e=e.filter(h=>{let g=t(h),p=n(h);return g!=null&&(g=+g)>=g&&p!=null&&(p=+p)>=p}),r&&e.sort((h,g)=>t(h)-t(g));const i=e.length,s=new Float64Array(i),a=new Float64Array(i);let u=0,o=0,l=0,c,f,d;for(d of e)s[u]=c=+t(d),a[u]=f=+n(d),++u,o+=(c-o)/u,l+=(f-l)/u;for(u=0;u<i;++u)s[u]-=o,a[u]-=l;return[s,a,o,l]}function eg(e,t,n,r){let i=-1,s,a;for(const u of e)s=t(u),a=n(u),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&r(s,a,++i)}function ld(e,t,n,r,i){let s=0,a=0;return eg(e,t,n,(u,o)=>{const l=o-i(u),c=o-r;s+=l*l,a+=c*c}),1-s/a}function mE(e,t,n){let r=0,i=0,s=0,a=0,u=0;eg(e,t,n,(c,f)=>{++u,r+=(c-r)/u,i+=(f-i)/u,s+=(c*f-s)/u,a+=(c*c-a)/u});const o=K0(r,i,s,a),l=c=>o[0]+o[1]*c;return{coef:o,predict:l,rSquared:ld(e,t,n,i,l)}}function PF(e,t,n){let r=0,i=0,s=0,a=0,u=0;eg(e,t,n,(c,f)=>{++u,c=Math.log(c),r+=(c-r)/u,i+=(f-i)/u,s+=(c*f-s)/u,a+=(c*c-a)/u});const o=K0(r,i,s,a),l=c=>o[0]+o[1]*Math.log(c);return{coef:o,predict:l,rSquared:ld(e,t,n,i,l)}}function jF(e,t,n){const[r,i,s,a]=cy(e,t,n);let u=0,o=0,l=0,c=0,f=0,d,h,g;eg(e,t,n,(y,v)=>{d=r[f++],h=Math.log(v),g=d*v,u+=(v*h-u)/f,o+=(g-o)/f,l+=(g*h-l)/f,c+=(d*g-c)/f});const[p,m]=K0(o/a,u/a,l/a,c/a),b=y=>Math.exp(p+m*(y-s));return{coef:[Math.exp(p-m*s),m],predict:b,rSquared:ld(e,t,n,a,b)}}function LF(e,t,n){let r=0,i=0,s=0,a=0,u=0,o=0;eg(e,t,n,(f,d)=>{const h=Math.log(f),g=Math.log(d);++o,r+=(h-r)/o,i+=(g-i)/o,s+=(h*g-s)/o,a+=(h*h-a)/o,u+=(d-u)/o});const l=K0(r,i,s,a),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:ld(e,t,n,u,c)}}function bE(e,t,n){const[r,i,s,a]=cy(e,t,n),u=r.length;let o=0,l=0,c=0,f=0,d=0,h,g,p,m;for(h=0;h<u;)g=r[h],p=i[h++],m=g*g,o+=(m-o)/h,l+=(m*g-l)/h,c+=(m*m-c)/h,f+=(g*p-f)/h,d+=(m*p-d)/h;const b=c-o*o,y=o*b-l*l,v=(d*o-f*l)/y,_=(f*b-d*l)/y,x=-v*o,E=w=>(w=w-s,v*w*w+_*w+x+a);return{coef:[x-_*s+v*s*s+a,_-2*v*s,v],predict:E,rSquared:ld(e,t,n,a,E)}}function zF(e,t,n,r){if(r===1)return mE(e,t,n);if(r===2)return bE(e,t,n);const[i,s,a,u]=cy(e,t,n),o=i.length,l=[],c=[],f=r+1;let d,h,g,p,m;for(d=0;d<f;++d){for(g=0,p=0;g<o;++g)p+=Math.pow(i[g],d)*s[g];for(l.push(p),m=new Float64Array(f),h=0;h<f;++h){for(g=0,p=0;g<o;++g)p+=Math.pow(i[g],d+h);m[h]=p}c.push(m)}c.push(l);const b=Une(c),y=v=>{v-=a;let _=u+b[0]+b[1]*v+b[2]*v*v;for(d=3;d<f;++d)_+=b[d]*Math.pow(v,d);return _};return{coef:Bne(f,b,-a,u),predict:y,rSquared:ld(e,t,n,u,y)}}function Bne(e,t,n,r){const i=Array(e);let s,a,u,o;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(u=t[s],o=1,i[s]+=u,a=1;a<=s;++a)o*=(s+1-a)/a,i[s-a]+=u*Math.pow(n,a)*o;return i[0]+=r,i}function Une(e){const t=e.length-1,n=[];let r,i,s,a,u;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(s=r;s<t+1;++s)u=e[s][r],e[s][r]=e[s][a],e[s][a]=u;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(u=0,s=i+1;s<t;++s)u+=e[s][i]*n[s];n[i]=(e[t][i]-u)/e[i][i]}return n}const Z8=2,Q8=1e-12;function BF(e,t,n,r){const[i,s,a,u]=cy(e,t,n,!0),o=i.length,l=Math.max(2,~~(r*o)),c=new Float64Array(o),f=new Float64Array(o),d=new Float64Array(o).fill(1);for(let h=-1;++h<=Z8;){const g=[0,l-1];for(let m=0;m<o;++m){const b=i[m],y=g[0],v=g[1],_=b-i[y]>i[v]-b?y:v;let x=0,E=0,w=0,k=0,A=0;const N=1/Math.abs(i[_]-b||1);for(let C=y;C<=v;++C){const T=i[C],S=s[C],M=qne(Math.abs(b-T)*N)*d[C],F=T*M;x+=M,E+=F,w+=S*M,k+=S*F,A+=T*F}const[O,$]=K0(E/x,w/x,k/x,A/x);c[m]=O+$*b,f[m]=Math.abs(s[m]-c[m]),Hne(i,m+1,g)}if(h===Z8)break;const p=O$(f);if(Math.abs(p)<Q8)break;for(let m=0,b,y;m<o;++m)b=f[m]/(6*p),d[m]=b>=1?Q8:(y=1-b*b)*y}return Vne(i,c,a,u)}function qne(e){return(e=1-e*e*e)*e*e}function Hne(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Vne(e,t,n,r){const i=e.length,s=[];let a=0,u=0,o=[],l;for(;a<i;++a)l=e[a]+n,o[0]===l?o[1]+=(t[a]-o[1])/++u:(u=0,o[1]+=r,o=[l,t[a]],s.push(o));return o[1]+=r,s}const Gne=.5*Math.PI/180;function fy(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=p=>[p,e(p)],s=t[0],a=t[1],u=a-s,o=u/r,l=[i(s)],c=[];if(n===r){for(let p=1;p<r;++p)l.push(i(s+p/n*u));return l.push(i(a)),l}else{c.push(i(a));for(let p=n;--p>0;)c.push(i(s+p/n*u))}let f=l[0],d=c[c.length-1];const h=1/u,g=Wne(f[1],c);for(;d;){const p=i((f[0]+d[0])/2);p[0]-f[0]>=o&&Xne(f,p,d,h,g)>Gne?c.push(p):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function Wne(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const a=t[s][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function Xne(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-a)}function Yne(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Hx(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Yne(e)}function UF(e,t,n){return n||e+(t?"_"+t:"")}const L2=()=>{},Zne={init:L2,add:L2,rem:L2,idx:0},c0={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},tg=Object.keys(c0);function Qne(e,t){return n=>Ge({name:e,out:n||e},Zne,t)}tg.forEach(e=>{c0[e]=Qne(e,c0[e])});function qF(e,t){return c0[e](t)}function HF(e,t){return e.idx-t.idx}function Jne(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=c0[i]())})};return e.forEach(n),Object.values(t).sort(HF)}function Kne(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function ere(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function tre(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function nre(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function VF(e,t){const n=t||Qn,r=Jne(e),i=e.slice().sort(HF);function s(a){this._ops=r,this._out=i,this.cell=a,this.init()}return s.prototype.init=Kne,s.prototype.add=ere,s.prototype.rem=tre,s.prototype.set=nre,s.prototype.get=n,s.fields=e.map(a=>a.out),s}function yE(e){this._key=e?Fr(e):Ae,this.reset()}const Rn=yE.prototype;Rn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Rn.add=function(e){this._add.push(e)};Rn.rem=function(e){this._rem.push(e)};Rn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),a={};let u,o,l;for(u=0;u<i;++u)a[n(t[u])]=1;for(u=0,o=0;u<r;++u)a[n(l=e[u])]?a[n(l)]=0:s[o++]=l;return this._rem=[],this._add=s};Rn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Se(n,s)||(n[s]=1,++i);return i};Rn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=u$(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Rn.argmin=function(e){return this.extent(e)[0]||{}};Rn.argmax=function(e){return this.extent(e)[1]||{}};Rn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Rn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Rn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=rE(this.values(),e),this._get=e),this._q};Rn.q1=function(e){return this.quartile(e)[0]};Rn.q2=function(e){return this.quartile(e)[1]};Rn.q3=function(e){return this.quartile(e)[2]};Rn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=DF(this.values(),1e3,.05,e),this._get=e),this._ci};Rn.ci0=function(e){return this.ci(e)[0]};Rn.ci1=function(e){return this.ci(e)[1]};function Lu(e){V.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Lu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:tg},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ce(Lu,V,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(u){let o,l,c,f;for(o in u)for(c=u[o].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function a(u,o,l){const c=n[l],f=r[l++];for(const d in f){const h=u?u+"|"+d:d;o[c]=f[d],l<i?a(h,o,l):t[h]||e.cell(h,o)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(m){const b=pe(Gn(m)),y=b.length;let v=0,_;for(;v<y;++v)r[_=b[v]]||(r[_]=1,t.push(_))}this._dims=pe(e.groupby),this._dnames=this._dims.map(m=>{const b=Kt(m);return i(m),n.push(b),b}),this.cellkey=e.key?e.key:Hx(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],a=e.ops||["count"],u=e.as||[],o=s.length,l={};let c,f,d,h,g,p;for(o!==a.length&&W("Unmatched number of fields and aggregate ops."),p=0;p<o;++p){if(c=s[p],f=a[p],c==null&&f!=="count"&&W("Null aggregate field specified."),h=Kt(c),g=UF(f,h,u[p]),n.push(g),f==="count"){this._counts.push(g);continue}d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(qF(f,g))}return this._measures=this._measures.map(m=>VF(m,m.field)),{}},cellkey:Hx(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new yE),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let a=0;a<i;++a)s[n[a]]=r[a](e);return t?EF(t.tuple,s):ht(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,a=e.rem,u=e.mod;let o,l,c,f;if(r)for(l in r)o=r[l],(!i||o.num)&&a.push(o.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)o=n[c],(o.num===0&&i?a:u).push(this.celltuple(o)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const rre=1e-14;function vE(e){V.call(this,null,e)}vE.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ce(vE,V,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,a=e.as||["bin0","bin1"],u=a[0],o=a[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Gn(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[u]=f,c[o]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[u]=r(c)),t.modifies(n?a:u)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=MF(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,a,u;(a=e.anchor)!=null&&(u=a-(i+r*Math.floor((a-i)/r)),i+=u,s+=u);const o=function(l){let c=qn(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(rre+(c-i)/r))};return o.start=i,o.stop=n.stop,o.step=r,this.value=Ur(o,Gn(t),e.name||"bin_"+Kt(t))}});function GF(e,t,n){const r=e;let i=t||[],s=n||[],a={},u=0;return{add:o=>s.push(o),remove:o=>a[r(o)]=++u,size:()=>i.length,data:(o,l)=>(u&&(i=i.filter(c=>!a[r(c)]),a={},u=0),l&&o&&i.sort(o),s.length&&(i=o?h$(o,i,s.sort(o)):i.concat(s),s=[]),i)}}function _E(e){V.call(this,[],e)}_E.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ce(_E,V,{transform(e,t){const n=t.fork(t.ALL),r=GF(Ae,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Xl(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function WF(e){Tt.call(this,null,ire,e)}ce(WF,Tt);function ire(e){return this.value&&!e.modified()?this.value:R6(e.fields,e.orders)}function xE(e){V.call(this,null,e)}xE.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function sre(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ce(xE,V,{transform(e,t){const n=f=>d=>{for(var h=sre(u(d),e.case,s)||[],g,p=0,m=h.length;p<m;++p)a.test(g=h[p])||f(g)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,a=this._stop,u=e.field,o=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,o)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let u,o,l;for(u in n)o=r[u],l=n[u]||0,!o&&l?(r[u]=o=ht({}),o[i]=u,o[s]=l,a.add.push(o)):l===0?(o&&a.rem.push(o),n[u]=null,r[u]=null):o[s]!==l&&(o[s]=l,a.mod.push(o));return a.modifies(t)}});function wE(e){V.call(this,null,e)}wE.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ce(wE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let u=this.value;return a?(u&&(n.rem=u),u=t.materialize(t.SOURCE).source,n.add=this.value=are(u,i,s,e.filter||hi)):n.mod=u,n.source=this.value,n.modifies(r)}});function are(e,t,n,r){for(var i=[],s={},a=e.length,u=0,o,l;u<a;++u)for(s[t]=l=e[u],o=0;o<a;++o)s[n]=e[o],r(s)&&(i.push(ht(s)),s={},s[t]=l);return i}const J8={kde:uE,mixture:RF,normal:aE,lognormal:FF,uniform:IF},ure="distributions",K8="function",ore="field";function XF(e,t){const n=e[K8];Se(J8,n)||W("Unknown distribution function: "+n);const r=J8[n]();for(const i in e)i===ore?r.data((e.from||t()).map(e[i])):i===ure?r[i](e[i].map(s=>XF(s,t))):typeof r[i]===K8&&r[i](e[i]);return r}function EE(e){V.call(this,null,e)}const YF=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],lre={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:YF},{name:"weights",type:"number",array:!0}]};EE.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:YF.concat(lre)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ce(EE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=XF(e.distribution,cre(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&W("Invalid density method: "+a),!e.extent&&!r.data&&W("Missing density extent parameter."),a=r[a];const u=e.as||["value","density"],o=e.extent||ks(r.data()),l=fy(a,o,i,s).map(c=>{const f={};return f[u[0]]=c[0],f[u[1]]=c[1],ht(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function cre(e){return()=>e.materialize(e.SOURCE).source}function ZF(e,t){return e?e.map((n,r)=>t[r]||Kt(n)):null}function SE(e,t,n){const r=[],i=f=>f(o);let s,a,u,o,l,c;if(t==null)r.push(e.map(n));else for(s={},a=0,u=e.length;a<u;++a)o=e[a],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(o));return r}const QF="bin";function kE(e){V.call(this,null,e)}kE.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:QF}]};const fre=(e,t)=>Z0(ks(e,t))/30;ce(kE,V,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=SE(t.source,e.groupby,Qn),i=e.smooth||!1,s=e.field,a=e.step||fre(n,s),u=Xl((g,p)=>s(g)-s(p)),o=e.as||QF,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const g=r[d].sort(u);h=-1;for(const p of NF(g,a,i,s))p<c&&(c=p),p>f&&(f=p),g[++h][o]=p}return this.value={start:c,stop:f,step:a},t.reflow(!0).modifies(o)}});function JF(e){Tt.call(this,null,dre,e),this.modified(!0)}ce(JF,Tt);function dre(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ur(n=>t(n,e),Gn(t),Kt(t))}function OE(e){V.call(this,[void 0,void 0],e)}OE.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ce(OE,V,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,u=>{const o=qn(r(u));o!=null&&(o<s&&(s=o),o>a&&(a=o))}),!Number.isFinite(s)||!Number.isFinite(a)){let u=Kt(r);u&&(u=' for field "'.concat(u,'"')),t.dataflow.warn("Infinite extent".concat(u,": [").concat(s,", ").concat(a,"]")),s=a=void 0}this.value=[s,a]}});function AE(e,t){Tt.call(this,e),this.parent=t,this.count=0}ce(AE,Tt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function dy(e){V.call(this,{},e),this._keys=id();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ce(dy,V,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Se(i,e)&&i[e],a,u;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(u=r||(u=this._group[e])&&u.tuple,a=n.dataflow,s=new AE(n.fork(n.NO_SOURCE),this),a.add(s).connect(t(a,e,u)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,a=e.modified("key"),u=o=>this.subflow(o,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,o=>{const l=Ae(o),c=s.get(l);c!==void 0&&(s.delete(l),u(c).rem(o))}),t.visit(t.ADD,o=>{const l=r(o);s.set(Ae(o),l),u(l).add(o)}),a||t.modified(r.fields)?t.visit(t.MOD,o=>{const l=Ae(o),c=s.get(l),f=r(o);c===f?u(f).mod(o):(s.set(l,f),u(c).rem(o),u(f).add(o))}):t.changed(t.MOD)&&t.visit(t.MOD,o=>{u(s.get(Ae(o))).mod(o)}),a&&t.visit(t.REFLOW,o=>{const l=Ae(o),c=s.get(l),f=r(o);c!==f&&(s.set(l,f),u(c).rem(o),u(f).add(o))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function KF(e){Tt.call(this,null,hre,e)}ce(KF,Tt);function hre(e){return this.value&&!e.modified()?this.value:X(e.name)?pe(e.name).map(t=>Fr(t)):Fr(e.name,e.as)}function CE(e){V.call(this,id(),e)}CE.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ce(CE,V,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,a=i.rem,u=i.mod,o=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ae(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{o(f,e)?s.push(f):r.set(Ae(f),1)});function c(f){const d=Ae(f),h=o(f,e),g=r.get(d);h&&g?(r.delete(d),s.push(f)):!h&&!g?(r.set(d,1),a.push(f)):l&&h&&!g&&u.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function TE(e){V.call(this,[],e)}TE.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ce(TE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ZF(r,e.as||[]),s=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{const o=r.map(g=>g(u)),l=o.reduce((g,p)=>Math.max(g,p.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=K6(u),f=0;f<a;++f)d[i[f]]=(h=o[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function ME(e){V.call(this,[],e)}ME.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ce(ME,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Kt),s=e.as||["key","value"],a=s[0],u=s[1],o=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<o;++c)f=K6(l),f[a]=i[c],f[u]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function DE(e){V.call(this,null,e)}DE.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ce(DE,V,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,a=>a[r]=n(a,e))}});function eR(e){V.call(this,[],e)}ce(eR,V,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,a,u,o;if(s>0){for(a=[];--s>=0;)a.push(o=ht(r(e))),i.push(o);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else u=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(u):u,i=i.slice(-s);return n.source=this.value=i,n}});const xp={value:"value",median:O$,mean:JK,min:$x,max:ul},gre=[];function NE(e){V.call(this,[],e)}NE.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function pre(e){var t=e.method||xp.value,n;if(xp[t]==null)W("Unrecognized imputation method: "+t);else return t===xp.value?(n=e.value!==void 0?e.value:0,()=>n):xp[t]}function mre(e){const t=e.field;return n=>n?t(n):NaN}ce(NE,V,{transform(e,t){var n=t.fork(t.ALL),r=pre(e),i=mre(e),s=Kt(e.field),a=Kt(e.key),u=(e.groupby||[]).map(Kt),o=bre(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=o.domain.length,d,h,g,p,m,b,y,v,_,x;for(m=0,v=o.length;m<v;++m)for(d=o[m],g=d.values,h=NaN,y=0;y<f;++y)if(d[y]==null){for(p=o.domain[y],x={_impute:!0},b=0,_=g.length;b<_;++b)x[u[b]]=g[b];x[a]=p,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(ht(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function bre(e,t,n,r){var i=b=>b(m),s=[],a=r?r.slice():[],u={},o={},l,c,f,d,h,g,p,m;for(a.forEach((b,y)=>u[b]=y+1),d=0,p=e.length;d<p;++d)m=e[d],g=n(m),h=u[g]||(u[g]=a.push(g)),c=(l=t?t.map(i):gre)+"",(f=o[c])||(f=o[c]=[],s.push(f),f.values=l),f[h-1]=m;return s.domain=a,s}function $E(e){Lu.call(this,e)}$E.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:tg},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ce($E,Lu,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Ge(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function FE(e){V.call(this,null,e)}FE.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ce(FE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=SE(r,e.groupby,e.field),s=(e.groupby||[]).map(Kt),a=e.bandwidth,u=e.cumulative?"cdf":"pdf",o=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;u!=="pdf"&&u!=="cdf"&&W("Invalid density method: "+u),e.resolve==="shared"&&(c||(c=ks(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const g=uE(h,a)[u],p=e.counts?h.length:1,m=c||ks(h);fy(g,m,f,d).forEach(b=>{const y={};for(let v=0;v<s.length;++v)y[s[v]]=h.dims[v];y[o[0]]=b[0],y[o[1]]=b[1]*p,l.push(ht(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function tR(e){Tt.call(this,null,yre,e)}ce(tR,Tt);function yre(e){return this.value&&!e.modified()?this.value:P6(e.fields,e.flat)}function nR(e){V.call(this,[],e),this._pending=null}ce(nR,V,{transform(e,t){const n=t.dataflow;return this._pending?z2(this,t,this._pending):vre(e)?t.StopPropagation:e.values?z2(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pe(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>z2(this,t,pe(r.data)))}});function vre(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function z2(e,t,n){n.forEach(ht);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function RE(e){V.call(this,{},e)}RE.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ce(RE,V,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,a=e.modified(),u=n.length;let o=a?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,u>1&&!c&&W('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==u*d&&W('The "as" parameter has too few output field names.'),c=c||i.map(Kt),f=function(g){for(var p=0,m=0,b,y;p<u;++p)if(y=r.get(n[p](g)),y==null)for(b=0;b<d;++b,++m)g[c[m]]=s;else for(b=0;b<d;++b,++m)g[c[m]]=i[b](y)}):(c||W("Missing output field names."),f=function(g){for(var p=0,m;p<u;++p)m=r.get(n[p](g)),g[c[p]]=m??s}),a?l=t.reflow(!0):(h=n.some(g=>t.modified(g.fields)),o|=h?t.MOD:0),t.visit(o,f),l.modifies(c)}});function rR(e){Tt.call(this,null,_re,e)}ce(rR,Tt);function _re(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=t[s],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function iR(e){Tt.call(this,null,xre,e)}ce(iR,Tt);function xre(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function sR(e){V.call(this,null,e)}ce(sR,V,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function IE(e){Lu.call(this,e)}IE.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:tg,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ce(IE,Lu,{_transform:Lu.prototype.transform,transform(e,t){return this._transform(wre(e,t),t)}});function wre(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Gn(n).concat(Gn(r)),a=Sre(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(u=>Ere(u,n,r,s)),as:a.map(u=>u+""),modified:e.modified.bind(e)}}function Ere(e,t,n,r){return Ur(i=>t(i)===e?n(i):NaN,r,e+"")}function Sre(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const a=e(s);r[a]||(r[a]=1,i.push(a))}),i.sort(Xb),t?i.slice(0,t):i}function aR(e){dy.call(this,e)}ce(aR,dy,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ae(s),n,t,s);return(e.modified("field")||r&&t.modified(Gn(r)))&&W("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const a=i(s);r(s).forEach(u=>a.mod(u))}),t.visit(t.ADD,s=>{const a=i(s);r(s).forEach(u=>a.add(ht(u)))}),t.visit(t.REM,s=>{const a=i(s);r(s).forEach(u=>a.rem(u))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function PE(e){V.call(this,null,e)}PE.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ce(PE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ZF(e.fields,e.as||[]),s=r?(u,o)=>kre(u,o,r,i):iy;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,u=>{const o=Ae(u);n.rem.push(a[o]),a[o]=null}),t.visit(t.ADD,u=>{const o=s(u,ht({}));a[Ae(u)]=o,n.add.push(o)}),t.visit(t.MOD,u=>{n.mod.push(s(u,a[Ae(u)]))}),n}});function kre(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function uR(e){V.call(this,null,e)}ce(uR,V,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function jE(e){V.call(this,null,e)}jE.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Ore=1e-14;ce(jE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=SE(i,e.groupby,e.field),a=(e.groupby||[]).map(Kt),u=[],o=e.step||.01,l=e.probs||Qr(o/2,1-Ore,o),c=l.length;return s.forEach(f=>{const d=nE(f,l);for(let h=0;h<c;++h){const g={};for(let p=0;p<a.length;++p)g[a[p]]=f.dims[p];g[r[0]]=l[h],g[r[1]]=d[h],u.push(ht(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u,n}});function oR(e){V.call(this,null,e)}ce(oR,V,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ae(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=K6(i);r[Ae(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ae(i)];for(const a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});function LE(e){V.call(this,[],e),this.count=0}LE.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ce(LE,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ae(f)]=1,c),{});let a=this.value,u=this.count,o=0;function l(c){let f,d;a.length<i?a.push(c):(d=~~((u+1)*pi()),d<a.length&&d>=o&&(f=a[d],s[Ae(f)]&&n.rem.push(f),a[d]=c)),++u}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ae(c);s[f]&&(s[f]=-1,n.rem.push(c)),--u}),a=a.filter(c=>s[Ae(c)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(o=u=a.length,t.visit(t.SOURCE,c=>{s[Ae(c)]||l(c)}),o=-1),r&&a.length>i){const c=a.length-i;for(let f=0;f<c;++f)s[Ae(a[f])]=-1,n.rem.push(a[f]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ae(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||o<0)&&(n.add=a.filter(c=>!s[Ae(c)])),this.count=u,this.value=n.source=a,n}});function zE(e){V.call(this,null,e)}zE.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ce(zE,V,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Qr(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,ht(s)}),n.add=t.add.concat(this.value),n}});function lR(e){V.call(this,null,e),this.modified(!0)}ce(lR,V,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function BE(e){V.call(this,null,e)}const cR=["unit0","unit1"];BE.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:H6,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:cR}]};ce(BE,V,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),a=(i?od:ud)(s.unit).offset,u=e.as||cR,o=u[0],l=u[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Gn(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,g=>{const p=n(g);let m,b;p==null?(g[o]=null,r&&(g[l]=null)):(g[o]=m=b=s(p),r&&(g[l]=b=a(m,c)),m<f&&(f=m),b>d&&(d=b))}),s.start=f,s.stop=d,t.modifies(r?u:o)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:eF({extent:e.extent||ks(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=V6(r),a=this.value||{},u=(n?V$:H$)(s,i);return u.unit=rt(s),u.units=s,u.step=i,u.start=a.start,u.stop=a.stop,this.value=u}});function fR(e){V.call(this,id(),e)}ce(fR,V,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=u=>i.set(r(u),u);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,u=>i.delete(r(u))),t.visit(t.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function dR(e){V.call(this,null,e)}ce(dR,V,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Xl(e.sort)):t.source).map(e.field))}});function Are(e,t,n,r){const i=f0[e](t,n);return{init:i.init||bu,update:function(s,a){a[r]=i.next(s)}}}const f0={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=f0.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||W("ntile num must be greater than zero.");const n=f0.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||W("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Cre(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Cre(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Tre=Object.keys(f0);function hR(e){const t=pe(e.ops),n=pe(e.fields),r=pe(e.params),i=pe(e.as),s=this.outputs=[],a=this.windows=[],u={},o={},l=[],c=[];let f=!0;function d(h){pe(Gn(h)).forEach(g=>u[g]=1)}d(e.sort),t.forEach((h,g)=>{const p=n[g],m=Kt(p),b=UF(h,m,i[g]);if(d(p),s.push(b),Se(f0,h))a.push(Are(h,n[g],r[g],b));else{if(p==null&&h!=="count"&&W("Null aggregate field specified."),h==="count"){l.push(b);return}f=!1;let y=o[m];y||(y=o[m]=[],y.field=p,c.push(y)),y.push(qF(h,b))}}),(l.length||c.length)&&(this.cell=Mre(c,l,f)),this.inputs=Object.keys(u)}const gR=hR.prototype;gR.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};gR.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<s;++a)r[a].update(e,t)};function Mre(e,t,n){e=e.map(o=>VF(o,o.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),a=0;a<i;++a)s[a]=new e[a](r);if(r.store)var u=r.data=new yE;return r.add=function(o){if(r.num+=1,!n){u&&u.add(o);for(let l=0;l<i;++l)s[l].add(s[l].get(o),o)}},r.rem=function(o){if(r.num-=1,!n){u&&u.rem(o);for(let l=0;l<i;++l)s[l].rem(s[l].get(o),o)}},r.set=function(o){let l,c;for(u&&u.values(),l=0,c=t.length;l<c;++l)o[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(o)},r.init=function(){r.num=0,u&&u.reset();for(let o=0;o<i;++o)s[o].init()},r}function UE(e){V.call(this,{},e),this._mlen=0,this._mods=[]}UE.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Tre.concat(tg)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ce(UE,V,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Xl(e.sort),i=Hx(e.groupby),s=u=>this.group(i(u));let a=this.state;(!a||n)&&(a=this.state=new hR(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,u=>s(u).add(u))):(t.visit(t.REM,u=>s(u).remove(u)),t.visit(t.ADD,u=>s(u).add(u)));for(let u=0,o=this._mlen;u<o;++u)Dre(this._mods[u],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=GF(Ae),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Dre(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,a=r.frame||[null,0],u=e.data(n),o=u.length,l=s?Q0(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:i||Jn(-1)};t.init();for(let f=0;f<o;++f)Nre(c,a,f,o),s&&$re(c,l),t.update(c,u[f])}function Nre(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function $re(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<a&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Fre=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Lu,bin:vE,collect:_E,compare:WF,countpattern:xE,cross:wE,density:EE,dotbin:kE,expression:JF,extent:OE,facet:dy,field:KF,filter:CE,flatten:TE,fold:ME,formula:DE,generate:eR,impute:NE,joinaggregate:$E,kde:FE,key:tR,load:nR,lookup:RE,multiextent:rR,multivalues:iR,params:sR,pivot:IE,prefacet:aR,project:PE,proxy:uR,quantile:jE,relay:oR,sample:LE,sequence:zE,sieve:lR,subflow:AE,timeunit:BE,tupleindex:fR,values:dR,window:UE},Symbol.toStringTag,{value:"Module"}));function gt(e){return function(){return e}}const eC=Math.abs,Pn=Math.atan2,zo=Math.cos,Rre=Math.max,B2=Math.min,rs=Math.sin,el=Math.sqrt,Ln=1e-12,Sf=Math.PI,o1=Sf/2,pR=2*Sf;function Ire(e){return e>1?0:e<-1?Sf:Math.acos(e)}function tC(e){return e>=1?o1:e<=-1?-o1:Math.asin(e)}const Vx=Math.PI,Gx=2*Vx,Ho=1e-6,Pre=Gx-Ho;function mR(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function jre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mR;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let qE=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mR:jre(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,o=r-t,l=i-n,c=a-t,f=u-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Ho)if(!(Math.abs(f*o-l*c)>Ho)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-a,g=i-u,p=o*o+l*l,m=h*h+g*g,b=Math.sqrt(p),y=Math.sqrt(d),v=s*Math.tan((Vx-Math.acos((p+d-m)/(2*b*y)))/2),_=v/y,x=v/b;Math.abs(_-1)>Ho&&this._append`L${t+_*c},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*h>c*g)},${this._x1=t+x*o},${this._y1=n+x*l}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),o=r*Math.sin(i),l=t+u,c=n+o,f=1^a,d=a?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ho||Math.abs(this._y1-c)>Ho)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Gx+Gx),d>Pre?this._append`A${r},${r},0,1,${f},${t-u},${n-o}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Ho&&this._append`A${r},${r},0,${+(d>=Vx)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function hy(){return new qE}hy.prototype=qE.prototype;function gy(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new qE(t)}function Lre(e){return e.innerRadius}function zre(e){return e.outerRadius}function Bre(e){return e.startAngle}function Ure(e){return e.endAngle}function qre(e){return e&&e.padAngle}function Hre(e,t,n,r,i,s,a,u){var o=n-e,l=r-t,c=a-i,f=u-s,d=f*o-c*l;if(!(d*d<Ln))return d=(c*(t-s)-f*(e-i))/d,[e+d*o,t+d*l]}function wp(e,t,n,r,i,s,a){var u=e-n,o=t-r,l=(a?s:-s)/el(u*u+o*o),c=l*o,f=-l*u,d=e+c,h=t+f,g=n+c,p=r+f,m=(d+g)/2,b=(h+p)/2,y=g-d,v=p-h,_=y*y+v*v,x=i-s,E=d*p-g*h,w=(v<0?-1:1)*el(Rre(0,x*x*_-E*E)),k=(E*v-y*w)/_,A=(-E*y-v*w)/_,N=(E*v+y*w)/_,O=(-E*y+v*w)/_,$=k-m,C=A-b,T=N-m,S=O-b;return $*$+C*C>T*T+S*S&&(k=N,A=O),{cx:k,cy:A,x01:-c,y01:-f,x11:k*(i/x-1),y11:A*(i/x-1)}}function Vre(){var e=Lre,t=zre,n=gt(0),r=null,i=Bre,s=Ure,a=qre,u=null,o=gy(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),g=i.apply(this,arguments)-o1,p=s.apply(this,arguments)-o1,m=eC(p-g),b=p>g;if(u||(u=c=o()),h<d&&(f=h,h=d,d=f),!(h>Ln))u.moveTo(0,0);else if(m>pR-Ln)u.moveTo(h*zo(g),h*rs(g)),u.arc(0,0,h,g,p,!b),d>Ln&&(u.moveTo(d*zo(p),d*rs(p)),u.arc(0,0,d,p,g,b));else{var y=g,v=p,_=g,x=p,E=m,w=m,k=a.apply(this,arguments)/2,A=k>Ln&&(r?+r.apply(this,arguments):el(d*d+h*h)),N=B2(eC(h-d)/2,+n.apply(this,arguments)),O=N,$=N,C,T;if(A>Ln){var S=tC(A/d*rs(k)),M=tC(A/h*rs(k));(E-=S*2)>Ln?(S*=b?1:-1,_+=S,x-=S):(E=0,_=x=(g+p)/2),(w-=M*2)>Ln?(M*=b?1:-1,y+=M,v-=M):(w=0,y=v=(g+p)/2)}var F=h*zo(y),L=h*rs(y),H=d*zo(x),J=d*rs(x);if(N>Ln){var ge=h*zo(v),ke=h*rs(v),Y=d*zo(_),ye=d*rs(_),Ne;if(m<Sf)if(Ne=Hre(F,L,Y,ye,ge,ke,H,J)){var ut=F-Ne[0],ot=L-Ne[1],ln=ge-Ne[0],he=ke-Ne[1],Me=1/rs(Ire((ut*ln+ot*he)/(el(ut*ut+ot*ot)*el(ln*ln+he*he)))/2),Ie=el(Ne[0]*Ne[0]+Ne[1]*Ne[1]);O=B2(N,(d-Ie)/(Me-1)),$=B2(N,(h-Ie)/(Me+1))}else O=$=0}w>Ln?$>Ln?(C=wp(Y,ye,F,L,h,$,b),T=wp(ge,ke,H,J,h,$,b),u.moveTo(C.cx+C.x01,C.cy+C.y01),$<N?u.arc(C.cx,C.cy,$,Pn(C.y01,C.x01),Pn(T.y01,T.x01),!b):(u.arc(C.cx,C.cy,$,Pn(C.y01,C.x01),Pn(C.y11,C.x11),!b),u.arc(0,0,h,Pn(C.cy+C.y11,C.cx+C.x11),Pn(T.cy+T.y11,T.cx+T.x11),!b),u.arc(T.cx,T.cy,$,Pn(T.y11,T.x11),Pn(T.y01,T.x01),!b))):(u.moveTo(F,L),u.arc(0,0,h,y,v,!b)):u.moveTo(F,L),!(d>Ln)||!(E>Ln)?u.lineTo(H,J):O>Ln?(C=wp(H,J,ge,ke,d,-O,b),T=wp(F,L,Y,ye,d,-O,b),u.lineTo(C.cx+C.x01,C.cy+C.y01),O<N?u.arc(C.cx,C.cy,O,Pn(C.y01,C.x01),Pn(T.y01,T.x01),!b):(u.arc(C.cx,C.cy,O,Pn(C.y01,C.x01),Pn(C.y11,C.x11),!b),u.arc(0,0,d,Pn(C.cy+C.y11,C.cx+C.x11),Pn(T.cy+T.y11,T.cx+T.x11),b),u.arc(T.cx,T.cy,O,Pn(T.y11,T.x11),Pn(T.y01,T.x01),!b))):u.arc(0,0,d,x,_,b)}if(u.closePath(),c)return u=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Sf/2;return[zo(f)*c,rs(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:gt(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:gt(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:gt(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:gt(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:gt(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:gt(+c),l):s},l.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:gt(+c),l):a},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function bR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yR(e){this._context=e}yR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function HE(e){return new yR(e)}function vR(e){return e[0]}function _R(e){return e[1]}function xR(e,t){var n=gt(!0),r=null,i=HE,s=null,a=gy(u);e=typeof e=="function"?e:e===void 0?vR:gt(e),t=typeof t=="function"?t:t===void 0?_R:gt(t);function u(o){var l,c=(o=bR(o)).length,f,d=!1,h;for(r==null&&(s=i(h=a())),l=0;l<=c;++l)!(l<c&&n(f=o[l],l,o))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,o),+t(f,l,o));if(h)return s=null,h+""||null}return u.x=function(o){return arguments.length?(e=typeof o=="function"?o:gt(+o),u):e},u.y=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),u):t},u.defined=function(o){return arguments.length?(n=typeof o=="function"?o:gt(!!o),u):n},u.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),u):i},u.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),u):r},u}function wR(e,t,n){var r=null,i=gt(!0),s=null,a=HE,u=null,o=gy(l);e=typeof e=="function"?e:e===void 0?vR:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?_R:gt(+n);function l(f){var d,h,g,p=(f=bR(f)).length,m,b=!1,y,v=new Array(p),_=new Array(p);for(s==null&&(u=a(y=o())),d=0;d<=p;++d){if(!(d<p&&i(m=f[d],d,f))===b)if(b=!b)h=d,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),g=d-1;g>=h;--g)u.point(v[g],_[g]);u.lineEnd(),u.areaEnd()}b&&(v[d]=+e(m,d,f),_[d]=+t(m,d,f),u.point(r?+r(m,d,f):v[d],n?+n(m,d,f):_[d]))}if(y)return u=null,y+""||null}function c(){return xR().defined(i).curve(a).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:gt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:gt(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:gt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,s!=null&&(u=a(s)),l):a},l.context=function(f){return arguments.length?(f==null?s=u=null:u=a(s=f),l):s},l}const Gre={draw(e,t){const n=el(t/Sf);e.moveTo(n,0),e.arc(0,0,n,0,pR)}};function Wre(e,t){let n=null,r=gy(i);e=typeof e=="function"?e:gt(e||Gre),t=typeof t=="function"?t:gt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:gt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:gt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function zu(){}function l1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function py(e){this._context=e}py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:l1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:l1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xre(e){return new py(e)}function ER(e){this._context=e}ER.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:l1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yre(e){return new ER(e)}function SR(e){this._context=e}SR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:l1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zre(e){return new SR(e)}function kR(e,t){this._basis=new py(e),this._beta=t}kR.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,u=-1,o;++u<=n;)o=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+o*s),this._beta*t[u]+(1-this._beta)*(i+o*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Qre=function e(t){function n(r){return t===1?new py(r):new kR(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function c1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function VE(e,t){this._context=e,this._k=(1-t)/6}VE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:c1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jre=function e(t){function n(r){return new VE(r,t)}return n.tension=function(r){return e(+r)},n}(0);function GE(e,t){this._context=e,this._k=(1-t)/6}GE.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:c1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kre=function e(t){function n(r){return new GE(r,t)}return n.tension=function(r){return e(+r)},n}(0);function WE(e,t){this._context=e,this._k=(1-t)/6}WE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eie=function e(t){function n(r){return new WE(r,t)}return n.tension=function(r){return e(+r)},n}(0);function XE(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>Ln){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,o=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/o,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/o}if(e._l23_a>Ln){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function OR(e,t){this._context=e,this._alpha=t}OR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:XE(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tie=function e(t){function n(r){return t?new OR(r,t):new VE(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function AR(e,t){this._context=e,this._alpha=t}AR.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:XE(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nie=function e(t){function n(r){return t?new AR(r,t):new GE(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CR(e,t){this._context=e,this._alpha=t}CR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:XE(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rie=function e(t){function n(r){return t?new CR(r,t):new WE(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TR(e){this._context=e}TR.prototype={areaStart:zu,areaEnd:zu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function iie(e){return new TR(e)}function nC(e){return e<0?-1:1}function rC(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),u=(s*i+a*r)/(r+i);return(nC(s)+nC(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(u))||0}function iC(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function U2(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,a-u*n,s,a)}function f1(e){this._context=e}f1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:U2(this,this._t0,iC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,U2(this,iC(this,n=rC(this,e,t)),n);break;default:U2(this,this._t0,n=rC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MR(e){this._context=new DR(e)}(MR.prototype=Object.create(f1.prototype)).point=function(e,t){f1.prototype.point.call(this,t,e)};function DR(e){this._context=e}DR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function sie(e){return new f1(e)}function aie(e){return new MR(e)}function NR(e){this._context=e}NR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=sC(e),i=sC(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function sC(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function uie(e){return new NR(e)}function my(e,t){this._context=e,this._t=t}my.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function oie(e){return new my(e,.5)}function lie(e){return new my(e,0)}function cie(e){return new my(e,1)}function Mu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const fie=()=>typeof Image<"u"?Image:null;function Is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function so(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Wx=Symbol("implicit");function YE(){var e=new w8,t=[],n=[],r=Wx;function i(s){let a=e.get(s);if(a===void 0){if(r!==Wx)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new w8;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return YE(t,n).unknown(r)},Is.apply(i,arguments),i}function cd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ng(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ao(){}var _l=.7,kf=1/_l,ef="\\s*([+-]?\\d+)\\s*",d0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ys="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",die=/^#([0-9a-f]{3,8})$/,hie=new RegExp(`^rgb\\(${ef},${ef},${ef}\\)$`),gie=new RegExp(`^rgb\\(${ys},${ys},${ys}\\)$`),pie=new RegExp(`^rgba\\(${ef},${ef},${ef},${d0}\\)$`),mie=new RegExp(`^rgba\\(${ys},${ys},${ys},${d0}\\)$`),bie=new RegExp(`^hsl\\(${d0},${ys},${ys}\\)$`),yie=new RegExp(`^hsla\\(${d0},${ys},${ys},${d0}\\)$`),aC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cd(ao,h0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uC,formatHex:uC,formatHex8:vie,formatHsl:_ie,formatRgb:oC,toString:oC});function uC(){return this.rgb().formatHex()}function vie(){return this.rgb().formatHex8()}function _ie(){return $R(this).formatHsl()}function oC(){return this.rgb().formatRgb()}function h0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=die.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lC(t):n===3?new vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ep(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ep(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hie.exec(e))?new vn(t[1],t[2],t[3],1):(t=gie.exec(e))?new vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pie.exec(e))?Ep(t[1],t[2],t[3],t[4]):(t=mie.exec(e))?Ep(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bie.exec(e))?dC(t[1],t[2]/100,t[3]/100,1):(t=yie.exec(e))?dC(t[1],t[2]/100,t[3]/100,t[4]):aC.hasOwnProperty(e)?lC(aC[e]):e==="transparent"?new vn(NaN,NaN,NaN,0):null}function lC(e){return new vn(e>>16&255,e>>8&255,e&255,1)}function Ep(e,t,n,r){return r<=0&&(e=t=n=NaN),new vn(e,t,n,r)}function ZE(e){return e instanceof ao||(e=h0(e)),e?(e=e.rgb(),new vn(e.r,e.g,e.b,e.opacity)):new vn}function Bu(e,t,n,r){return arguments.length===1?ZE(e):new vn(e,t,n,r??1)}function vn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}cd(vn,Bu,ng(ao,{brighter(e){return e=e==null?kf:Math.pow(kf,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_l:Math.pow(_l,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vn(ol(this.r),ol(this.g),ol(this.b),d1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cC,formatHex:cC,formatHex8:xie,formatRgb:fC,toString:fC}));function cC(){return`#${tl(this.r)}${tl(this.g)}${tl(this.b)}`}function xie(){return`#${tl(this.r)}${tl(this.g)}${tl(this.b)}${tl((isNaN(this.opacity)?1:this.opacity)*255)}`}function fC(){const e=d1(this.opacity);return`${e===1?"rgb(":"rgba("}${ol(this.r)}, ${ol(this.g)}, ${ol(this.b)}${e===1?")":`, ${e})`}`}function d1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ol(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tl(e){return e=ol(e),(e<16?"0":"")+e.toString(16)}function dC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Di(e,t,n,r)}function $R(e){if(e instanceof Di)return new Di(e.h,e.s,e.l,e.opacity);if(e instanceof ao||(e=h0(e)),!e)return new Di;if(e instanceof Di)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,u=s-i,o=(s+i)/2;return u?(t===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-t)/u+2:a=(t-n)/u+4,u/=o<.5?s+i:2-s-i,a*=60):u=o>0&&o<1?0:a,new Di(a,u,o,e.opacity)}function h1(e,t,n,r){return arguments.length===1?$R(e):new Di(e,t,n,r??1)}function Di(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}cd(Di,h1,ng(ao,{brighter(e){return e=e==null?kf:Math.pow(kf,e),new Di(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_l:Math.pow(_l,e),new Di(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new vn(q2(e>=240?e-240:e+120,i,r),q2(e,i,r),q2(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Di(hC(this.h),Sp(this.s),Sp(this.l),d1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=d1(this.opacity);return`${e===1?"hsl(":"hsla("}${hC(this.h)}, ${Sp(this.s)*100}%, ${Sp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hC(e){return e=(e||0)%360,e<0?e+360:e}function Sp(e){return Math.max(0,Math.min(1,e||0))}function q2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const FR=Math.PI/180,RR=180/Math.PI,g1=18,IR=.96422,PR=1,jR=.82521,LR=4/29,tf=6/29,zR=3*tf*tf,wie=tf*tf*tf;function BR(e){if(e instanceof vs)return new vs(e.l,e.a,e.b,e.opacity);if(e instanceof ca)return UR(e);e instanceof vn||(e=ZE(e));var t=W2(e.r),n=W2(e.g),r=W2(e.b),i=H2((.2225045*t+.7168786*n+.0606169*r)/PR),s,a;return t===n&&n===r?s=a=i:(s=H2((.4360747*t+.3850649*n+.1430804*r)/IR),a=H2((.0139322*t+.0971045*n+.7141733*r)/jR)),new vs(116*i-16,500*(s-i),200*(i-a),e.opacity)}function p1(e,t,n,r){return arguments.length===1?BR(e):new vs(e,t,n,r??1)}function vs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}cd(vs,p1,ng(ao,{brighter(e){return new vs(this.l+g1*(e??1),this.a,this.b,this.opacity)},darker(e){return new vs(this.l-g1*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=IR*V2(t),e=PR*V2(e),n=jR*V2(n),new vn(G2(3.1338561*t-1.6168667*e-.4906146*n),G2(-.9787684*t+1.9161415*e+.033454*n),G2(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function H2(e){return e>wie?Math.pow(e,1/3):e/zR+LR}function V2(e){return e>tf?e*e*e:zR*(e-LR)}function G2(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function W2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Eie(e){if(e instanceof ca)return new ca(e.h,e.c,e.l,e.opacity);if(e instanceof vs||(e=BR(e)),e.a===0&&e.b===0)return new ca(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*RR;return new ca(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function m1(e,t,n,r){return arguments.length===1?Eie(e):new ca(e,t,n,r??1)}function ca(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function UR(e){if(isNaN(e.h))return new vs(e.l,0,0,e.opacity);var t=e.h*FR;return new vs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}cd(ca,m1,ng(ao,{brighter(e){return new ca(this.h,this.c,this.l+g1*(e??1),this.opacity)},darker(e){return new ca(this.h,this.c,this.l-g1*(e??1),this.opacity)},rgb(){return UR(this).rgb()}}));var qR=-.14861,QE=1.78277,JE=-.29227,by=-.90649,g0=1.97294,gC=g0*by,pC=g0*QE,mC=QE*JE-by*qR;function Sie(e){if(e instanceof ll)return new ll(e.h,e.s,e.l,e.opacity);e instanceof vn||(e=ZE(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(mC*r+gC*t-pC*n)/(mC+gC-pC),s=r-i,a=(g0*(n-i)-JE*s)/by,u=Math.sqrt(a*a+s*s)/(g0*i*(1-i)),o=u?Math.atan2(a,s)*RR-120:NaN;return new ll(o<0?o+360:o,u,i,e.opacity)}function Xx(e,t,n,r){return arguments.length===1?Sie(e):new ll(e,t,n,r??1)}function ll(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}cd(ll,Xx,ng(ao,{brighter(e){return e=e==null?kf:Math.pow(kf,e),new ll(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_l:Math.pow(_l,e),new ll(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*FR,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new vn(255*(t+n*(qR*r+QE*i)),255*(t+n*(JE*r+by*i)),255*(t+n*(g0*r)),this.opacity)}}));function HR(e,t,n,r,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*i)/6}function VR(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],a=r>0?e[r-1]:2*i-s,u=r<t-1?e[r+2]:2*s-i;return HR((n-r/t)*t,a,i,s,u)}}function GR(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],u=e[(r+2)%t];return HR((n-r/t)*t,i,s,a,u)}}const yy=e=>()=>e;function WR(e,t){return function(n){return e+n*t}}function kie(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vy(e,t){var n=t-e;return n?WR(e,n>180||n<-180?n-360*Math.round(n/360):n):yy(isNaN(e)?t:e)}function Oie(e){return(e=+e)==1?_n:function(t,n){return n-t?kie(t,n,e):yy(isNaN(t)?n:t)}}function _n(e,t){var n=t-e;return n?WR(e,n):yy(isNaN(e)?t:e)}const Yx=function e(t){var n=Oie(t);function r(i,s){var a=n((i=Bu(i)).r,(s=Bu(s)).r),u=n(i.g,s.g),o=n(i.b,s.b),l=_n(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=u(c),i.b=o(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function XR(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),a,u;for(a=0;a<n;++a)u=Bu(t[a]),r[a]=u.r||0,i[a]=u.g||0,s[a]=u.b||0;return r=e(r),i=e(i),s=e(s),u.opacity=1,function(o){return u.r=r(o),u.g=i(o),u.b=s(o),u+""}}}var Aie=XR(VR),Cie=XR(GR);function KE(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function YR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tie(e,t){return(YR(t)?KE:ZR)(e,t)}function ZR(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=uo(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(u){for(a=0;a<r;++a)s[a]=i[a](u);return s}}function QR(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ti(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function JR(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=uo(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Zx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X2=new RegExp(Zx.source,"g");function Mie(e){return function(){return e}}function Die(e){return function(t){return e(t)+""}}function KR(e,t){var n=Zx.lastIndex=X2.lastIndex=0,r,i,s,a=-1,u=[],o=[];for(e=e+"",t=t+"";(r=Zx.exec(e))&&(i=X2.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,o.push({i:a,x:Ti(r,i)})),n=X2.lastIndex;return n<t.length&&(s=t.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?o[0]?Die(o[0].x):Mie(t):(t=o.length,function(l){for(var c=0,f;c<t;++c)u[(f=o[c]).i]=f.x(l);return u.join("")})}function uo(e,t){var n=typeof t,r;return t==null||n==="boolean"?yy(t):(n==="number"?Ti:n==="string"?(r=h0(t))?(t=r,Yx):KR:t instanceof h0?Yx:t instanceof Date?QR:YR(t)?KE:Array.isArray(t)?ZR:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?JR:Ti)(e,t)}function Nie(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function $ie(e,t){var n=vy(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function rg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var bC=180/Math.PI,Qx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eI(e,t,n,r,i,s){var a,u,o;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(o=e*n+t*r)&&(n-=e*o,r-=t*o),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,o/=u),e*r<t*n&&(e=-e,t=-t,o=-o,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*bC,skewX:Math.atan(o)*bC,scaleX:a,scaleY:u}}var kp;function Fie(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Qx:eI(t.a,t.b,t.c,t.d,t.e,t.f)}function Rie(e){return e==null||(kp||(kp=document.createElementNS("http://www.w3.org/2000/svg","g")),kp.setAttribute("transform",e),!(e=kp.transform.baseVal.consolidate()))?Qx:(e=e.matrix,eI(e.a,e.b,e.c,e.d,e.e,e.f))}function tI(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:Ti(l,f)},{i:p-2,x:Ti(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ti(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ti(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function o(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:Ti(l,f)},{i:p-2,x:Ti(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),a(l.rotate,c.rotate,f,d),u(l.skewX,c.skewX,f,d),o(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var g=-1,p=d.length,m;++g<p;)f[(m=d[g]).i]=m.x(h);return f.join("")}}}var Iie=tI(Fie,"px, ","px)","deg)"),Pie=tI(Rie,", ",")",")"),jie=1e-12;function yC(e){return((e=Math.exp(e))+1/e)/2}function Lie(e){return((e=Math.exp(e))-1/e)/2}function zie(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bie=function e(t,n,r){function i(s,a){var u=s[0],o=s[1],l=s[2],c=a[0],f=a[1],d=a[2],h=c-u,g=f-o,p=h*h+g*g,m,b;if(p<jie)b=Math.log(d/l)/t,m=function(w){return[u+w*h,o+w*g,l*Math.exp(t*w*b)]};else{var y=Math.sqrt(p),v=(d*d-l*l+r*p)/(2*l*n*y),_=(d*d-l*l-r*p)/(2*d*n*y),x=Math.log(Math.sqrt(v*v+1)-v),E=Math.log(Math.sqrt(_*_+1)-_);b=(E-x)/t,m=function(w){var k=w*b,A=yC(x),N=l/(n*y)*(A*zie(t*k+x)-Lie(x));return[u+N*h,o+N*g,l*A/yC(t*k+x)]}}return m.duration=b*1e3*t/Math.SQRT2,m}return i.rho=function(s){var a=Math.max(.001,+s),u=a*a,o=u*u;return e(a,u,o)},i}(Math.SQRT2,2,4);function nI(e){return function(t,n){var r=e((t=h1(t)).h,(n=h1(n)).h),i=_n(t.s,n.s),s=_n(t.l,n.l),a=_n(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=s(u),t.opacity=a(u),t+""}}}const Uie=nI(vy);var qie=nI(_n);function Hie(e,t){var n=_n((e=p1(e)).l,(t=p1(t)).l),r=_n(e.a,t.a),i=_n(e.b,t.b),s=_n(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=s(a),e+""}}function rI(e){return function(t,n){var r=e((t=m1(t)).h,(n=m1(n)).h),i=_n(t.c,n.c),s=_n(t.l,n.l),a=_n(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=s(u),t.opacity=a(u),t+""}}}const Vie=rI(vy);var Gie=rI(_n);function iI(e){return function t(n){n=+n;function r(i,s){var a=e((i=Xx(i)).h,(s=Xx(s)).h),u=_n(i.s,s.s),o=_n(i.l,s.l),l=_n(i.opacity,s.opacity);return function(c){return i.h=a(c),i.s=u(c),i.l=o(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Wie=iI(vy);var Xie=iI(_n);function e4(e,t){t===void 0&&(t=e,e=uo);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var u=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[u](a-u)}}function Yie(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Zie=Object.freeze(Object.defineProperty({__proto__:null,interpolate:uo,interpolateArray:Tie,interpolateBasis:VR,interpolateBasisClosed:GR,interpolateCubehelix:Wie,interpolateCubehelixLong:Xie,interpolateDate:QR,interpolateDiscrete:Nie,interpolateHcl:Vie,interpolateHclLong:Gie,interpolateHsl:Uie,interpolateHslLong:qie,interpolateHue:$ie,interpolateLab:Hie,interpolateNumber:Ti,interpolateNumberArray:KE,interpolateObject:JR,interpolateRgb:Yx,interpolateRgbBasis:Aie,interpolateRgbBasisClosed:Cie,interpolateRound:rg,interpolateString:KR,interpolateTransformCss:Iie,interpolateTransformSvg:Pie,interpolateZoom:Bie,piecewise:e4,quantize:Yie},Symbol.toStringTag,{value:"Module"}));function Qie(e){return function(){return e}}function Jx(e){return+e}var vC=[0,1];function Or(e){return e}function Kx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Qie(isNaN(t)?NaN:.5)}function Jie(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Kie(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=Kx(i,r),s=n(a,s)):(r=Kx(r,i),s=n(s,a)),function(u){return s(r(u))}}function ese(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Kx(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(u){var o=J0(e,u,1,r)-1;return s[o](i[o](u))}}function ig(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _y(){var e=vC,t=vC,n=uo,r,i,s,a=Or,u,o,l;function c(){var d=Math.min(e.length,t.length);return a!==Or&&(a=Jie(e[0],e[d-1])),u=d>2?ese:Kie,o=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(o||(o=u(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=u(t,e.map(r),Ti)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Jx),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=rg,c()},f.clamp=function(d){return arguments.length?(a=d?!0:Or,c()):a!==Or},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function sI(){return _y()(Or,Or)}function aI(e,t,n,r){var i=ju(e,t,n),s;switch(r=vl(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=N$(i,a))&&(r.precision=s),U6(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=$$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=D$(i))&&(r.precision=s-(r.type==="%")*2);break}}return Yb(r)}function Zl(e){var t=e.domain;return e.ticks=function(n){var r=t();return Dx(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return aI(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],u=r[s],o,l,c=10;for(u<a&&(l=a,a=u,u=l,l=i,i=s,s=l);c-- >0;){if(l=Nx(a,u,n),l===o)return r[i]=a,r[s]=u,t(r);if(l>0)a=Math.floor(a/l)*l,u=Math.ceil(u/l)*l;else if(l<0)a=Math.ceil(a*l)/l,u=Math.floor(u*l)/l;else break;o=l}return e},e}function uI(){var e=sI();return e.copy=function(){return ig(e,uI())},Is.apply(e,arguments),Zl(e)}function oI(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Jx),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return oI(e).unknown(t)},e=arguments.length?Array.from(e,Jx):[0,1],Zl(n)}function lI(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function _C(e){return Math.log(e)}function xC(e){return Math.exp(e)}function tse(e){return-Math.log(-e)}function nse(e){return-Math.exp(-e)}function rse(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ise(e){return e===10?rse:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sse(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wC(e){return(t,n)=>-e(-t,n)}function t4(e){const t=e(_C,xC),n=t.domain;let r=10,i,s;function a(){return i=sse(r),s=ise(r),n()[0]<0?(i=wC(i),s=wC(s),e(tse,nse)):e(_C,xC),t}return t.base=function(u){return arguments.length?(r=+u,a()):r},t.domain=function(u){return arguments.length?(n(u),a()):n()},t.ticks=u=>{const o=n();let l=o[0],c=o[o.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),g,p;const m=u==null?10:+u;let b=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(g=1;g<r;++g)if(p=d<0?g/s(-d):g*s(d),!(p<l)){if(p>c)break;b.push(p)}}else for(;d<=h;++d)for(g=r-1;g>=1;--g)if(p=d>0?g/s(-d):g*s(d),!(p<l)){if(p>c)break;b.push(p)}b.length*2<m&&(b=Dx(l,c,m))}else b=Dx(d,h,Math.min(h-d,m)).map(s);return f?b.reverse():b},t.tickFormat=(u,o)=>{if(u==null&&(u=10),o==null&&(o=r===10?"s":","),typeof o!="function"&&(!(r%1)&&(o=vl(o)).precision==null&&(o.trim=!0),o=Yb(o)),u===1/0)return o;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?o(c):""}},t.nice=()=>n(lI(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function cI(){const e=t4(_y()).domain([1,10]);return e.copy=()=>ig(e,cI()).base(e.base()),Is.apply(e,arguments),e}function EC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function SC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function n4(e){var t=1,n=e(EC(t),SC(t));return n.constant=function(r){return arguments.length?e(EC(t=+r),SC(t)):t},Zl(n)}function fI(){var e=n4(_y());return e.copy=function(){return ig(e,fI()).constant(e.constant())},Is.apply(e,arguments)}function kC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ase(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function use(e){return e<0?-e*e:e*e}function r4(e){var t=e(Or,Or),n=1;function r(){return n===1?e(Or,Or):n===.5?e(ase,use):e(kC(n),kC(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Zl(t)}function i4(){var e=r4(_y());return e.copy=function(){return ig(e,i4()).exponent(e.exponent())},Is.apply(e,arguments),e}function ose(){return i4.apply(null,arguments).exponent(.5)}function dI(){var e=[],t=[],n=[],r;function i(){var a=0,u=Math.max(1,t.length);for(n=new Array(u-1);++a<u;)n[a-1]=k$(e,a/u);return s}function s(a){return a==null||isNaN(a=+a)?r:t[J0(n,a)]}return s.invertExtent=function(a){var u=t.indexOf(a);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let u of a)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(pa),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return dI().domain(e).range(t).unknown(r)},Is.apply(s,arguments)}function hI(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(o){return o!=null&&o<=o?i[J0(r,o,0,n)]:s}function u(){var o=-1;for(r=new Array(n);++o<n;)r[o]=((o+1)*t-(o-n)*e)/(n+1);return a}return a.domain=function(o){return arguments.length?([e,t]=o,e=+e,t=+t,u()):[e,t]},a.range=function(o){return arguments.length?(n=(i=Array.from(o)).length-1,u()):i.slice()},a.invertExtent=function(o){var l=i.indexOf(o);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(o){return arguments.length&&(s=o),a},a.thresholds=function(){return r.slice()},a.copy=function(){return hI().domain([e,t]).range(i).unknown(s)},Is.apply(Zl(a),arguments)}function gI(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[J0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return gI().domain(e).range(t).unknown(n)},Is.apply(i,arguments)}function lse(e){return new Date(e)}function cse(e){return e instanceof Date?+e:+new Date(+e)}function s4(e,t,n,r,i,s,a,u,o,l){var c=sI(),f=c.invert,d=c.domain,h=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),b=l("%a %d"),y=l("%b %d"),v=l("%B"),_=l("%Y");function x(E){return(o(E)<E?h:u(E)<E?g:a(E)<E?p:s(E)<E?m:r(E)<E?i(E)<E?b:y:n(E)<E?v:_)(E)}return c.invert=function(E){return new Date(f(E))},c.domain=function(E){return arguments.length?d(Array.from(E,cse)):d().map(lse)},c.ticks=function(E){var w=d();return e(w[0],w[w.length-1],E??10)},c.tickFormat=function(E,w){return w==null?x:l(w)},c.nice=function(E){var w=d();return(!E||typeof E.range!="function")&&(E=t(w[0],w[w.length-1],E??10)),E?d(lI(w,E)):c},c.copy=function(){return ig(c,s4(e,t,n,r,i,s,a,u,o,l))},c}function fse(){return Is.apply(s4(bee,yee,Os,u0,sd,ma,Jb,Zb,la,W6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dse(){return Is.apply(s4(pee,mee,As,o0,ad,Cu,Kb,Qb,la,X6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xy(){var e=0,t=1,n,r,i,s,a=Or,u=!1,o;function l(f){return f==null||isNaN(f=+f)?o:a(i===0?.5:(f=(s(f)-n)*i,u?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(u=!!f,l):u},l.interpolator=function(f){return arguments.length?(a=f,l):a};function c(f){return function(d){var h,g;return arguments.length?([h,g]=d,a=f(h,g),l):[a(0),a(1)]}}return l.range=c(uo),l.rangeRound=c(rg),l.unknown=function(f){return arguments.length?(o=f,l):o},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function oo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function a4(){var e=Zl(xy()(Or));return e.copy=function(){return oo(e,a4())},so.apply(e,arguments)}function pI(){var e=t4(xy()).domain([1,10]);return e.copy=function(){return oo(e,pI()).base(e.base())},so.apply(e,arguments)}function mI(){var e=n4(xy());return e.copy=function(){return oo(e,mI()).constant(e.constant())},so.apply(e,arguments)}function u4(){var e=r4(xy());return e.copy=function(){return oo(e,u4()).exponent(e.exponent())},so.apply(e,arguments)}function hse(){return u4.apply(null,arguments).exponent(.5)}function wy(){var e=0,t=.5,n=1,r=1,i,s,a,u,o,l=Or,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-s)*(r*p<r*s?u:o),l(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),s=c(t=+t),a=c(n=+n),u=i===s?0:.5/(s-i),o=s===a?0:.5/(a-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function g(p){return function(m){var b,y,v;return arguments.length?([b,y,v]=m,l=e4(p,[b,y,v]),h):[l(0),l(.5),l(1)]}}return h.range=g(uo),h.rangeRound=g(rg),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),s=p(t),a=p(n),u=i===s?0:.5/(s-i),o=s===a?0:.5/(a-s),r=s<i?-1:1,h}}function bI(){var e=Zl(wy()(Or));return e.copy=function(){return oo(e,bI())},so.apply(e,arguments)}function yI(){var e=t4(wy()).domain([.1,1,10]);return e.copy=function(){return oo(e,yI()).base(e.base())},so.apply(e,arguments)}function vI(){var e=n4(wy());return e.copy=function(){return oo(e,vI()).constant(e.constant())},so.apply(e,arguments)}function o4(){var e=r4(wy());return e.copy=function(){return oo(e,o4()).exponent(e.exponent())},so.apply(e,arguments)}function gse(){return o4.apply(null,arguments).exponent(.5)}function l4(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const pse="identity",Of="linear",ka="log",sg="pow",ag="sqrt",Ey="symlog",xl="time",wl="utc",_s="sequential",fd="diverging",Af="quantile",Sy="quantize",ky="threshold",c4="ordinal",ew="point",_I="band",f4="bin-ordinal",pn="continuous",ug="discrete",og="discretizing",_i="interpolating",d4="temporal";function mse(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function bse(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,u,o,l;for(i<r&&(u=r,r=i,i=u),o=0,l=n.length;o<l;++o)n[o]>=r&&n[o]<=i&&(s<0&&(s=o),a=o);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function h4(){const e=YE().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,u=0,o=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],g=l4(f,u,o);let p=r[d-0];i=(h-p)/(g||1),a&&(i=Math.floor(i)),p+=(h-p-i*(f-u))*l,s=i*(1-u),a&&(p=Math.round(p),s=Math.round(s));const m=Qr(f).map(b=>p+i*b);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),u=o,c()):u},e.paddingInner=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.paddingOuter=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),g=h.length-1;let p=+f[0],m=+f[1],b,y,v;if(!(p!==p||m!==m)&&(m<p&&(v=p,p=m,m=v),!(m<h[0]||p>r[1-d])))return b=Math.max(0,e1(h,p)-1),y=p===m?b:e1(h,m)-1,p-h[b]>s+1e-10&&++b,d&&(v=b,b=g-y,y=g-v),b>y?void 0:t().slice(b,y+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return h4().domain(t()).range(r).round(a).paddingInner(u).paddingOuter(o).align(l)},c()}function xI(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return xI(t())},e}function yse(){return xI(h4().paddingInner(1))}var vse=Array.prototype.map;function _se(e){return vse.call(e,qn)}const xse=Array.prototype.slice;function wI(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(J0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=_se(r),n):e.slice()},n.range=function(r){return arguments.length?(t=xse.call(r),n):t.slice()},n.tickFormat=function(r,i){return aI(e[0],rt(e),r??10,i)},n.copy=function(){return wI().domain(n.domain()).range(n.range())},n}const b1={};function wse(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?mse(s):s.invertExtent?bse(s):void 0),s.type=e,s};return r.metadata=Vi(pe(n)),r}function ft(e,t,n){return arguments.length>1?(b1[e]=wse(e,t,n),this):EI(e)?b1[e]:void 0}ft(pse,oI);ft(Of,uI,pn);ft(ka,cI,[pn,ka]);ft(sg,i4,pn);ft(ag,ose,pn);ft(Ey,fI,pn);ft(xl,fse,[pn,d4]);ft(wl,dse,[pn,d4]);ft(_s,a4,[pn,_i]);ft("".concat(_s,"-").concat(Of),a4,[pn,_i]);ft("".concat(_s,"-").concat(ka),pI,[pn,_i,ka]);ft("".concat(_s,"-").concat(sg),u4,[pn,_i]);ft("".concat(_s,"-").concat(ag),hse,[pn,_i]);ft("".concat(_s,"-").concat(Ey),mI,[pn,_i]);ft("".concat(fd,"-").concat(Of),bI,[pn,_i]);ft("".concat(fd,"-").concat(ka),yI,[pn,_i,ka]);ft("".concat(fd,"-").concat(sg),o4,[pn,_i]);ft("".concat(fd,"-").concat(ag),gse,[pn,_i]);ft("".concat(fd,"-").concat(Ey),vI,[pn,_i]);ft(Af,dI,[og,Af]);ft(Sy,hI,og);ft(ky,gI,og);ft(f4,wI,[ug,og]);ft(c4,YE,ug);ft(_I,h4,ug);ft(ew,yse,ug);function EI(e){return Se(b1,e)}function Ql(e,t){const n=b1[e];return n&&n.metadata[t]}function g4(e){return Ql(e,pn)}function Cf(e){return Ql(e,ug)}function tw(e){return Ql(e,og)}function SI(e){return Ql(e,ka)}function Ese(e){return Ql(e,d4)}function kI(e){return Ql(e,_i)}function OI(e){return Ql(e,Af)}const Sse=["clamp","base","constant","exponent"];function AI(e,t){const n=t[0],r=rt(t)-n;return function(i){return e(n+i*r)}}function Oy(e,t,n){return e4(p4(t||"rgb",n),e)}function CI(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function TI(e,t,n){const r=n-t;let i,s,a;return!r||!Number.isFinite(r)?Jn(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=ft(s)().domain([t,n]).range([0,1]),Sse.forEach(u=>e[u]?a[u](e[u]()):0),a)}function p4(e,t){const n=Zie[kse(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function kse(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Ose={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ase={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function MI(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function DI(e,t){for(const n in e)m4(n,t(e[n]))}const OC={};DI(Ase,MI);DI(Ose,e=>Oy(MI(e)));function m4(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(OC[e]=t,this):OC[e]}const fm="symbol",Cse="discrete",Tse="gradient",Mse=e=>X(e)?e.map(t=>String(t)):String(e),Dse=(e,t)=>e[1]-t[1],Nse=(e,t)=>t[1]-e[1];function b4(e,t,n){let r;return Ot(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Z0(e.domain())/n||1)))),be(t)&&(r=t.step,t=t.interval),me(t)&&(t=e.type===xl?ud(t):e.type==wl?od(t):W("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function NI(e,t,n){let r=e.range(),i=r[0],s=rt(r),a=Dse;if(i>s&&(r=s,s=i,i=r,a=Nse),i=Math.floor(i),s=Math.ceil(s),t=t.map(u=>[u,e(u)]).filter(u=>i<=u[1]&&u[1]<=s).sort(a).map(u=>u[0]),n>0&&t.length>1){const u=[t[0],rt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((o,l)=>!(l%2));t.length<3&&(t=u)}return t}function y4(e,t){return e.bins?NI(e,e.bins):e.ticks?e.ticks(t):e.domain()}function $I(e,t,n,r,i,s){const a=t.type;let u=Mse;if(a===xl||i===xl)u=e.timeFormat(r);else if(a===wl||i===wl)u=e.utcFormat(r);else if(SI(a)){const o=e.formatFloat(r);if(s||t.bins)u=o;else{const l=FI(t,n,!1);u=c=>l(c)?o(c):""}}else if(t.tickFormat){const o=t.domain();u=e.formatSpan(o[0],o[o.length-1],n,r)}else r&&(u=e.format(r));return u}function FI(e,t,n){const r=y4(e,t),i=e.base(),s=Math.log(i),a=Math.max(1,i*t/r.length),u=o=>{let l=o/Math.pow(i,Math.round(Math.log(o)/s));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(u):u}const nw={[Af]:"quantiles",[Sy]:"thresholds",[ky]:"domain"},RI={[Af]:"quantiles",[Sy]:"domain"};function II(e,t){return e.bins?Rse(e.bins):e.type===ka?FI(e,t,!0):nw[e.type]?Fse(e[nw[e.type]]()):y4(e,t)}function $se(e,t,n){const r=t[RI[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)s=Math.min(s,r[a]-r[a-1]);return e.formatSpan(0,s,3*10,n)}function Fse(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Rse(e){const t=e.slice(0,-1);return t.max=rt(e),t}const Ise=e=>nw[e.type]||e.bins;function PI(e,t,n,r,i,s,a){const u=RI[t.type]&&s!==xl&&s!==wl?$se(e,t,i):$I(e,t,n,i,s,a);return r===fm&&Ise(t)?Pse(u):r===Cse?jse(u):Lse(u)}const Pse=e=>(t,n,r)=>{const i=AC(r[n+1],AC(r.max,1/0)),s=CC(t,e),a=CC(i,e);return s&&a?s+"  "+a:a?"< "+a:" "+s},AC=(e,t)=>e??t,jse=e=>(t,n)=>n?e(t):null,Lse=e=>t=>e(t),CC=(e,t)=>Number.isFinite(e)?t(e):null;function zse(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+rt(t),s=i-r;if(e.type===ky){const a=n?s/n:.1;r-=a,i+=a,s=i-r}return a=>(a-r)/s}function Bse(e,t,n,r){const i=r||t.type;return me(n)&&Ese(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===xl?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===wl?e.utcFormat("%A, %d %B %Y, %X UTC"):PI(e,t,5,null,n,r,!0)}function jI(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Bse(e,t,n.format,n.formatType);if(tw(t.type)){const s=II(t).slice(1).map(i),a=s.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(s.join(", "))}else if(Cf(t.type)){const s=t.domain(),a=s.length,u=a>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(u)}else{const s=t.domain();return"values from ".concat(i(s[0])," to ").concat(i(rt(s)))}}let LI=0;function Use(){LI=0}const y1="p_";function v4(e){return e&&e.gradient}function zI(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?y1:"";return i||(i=e.id="gradient_"+LI++,r==="radial"?(e.x1=is(e.x1,.5),e.y1=is(e.y1,.5),e.r1=is(e.r1,0),e.x2=is(e.x2,.5),e.y2=is(e.y2,.5),e.r2=is(e.r2,.5),s=y1):(e.x1=is(e.x1,0),e.y1=is(e.y1,0),e.x2=is(e.x2,1),e.y2=is(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function is(e,t){return e??t}function BI(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const TC={basis:{curve:Xre},"basis-closed":{curve:Yre},"basis-open":{curve:Zre},bundle:{curve:Qre,tension:"beta",value:.85},cardinal:{curve:Jre,tension:"tension",value:0},"cardinal-open":{curve:eie,tension:"tension",value:0},"cardinal-closed":{curve:Kre,tension:"tension",value:0},"catmull-rom":{curve:tie,tension:"alpha",value:.5},"catmull-rom-closed":{curve:nie,tension:"alpha",value:.5},"catmull-rom-open":{curve:rie,tension:"alpha",value:.5},linear:{curve:HE},"linear-closed":{curve:iie},monotone:{horizontal:aie,vertical:sie},natural:{curve:uie},step:{curve:oie},"step-after":{curve:cie},"step-before":{curve:lie}};function _4(e,t,n){var r=Se(TC,e)&&TC[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const qse={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Hse=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Vse=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Gse=/^((\s+,?\s*)|(,\s*))/,Wse=/^[01]/;function Tf(e){const t=[];return(e.match(Hse)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),a=qse[s],u=Xse(s,a,r.slice(1).trim()),o=u.length;if(o<a||o&&o%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...u.slice(0,a)]),o!==a){s==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<o;l+=a)t.push([i,...u.slice(l,l+a)])}}),t}function Xse(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?Wse:Vse,u=n.slice(i).match(a);if(u===null)throw Error("Invalid SVG path, incorrect parameter type");i+=u[0].length,r.push(+u[0]);const o=n.slice(i).match(Gse);o!==null&&(i+=o[0].length)}return r}const Uu=Math.PI/180,Yse=1e-14,Xo=Math.PI/2,cs=Math.PI*2,Nc=Math.sqrt(3)/2;var Y2={},Z2={},UI=[].join;function Zse(e,t,n,r,i,s,a,u,o){const l=UI.call(arguments);if(Y2[l])return Y2[l];const c=a*Uu,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(u-e)*.5+f*(o-t)*.5,g=d*(o-t)*.5-f*(u-e)*.5;let p=h*h/(n*n)+g*g/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const m=d/n,b=f/n,y=-f/r,v=d/r,_=m*u+b*o,x=y*u+v*o,E=m*e+b*t,w=y*e+v*t;let A=1/((E-_)*(E-_)+(w-x)*(w-x))-.25;A<0&&(A=0);let N=Math.sqrt(A);s==i&&(N=-N);const O=.5*(_+E)-N*(w-x),$=.5*(x+w)+N*(E-_),C=Math.atan2(x-$,_-O);let S=Math.atan2(w-$,E-O)-C;S<0&&s===1?S+=cs:S>0&&s===0&&(S-=cs);const M=Math.ceil(Math.abs(S/(Xo+.001))),F=[];for(let L=0;L<M;++L){const H=C+L*S/M,J=C+(L+1)*S/M;F[L]=[O,$,H,J,n,r,f,d]}return Y2[l]=F}function Qse(e){const t=UI.call(e);if(Z2[t])return Z2[t];var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],u=e[5],o=e[6],l=e[7];const c=l*a,f=-o*u,d=o*a,h=l*u,g=Math.cos(i),p=Math.sin(i),m=Math.cos(s),b=Math.sin(s),y=.5*(s-i),v=Math.sin(y*.5),_=8/3*v*v/Math.sin(y),x=n+g-_*p,E=r+p+_*g,w=n+m,k=r+b,A=w+_*b,N=k-_*m;return Z2[t]=[c*x+f*E,d*x+h*E,c*A+f*N,d*A+h*N,c*w+f*k,d*w+h*k]}const ai=["l",0,0,0,0,0,0,0];function Jse(e,t,n){const r=ai[0]=e[0];if(r==="a"||r==="A")ai[1]=t*e[1],ai[2]=n*e[2],ai[3]=e[3],ai[4]=e[4],ai[5]=e[5],ai[6]=t*e[6],ai[7]=n*e[7];else if(r==="h"||r==="H")ai[1]=t*e[1];else if(r==="v"||r==="V")ai[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)ai[i]=(i%2==1?t:n)*e[i];return ai}function p0(e,t,n,r,i,s){var a,u=null,o=0,l=0,c=0,f=0,d,h,g,p,m=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var y=0,v=t.length;y<v;++y){switch(a=t[y],(i!==1||s!==1)&&(a=Jse(a,i,s)),a[0]){case"l":o+=a[1],l+=a[2],e.lineTo(o+n,l+r);break;case"L":o=a[1],l=a[2],e.lineTo(o+n,l+r);break;case"h":o+=a[1],e.lineTo(o+n,l+r);break;case"H":o=a[1],e.lineTo(o+n,l+r);break;case"v":l+=a[1],e.lineTo(o+n,l+r);break;case"V":l=a[1],e.lineTo(o+n,l+r);break;case"m":o+=a[1],l+=a[2],m=o,b=l,e.moveTo(o+n,l+r);break;case"M":o=a[1],l=a[2],m=o,b=l,e.moveTo(o+n,l+r);break;case"c":d=o+a[5],h=l+a[6],c=o+a[3],f=l+a[4],e.bezierCurveTo(o+a[1]+n,l+a[2]+r,c+n,f+r,d+n,h+r),o=d,l=h;break;case"C":o=a[5],l=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,f+r,o+n,l+r);break;case"s":d=o+a[3],h=l+a[4],c=2*o-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o+a[1]+n,l+a[2]+r,d+n,h+r),c=o+a[1],f=l+a[2],o=d,l=h;break;case"S":d=a[3],h=a[4],c=2*o-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,a[1]+n,a[2]+r,d+n,h+r),o=d,l=h,c=a[1],f=a[2];break;case"q":d=o+a[3],h=l+a[4],c=o+a[1],f=l+a[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),o=d,l=h;break;case"Q":d=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,h+r),o=d,l=h,c=a[1],f=a[2];break;case"t":d=o+a[1],h=l+a[2],u[0].match(/[QqTt]/)===null?(c=o,f=l):u[0]==="t"?(c=2*o-g,f=2*l-p):u[0]==="q"&&(c=2*o-c,f=2*l-f),g=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),o=d,l=h,c=o+a[1],f=l+a[2];break;case"T":d=a[1],h=a[2],c=2*o-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),o=d,l=h;break;case"a":MC(e,o+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+o+n,a[7]+l+r]),o+=a[6],l+=a[7];break;case"A":MC(e,o+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),o=a[6],l=a[7];break;case"z":case"Z":o=m,l=b,e.closePath();break}u=a}}function MC(e,t,n,r){const i=Zse(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const a=Qse(i[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const DC=.5773502691896257,NC={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,cs)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Nc*n,i=r-n*DC,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Nc*n,i=r-n*DC;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Nc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Nc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Nc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Nc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function qI(e){return Se(NC,e)?NC[e]:Kse(e)}var Q2={};function Kse(e){if(!Se(Q2,e)){const t=Tf(e);Q2[e]={draw:function(n,r){p0(n,t,0,0,Math.sqrt(r)/2)}}}return Q2[e]}const uu=.448084975506;function eae(e){return e.x}function tae(e){return e.y}function nae(e){return e.width}function rae(e){return e.height}function Zs(e){return typeof e=="function"?e:()=>+e}function Op(e,t,n){return Math.max(t,Math.min(e,n))}function HI(){var e=eae,t=tae,n=nae,r=rae,i=Zs(0),s=i,a=i,u=i,o=null;function l(c,f,d){var h,g=f??+e.call(this,c),p=d??+t.call(this,c),m=+n.call(this,c),b=+r.call(this,c),y=Math.min(m,b)/2,v=Op(+i.call(this,c),0,y),_=Op(+s.call(this,c),0,y),x=Op(+a.call(this,c),0,y),E=Op(+u.call(this,c),0,y);if(o||(o=h=hy()),v<=0&&_<=0&&x<=0&&E<=0)o.rect(g,p,m,b);else{var w=g+m,k=p+b;o.moveTo(g+v,p),o.lineTo(w-_,p),o.bezierCurveTo(w-uu*_,p,w,p+uu*_,w,p+_),o.lineTo(w,k-E),o.bezierCurveTo(w,k-uu*E,w-uu*E,k,w-E,k),o.lineTo(g+x,k),o.bezierCurveTo(g+uu*x,k,g,k-uu*x,g,k-x),o.lineTo(g,p+v),o.bezierCurveTo(g,p+uu*v,g+uu*v,p,g+v,p),o.closePath()}if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(e=Zs(c),l):e},l.y=function(c){return arguments.length?(t=Zs(c),l):t},l.width=function(c){return arguments.length?(n=Zs(c),l):n},l.height=function(c){return arguments.length?(r=Zs(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Zs(c),s=f!=null?Zs(f):i,u=d!=null?Zs(d):i,a=h!=null?Zs(h):s,l):i},l.context=function(c){return arguments.length?(o=c??null,l):o},l}function VI(){var e,t,n,r,i=null,s,a,u,o;function l(f,d,h){const g=h/2;if(s){var p=u-d,m=f-a;if(p||m){var b=Math.sqrt(p*p+m*m),y=(p/=b)*o,v=(m/=b)*o,_=Math.atan2(m,p);i.moveTo(a-y,u-v),i.lineTo(f-p*g,d-m*g),i.arc(f,d,g,_-Math.PI,_),i.lineTo(a+y,u+v),i.arc(a,u,o,_,_+Math.PI)}else i.arc(f,d,g,0,cs);i.closePath()}else s=1;a=f,u=d,o=g}function c(f){var d,h=f.length,g,p=!1,m;for(i==null&&(i=m=hy()),d=0;d<=h;++d)!(d<h&&r(g=f[d],d,f))===p&&(p=!p)&&(s=0),p&&l(+e(g,d,f),+t(g,d,f),+n(g,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function lg(e,t){return e??t}const cg=e=>e.x||0,fg=e=>e.y||0,iae=e=>e.width||0,sae=e=>e.height||0,aae=e=>(e.x||0)+(e.width||0),uae=e=>(e.y||0)+(e.height||0),oae=e=>e.startAngle||0,lae=e=>e.endAngle||0,cae=e=>e.padAngle||0,fae=e=>e.innerRadius||0,dae=e=>e.outerRadius||0,hae=e=>e.cornerRadius||0,gae=e=>lg(e.cornerRadiusTopLeft,e.cornerRadius)||0,pae=e=>lg(e.cornerRadiusTopRight,e.cornerRadius)||0,mae=e=>lg(e.cornerRadiusBottomRight,e.cornerRadius)||0,bae=e=>lg(e.cornerRadiusBottomLeft,e.cornerRadius)||0,yae=e=>lg(e.size,64),vae=e=>e.size||1,Ay=e=>e.defined!==!1,_ae=e=>qI(e.shape||"circle"),xae=Vre().startAngle(oae).endAngle(lae).padAngle(cae).innerRadius(fae).outerRadius(dae).cornerRadius(hae),wae=wR().x(cg).y1(fg).y0(uae).defined(Ay),Eae=wR().y(fg).x1(cg).x0(aae).defined(Ay),Sae=xR().x(cg).y(fg).defined(Ay),kae=HI().x(cg).y(fg).width(iae).height(sae).cornerRadius(gae,pae,mae,bae),Oae=Wre().type(_ae).size(yae),Aae=VI().x(cg).y(fg).defined(Ay).size(vae);function x4(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Cae(e,t){return xae.context(e)(t)}function Tae(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Eae:wae).curve(_4(r,n.orient,n.tension)).context(e)(t)}function Mae(e,t){const n=t[0],r=n.interpolate||"linear";return Sae.curve(_4(r,n.orient,n.tension)).context(e)(t)}function dd(e,t,n,r){return kae.context(e)(t,n,r)}function Dae(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Nae(e,t){return Oae.context(e)(t)}function $ae(e,t){return Aae.context(e)(t)}var GI=1;function WI(){GI=1}function w4(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+GI++),a=i.clipping[s]||(i.clipping[s]={id:s});return We(r)?a.path=r(null):x4(n)?a.path=dd(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function an(e){this.clear(),e&&this.union(e)}an.prototype={clone(){return new an(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:a}=this,u=Math.cos(e),o=Math.sin(e),l=t-t*u+n*o,c=n-t*o-n*u;return[u*r-o*i+l,o*r+u*i+c,u*r-o*a+l,o*r+u*a+c,u*s-o*i+l,o*s+u*i+c,u*s-o*a+l,o*s+u*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Cy(e){this.mark=e,this.bounds=this.bounds||new an}function Ty(e){Cy.call(this,e),this.items=this.items||[]}ce(Ty,Cy);function E4(e){this._pending=0,this._loader=e||ty()}function $C(e){e._pending+=1}function Zd(e){e._pending-=1}E4.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return $C(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Zd(t),n)).catch(()=>(Zd(t),null))},loadImage(e){const t=this,n=fie();return $C(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,a=Se(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Zd(t),s.onerror=()=>Zd(t),s.src=i,s}).catch(r=>(Zd(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Ta(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Fae(t,r):0))}return e}function Fae(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Rae=cs-1e-8;let My,dm,hm,nl,rw,gm,iw,sw;const vu=(e,t)=>My.add(e,t),pm=(e,t)=>vu(dm=e,hm=t),FC=e=>vu(e,My.y1),RC=e=>vu(My.x1,e),Yo=(e,t)=>rw*e+iw*t,Zo=(e,t)=>gm*e+sw*t,J2=(e,t)=>vu(Yo(e,t),Zo(e,t)),K2=(e,t)=>pm(Yo(e,t),Zo(e,t));function dg(e,t){return My=e,t?(nl=t*Uu,rw=sw=Math.cos(nl),gm=Math.sin(nl),iw=-gm):(rw=sw=1,nl=gm=iw=0),Iae}const Iae={beginPath(){},closePath(){},moveTo:K2,lineTo:K2,rect(e,t,n,r){nl?(J2(e+n,t),J2(e+n,t+r),J2(e,t+r),K2(e,t)):(vu(e+n,t+r),pm(e,t))},quadraticCurveTo(e,t,n,r){const i=Yo(e,t),s=Zo(e,t),a=Yo(n,r),u=Zo(n,r);IC(dm,i,a,FC),IC(hm,s,u,RC),pm(a,u)},bezierCurveTo(e,t,n,r,i,s){const a=Yo(e,t),u=Zo(e,t),o=Yo(n,r),l=Zo(n,r),c=Yo(i,s),f=Zo(i,s);PC(dm,a,o,c,FC),PC(hm,u,l,f,RC),pm(c,f)},arc(e,t,n,r,i,s){if(r+=nl,i+=nl,dm=n*Math.cos(i)+e,hm=n*Math.sin(i)+t,Math.abs(i-r)>Rae)vu(e-n,t-n),vu(e+n,t+n);else{const a=l=>vu(n*Math.cos(l)+e,n*Math.sin(l)+t);let u,o;if(a(r),a(i),i!==r)if(r=r%cs,r<0&&(r+=cs),i=i%cs,i<0&&(i+=cs),i<r&&(s=!s,u=r,r=i,i=u),s)for(i-=cs,u=r-r%Xo,o=0;o<4&&u>i;++o,u-=Xo)a(u);else for(u=r-r%Xo+Xo,o=0;o<4&&u<i;++o,u=u+Xo)a(u)}}};function IC(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function PC(e,t,n,r,i){const s=r-e+3*t-3*n,a=e+n-2*t,u=e-t;let o=0,l=0,c;Math.abs(s)>Yse?(c=a*a+u*s,c>=0&&(c=Math.sqrt(c),o=(-a+c)/s,l=(-a-c)/s)):o=.5*u/a,0<o&&o<1&&i(jC(o,e,t,n,r)),0<l&&l<1&&i(jC(l,e,t,n,r))}function jC(e,t,n,r,i){const s=1-e,a=s*s,u=e*e;return a*s*t+3*a*e*n+3*s*u*r+u*e*i}var Du=(Du=Mu(1,1))?Du.getContext("2d"):null;const aw=new an;function S4(e){return function(t,n){if(!Du)return!0;e(Du,t),aw.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:a}=aw;for(let u=i;u<=a;++u)for(let o=r;o<=s;++o)if(Du.isPointInPath(o,u))return!0;return!1}}function k4(e,t){return t.contains(e.x||0,e.y||0)}function XI(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(aw.set(n,r,n+i,r+s))}function YI(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Xc(t,n,r,i,s)}function Xc(e,t,n,r,i){const{x1:s,y1:a,x2:u,y2:o}=e,l=r-t,c=i-n;let f=0,d=1,h,g,p,m;for(m=0;m<4;++m){if(m===0&&(h=-l,g=-(s-t)),m===1&&(h=l,g=u-t),m===2&&(h=-c,g=-(a-n)),m===3&&(h=c,g=o-n),Math.abs(h)<1e-10&&g<0)return!1;if(p=g/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function Mf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ki(e,t){return e??t}function LC(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Pae(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+ki(t.x1,.5)*r,n.y1+ki(t.y1,.5)*i,Math.max(r,i)*ki(t.r1,0),n.x1+ki(t.x2,.5)*r,n.y1+ki(t.y2,.5)*i,Math.max(r,i)*ki(t.r2,.5));else{const a=ki(t.x1,0),u=ki(t.y1,0),o=ki(t.x2,1),l=ki(t.y2,0);if(a===o||u===l||r===i)s=e.createLinearGradient(n.x1+a*r,n.y1+u*i,n.x1+o*r,n.y1+l*i);else{const c=Mu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=LC(f.createLinearGradient(a,u,o,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return LC(s,t.stops)}function ZI(e,t,n){return v4(n)?Pae(e,n,t.bounds):n}function v1(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=ZI(e,t,t.fill),!0):!1}var jae=[];function Df(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=ZI(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||jae),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Lae(e,t){return e.zindex-t.zindex||e.index-t.index}function O4(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Lae)}function Wi(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=O4(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function _1(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=O4(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function A4(e){return function(t,n,r){Wi(n,i=>{(!r||r.intersects(i.bounds))&&QI(e,t,i,i)})}}function zae(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&QI(e,t,n.items[0],n.items)}}function QI(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Mf(t,n),n.fill&&v1(t,n,i)&&t.fill(),n.stroke&&Df(t,n,i)&&t.stroke()))}function Dy(e){return e=e||hi,function(t,n,r,i,s,a){return r*=t.pixelRatio,i*=t.pixelRatio,_1(n,u=>{const o=u.bounds;if(!(o&&!o.contains(s,a)||!o)&&e(t,u,r,i,s,a))return u})}}function hg(e,t){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,u=t??a.fill,o=a.stroke&&n.isPointInStroke,l,c;return o&&(l=a.strokeWidth,c=a.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:u&&n.isPointInPath(i,s)||o&&n.isPointInStroke(i,s)}}function C4(e){return Dy(hg(e))}function cl(e,t){return"translate("+e+","+t+")"}function T4(e){return"rotate("+e+")"}function Bae(e,t){return"scale("+e+","+t+")"}function JI(e){return cl(e.x||0,e.y||0)}function Uae(e){return cl(e.x||0,e.y||0)+(e.angle?" "+T4(e.angle):"")}function qae(e){return cl(e.x||0,e.y||0)+(e.angle?" "+T4(e.angle):"")+(e.scaleX||e.scaleY?" "+Bae(e.scaleX||1,e.scaleY||1):"")}function M4(e,t,n){function r(a,u){a("transform",Uae(u)),a("d",t(null,u))}function i(a,u){return t(dg(a,u.angle),u),Ta(a,u).translate(u.x||0,u.y||0)}function s(a,u){var o=u.x||0,l=u.y||0,c=u.angle||0;a.translate(o,l),c&&a.rotate(c*=Uu),a.beginPath(),t(a,u),c&&a.rotate(-c),a.translate(-o,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:A4(s),pick:C4(s),isect:n||S4(s)}}var Hae=M4("arc",Cae);function Vae(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,a,u;--i>=0;)e[i].defined!==!1&&(u=Math.abs(e[i][r]-n),u<s&&(s=u,a=e[i]));return a}function Gae(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],a=i*i+s*s,a<n))return e[r];return null}function Wae(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function D4(e,t,n){function r(o,l){var c=l.mark.items;c.length&&o("d",t(null,c))}function i(o,l){var c=l.items;return c.length===0?o:(t(dg(o),c),Ta(o,c[0]))}function s(o,l){o.beginPath(),t(o,l)}const a=hg(s);function u(o,l,c,f,d,h){var g=l.items,p=l.bounds;return!g||!g.length||p&&!p.contains(d,h)?null:(c*=o.pixelRatio,f*=o.pixelRatio,a(o,g,c,f)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:zae(s),pick:u,isect:k4,tip:n}}var Xae=D4("area",Tae,Vae);function Yae(e,t){var n=t.clip;e.save(),We(n)?(e.beginPath(),n(e),e.clip()):KI(e,t.group)}function KI(e,t){e.beginPath(),x4(t)?dd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function eP(e){const t=ki(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Zae(e,t){e("transform",JI(t))}function tP(e,t){const n=eP(t);e("d",dd(null,t,n,n))}function Qae(e,t){e("class","background"),e("aria-hidden",!0),tP(e,t)}function Jae(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?tP(e,t):e("d","")}function Kae(e,t,n){const r=t.clip?w4(n,t,t):null;e("clip-path",r)}function eue(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ta(e,t),e.translate(t.x||0,t.y||0)}function m0(e,t,n,r){const i=eP(t);e.beginPath(),dd(e,t,(n||0)+i,(r||0)+i)}const tue=hg(m0),nue=hg(m0,!1),rue=hg(m0,!0);function iue(e,t,n){Wi(t,r=>{const i=r.x||0,s=r.y||0,a=r.strokeForeground,u=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&u&&(m0(e,r,i,s),Mf(e,r),r.fill&&v1(e,r,u)&&e.fill(),r.stroke&&!a&&Df(e,r,u)&&e.stroke()),e.save(),e.translate(i,s),r.clip&&KI(e,r),n&&n.translate(-i,-s),Wi(r,o=>{this.draw(e,o,n)}),n&&n.translate(i,s),e.restore(),a&&r.stroke&&u&&(m0(e,r,i,s),Mf(e,r),Df(e,r,u)&&e.stroke())})}function sue(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const a=n*e.pixelRatio,u=r*e.pixelRatio;return _1(t,o=>{let l,c,f;const d=o.bounds;if(d&&!d.contains(i,s))return;c=o.x||0,f=o.y||0;const h=c+(o.width||0),g=f+(o.height||0),p=o.clip;if(p&&(i<c||i>h||s<f||s>g))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,p&&x4(o)&&!rue(e,o,a,u))return e.restore(),null;const m=o.strokeForeground,b=t.interactive!==!1;return b&&m&&o.stroke&&nue(e,o,a,u)?(e.restore(),o):(l=_1(o,y=>aue(y,c,f)?this.pick(y,n,r,c,f):null),!l&&b&&(o.fill||!m&&o.stroke)&&tue(e,o,a,u)&&(l=o),e.restore(),l||null)})}function aue(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var uue={type:"group",tag:"g",nested:!1,attr:Zae,bound:eue,draw:iue,pick:sue,isect:XI,content:Kae,background:Qae,foreground:Jae},b0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function N4(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function $4(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function F4(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Ny(e,t){return e==="center"?t/2:e==="right"?t:0}function $y(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function oue(e,t,n){const r=N4(t,n),i=$4(t,r),s=F4(t,r),a=(t.x||0)-Ny(t.align,i),u=(t.y||0)-$y(t.baseline,s),o=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",o,b0["xmlns:xlink"],"xlink:href"),e("transform",cl(a,u)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function lue(e,t){const n=t.image,r=$4(t,n),i=F4(t,n),s=(t.x||0)-Ny(t.align,r),a=(t.y||0)-$y(t.baseline,i);return e.set(s,a,s+r,a+i)}function cue(e,t,n){Wi(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=N4(r,this);let s=$4(r,i),a=F4(r,i);if(s===0||a===0)return;let u=(r.x||0)-Ny(r.align,s),o=(r.y||0)-$y(r.baseline,a),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,o+=(a-d)/2,a=d):(d=a*c,u+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Mf(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,u,o,s,a))})}var fue={type:"image",tag:"image",nested:!1,attr:oue,bound:lue,draw:cue,pick:Dy(),isect:hi,get:N4,xOffset:Ny,yOffset:$y},due=D4("line",Mae,Gae);function hue(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",qae(t)),e("d",t.path)}function mm(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,a=t.scaleY||1,u=(t.angle||0)*Uu,o=t.pathCache;(!o||o.path!==n)&&((t.pathCache=o=Tf(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(u),p0(e,o,0,0,s,a),e.rotate(-u),e.translate(-r,-i)):p0(e,o,r,i,s,a)}function gue(e,t){return mm(dg(e,t.angle),t)?e.set(0,0,0,0):Ta(e,t,!0)}var pue={type:"path",tag:"path",nested:!1,attr:hue,bound:gue,draw:A4(mm),pick:C4(mm),isect:S4(mm)};function mue(e,t){e("d",dd(null,t))}function bue(e,t){var n,r;return Ta(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function zC(e,t){e.beginPath(),dd(e,t)}var yue={type:"rect",tag:"path",nested:!1,attr:mue,bound:bue,draw:A4(zC),pick:C4(zC),isect:XI};function vue(e,t){e("transform",JI(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function _ue(e,t){var n,r;return Ta(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function nP(e,t,n){var r,i,s,a;return t.stroke&&Df(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,a),!0):!1}function xue(e,t,n){Wi(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&nP(e,r,i)&&(Mf(e,r),e.stroke())}})}function wue(e,t,n,r){return e.isPointInStroke?nP(e,t,1)&&e.isPointInStroke(n,r):!1}var Eue={type:"rule",tag:"line",nested:!1,attr:vue,bound:_ue,draw:xue,pick:Dy(wue),isect:YI},Sue=M4("shape",Dae),kue=M4("symbol",Nae,k4);const BC=d$();var Bi={height:Ps,measureWidth:R4,estimateWidth:uw,width:uw,canvas:rP};rP(!0);function rP(e){Bi.width=e&&Du?R4:uw}function uw(e,t){return iP(Hu(e,t),Ps(e))}function iP(e,t){return~~(.8*e.length*t)}function R4(e,t){return Ps(e)<=0||!(t=Hu(e,t))?0:sP(t,Fy(e))}function sP(e,t){const n="(".concat(t,") ").concat(e);let r=BC.get(n);return r===void 0&&(Du.font=t,r=Du.measureText(e).width,BC.set(n,r)),r}function Ps(e){return e.fontSize!=null?+e.fontSize||0:11}function qu(e){return e.lineHeight!=null?e.lineHeight:Ps(e)+2}function Oue(e){return X(e)?e.length>1?e:e[0]:e}function gg(e){return Oue(e.lineBreak&&e.text&&!X(e.text)?e.text.split(e.lineBreak):e.text)}function I4(e){const t=gg(e);return(X(t)?t.length-1:0)*qu(e)}function Hu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Cue(e,n):n}function Aue(e){if(Bi.width===R4){const t=Fy(e);return n=>sP(n,t)}else{const t=Ps(e);return n=>iP(n,t)}}function Cue(e,t){var n=+e.limit,r=Aue(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",a=0,u=t.length,o;if(n-=r(i),s){for(;a<u;)o=a+u>>>1,r(t.slice(o))>n?a=o+1:u=o;return i+t.slice(a)}else{for(;a<u;)o=1+(a+u>>>1),r(t.slice(0,o))<n?a=o:u=o-1;return t.slice(0,a)+i}}function pg(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Fy(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ps(e)+"px "+pg(e,t)}function P4(e){var t=e.baseline,n=Ps(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*qu(e):t==="line-bottom"?.29*n-.5*qu(e):0)}const Tue={left:"start",center:"middle",right:"end"},Nh=new an;function Ry(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Xo,t+=r*Math.cos(i),n+=r*Math.sin(i)),Nh.x1=t,Nh.y1=n,Nh}function Mue(e,t){var n=t.dx||0,r=(t.dy||0)+P4(t),i=Ry(t),s=i.x1,a=i.y1,u=t.angle||0,o;e("text-anchor",Tue[t.align]||"start"),u?(o=cl(s,a)+" "+T4(u),(n||r)&&(o+=" "+cl(n,r))):o=cl(s+n,a+r),e("transform",o)}function j4(e,t,n){var r=Bi.height(t),i=t.align,s=Ry(t),a=s.x1,u=s.y1,o=t.dx||0,l=(t.dy||0)+P4(t)-Math.round(.8*r),c=gg(t),f;if(X(c)?(r+=qu(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Bi.width(t,h)),0)):f=Bi.width(t,c),i==="center"?o-=f/2:i==="right"&&(o-=f),e.set(o+=a,l+=u,o+f,l+r),t.angle&&!n)e.rotate(t.angle*Uu,a,u);else if(n===2)return e.rotatedPoints(t.angle*Uu,a,u);return e}function Due(e,t,n){Wi(t,r=>{var i=r.opacity==null?1:r.opacity,s,a,u,o,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Fy(r),e.textAlign=r.align||"left",s=Ry(r),a=s.x1,u=s.y1,r.angle&&(e.save(),e.translate(a,u),e.rotate(r.angle*Uu),a=u=0),a+=r.dx||0,u+=(r.dy||0)+P4(r),c=gg(r),Mf(e,r),X(c))for(l=qu(r),o=0;o<c.length;++o)f=Hu(r,c[o]),r.fill&&v1(e,r,i)&&e.fillText(f,a,u),r.stroke&&Df(e,r,i)&&e.strokeText(f,a,u),u+=l;else f=Hu(r,c),r.fill&&v1(e,r,i)&&e.fillText(f,a,u),r.stroke&&Df(e,r,i)&&e.strokeText(f,a,u);r.angle&&e.restore()}})}function Nue(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=Ry(t),u=a.x1,o=a.y1,l=j4(Nh,t,1),c=-t.angle*Uu,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(u-f*u+d*o),g=d*i+f*s+(o-d*u-f*o);return l.contains(h,g)}function $ue(e,t){const n=j4(Nh,e,2);return Xc(t,n[0],n[1],n[2],n[3])||Xc(t,n[0],n[1],n[4],n[5])||Xc(t,n[4],n[5],n[6],n[7])||Xc(t,n[2],n[3],n[6],n[7])}var Fue={type:"text",tag:"text",nested:!1,attr:Mue,bound:j4,draw:Due,pick:Dy(Nue),isect:$ue},Rue=D4("trail",$ae,Wae),ti={arc:Hae,area:Xae,group:uue,image:fue,line:due,path:pue,rect:yue,rule:Eue,shape:Sue,symbol:kue,text:Fue,trail:Rue};function ow(e,t,n){var r=ti[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new an),e,n)}var UC={mark:null};function aP(e,t,n){var r=ti[e.marktype],i=r.bound,s=e.items,a=s&&s.length,u,o,l,c;if(r.nested)return a?l=s[0]:(UC.mark=e,l=UC),c=ow(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new an,a)for(u=0,o=s.length;u<o;++u)t.union(ow(s[u],i,n));return e.bounds=t}const Iue=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function uP(e,t){return JSON.stringify(e,Iue,t)}function oP(e){const t=typeof e=="string"?JSON.parse(e):e;return lP(t)}function lP(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&lP(n[i]);return t&&aP(e),e}function L4(e){arguments.length?this.root=oP(e):(this.root=cP({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ty(this.root)])}L4.prototype={toJSON(e){return uP(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=cP(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function cP(e,t){const n={bounds:new an,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function _u(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function z4(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Sr(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=_u(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Ni(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function fP(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Iy(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Pue(e,t,n,r){var i=e&&e.mark,s,a;if(i&&(s=ti[i.marktype]).tip){for(a=Iy(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=s.tip(i.items,a)}return e}function Vu(e,t){this._active=null,this._handlers={},this._loader=e||ty(),this._tooltip=t||jue}function jue(e,t,n,r){e.element().setAttribute("title",r||"")}Vu.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=_u(null,"a");for(const a in r)s.setAttribute(a,r[a]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Pue(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),a=i.height();let u=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)u+=e.x||0,o+=e.y||0;return{x:u,y:o,width:s,height:a,left:u,top:o,right:u+s,bottom:o+a}}};function js(e){this._el=null,this._bgcolor=null,this._loader=new E4(e)}js.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Lue="keydown",zue="keypress",Bue="keyup",dP="dragenter",bm="dragleave",hP="dragover",lw="mousedown",Uue="mouseup",x1="mousemove",$h="mouseout",gP="mouseover",w1="click",que="dblclick",Hue="wheel",pP="mousewheel",E1="touchstart",S1="touchmove",k1="touchend",Vue=[Lue,zue,Bue,dP,bm,hP,lw,Uue,x1,$h,gP,w1,que,Hue,pP,E1,S1,k1],cw=x1,y0=$h,fw=w1;function mg(e,t){Vu.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const Gue=e=>e===E1||e===S1||e===k1?[E1,S1,k1]:[e];function qC(e,t){Gue(t).forEach(n=>Wue(e,n))}function Wue(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function HC(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=s,this.fire(t,r),this.fire(e,r))}}function VC(e){return function(t){this.fire(e,t),this._active=null}}ce(mg,Vu,{initialize(e,t,n){return this._canvas=e&&z4(e,"canvas"),[w1,lw,x1,$h,bm].forEach(r=>qC(this,r)),Vu.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Vue,DOMMouseScroll(e){this.fire(pP,e)},mousemove:HC(x1,gP,$h),dragover:HC(hP,dP,bm),mouseout:VC($h),dragleave:VC(bm),mousedown(e){this._down=this._active,this.fire(lw,e)},click(e){this._down===this._active&&(this.fire(w1,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(E1,e,!0)},touchmove(e){this.fire(S1,e,!0)},touchend(e){this.fire(k1,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===fw&&r&&r.href?this.handleHref(t,r,r.href):(e===cw||e===y0)&&this.handleTooltip(t,r,e!==y0),i)for(let s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(qC(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=Iy(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return ti[e.marktype].pick.call(this,s,e,t,n,r,i)}});function Xue(){return typeof window<"u"&&window.devicePixelRatio||1}var Yue=Xue();function Zue(e,t,n,r,i,s){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,u=e.getContext("2d"),o=a?Yue:i;e.width=t*o,e.height=n*o;for(const l in s)u[l]=s[l];return a&&o!==1&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=o,u.setTransform(o,0,0,o,o*r[0],o*r[1]),e}function O1(e){js.call(this,e),this._options={},this._redraw=!1,this._dirty=new an,this._tempb=new an}const GC=js.prototype,Que=(e,t,n)=>new an().set(0,0,t,n).translate(-e[0],-e[1]);function Jue(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ce(O1,js,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Mu(1,1,this._options.type),e&&this._canvas&&(Ni(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),GC.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(GC.resize.call(this,e,t,n,r),this._canvas)Zue(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||W("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,s=this._dirty,a=Que(n,r,i);t.save();const u=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):Jue(t,a.intersect(s),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,u),t.restore(),s.clear(),this},draw(e,t,n){const r=ti[t.marktype];t.clip&&Yae(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function B4(e,t){Vu.call(this,e,t);const n=this;n._hrefHandler=dw(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=dw(n,(r,i)=>{n.handleTooltip(r,i,r.type!==y0)})}const dw=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ce(B4,Vu,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(fw,this._hrefHandler),r.removeEventListener(cw,this._tooltipHandler),r.removeEventListener(y0,this._tooltipHandler)),this._svg=r=e&&z4(e,"svg"),r&&(r.addEventListener(fw,this._hrefHandler),r.addEventListener(cw,this._tooltipHandler),r.addEventListener(y0,this._tooltipHandler)),Vu.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:dw(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const mP="aria-hidden",U4="aria-label",q4="role",H4="aria-roledescription",bP="graphics-object",V4="graphics-symbol",yP=(e,t,n)=>({[q4]:e,[H4]:t,[U4]:n||void 0}),Kue=Vi(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),WC={axis:{desc:"axis",caption:noe},legend:{desc:"legend",caption:roe},"title-text":{desc:"title",caption:e=>"Title text '".concat(YC(e),"'")},"title-subtitle":{desc:"subtitle",caption:e=>"Subtitle text '".concat(YC(e),"'")}},XC={ariaRole:q4,ariaRoleDescription:H4,description:U4};function vP(e,t){const n=t.aria===!1;if(e(mP,n||void 0),n||t.description==null)for(const r in XC)e(XC[r],void 0);else{const r=t.mark.marktype;e(U4,t.description),e(q4,t.ariaRole||(r==="group"?bP:V4)),e(H4,t.ariaRoleDescription||"".concat(r," mark"))}}function _P(e){return e.aria===!1?{[mP]:!0}:Kue[e.role]?null:WC[e.role]?toe(e,WC[e.role]):eoe(e)}function eoe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return yP(n?bP:V4,"".concat(t," mark container"),e.description)}function toe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return yP(t.role||V4,t.desc,n.description||r(n))}catch{return null}}function YC(e){return pe(e.text).join(" ")}function noe(e){const t=e.datum,n=e.orient,r=t.title?xP(e):null,i=e.context,s=i.scales[t.scale].value,a=i.dataflow.locale(),u=s.type,o=n==="left"||n==="right"?"Y":"X";return"".concat(o,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(Cf(u)?"discrete":u," scale")+" with ".concat(jI(a,s,e))}function roe(e){const t=e.datum,n=t.title?xP(e):null,r="".concat(t.type||""," legend").trim(),i=t.scales,s=Object.keys(i),a=e.context,u=a.scales[i[s[0]]].value,o=a.dataflow.locale();return soe(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(ioe(s))+" with ".concat(jI(o,u,e))}function xP(e){try{return pe(rt(e.items).items[0].text).join(" ")}catch{return null}}function ioe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+rt(e)}function soe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const wP=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),aoe=e=>wP(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function G4(){let e="",t="",n="";const r=[],i=()=>t=n="",s=o=>{t&&(e+="".concat(t,">").concat(n),i()),r.push(o)},a=(o,l)=>(l!=null&&(t+=" ".concat(o,'="').concat(aoe(l),'"')),u),u={open(o){s(o),t="<"+o;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)a(h,d[h]);return u},close(){const o=r.pop();return t?e+=t+(n?">".concat(n,"</").concat(o,">"):"/>"):e+="</".concat(o,">"),i(),u},attr:a,text:o=>(n+=wP(o),u),toString:()=>e};return u}const EP=e=>SP(G4(),e)+"";function SP(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):SP(e,r)}return e.close()}const A1={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},C1={blend:"mix-blend-mode"},kP={fill:"none","stroke-miterlimit":10},Qd=0,ZC="http://www.w3.org/2000/xmlns/",cn=b0.xmlns;function W4(e){js.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const e_=js.prototype;ce(W4,js,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Sr(e,0,"svg",cn),this._svg.setAttributeNS(ZC,"xmlns",cn),this._svg.setAttributeNS(ZC,"xmlns:xlink",b0["xmlns:xlink"]),this._svg.setAttribute("version",b0.version),this._svg.setAttribute("class","marks"),Ni(e,1),this._root=Sr(this._svg,Qd,"g",cn),xu(this._root,kP),Ni(this._svg,Qd+1)),this.background(this._bgcolor),e_.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),e_.background.apply(this,arguments)},resize(e,t,n,r){return e_.resize.call(this,e,t,n,r),this._svg&&(xu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Sr(e,Qd,"rect",cn),xu(n,{width:this._width,height:this._height,fill:t}));const r=EP(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),Ni(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,a,u,o;for(a=0,u=e.length;a<u;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,s=ti[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,QC(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(o=r.items[0],o._svg&&this._update(s,o._svg,o)):n._svg&&(o=n._svg.parentNode,o&&o.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,QC(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=ti[t.marktype],s=t.interactive===!1?"none":null,a=i.tag==="g",u=JC(t,e,n,"g",r);u.setAttribute("class",fP(t));const o=_P(t);for(const d in o)rr(u,d,o[d]);a||rr(u,"pointer-events",s),rr(u,"clip-path",t.clip?w4(this,t,t.group):null);let l=null,c=0;const f=d=>{const h=this.isDirty(d),g=JC(d,u,l,i.tag,r);h&&(this._update(i,g,d),a&&loe(this,g,d)),l=g,++c};return i.nested?t.items.length&&f(t.items[0]):Wi(t,f),Ni(u,c),u},_update(e,t,n){fa=t,Bn=t.__values__,vP(Fh,n),e.attr(Fh,n,this);const r=foe[e.type];r&&r.call(this,e,t,n),fa&&this.style(fa,n)},style(e,t){if(t!=null){for(const n in A1){let r=n==="font"?pg(t):t[n];if(r===Bn[n])continue;const i=A1[n];r==null?e.removeAttribute(i):(v4(r)&&(r=zI(r,this._defs.gradient,OP())),e.setAttribute(i,r+"")),Bn[n]=r}for(const n in C1)ym(e,C1[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Sr(e,Qd+1,"defs",cn)),r=uoe(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Sr(e,Qd+1,"defs",cn)),r=ooe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ni(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function QC(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function uoe(e,t,n){let r,i,s;if(t.gradient==="radial"){let a=Sr(e,n++,"pattern",cn);xu(a,{id:y1+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Sr(a,0,"rect",cn),xu(a,{width:1,height:1,fill:"url(".concat(OP(),"#").concat(t.id,")")}),e=Sr(e,n++,"radialGradient",cn),xu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Sr(e,n++,"linearGradient",cn),xu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Sr(e,r,"stop",cn),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Ni(e,r),n}function ooe(e,t,n){let r;return e=Sr(e,n,"clipPath",cn),e.setAttribute("id",t.id),t.path?(r=Sr(e,0,"path",cn),r.setAttribute("d",t.path)):(r=Sr(e,0,"rect",cn),xu(r,{x:0,y:0,width:t.width,height:t.height})),Ni(e,1),n+1}function loe(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Wi(n,s=>{r=e.mark(t,s,r),++i}),Ni(t,1+i)}function JC(e,t,n,r,i){let s=e._svg,a;if(!s&&(a=t.ownerDocument,s=_u(a,r,cn),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const u=_u(a,"path",cn);s.appendChild(u),u.__data__=e;const o=_u(a,"g",cn);s.appendChild(o),o.__data__=e;const l=_u(a,"path",cn);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||coe(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function coe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let fa=null,Bn=null;const foe={group(e,t,n){const r=fa=t.childNodes[2];Bn=r.__values__,e.foreground(Fh,n,this),Bn=t.__values__,fa=t.childNodes[1],e.content(Fh,n,this);const i=fa=t.childNodes[0];e.background(Fh,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Bn.events&&(rr(r,"pointer-events",s),rr(i,"pointer-events",s),Bn.events=s),n.strokeForeground&&n.stroke){const a=n.fill;rr(r,"display",null),this.style(i,n),rr(i,"stroke",null),a&&(n.fill=null),Bn=r.__values__,this.style(r,n),a&&(n.fill=a),fa=null}else rr(r,"display","none")},image(e,t,n){n.smooth===!1?(ym(t,"image-rendering","optimizeSpeed"),ym(t,"image-rendering","pixelated")):ym(t,"image-rendering",null)},text(e,t,n){const r=gg(n);let i,s,a,u;X(r)?(s=r.map(o=>Hu(n,o)),i=s.join(`
`),i!==Bn.text&&(Ni(t,0),a=t.ownerDocument,u=qu(n),s.forEach((o,l)=>{const c=_u(a,"tspan",cn);c.__data__=n,c.textContent=o,l&&(c.setAttribute("x",0),c.setAttribute("dy",u)),t.appendChild(c)}),Bn.text=i)):(s=Hu(n,r),s!==Bn.text&&(t.textContent=s,Bn.text=s)),rr(t,"font-family",pg(n)),rr(t,"font-size",Ps(n)+"px"),rr(t,"font-style",n.fontStyle),rr(t,"font-variant",n.fontVariant),rr(t,"font-weight",n.fontWeight)}};function Fh(e,t,n){t!==Bn[e]&&(n?doe(fa,e,t,n):rr(fa,e,t),Bn[e]=t)}function ym(e,t,n){n!==Bn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Bn[t]=n)}function xu(e,t){for(const n in t)rr(e,n,t[n])}function rr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function doe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function OP(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function X4(e){js.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ce(X4,js,{svg(){return this._text},_render(e){const t=G4();t.open("svg",Ge({},b0,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",kP,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=ti[t.marktype],r=n.tag,i=[vP,n.attr];e.open("g",{class:fP(t),"clip-path":t.clip?w4(this,t,t.group):null},_P(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=a=>{const u=this.href(a);if(u&&e.open("a",u),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){const o=gg(a);if(X(o)){const l={x:0,dy:qu(a)};for(let c=0;c<o.length;++c)e.open("tspan",c?l:null).text(Hu(a,o[c])).close()}else e.text(Hu(a,o))}else if(r==="g"){const o=a.strokeForeground,l=a.fill,c=a.stroke;o&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),Wi(a,f=>this.mark(e,f)),e.close(),o&&c?(l&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),u&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):Wi(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(a,u,o,l)=>{i[l||a]=u};return Array.isArray(n)?n.forEach(a=>a(s,t,this)):n(s,t,this),r&&hoe(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],a=s.stops;s.gradient==="radial"?(e.open("pattern",{id:y1+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<a.length;++u)e.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function hoe(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=pg(t),e["font-size"]=Ps(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in A1){let u=t[a];const o=A1[a];u==="transparent"&&(o==="fill"||o==="stroke")||u!=null&&(v4(u)&&(u=zI(u,i.gradient,"")),e[o]=u)}for(const a in C1){const u=t[a];u!=null&&(s=s||[],s.push("".concat(C1[a],": ").concat(u,";")))}return s&&(e.style=s.join(" ")),e}const AP="canvas",CP="png",TP="svg",MP="none",wu={Canvas:AP,PNG:CP,SVG:TP,None:MP},Nf={};Nf[AP]=Nf[CP]={renderer:O1,headless:O1,handler:mg};Nf[TP]={renderer:W4,headless:X4,handler:B4};Nf[MP]={};function Py(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Nf[e]=t,this):Nf[e]}function DP(e,t,n){const r=[],i=new an().union(t),s=e.marktype;return s?NP(e,i,n,r):s==="group"?$P(e,i,n,r):W("Intersect scene must be mark node or group item.")}function NP(e,t,n,r){if(goe(e,t,n)){const i=e.items,s=e.marktype,a=i.length;let u=0;if(s==="group")for(;u<a;++u)$P(i[u],t,n,r);else for(const o=ti[s].isect;u<a;++u){const l=i[u];FP(l,t,o)&&r.push(l)}}return r}function goe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function $P(e,t,n,r){n&&n(e.mark)&&FP(e,t,ti.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const a=e.x||0,u=e.y||0;t.translate(-a,-u);for(let o=0;o<s;++o)NP(i[o],t,n,r);t.translate(a,u)}return r}function FP(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const t_=new an;function RP(e){const t=e.clip;if(We(t))t(dg(t_.clear()));else if(t)t_.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(t_)}const poe=1e-9;function Y4(e,t,n){return e===t?!0:n==="path"?IP(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ot(e)&&Ot(t)?Math.abs(e-t)<=poe:!e||!t||!be(e)&&!be(t)?e==t:moe(e,t)}function IP(e,t){return Y4(Tf(e),Tf(t))}function moe(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Y4(e[i],t[i],i))return!1;return typeof e==typeof t}function boe(){WI(),Use()}const $f="top",$i="left",Pi="right",Gu="bottom",yoe="top-left",voe="top-right",_oe="bottom-left",xoe="bottom-right",Z4="start",hw="middle",ir="end",woe="x",Eoe="y",jy="group",Q4="axis",J4="title",Soe="frame",koe="scope",K4="legend",PP="row-header",jP="row-footer",LP="row-title",zP="column-header",BP="column-footer",UP="column-title",Ooe="padding",Aoe="symbol",qP="fit",Coe="fit-x",Toe="fit-y",Moe="pad",eS="none",Ap="all",gw="each",tS="flush",Eu="column",Su="row";function HP(e){V.call(this,null,e)}ce(HP,V,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=ti[i],a=s.bound;let u=r.bounds,o;if(s.nested)r.items.length&&n.dirty(r.items[0]),u=Cp(r,a),r.items.forEach(l=>{l.bounds.clear().union(u)});else if(i===jy||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),u.clear(),r.items.forEach(l=>u.union(Cp(l,a))),r.role){case Q4:case K4:case J4:t.reflow()}else o=t.changed(t.REM),t.visit(t.ADD,l=>{u.union(Cp(l,a))}),t.visit(t.MOD,l=>{o=o||u.alignsWith(l.bounds),n.dirty(l),u.union(Cp(l,a))}),o&&(u.clear(),r.items.forEach(l=>u.union(l.bounds)));return RP(r),t.modifies("bounds")}});function Cp(e,t,n){return t(e.bounds.clear(),e,n)}const KC=":vega_identifier:";function nS(e){V.call(this,0,e)}nS.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ce(nS,V,{transform(e,t){const n=Doe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Doe(e){return e._signals[KC]||(e._signals[KC]=e.add(0))}function VP(e){V.call(this,null,e)}ce(VP,V,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Noe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===jy?Ty:Cy;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Noe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function GP(e){V.call(this,null,e)}const eT={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!WP(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},WP=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),tT=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(WP(i,s=e[n].bounds,t))return!0},$oe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Foe=(e,t,n)=>{var r=e.range(),i=new an;return t===$f||t===Gu?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},nT=e=>(e.forEach(t=>t.opacity=1),e),rT=(e,t)=>e.reflow(t.modified()).modifies("opacity");ce(GP,V,{transform(e,t){const n=eT[e.method]||eT.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(nT(i),t=rT(t,e)),t;if(i=i.filter($oe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=nT(i),t=rT(t,e),s.length>=3&&tT(s,r)){do s=n(s,r);while(s.length>=3&&tT(s,r));s.length<3&&!rt(i).opacity&&(s.length>1&&(rt(s).opacity=0),rt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=Foe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(o=>{a(o)||(o.opacity=0)}));const u=s[0].mark.bounds.clear();return i.forEach(o=>{o.opacity&&u.union(o.bounds)}),t}});function XP(e){V.call(this,null,e)}ce(XP,V,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const zn=new an;function Yc(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Roe(e){var t=e.items[0].orient;return t===$i||t===Pi}function Ioe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Poe(e,t,n,r){var i=t.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,u=i.orient,o=Ioe(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,g=s.title&&i.items[o[2]].items[0],p=i.titlePadding,m=i.bounds,b=g&&I4(g),y=0,v=0,_,x;switch(zn.clear().union(m),m.clear(),(_=o[0])>-1&&m.union(i.items[_].bounds),(_=o[1])>-1&&m.union(i.items[_].bounds),u){case $f:y=f||0,v=-c,x=Math.max(d,Math.min(h,-m.y1)),m.add(0,-x).add(l,0),g&&Tp(e,g,x,p,b,0,-1,m);break;case $i:y=-c,v=f||0,x=Math.max(d,Math.min(h,-m.x1)),m.add(-x,0).add(0,l),g&&Tp(e,g,x,p,b,1,-1,m);break;case Pi:y=n+c,v=f||0,x=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(x,l),g&&Tp(e,g,x,p,b,1,1,m);break;case Gu:y=f||0,v=r+c,x=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(l,x),g&&Tp(e,g,x,p,0,0,1,m);break;default:y=i.x,v=i.y}return Ta(m.translate(y,v),i),Yc(i,"x",y+a)|Yc(i,"y",v+a)&&(i.bounds=zn,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Tp(e,t,n,r,i,s,a,u){const o=t.bounds;if(t.auto){const l=a*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(o.translate(-c,-f)),e.dirty(t)}u.union(o)}const iT=(e,t)=>Math.floor(Math.min(e,t)),sT=(e,t)=>Math.ceil(Math.max(e,t));function joe(e){var t=e.items,n=t.length,r=0,i,s;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===jy)switch(i.role){case Q4:case K4:case J4:break;case PP:a.rowheaders.push(...s);break;case jP:a.rowfooters.push(...s);break;case zP:a.colheaders.push(...s);break;case BP:a.colfooters.push(...s);break;case LP:a.rowtitle=s[0];break;case UP:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function Loe(e){return new an().set(0,0,e.width||0,e.height||0)}function zoe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function qt(e,t,n){const r=be(e)?e[t]:e;return r??(n!==void 0?n:0)}function aT(e){return e<0?Math.ceil(-e):0}function YP(e,t,n){var r=!n.nodirty,i=n.bounds===tS?Loe:zoe,s=zn.set(0,0,0,0),a=qt(n.align,Eu),u=qt(n.align,Su),o=qt(n.padding,Eu),l=qt(n.padding,Su),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),g=Array(c),p=0,m=Array(d),b=Array(f),y=0,v=Array(d),_=Array(d),x=Array(d),E,w,k,A,N,O,$,C,T,S,M;for(w=0;w<c;++w)g[w]=0;for(w=0;w<f;++w)b[w]=0;for(w=0;w<d;++w)O=t[w],N=x[w]=i(O),O.x=O.x||0,v[w]=0,O.y=O.y||0,_[w]=0,k=w%c,A=~~(w/c),p=Math.max(p,$=Math.ceil(N.x2)),y=Math.max(y,C=Math.ceil(N.y2)),g[k]=Math.max(g[k],$),b[A]=Math.max(b[A],C),h[w]=o+aT(N.x1),m[w]=l+aT(N.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%c===0&&(h[w]=0),w<c&&(m[w]=0);if(a===gw)for(k=1;k<c;++k){for(M=0,w=k;w<d;w+=c)M<h[w]&&(M=h[w]);for(w=k;w<d;w+=c)h[w]=M+g[k-1]}else if(a===Ap){for(M=0,w=0;w<d;++w)w%c&&M<h[w]&&(M=h[w]);for(w=0;w<d;++w)w%c&&(h[w]=M+p)}else for(a=!1,k=1;k<c;++k)for(w=k;w<d;w+=c)h[w]+=g[k-1];if(u===gw)for(A=1;A<f;++A){for(M=0,w=A*c,E=w+c;w<E;++w)M<m[w]&&(M=m[w]);for(w=A*c;w<E;++w)m[w]=M+b[A-1]}else if(u===Ap){for(M=0,w=c;w<d;++w)M<m[w]&&(M=m[w]);for(w=c;w<d;++w)m[w]=M+y}else for(u=!1,A=1;A<f;++A)for(w=A*c,E=w+c;w<E;++w)m[w]+=b[A-1];for(T=0,w=0;w<d;++w)T=h[w]+(w%c?T:0),v[w]+=T-t[w].x;for(k=0;k<c;++k)for(S=0,w=k;w<d;w+=c)S+=m[w],_[w]+=S-t[w].y;if(a&&qt(n.center,Eu)&&f>1)for(w=0;w<d;++w)N=a===Ap?p:g[w%c],T=N-x[w].x2-t[w].x-v[w],T>0&&(v[w]+=T/2);if(u&&qt(n.center,Su)&&c!==1)for(w=0;w<d;++w)N=u===Ap?y:b[~~(w/c)],S=N-x[w].y2-t[w].y-_[w],S>0&&(_[w]+=S/2);for(w=0;w<d;++w)s.union(x[w].translate(v[w],_[w]));switch(T=qt(n.anchor,woe),S=qt(n.anchor,Eoe),qt(n.anchor,Eu)){case ir:T-=s.width();break;case hw:T-=s.width()/2}switch(qt(n.anchor,Su)){case ir:S-=s.height();break;case hw:S-=s.height()/2}for(T=Math.round(T),S=Math.round(S),s.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)O=t[w],O.x+=v[w]+=T,O.y+=_[w]+=S,s.union(O.mark.bounds.union(O.bounds.translate(v[w],_[w]))),r&&e.dirty(O);return s}function Boe(e,t,n){var r=joe(t),i=r.marks,s=n.bounds===tS?Uoe:qoe,a=n.offset,u=n.columns||i.length,o=u<=0?1:Math.ceil(i.length/u),l=o*u,c,f,d,h,g,p,m;const b=YP(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(p=qt(n.headerBand,Su,null),c=Mp(e,r.rowheaders,i,u,o,-qt(a,"rowHeader"),iT,0,s,"x1",0,u,1,p)),r.colheaders&&(p=qt(n.headerBand,Eu,null),f=Mp(e,r.colheaders,i,u,u,-qt(a,"columnHeader"),iT,1,s,"y1",0,1,u,p)),r.rowfooters&&(p=qt(n.footerBand,Su,null),d=Mp(e,r.rowfooters,i,u,o,qt(a,"rowFooter"),sT,0,s,"x2",u-1,u,1,p)),r.colfooters&&(p=qt(n.footerBand,Eu,null),h=Mp(e,r.colfooters,i,u,u,qt(a,"columnFooter"),sT,1,s,"y2",l-u,1,u,p)),r.rowtitle&&(g=qt(n.titleAnchor,Su),m=qt(a,"rowTitle"),m=g===ir?d+m:c-m,p=qt(n.titleBand,Su,.5),uT(e,r.rowtitle,m,0,b,p)),r.coltitle&&(g=qt(n.titleAnchor,Eu),m=qt(a,"columnTitle"),m=g===ir?h+m:f-m,p=qt(n.titleBand,Eu,.5),uT(e,r.coltitle,m,1,b,p))}function Uoe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function qoe(e,t){return e.bounds[t]}function Mp(e,t,n,r,i,s,a,u,o,l,c,f,d,h){var g=n.length,p=0,m=0,b,y,v,_,x,E,w,k,A;if(!g)return p;for(b=c;b<g;b+=f)n[b]&&(p=a(p,o(n[b],l)));if(!t.length)return p;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),p+=s,y=0,_=t.length;y<_;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(b=c,y=0,_=t.length;y<_;++y,b+=f){for(E=t[y],x=E.mark.bounds,v=b;v>=0&&(w=n[v])==null;v-=d);u?(k=h==null?w.x:Math.round(w.bounds.x1+h*w.bounds.width()),A=p):(k=p,A=h==null?w.y:Math.round(w.bounds.y1+h*w.bounds.height())),x.union(E.bounds.translate(k-(E.x||0),A-(E.y||0))),E.x=k,E.y=A,e.dirty(E),m=a(m,x[l])}return m}function uT(e,t,n,r,i,s){if(t){e.dirty(t);var a=n,u=n;r?a=Math.round(i.x1+s*i.width()):u=Math.round(i.y1+s*i.height()),t.bounds.translate(a-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=u,e.dirty(t)}}function Hoe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Voe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Goe(e,t,n,r,i,s,a){const u=Hoe(n,t),o=Voe(e,u("offset",0)),l=u("anchor",Z4),c=l===ir?1:l===hw?.5:0,f={align:gw,bounds:u("bounds",tS),columns:u("direction")==="vertical"?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case $i:f.anchor={x:Math.floor(r.x1)-o,column:ir,y:c*(a||r.height()+2*r.y1),row:l};break;case Pi:f.anchor={x:Math.ceil(r.x2)+o,y:c*(a||r.height()+2*r.y1),row:l};break;case $f:f.anchor={y:Math.floor(i.y1)-o,row:ir,x:c*(s||i.width()+2*i.x1),column:l};break;case Gu:f.anchor={y:Math.ceil(i.y2)+o,x:c*(s||i.width()+2*i.x1),column:l};break;case yoe:f.anchor={x:o,y:o};break;case voe:f.anchor={x:s-o,y:o,column:ir};break;case _oe:f.anchor={x:o,y:a-o,row:ir};break;case xoe:f.anchor={x:s-o,y:a-o,column:ir,row:ir};break}return f}function Woe(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,a=n.x,u=n.y,o,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Yoe(e,n,n.items[0].items[0]),s=Xoe(n,s),o=2*n.padding,l=2*n.padding,s.empty()||(o=Math.ceil(s.width()+o),l=Math.ceil(s.height()+l)),r.type===Aoe&&Zoe(n.items[0].items[0].items[0].items),i!==eS&&(n.x=a=0,n.y=u=0),n.width=o,n.height=l,Ta(s.set(a,u,a+o,u+l),n),n.mark.bounds.clear().union(s),n}function Xoe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Yoe(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&Jd(e,n,i,s);else{var a=t.items[1].items[0],u=a.anchor,o=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case $i:i+=Math.ceil(a.bounds.width())+o;break;case Pi:case Gu:break;default:s+=a.bounds.height()+o}switch((i||s)&&Jd(e,n,i,s),a.orient){case $i:c+=$c(t,n,a,u,1,1);break;case Pi:l+=$c(t,n,a,ir,0,0)+o,c+=$c(t,n,a,u,1,1);break;case Gu:l+=$c(t,n,a,u,0,0),c+=$c(t,n,a,ir,-1,0,1)+o;break;default:l+=$c(t,n,a,u,0,0)}(l||c)&&Jd(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(Jd(e,n,-l,0),Jd(e,a,-l,0))}}function $c(e,t,n,r,i,s,a){const u=e.datum.type!=="symbol",o=n.datum.vgrad,l=u&&(s||!o)&&!a?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=o&&s?c:0,d=o&&s?0:c,h=i<=0?0:I4(n);return Math.round(r===Z4?f:r===ir?d-h:.5*(c-h))}function Jd(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Zoe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Qoe(e,t,n,r,i){var s=t.items[0],a=s.frame,u=s.orient,o=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=u===$i||u===Pi?r:n,g=0,p=0,m=0,b=0,y=0,v;if(a!==jy?u===$i?(g=i.y2,h=i.y1):u===Pi?(g=i.y1,h=i.y2):(g=i.x1,h=i.x2):u===$i&&(g=r,h=0),v=o===Z4?g:o===ir?h:(g+h)/2,d&&d.text){switch(u){case $f:case Gu:y=f.bounds.height()+c;break;case $i:b=f.bounds.width()+c;break;case Pi:b=-f.bounds.width()-c;break}zn.clear().union(d.bounds),zn.translate(b-(d.x||0),y-(d.y||0)),Yc(d,"x",b)|Yc(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(zn),d.mark.bounds.clear().union(zn),e.dirty(d)),zn.clear().union(d.bounds)}else zn.clear();switch(zn.union(f.bounds),u){case $f:p=v,m=i.y1-zn.height()-l;break;case $i:p=i.x1-zn.width()-l,m=v;break;case Pi:p=i.x2+zn.width()+l,m=v;break;case Gu:p=v,m=i.y2+l;break;default:p=s.x,m=s.y}return Yc(s,"x",p)|Yc(s,"y",m)&&(zn.translate(p,m),e.dirty(s),s.bounds.clear().union(zn),t.bounds.clear().union(zn),e.dirty(s)),s.bounds}function ZP(e){V.call(this,null,e)}ce(ZP,V,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Boe(n,r,e.layout),Koe(n,r,e)}),Joe(e.mark.group)?t.reflow():t}});function Joe(e){return e&&e.mark.role!=="legend-entry"}function Koe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),a=new an().set(0,0,i,s),u=a.clone(),o=a.clone(),l=[],c,f,d,h,g,p;for(g=0,p=r.length;g<p;++g)switch(f=r[g],f.role){case Q4:h=Roe(f)?u:o,h.union(Poe(e,f,i,s));break;case J4:c=f;break;case K4:l.push(Woe(e,f));break;case Soe:case koe:case PP:case jP:case LP:case zP:case BP:case UP:u.union(f.bounds),o.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){const m={};l.forEach(b=>{d=b.orient||Pi,d!==eS&&(m[d]||(m[d]=[])).push(b)});for(const b in m){const y=m[b];YP(e,y,Goe(y,b,n.legends,u,o,i,s))}l.forEach(b=>{const y=b.bounds;if(y.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=y,e.dirty(b)),n.autosize&&n.autosize.type===qP)switch(b.orient){case $i:case Pi:a.add(y.x1,0).add(y.x2,0);break;case $f:case Gu:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(u).union(o),c&&a.union(Qoe(e,c,i,s,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),ele(e,t,a,n)}function ele(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let a=e._width,u=e._height,o=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-o)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Ooe){const g=e.padding();a-=g.left+g.right,u-=g.top+g.bottom}s===eS?(l=0,f=0,o=a,c=u):s===qP?(o=Math.max(0,a-l-d),c=Math.max(0,u-f-h)):s===Coe?(o=Math.max(0,a-l-d),u=c+f+h):s===Toe?(a=o+l+d,c=Math.max(0,u-f-h)):s===Moe&&(a=o+l+d,u=c+f+h),e._resizeView(a,u,o,c,[l,f],i.resize)}const tle=Object.freeze(Object.defineProperty({__proto__:null,bound:HP,identifier:nS,mark:VP,overlap:GP,render:XP,viewlayout:ZP},Symbol.toStringTag,{value:"Module"}));function QP(e){V.call(this,null,e)}ce(QP,V,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,u=b4(s,a,e.minstep),o=e.format||$I(n,s,u,e.formatSpecifier,e.formatType,!!e.values),l=e.values?NI(s,e.values,u):y4(s,u);return i&&(r.rem=i),i=l.map((c,f)=>ht({index:f/(l.length-1||1),value:c,label:o(c)})),e.extra&&i.length&&i.push(ht({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function JP(e){V.call(this,null,e)}function nle(){return ht({})}function rle(e){const t=id().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ce(JP,V,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||nle,s=e.key||Ae,a=this.value;return X(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(s))&&W("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=rle(s)),t.visit(t.ADD,u=>{const o=s(u);let l=a.get(o);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(u),a.set(o,l),r.add.push(l)),l.datum=u,l.exit=!1}),t.visit(t.MOD,u=>{const o=s(u),l=a.get(o);l&&(l.datum=u,r.mod.push(l))}),t.visit(t.REM,u=>{const o=s(u),l=a.get(o);u===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function KP(e){V.call(this,null,e)}ce(KP,V,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(X(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var a=s==="enter",u=i.update||lu,o=i.enter||lu,l=i.exit||lu,c=(s&&!a?i[s]:u)||lu;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{o(f,e),u(f,e)}),n.modifies(o.output),n.modifies(u.output),c!==lu&&c!==u&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==lu&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||c!==lu){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{const h=o(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(o.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function ej(e){V.call(this,[],e)}ce(ej,V,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||fm,a=e.scale,u=+e.limit,o=b4(a,e.count==null?5:e.count,e.minstep),l=!!e.values||s===fm,c=e.format||PI(n,a,o,s,e.formatSpecifier,e.formatType,l),f=e.values||II(a,o),d,h,g,p,m;return i&&(r.rem=i),s===fm?(u&&f.length>u?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,u-1),m=!0):i=f,We(g=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),p=i.reduce((b,y)=>Math.max(b,g(y,e)),0)):g=Jn(p=g||8),i=i.map((b,y)=>ht({index:y,label:c(b,y,i),value:b,offset:p,size:g(b,e)})),m&&(m=f[i.length],i.push(ht({index:i.length,label:"".concat(f.length-i.length," entries"),value:m,offset:p,size:g(m,e)})))):s===Tse?(d=a.domain(),h=TI(a,d[0],rt(d)),f.length<3&&!e.values&&d[0]!==rt(d)&&(f=[d[0],rt(d)]),i=f.map((b,y)=>ht({index:y,label:c(b,y,f),value:b,perc:h(b)}))):(g=f.length-1,h=zse(a),i=f.map((b,y)=>ht({index:y,label:c(b,y,f),value:b,perc:y?h(b):0,perc2:y===g?1:h(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const ile=e=>e.source.x,sle=e=>e.source.y,ale=e=>e.target.x,ule=e=>e.target.y;function rS(e){V.call(this,{},e)}rS.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ce(rS,V,{transform(e,t){var n=e.sourceX||ile,r=e.sourceY||sle,i=e.targetX||ale,s=e.targetY||ule,a=e.as||"path",u=e.orient||"vertical",o=e.shape||"line",l=oT.get(o+"-"+u)||oT.get(o);return l||W("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(a)}});const tj=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,ole=(e,t,n,r)=>tj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),nj=(e,t,n,r)=>{var i=n-e,s=r-t,a=Math.sqrt(i*i+s*s)/2,u=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+u+" 0 1 "+n+","+r},lle=(e,t,n,r)=>nj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),rj=(e,t,n,r)=>{const i=n-e,s=r-t,a=.2*(i+s),u=.2*(s-i);return"M"+e+","+t+"C"+(e+a)+","+(t+u)+" "+(n+u)+","+(r-a)+" "+n+","+r},cle=(e,t,n,r)=>rj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fle=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,dle=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,hle=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),u=Math.sin(n),o=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(o?1:0)+" "+t*a+","+t*u+"L"+r*a+","+r*u},gle=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ple=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},mle=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),u=Math.sin(n),o=(t+r)/2;return"M"+t*i+","+t*s+"C"+o*i+","+o*s+" "+o*a+","+o*u+" "+r*a+","+r*u},oT=id({line:tj,"line-radial":ole,arc:nj,"arc-radial":lle,curve:rj,"curve-radial":cle,"orthogonal-horizontal":fle,"orthogonal-vertical":dle,"orthogonal-radial":hle,"diagonal-horizontal":gle,"diagonal-vertical":ple,"diagonal-radial":mle});function iS(e){V.call(this,null,e)}iS.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ce(iS,V,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||rd,a=e.startAngle||0,u=e.endAngle!=null?e.endAngle:2*Math.PI,o=t.source,l=o.map(s),c=l.length,f=a,d=(u-a)/C$(l),h=Qr(c),g,p,m;for(e.sort&&h.sort((b,y)=>l[b]-l[y]),g=0;g<c;++g)m=l[h[g]],p=o[h[g]],p[r]=f,p[i]=f+=m*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ble=5;function yle(e){const t=e.type;return!e.bins&&(t===Of||t===sg||t===ag)}function ij(e){return g4(e)&&e!==_s}const vle=Vi(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function sj(e){V.call(this,null,e),this.modified(!0)}ce(sj,V,{transform(e,t){var n=t.dataflow,r=this.value,i=_le(e);(!r||i!==r.type)&&(this.value=r=ft(i)());for(i in e)if(!vle[i]){if(i==="padding"&&ij(r.type))continue;We(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Ole(r,e,kle(r,e,wle(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _le(e){var t=e.type,n="",r;return t===_s?_s+"-"+Of:(xle(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?_s+"-":r===3?fd+"-":""),(n+t||Of).toLowerCase())}function xle(e){const t=e.type;return g4(t)&&t!==xl&&t!==wl&&(e.scheme||e.range&&e.range.length&&e.range.every(me))}function wle(e,t,n){const r=Ele(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,a=t.zero||t.zero===void 0&&yle(e),u,o;if(!i)return 0;if(ij(s)&&t.padding&&i[0]!==rt(i)&&(i=Sle(s,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(u=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[u]<0&&(i[u]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[u]=t.domainMax),t.domainMid!=null)){o=t.domainMid;const l=o>i[u]?u+1:o<i[0]?0:u;l!==u&&n.warn("Scale domainMid exceeds domain min or max.",o),i.splice(l,0,o)}return e.domain(aj(s,i,n)),s===c4&&e.unknown(t.domainImplicit?Wx:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&b4(e,t.nice)||null),i.length}function Ele(e,t,n){return t?(e.domain(aj(e.type,t,n)),t.length):-1}function Sle(e,t,n,r,i,s){var a=Math.abs(rt(n)-n[0]),u=a/(a-2*r),o=e===ka?$6(t,null,u):e===ag?Km(t,null,u,.5):e===sg?Km(t,null,u,i||1):e===Ey?F6(t,null,u,s||1):N6(t,null,u);return t=t.slice(),t[0]=o[0],t[t.length-1]=o[1],t}function aj(e,t,n){if(SI(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+fe(t))}return t}function kle(e,t,n){let r=t.bins;if(r&&!X(r)){const i=e.domain(),s=i[0],a=rt(i),u=r.step;let o=r.start==null?s:r.start,l=r.stop==null?a:r.stop;u||W("Scale bins parameter missing step property."),o<s&&(o=u*Math.ceil(s/u)),l>a&&(l=u*Math.floor(a/u)),r=Qr(o,l+u/2,u)}return r?e.bins=r:e.bins&&delete e.bins,e.type===f4&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Ole(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Ale(r,t,n);else if(t.scheme&&(s=Cle(r,t,n),We(s))){if(e.interpolator)return e.interpolator(s);W("Scale type ".concat(r," does not support interpolating color schemes."))}if(s&&kI(r))return e.interpolator(Oy(pw(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(p4(t.interpolate,t.interpolateGamma)):We(e.round)?e.round(i):We(e.rangeRound)&&e.interpolate(i?rg:uo),s&&e.range(pw(s,t.reverse))}function Ale(e,t,n){e!==_I&&e!==ew&&W("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===ew?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*l4(n,i,r)]}function Cle(e,t,n){var r=t.schemeExtent,i,s;return X(t.scheme)?s=Oy(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=m4(i),s||W("Unrecognized scheme name: ".concat(t.scheme))),n=e===ky?n+1:e===f4?n-1:e===Af||e===Sy?+t.schemeCount||ble:n,kI(e)?lT(s,r,t.reverse):We(s)?CI(lT(s,r),n):e===c4?s:s.slice(0,n)}function lT(e,t,n){return We(e)&&(t||n)?AI(e,pw(t||[0,1],n)):e}function pw(e,t){return t?e.slice().reverse():e}function uj(e){V.call(this,null,e)}ce(uj,V,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Xl(e.sort)),this.modified(n),t}});const cT="zero",oj="center",lj="normalize",cj=["y0","y1"];function sS(e){V.call(this,null,e)}sS.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:cT,values:[cT,oj,lj]},{name:"as",type:"string",array:!0,length:2,default:cj}]};ce(sS,V,{transform(e,t){var n=e.as||cj,r=n[0],i=n[1],s=Xl(e.sort),a=e.field||rd,u=e.offset===oj?Tle:e.offset===lj?Mle:Dle,o,l,c,f;for(o=Nle(t.source,e.groupby,s,a),l=0,c=o.length,f=o.max;l<c;++l)u(o[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function Tle(e,t,n,r,i){for(var s=(t-e.sum)/2,a=e.length,u=0,o;u<a;++u)o=e[u],o[r]=s,o[i]=s+=Math.abs(n(o))}function Mle(e,t,n,r,i){for(var s=1/e.sum,a=0,u=e.length,o=0,l=0,c;o<u;++o)c=e[o],c[r]=a,c[i]=a=s*(l+=Math.abs(n(c)))}function Dle(e,t,n,r,i){for(var s=0,a=0,u=e.length,o=0,l,c;o<u;++o)c=e[o],l=+n(c),l<0?(c[r]=a,c[i]=a+=l):(c[r]=s,c[i]=s+=l)}function Nle(e,t,n,r){var i=[],s=p=>p(c),a,u,o,l,c,f,d,h,g;if(t==null)i.push(e.slice());else for(a={},u=0,o=e.length;u<o;++u)c=e[u],f=t.map(s),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(c);for(f=0,g=0,l=i.length;f<l;++f){for(d=i[f],u=0,h=0,o=d.length;u<o;++u)h+=Math.abs(r(d[u]));d.sum=h,h>g&&(g=h),n&&d.sort(n)}return i.max=g,i}const $le=Object.freeze(Object.defineProperty({__proto__:null,axisticks:QP,datajoin:JP,encode:KP,legendentries:ej,linkpath:rS,pie:iS,scale:sj,sortitems:uj,stack:sS},Symbol.toStringTag,{value:"Module"}));var Te=1e-6,T1=1e-12,Ze=Math.PI,Jt=Ze/2,M1=Ze/4,gr=Ze*2,en=180/Ze,Ye=Ze/180,nt=Math.abs,hd=Math.atan,mi=Math.atan2,De=Math.cos,Dp=Math.ceil,fj=Math.exp,mw=Math.hypot,D1=Math.log,n_=Math.pow,Ce=Math.sin,oi=Math.sign||function(e){return e>0?1:e<0?-1:0},pr=Math.sqrt,aS=Math.tan;function dj(e){return e>1?0:e<-1?Ze:Math.acos(e)}function Pr(e){return e>1?Jt:e<-1?-Jt:Math.asin(e)}function Dn(){}function N1(e,t){e&&dT.hasOwnProperty(e.type)&&dT[e.type](e,t)}var fT={Feature:function(e,t){N1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)N1(n[r].geometry,t)}},dT={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){bw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)bw(n[r],t,0)},Polygon:function(e,t){hT(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)hT(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)N1(n[r],t)}};function bw(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function hT(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)bw(e[n],t,1);t.polygonEnd()}function aa(e,t){e&&fT.hasOwnProperty(e.type)?fT[e.type](e,t):N1(e,t)}var $1=new fr,F1=new fr,hj,gj,yw,vw,_w,Ts={point:Dn,lineStart:Dn,lineEnd:Dn,polygonStart:function(){$1=new fr,Ts.lineStart=Fle,Ts.lineEnd=Rle},polygonEnd:function(){var e=+$1;F1.add(e<0?gr+e:e),this.lineStart=this.lineEnd=this.point=Dn},sphere:function(){F1.add(gr)}};function Fle(){Ts.point=Ile}function Rle(){pj(hj,gj)}function Ile(e,t){Ts.point=pj,hj=e,gj=t,e*=Ye,t*=Ye,yw=e,vw=De(t=t/2+M1),_w=Ce(t)}function pj(e,t){e*=Ye,t*=Ye,t=t/2+M1;var n=e-yw,r=n>=0?1:-1,i=r*n,s=De(t),a=Ce(t),u=_w*a,o=vw*s+u*De(i),l=u*r*Ce(i);$1.add(mi(l,o)),yw=e,vw=s,_w=a}function Ple(e){return F1=new fr,aa(e,Ts),F1*2}function R1(e){return[mi(e[1],e[0]),Pr(e[2])]}function El(e){var t=e[0],n=e[1],r=De(n);return[r*De(t),r*Ce(t),Ce(n)]}function Np(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ff(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function r_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function $p(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function I1(e){var t=pr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Gt,wr,Yt,Gr,Vo,mj,bj,nf,Rh,gu,Oa,ra={point:xw,lineStart:gT,lineEnd:pT,polygonStart:function(){ra.point=vj,ra.lineStart=jle,ra.lineEnd=Lle,Rh=new fr,Ts.polygonStart()},polygonEnd:function(){Ts.polygonEnd(),ra.point=xw,ra.lineStart=gT,ra.lineEnd=pT,$1<0?(Gt=-(Yt=180),wr=-(Gr=90)):Rh>Te?Gr=90:Rh<-Te&&(wr=-90),Oa[0]=Gt,Oa[1]=Yt},sphere:function(){Gt=-(Yt=180),wr=-(Gr=90)}};function xw(e,t){gu.push(Oa=[Gt=e,Yt=e]),t<wr&&(wr=t),t>Gr&&(Gr=t)}function yj(e,t){var n=El([e*Ye,t*Ye]);if(nf){var r=Ff(nf,n),i=[r[1],-r[0],0],s=Ff(i,r);I1(s),s=R1(s);var a=e-Vo,u=a>0?1:-1,o=s[0]*en*u,l,c=nt(a)>180;c^(u*Vo<o&&o<u*e)?(l=s[1]*en,l>Gr&&(Gr=l)):(o=(o+360)%360-180,c^(u*Vo<o&&o<u*e)?(l=-s[1]*en,l<wr&&(wr=l)):(t<wr&&(wr=t),t>Gr&&(Gr=t))),c?e<Vo?Vr(Gt,e)>Vr(Gt,Yt)&&(Yt=e):Vr(e,Yt)>Vr(Gt,Yt)&&(Gt=e):Yt>=Gt?(e<Gt&&(Gt=e),e>Yt&&(Yt=e)):e>Vo?Vr(Gt,e)>Vr(Gt,Yt)&&(Yt=e):Vr(e,Yt)>Vr(Gt,Yt)&&(Gt=e)}else gu.push(Oa=[Gt=e,Yt=e]);t<wr&&(wr=t),t>Gr&&(Gr=t),nf=n,Vo=e}function gT(){ra.point=yj}function pT(){Oa[0]=Gt,Oa[1]=Yt,ra.point=xw,nf=null}function vj(e,t){if(nf){var n=e-Vo;Rh.add(nt(n)>180?n+(n>0?360:-360):n)}else mj=e,bj=t;Ts.point(e,t),yj(e,t)}function jle(){Ts.lineStart()}function Lle(){vj(mj,bj),Ts.lineEnd(),nt(Rh)>Te&&(Gt=-(Yt=180)),Oa[0]=Gt,Oa[1]=Yt,nf=null}function Vr(e,t){return(t-=e)<0?t+360:t}function zle(e,t){return e[0]-t[0]}function mT(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ble(e){var t,n,r,i,s,a,u;if(Gr=Yt=-(Gt=wr=1/0),gu=[],aa(e,ra),n=gu.length){for(gu.sort(zle),t=1,r=gu[0],s=[r];t<n;++t)i=gu[t],mT(r,i[0])||mT(r,i[1])?(Vr(r[0],i[1])>Vr(r[0],r[1])&&(r[1]=i[1]),Vr(i[0],r[1])>Vr(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(a=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(u=Vr(r[1],i[0]))>a&&(a=u,Gt=i[0],Yt=r[1])}return gu=Oa=null,Gt===1/0||wr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Gt,wr],[Yt,Gr]]}var bh,P1,j1,L1,z1,B1,U1,q1,ww,Ew,Sw,_j,xj,ar,ur,or,ji={sphere:Dn,point:uS,lineStart:bT,lineEnd:yT,polygonStart:function(){ji.lineStart=Hle,ji.lineEnd=Vle},polygonEnd:function(){ji.lineStart=bT,ji.lineEnd=yT}};function uS(e,t){e*=Ye,t*=Ye;var n=De(t);bg(n*De(e),n*Ce(e),Ce(t))}function bg(e,t,n){++bh,j1+=(e-j1)/bh,L1+=(t-L1)/bh,z1+=(n-z1)/bh}function bT(){ji.point=Ule}function Ule(e,t){e*=Ye,t*=Ye;var n=De(t);ar=n*De(e),ur=n*Ce(e),or=Ce(t),ji.point=qle,bg(ar,ur,or)}function qle(e,t){e*=Ye,t*=Ye;var n=De(t),r=n*De(e),i=n*Ce(e),s=Ce(t),a=mi(pr((a=ur*s-or*i)*a+(a=or*r-ar*s)*a+(a=ar*i-ur*r)*a),ar*r+ur*i+or*s);P1+=a,B1+=a*(ar+(ar=r)),U1+=a*(ur+(ur=i)),q1+=a*(or+(or=s)),bg(ar,ur,or)}function yT(){ji.point=uS}function Hle(){ji.point=Gle}function Vle(){wj(_j,xj),ji.point=uS}function Gle(e,t){_j=e,xj=t,e*=Ye,t*=Ye,ji.point=wj;var n=De(t);ar=n*De(e),ur=n*Ce(e),or=Ce(t),bg(ar,ur,or)}function wj(e,t){e*=Ye,t*=Ye;var n=De(t),r=n*De(e),i=n*Ce(e),s=Ce(t),a=ur*s-or*i,u=or*r-ar*s,o=ar*i-ur*r,l=mw(a,u,o),c=Pr(l),f=l&&-c/l;ww.add(f*a),Ew.add(f*u),Sw.add(f*o),P1+=c,B1+=c*(ar+(ar=r)),U1+=c*(ur+(ur=i)),q1+=c*(or+(or=s)),bg(ar,ur,or)}function Wle(e){bh=P1=j1=L1=z1=B1=U1=q1=0,ww=new fr,Ew=new fr,Sw=new fr,aa(e,ji);var t=+ww,n=+Ew,r=+Sw,i=mw(t,n,r);return i<T1&&(t=B1,n=U1,r=q1,P1<Te&&(t=j1,n=L1,r=z1),i=mw(t,n,r),i<T1)?[NaN,NaN]:[mi(n,t)*en,Pr(r/i)*en]}function kw(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ow(e,t){return nt(e)>Ze&&(e-=Math.round(e/gr)*gr),[e,t]}Ow.invert=Ow;function Ej(e,t,n){return(e%=gr)?t||n?kw(_T(e),xT(t,n)):_T(e):t||n?xT(t,n):Ow}function vT(e){return function(t,n){return t+=e,nt(t)>Ze&&(t-=Math.round(t/gr)*gr),[t,n]}}function _T(e){var t=vT(e);return t.invert=vT(-e),t}function xT(e,t){var n=De(e),r=Ce(e),i=De(t),s=Ce(t);function a(u,o){var l=De(o),c=De(u)*l,f=Ce(u)*l,d=Ce(o),h=d*n+c*r;return[mi(f*i-h*s,c*n-d*r),Pr(h*i+f*s)]}return a.invert=function(u,o){var l=De(o),c=De(u)*l,f=Ce(u)*l,d=Ce(o),h=d*i-f*s;return[mi(f*i+d*s,c*n+h*r),Pr(h*n-c*r)]},a}function Xle(e){e=Ej(e[0]*Ye,e[1]*Ye,e.length>2?e[2]*Ye:0);function t(n){return n=e(n[0]*Ye,n[1]*Ye),n[0]*=en,n[1]*=en,n}return t.invert=function(n){return n=e.invert(n[0]*Ye,n[1]*Ye),n[0]*=en,n[1]*=en,n},t}function Yle(e,t,n,r,i,s){if(n){var a=De(t),u=Ce(t),o=r*n;i==null?(i=t+r*gr,s=t-o/2):(i=wT(a,i),s=wT(a,s),(r>0?i<s:i>s)&&(i+=r*gr));for(var l,c=i;r>0?c>s:c<s;c-=o)l=R1([a,-u*De(c),-u*Ce(c)]),e.point(l[0],l[1])}}function wT(e,t){t=El(t),t[0]-=e,I1(t);var n=dj(-t[1]);return((-t[2]<0?-n:n)+gr-Te)%gr}function Sj(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function vm(e,t){return nt(e[0]-t[0])<Te&&nt(e[1]-t[1])<Te}function Fp(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function kj(e,t,n,r,i){var s=[],a=[],u,o;if(e.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],b=g[p],y;if(vm(m,b)){if(!m[2]&&!b[2]){for(i.lineStart(),u=0;u<p;++u)i.point((m=g[u])[0],m[1]);i.lineEnd();return}b[0]+=2*Te}s.push(y=new Fp(m,g,null,!0)),a.push(y.o=new Fp(m,null,y,!1)),s.push(y=new Fp(b,g,null,!1)),a.push(y.o=new Fp(b,null,y,!0))}}),!!s.length){for(a.sort(t),ET(s),ET(a),u=0,o=a.length;u<o;++u)a[u].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(u=0,o=c.length;u<o;++u)i.point((f=c[u])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function ET(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function i_(e){return nt(e[0])<=Ze?e[0]:oi(e[0])*((nt(e[0])+Ze)%gr-Ze)}function Zle(e,t){var n=i_(t),r=t[1],i=Ce(r),s=[Ce(n),-De(n),0],a=0,u=0,o=new fr;i===1?r=Jt+Te:i===-1&&(r=-Jt-Te);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],g=i_(h),p=h[1]/2+M1,m=Ce(p),b=De(p),y=0;y<d;++y,g=_,m=E,b=w,h=v){var v=f[y],_=i_(v),x=v[1]/2+M1,E=Ce(x),w=De(x),k=_-g,A=k>=0?1:-1,N=A*k,O=N>Ze,$=m*E;if(o.add(mi($*A*Ce(N),b*w+$*De(N))),a+=O?k+A*gr:k,O^g>=n^_>=n){var C=Ff(El(h),El(v));I1(C);var T=Ff(s,C);I1(T);var S=(O^k>=0?-1:1)*Pr(T[2]);(r>S||r===S&&(C[0]||C[1]))&&(u+=O^k>=0?1:-1)}}return(a<-Te||a<Te&&o<-T1)^u&1}function Oj(e,t,n,r){return function(i){var s=t(i),a=Sj(),u=t(a),o=!1,l,c,f,d={point:h,lineStart:p,lineEnd:m,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=v,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=p,d.lineEnd=m,c=A$(c);var _=Zle(l,r);c.length?(o||(i.polygonStart(),o=!0),kj(c,Jle,_,n,i)):_&&(o||(i.polygonStart(),o=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),o&&(i.polygonEnd(),o=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,x){e(_,x)&&i.point(_,x)}function g(_,x){s.point(_,x)}function p(){d.point=g,s.lineStart()}function m(){d.point=h,s.lineEnd()}function b(_,x){f.push([_,x]),u.point(_,x)}function y(){u.lineStart(),f=[]}function v(){b(f[0][0],f[0][1]),u.lineEnd();var _=u.clean(),x=a.result(),E,w=x.length,k,A,N;if(f.pop(),l.push(f),f=null,!!w){if(_&1){if(A=x[0],(k=A.length-1)>0){for(o||(i.polygonStart(),o=!0),i.lineStart(),E=0;E<k;++E)i.point((N=A[E])[0],N[1]);i.lineEnd()}return}w>1&&_&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(Qle))}}return d}}function Qle(e){return e.length>1}function Jle(e,t){return((e=e.x)[0]<0?e[1]-Jt-Te:Jt-e[1])-((t=t.x)[0]<0?t[1]-Jt-Te:Jt-t[1])}const ST=Oj(function(){return!0},Kle,tce,[-Ze,-Jt]);function Kle(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,a){var u=s>0?Ze:-Ze,o=nt(s-t);nt(o-Ze)<Te?(e.point(t,n=(n+a)/2>0?Jt:-Jt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&o>=Ze&&(nt(t-r)<Te&&(t-=r*Te),nt(s-u)<Te&&(s-=u*Te),n=ece(t,n,s,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=a),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function ece(e,t,n,r){var i,s,a=Ce(e-n);return nt(a)>Te?hd((Ce(t)*(s=De(r))*Ce(n)-Ce(r)*(i=De(t))*Ce(e))/(i*s*a)):(t+r)/2}function tce(e,t,n,r){var i;if(e==null)i=n*Jt,r.point(-Ze,i),r.point(0,i),r.point(Ze,i),r.point(Ze,0),r.point(Ze,-i),r.point(0,-i),r.point(-Ze,-i),r.point(-Ze,0),r.point(-Ze,i);else if(nt(e[0]-t[0])>Te){var s=e[0]<t[0]?Ze:-Ze;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function nce(e){var t=De(e),n=6*Ye,r=t>0,i=nt(t)>Te;function s(c,f,d,h){Yle(h,e,n,d,c,f)}function a(c,f){return De(c)*De(f)>t}function u(c){var f,d,h,g,p;return{lineStart:function(){g=h=!1,p=1},point:function(m,b){var y=[m,b],v,_=a(m,b),x=r?_?0:l(m,b):_?l(m+(m<0?Ze:-Ze),b):0;if(!f&&(g=h=_)&&c.lineStart(),_!==h&&(v=o(f,y),(!v||vm(f,v)||vm(y,v))&&(y[2]=1)),_!==h)p=0,_?(c.lineStart(),v=o(y,f),c.point(v[0],v[1])):(v=o(f,y),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^_){var E;!(x&d)&&(E=o(y,f,!0))&&(p=0,r?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}_&&(!f||!vm(f,y))&&c.point(y[0],y[1]),f=y,h=_,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return p|(g&&h)<<1}}}function o(c,f,d){var h=El(c),g=El(f),p=[1,0,0],m=Ff(h,g),b=Np(m,m),y=m[0],v=b-y*y;if(!v)return!d&&c;var _=t*b/v,x=-t*y/v,E=Ff(p,m),w=$p(p,_),k=$p(m,x);r_(w,k);var A=E,N=Np(w,A),O=Np(A,A),$=N*N-O*(Np(w,w)-1);if(!($<0)){var C=pr($),T=$p(A,(-N-C)/O);if(r_(T,w),T=R1(T),!d)return T;var S=c[0],M=f[0],F=c[1],L=f[1],H;M<S&&(H=S,S=M,M=H);var J=M-S,ge=nt(J-Ze)<Te,ke=ge||J<Te;if(!ge&&L<F&&(H=F,F=L,L=H),ke?ge?F+L>0^T[1]<(nt(T[0]-S)<Te?F:L):F<=T[1]&&T[1]<=L:J>Ze^(S<=T[0]&&T[0]<=M)){var Y=$p(A,(-N+C)/O);return r_(Y,w),[T,R1(Y)]}}}function l(c,f){var d=r?e:Ze-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Oj(a,u,s,r?[0,-e]:[-Ze,e-Ze])}function rce(e,t,n,r,i,s){var a=e[0],u=e[1],o=t[0],l=t[1],c=0,f=1,d=o-a,h=l-u,g;if(g=n-a,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>c&&(c=g)}if(g=i-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<f&&(f=g)}if(g=r-u,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>c&&(c=g)}if(g=s-u,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<f&&(f=g)}return c>0&&(e[0]=a+c*d,e[1]=u+c*h),f<1&&(t[0]=a+f*d,t[1]=u+f*h),!0}}}}}var yh=1e9,Rp=-yh;function Aj(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,g=0;if(l==null||(h=a(l,f))!==(g=a(c,f))||o(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==g);else d.point(c[0],c[1])}function a(l,c){return nt(l[0]-e)<Te?c>0?0:3:nt(l[0]-n)<Te?c>0?2:1:nt(l[1]-t)<Te?c>0?1:0:c>0?3:2}function u(l,c){return o(l.x,c.x)}function o(l,c){var f=a(l,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Sj(),d,h,g,p,m,b,y,v,_,x,E,w={point:k,lineStart:$,lineEnd:C,polygonStart:N,polygonEnd:O};function k(S,M){i(S,M)&&c.point(S,M)}function A(){for(var S=0,M=0,F=h.length;M<F;++M)for(var L=h[M],H=1,J=L.length,ge=L[0],ke,Y,ye=ge[0],Ne=ge[1];H<J;++H)ke=ye,Y=Ne,ge=L[H],ye=ge[0],Ne=ge[1],Y<=r?Ne>r&&(ye-ke)*(r-Y)>(Ne-Y)*(e-ke)&&++S:Ne<=r&&(ye-ke)*(r-Y)<(Ne-Y)*(e-ke)&&--S;return S}function N(){c=f,d=[],h=[],E=!0}function O(){var S=A(),M=E&&S,F=(d=A$(d)).length;(M||F)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),F&&kj(d,u,S,s,l),l.polygonEnd()),c=l,d=h=g=null}function $(){w.point=T,h&&h.push(g=[]),x=!0,_=!1,y=v=NaN}function C(){d&&(T(p,m),b&&_&&f.rejoin(),d.push(f.result())),w.point=k,_&&c.lineEnd()}function T(S,M){var F=i(S,M);if(h&&g.push([S,M]),x)p=S,m=M,b=F,x=!1,F&&(c.lineStart(),c.point(S,M));else if(F&&_)c.point(S,M);else{var L=[y=Math.max(Rp,Math.min(yh,y)),v=Math.max(Rp,Math.min(yh,v))],H=[S=Math.max(Rp,Math.min(yh,S)),M=Math.max(Rp,Math.min(yh,M))];rce(L,H,e,t,n,r)?(_||(c.lineStart(),c.point(L[0],L[1])),c.point(H[0],H[1]),F||c.lineEnd(),E=!1):F&&(c.lineStart(),c.point(S,M),E=!1)}y=S,v=M,_=F}return w}}function kT(e,t,n){var r=Qr(e,t-Te,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function OT(e,t,n){var r=Qr(e,t-Te,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function ice(){var e,t,n,r,i,s,a,u,o=10,l=o,c=90,f=360,d,h,g,p,m=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return Qr(Dp(r/c)*c,n,c).map(g).concat(Qr(Dp(u/f)*f,a,f).map(p)).concat(Qr(Dp(t/o)*o,e,o).filter(function(v){return nt(v%c)>Te}).map(d)).concat(Qr(Dp(s/l)*l,i,l).filter(function(v){return nt(v%f)>Te}).map(h))}return b.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(p(a).slice(1),g(n).reverse().slice(1),p(u).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(r=+v[0][0],n=+v[1][0],u=+v[0][1],a=+v[1][1],r>n&&(v=r,r=n,n=v),u>a&&(v=u,u=a,a=v),b.precision(m)):[[r,u],[n,a]]},b.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],i=+v[1][1],t>e&&(v=t,t=e,e=v),s>i&&(v=s,s=i,i=v),b.precision(m)):[[t,s],[e,i]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(c=+v[0],f=+v[1],b):[c,f]},b.stepMinor=function(v){return arguments.length?(o=+v[0],l=+v[1],b):[o,l]},b.precision=function(v){return arguments.length?(m=+v,d=kT(s,i,90),h=OT(t,e,m),g=kT(u,a,90),p=OT(r,n,m),b):m},b.extentMajor([[-180,-90+Te],[180,90-Te]]).extentMinor([[-180,-80-Te],[180,80+Te]])}const v0=e=>e;var s_=new fr,Aw=new fr,Cj,Tj,Cw,Tw,yu={point:Dn,lineStart:Dn,lineEnd:Dn,polygonStart:function(){yu.lineStart=sce,yu.lineEnd=uce},polygonEnd:function(){yu.lineStart=yu.lineEnd=yu.point=Dn,s_.add(nt(Aw)),Aw=new fr},result:function(){var e=s_/2;return s_=new fr,e}};function sce(){yu.point=ace}function ace(e,t){yu.point=Mj,Cj=Cw=e,Tj=Tw=t}function Mj(e,t){Aw.add(Tw*e-Cw*t),Cw=e,Tw=t}function uce(){Mj(Cj,Tj)}const AT=yu;var Rf=1/0,H1=Rf,_0=-Rf,V1=_0,oce={point:lce,lineStart:Dn,lineEnd:Dn,polygonStart:Dn,polygonEnd:Dn,result:function(){var e=[[Rf,H1],[_0,V1]];return _0=V1=-(H1=Rf=1/0),e}};function lce(e,t){e<Rf&&(Rf=e),e>_0&&(_0=e),t<H1&&(H1=t),t>V1&&(V1=t)}const G1=oce;var Mw=0,Dw=0,vh=0,W1=0,X1=0,Zc=0,Nw=0,$w=0,_h=0,Dj,Nj,fs,ds,Fi={point:Sl,lineStart:CT,lineEnd:TT,polygonStart:function(){Fi.lineStart=dce,Fi.lineEnd=hce},polygonEnd:function(){Fi.point=Sl,Fi.lineStart=CT,Fi.lineEnd=TT},result:function(){var e=_h?[Nw/_h,$w/_h]:Zc?[W1/Zc,X1/Zc]:vh?[Mw/vh,Dw/vh]:[NaN,NaN];return Mw=Dw=vh=W1=X1=Zc=Nw=$w=_h=0,e}};function Sl(e,t){Mw+=e,Dw+=t,++vh}function CT(){Fi.point=cce}function cce(e,t){Fi.point=fce,Sl(fs=e,ds=t)}function fce(e,t){var n=e-fs,r=t-ds,i=pr(n*n+r*r);W1+=i*(fs+e)/2,X1+=i*(ds+t)/2,Zc+=i,Sl(fs=e,ds=t)}function TT(){Fi.point=Sl}function dce(){Fi.point=gce}function hce(){$j(Dj,Nj)}function gce(e,t){Fi.point=$j,Sl(Dj=fs=e,Nj=ds=t)}function $j(e,t){var n=e-fs,r=t-ds,i=pr(n*n+r*r);W1+=i*(fs+e)/2,X1+=i*(ds+t)/2,Zc+=i,i=ds*e-fs*t,Nw+=i*(fs+e),$w+=i*(ds+t),_h+=i*3,Sl(fs=e,ds=t)}const MT=Fi;function Fj(e){this._context=e}Fj.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,gr);break}}},result:Dn};var Fw=new fr,a_,Rj,Ij,xh,wh,Y1={point:Dn,lineStart:function(){Y1.point=pce},lineEnd:function(){a_&&Pj(Rj,Ij),Y1.point=Dn},polygonStart:function(){a_=!0},polygonEnd:function(){a_=null},result:function(){var e=+Fw;return Fw=new fr,e}};function pce(e,t){Y1.point=Pj,Rj=xh=e,Ij=wh=t}function Pj(e,t){xh-=e,wh-=t,Fw.add(pr(xh*xh+wh*wh)),xh=e,wh=t}const DT=Y1;let NT,Z1,$T,FT;class RT{constructor(t){this._append=t==null?jj:mce(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==$T||this._append!==Z1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,$T=r,Z1=this._append,FT=this._,this._=i}this._+=FT;break}}}result(){const t=this._;return this._="",t.length?t:null}}function jj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function mce(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return jj;if(t!==NT){const n=10**t;NT=t,Z1=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return Z1}function Lj(e,t){let n=3,r=4.5,i,s;function a(u){return u&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),aa(u,i(s))),s.result()}return a.area=function(u){return aa(u,i(AT)),AT.result()},a.measure=function(u){return aa(u,i(DT)),DT.result()},a.bounds=function(u){return aa(u,i(G1)),G1.result()},a.centroid=function(u){return aa(u,i(MT)),MT.result()},a.projection=function(u){return arguments.length?(i=u==null?(e=null,v0):(e=u).stream,a):e},a.context=function(u){return arguments.length?(s=u==null?(t=null,new RT(n)):new Fj(t=u),typeof r!="function"&&s.pointRadius(r),a):t},a.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(s.pointRadius(+u),+u),a):r},a.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const o=Math.floor(u);if(!(o>=0))throw new RangeError(`invalid digits: ${u}`);n=o}return t===null&&(s=new RT(n)),a},a.projection(e).digits(n).context(t)}function Ly(e){return function(t){var n=new Rw;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Rw(){}Rw.prototype={constructor:Rw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function oS(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),aa(n,e.stream(G1)),t(G1.result()),r!=null&&e.clipExtent(r),e}function zy(e,t,n){return oS(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),u=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,o=+t[0][1]+(s-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([u,o])},n)}function lS(e,t,n){return zy(e,[[0,0],t],n)}function cS(e,t,n){return oS(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,u=-s*r[0][1];e.scale(150*s).translate([a,u])},n)}function fS(e,t,n){return oS(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],u=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}var IT=16,bce=De(30*Ye);function PT(e,t){return+t?vce(e,t):yce(e)}function yce(e){return Ly({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vce(e,t){function n(r,i,s,a,u,o,l,c,f,d,h,g,p,m){var b=l-r,y=c-i,v=b*b+y*y;if(v>4*t&&p--){var _=a+d,x=u+h,E=o+g,w=pr(_*_+x*x+E*E),k=Pr(E/=w),A=nt(nt(E)-1)<Te||nt(s-f)<Te?(s+f)/2:mi(x,_),N=e(A,k),O=N[0],$=N[1],C=O-r,T=$-i,S=y*C-b*T;(S*S/v>t||nt((b*C+y*T)/v-.5)>.3||a*d+u*h+o*g<bce)&&(n(r,i,s,a,u,o,O,$,A,_/=w,x/=w,E,p,m),m.point(O,$),n(O,$,A,_,x,E,l,c,f,d,h,g,p,m))}}return function(r){var i,s,a,u,o,l,c,f,d,h,g,p,m={point:b,lineStart:y,lineEnd:_,polygonStart:function(){r.polygonStart(),m.lineStart=x},polygonEnd:function(){r.polygonEnd(),m.lineStart=y}};function b(k,A){k=e(k,A),r.point(k[0],k[1])}function y(){f=NaN,m.point=v,r.lineStart()}function v(k,A){var N=El([k,A]),O=e(k,A);n(f,d,c,h,g,p,f=O[0],d=O[1],c=k,h=N[0],g=N[1],p=N[2],IT,r),r.point(f,d)}function _(){m.point=b,r.lineEnd()}function x(){y(),m.point=E,m.lineEnd=w}function E(k,A){v(i=k,A),s=f,a=d,u=h,o=g,l=p,m.point=v}function w(){n(f,d,c,h,g,p,s,a,i,u,o,l,IT,r),m.lineEnd=_,_()}return m}}var _ce=Ly({point:function(e,t){this.stream.point(e*Ye,t*Ye)}});function xce(e){return Ly({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function wce(e,t,n,r,i){function s(a,u){return a*=r,u*=i,[t+e*a,n-e*u]}return s.invert=function(a,u){return[(a-t)/e*r,(n-u)/e*i]},s}function jT(e,t,n,r,i,s){if(!s)return wce(e,t,n,r,i);var a=De(s),u=Ce(s),o=a*e,l=u*e,c=a/e,f=u/e,d=(u*n-a*t)/e,h=(u*t+a*n)/e;function g(p,m){return p*=r,m*=i,[o*p-l*m+t,n-l*p-o*m]}return g.invert=function(p,m){return[r*(c*p-f*m+d),i*(h-f*p-c*m)]},g}function Ls(e){return zj(function(){return e})()}function zj(e){var t,n=150,r=480,i=250,s=0,a=0,u=0,o=0,l=0,c,f=0,d=1,h=1,g=null,p=ST,m=null,b,y,v,_=v0,x=.5,E,w,k,A,N;function O(S){return k(S[0]*Ye,S[1]*Ye)}function $(S){return S=k.invert(S[0],S[1]),S&&[S[0]*en,S[1]*en]}O.stream=function(S){return A&&N===S?A:A=_ce(xce(c)(p(E(_(N=S)))))},O.preclip=function(S){return arguments.length?(p=S,g=void 0,T()):p},O.postclip=function(S){return arguments.length?(_=S,m=b=y=v=null,T()):_},O.clipAngle=function(S){return arguments.length?(p=+S?nce(g=S*Ye):(g=null,ST),T()):g*en},O.clipExtent=function(S){return arguments.length?(_=S==null?(m=b=y=v=null,v0):Aj(m=+S[0][0],b=+S[0][1],y=+S[1][0],v=+S[1][1]),T()):m==null?null:[[m,b],[y,v]]},O.scale=function(S){return arguments.length?(n=+S,C()):n},O.translate=function(S){return arguments.length?(r=+S[0],i=+S[1],C()):[r,i]},O.center=function(S){return arguments.length?(s=S[0]%360*Ye,a=S[1]%360*Ye,C()):[s*en,a*en]},O.rotate=function(S){return arguments.length?(u=S[0]%360*Ye,o=S[1]%360*Ye,l=S.length>2?S[2]%360*Ye:0,C()):[u*en,o*en,l*en]},O.angle=function(S){return arguments.length?(f=S%360*Ye,C()):f*en},O.reflectX=function(S){return arguments.length?(d=S?-1:1,C()):d<0},O.reflectY=function(S){return arguments.length?(h=S?-1:1,C()):h<0},O.precision=function(S){return arguments.length?(E=PT(w,x=S*S),T()):pr(x)},O.fitExtent=function(S,M){return zy(O,S,M)},O.fitSize=function(S,M){return lS(O,S,M)},O.fitWidth=function(S,M){return cS(O,S,M)},O.fitHeight=function(S,M){return fS(O,S,M)};function C(){var S=jT(n,0,0,d,h,f).apply(null,t(s,a)),M=jT(n,r-S[0],i-S[1],d,h,f);return c=Ej(u,o,l),w=kw(t,M),k=kw(c,w),E=PT(w,x),T()}function T(){return A=N=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&$,C()}}function dS(e){var t=0,n=Ze/3,r=zj(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Ye,n=s[1]*Ye):[t*en,n*en]},i}function Ece(e){var t=De(e);function n(r,i){return[r*t,Ce(i)/t]}return n.invert=function(r,i){return[r/t,Pr(i*t)]},n}function Sce(e,t){var n=Ce(e),r=(n+Ce(t))/2;if(nt(r)<Te)return Ece(e);var i=1+n*(2*r-n),s=pr(i)/r;function a(u,o){var l=pr(i-2*r*Ce(o))/r;return[l*Ce(u*=r),s-l*De(u)]}return a.invert=function(u,o){var l=s-o,c=mi(u,nt(l))*oi(l);return l*r<0&&(c-=Ze*oi(u)*oi(l)),[c/r,Pr((i-(u*u+l*l)*r*r)/(2*r))]},a}function Q1(){return dS(Sce).scale(155.424).center([0,33.6442])}function Bj(){return Q1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function kce(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Oce(){var e,t,n=Bj(),r,i=Q1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=Q1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,o,l={point:function(d,h){o=[d,h]}};function c(d){var h=d[0],g=d[1];return o=null,r.point(h,g),o||(s.point(h,g),o)||(u.point(h,g),o)}c.invert=function(d){var h=n.scale(),g=n.translate(),p=(d[0]-g[0])/h,m=(d[1]-g[1])/h;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?i:m>=.166&&m<.234&&p>=-.214&&p<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=kce([n.stream(t=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),g=+d[0],p=+d[1];return r=n.translate(d).clipExtent([[g-.455*h,p-.238*h],[g+.455*h,p+.238*h]]).stream(l),s=i.translate([g-.307*h,p+.201*h]).clipExtent([[g-.425*h+Te,p+.12*h+Te],[g-.214*h-Te,p+.234*h-Te]]).stream(l),u=a.translate([g-.205*h,p+.212*h]).clipExtent([[g-.214*h+Te,p+.166*h+Te],[g-.115*h-Te,p+.234*h-Te]]).stream(l),f()},c.fitExtent=function(d,h){return zy(c,d,h)},c.fitSize=function(d,h){return lS(c,d,h)},c.fitWidth=function(d,h){return cS(c,d,h)},c.fitHeight=function(d,h){return fS(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function Uj(e){return function(t,n){var r=De(t),i=De(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ce(t),s*Ce(n)]}}function yg(e){return function(t,n){var r=pr(t*t+n*n),i=e(r),s=Ce(i),a=De(i);return[mi(t*s,r*a),Pr(r&&n*s/r)]}}var qj=Uj(function(e){return pr(2/(1+e))});qj.invert=yg(function(e){return 2*Pr(e/2)});function Ace(){return Ls(qj).scale(124.75).clipAngle(180-.001)}var Hj=Uj(function(e){return(e=dj(e))&&e/Ce(e)});Hj.invert=yg(function(e){return e});function Cce(){return Ls(Hj).scale(79.4188).clipAngle(180-.001)}function By(e,t){return[e,D1(aS((Jt+t)/2))]}By.invert=function(e,t){return[e,2*hd(fj(t))-Jt]};function Tce(){return Vj(By).scale(961/gr)}function Vj(e){var t=Ls(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,a=null,u,o,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=u=o=l=null:(a=+f[0][0],u=+f[0][1],o=+f[1][0],l=+f[1][1]),c()):a==null?null:[[a,u],[o,l]]};function c(){var f=Ze*r(),d=t(Xle(t.rotate()).invert([0,0]));return s(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===By?[[Math.max(d[0]-f,a),u],[Math.min(d[0]+f,o),l]]:[[a,Math.max(d[1]-f,u)],[o,Math.min(d[1]+f,l)]])}return c()}function Ip(e){return aS((Jt+e)/2)}function Mce(e,t){var n=De(e),r=e===t?Ce(e):D1(n/De(t))/D1(Ip(t)/Ip(e)),i=n*n_(Ip(e),r)/r;if(!r)return By;function s(a,u){i>0?u<-Jt+Te&&(u=-Jt+Te):u>Jt-Te&&(u=Jt-Te);var o=i/n_(Ip(u),r);return[o*Ce(r*a),i-o*De(r*a)]}return s.invert=function(a,u){var o=i-u,l=oi(r)*pr(a*a+o*o),c=mi(a,nt(o))*oi(o);return o*r<0&&(c-=Ze*oi(a)*oi(o)),[c/r,2*hd(n_(i/l,1/r))-Jt]},s}function Dce(){return dS(Mce).scale(109.5).parallels([30,30])}function J1(e,t){return[e,t]}J1.invert=J1;function Nce(){return Ls(J1).scale(152.63)}function $ce(e,t){var n=De(e),r=e===t?Ce(e):(n-De(t))/(t-e),i=n/r+e;if(nt(r)<Te)return J1;function s(a,u){var o=i-u,l=r*a;return[o*Ce(l),i-o*De(l)]}return s.invert=function(a,u){var o=i-u,l=mi(a,nt(o))*oi(o);return o*r<0&&(l-=Ze*oi(a)*oi(o)),[l/r,i-oi(r)*pr(a*a+o*o)]},s}function Fce(){return dS($ce).scale(131.154).center([0,13.9389])}var Ih=1.340264,Ph=-.081106,jh=893e-6,Lh=.003796,K1=pr(3)/2,Rce=12;function Gj(e,t){var n=Pr(K1*Ce(t)),r=n*n,i=r*r*r;return[e*De(n)/(K1*(Ih+3*Ph*r+i*(7*jh+9*Lh*r))),n*(Ih+Ph*r+i*(jh+Lh*r))]}Gj.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,a,u,o;s<Rce&&(u=n*(Ih+Ph*r+i*(jh+Lh*r))-t,o=Ih+3*Ph*r+i*(7*jh+9*Lh*r),n-=a=u/o,r=n*n,i=r*r*r,!(nt(a)<T1));++s);return[K1*e*(Ih+3*Ph*r+i*(7*jh+9*Lh*r))/De(n),Pr(Ce(n)/K1)]};function Ice(){return Ls(Gj).scale(177.158)}function Wj(e,t){var n=De(t),r=De(e)*n;return[n*Ce(e)/r,Ce(t)/r]}Wj.invert=yg(hd);function Pce(){return Ls(Wj).scale(144.049).clipAngle(60)}function jce(){var e=1,t=0,n=0,r=1,i=1,s=0,a,u,o=null,l,c,f,d=1,h=1,g=Ly({point:function(_,x){var E=v([_,x]);this.stream.point(E[0],E[1])}}),p=v0,m,b;function y(){return d=e*r,h=e*i,m=b=null,v}function v(_){var x=_[0]*d,E=_[1]*h;if(s){var w=E*a-x*u;x=x*a+E*u,E=w}return[x+t,E+n]}return v.invert=function(_){var x=_[0]-t,E=_[1]-n;if(s){var w=E*a+x*u;x=x*a-E*u,E=w}return[x/d,E/h]},v.stream=function(_){return m&&b===_?m:m=g(p(b=_))},v.postclip=function(_){return arguments.length?(p=_,o=l=c=f=null,y()):p},v.clipExtent=function(_){return arguments.length?(p=_==null?(o=l=c=f=null,v0):Aj(o=+_[0][0],l=+_[0][1],c=+_[1][0],f=+_[1][1]),y()):o==null?null:[[o,l],[c,f]]},v.scale=function(_){return arguments.length?(e=+_,y()):e},v.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],y()):[t,n]},v.angle=function(_){return arguments.length?(s=_%360*Ye,u=Ce(s),a=De(s),y()):s*en},v.reflectX=function(_){return arguments.length?(r=_?-1:1,y()):r<0},v.reflectY=function(_){return arguments.length?(i=_?-1:1,y()):i<0},v.fitExtent=function(_,x){return zy(v,_,x)},v.fitSize=function(_,x){return lS(v,_,x)},v.fitWidth=function(_,x){return cS(v,_,x)},v.fitHeight=function(_,x){return fS(v,_,x)},v}function Xj(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Xj.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(nt(i)>Te&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Lce(){return Ls(Xj).scale(175.295)}function Yj(e,t){return[De(t)*Ce(e),Ce(t)]}Yj.invert=yg(Pr);function zce(){return Ls(Yj).scale(249.5).clipAngle(90+Te)}function Zj(e,t){var n=De(t),r=1+De(e)*n;return[n*Ce(e)/r,Ce(t)/r]}Zj.invert=yg(function(e){return 2*hd(e)});function Bce(){return Ls(Zj).scale(250).clipAngle(142)}function Qj(e,t){return[D1(aS((Jt+t)/2)),-e]}Qj.invert=function(e,t){return[-t,2*hd(fj(e))-Jt]};function Uce(){var e=Vj(Qj),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var qce=Math.abs,Iw=Math.cos,eb=Math.sin,Hce=1e-6,Jj=Math.PI,Pw=Jj/2,LT=Vce(2);function zT(e){return e>1?Pw:e<-1?-Pw:Math.asin(e)}function Vce(e){return e>0?Math.sqrt(e):0}function Gce(e,t){var n=e*eb(t),r=30,i;do t-=i=(t+eb(t)-n)/(1+Iw(t));while(qce(i)>Hce&&--r>0);return t/2}function Wce(e,t,n){function r(i,s){return[e*i*Iw(s=Gce(n,s)),t*eb(s)]}return r.invert=function(i,s){return s=zT(s/t),[i/(e*Iw(s)),zT((2*s+eb(2*s))/n)]},r}var Xce=Wce(LT/Pw,LT,Jj);function Yce(){return Ls(Xce).scale(169.529)}const Zce=Lj(),jw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Qce(e,t){return function n(){const r=t();return r.type=e,r.path=Lj().projection(r),r.copy=r.copy||function(){const i=n();return jw.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},r}}function hS(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(tb[e]=Qce(e,t),this):tb[e]||null}function Kj(e){return e&&e.path||Zce}const tb={albers:Bj,albersusa:Oce,azimuthalequalarea:Ace,azimuthalequidistant:Cce,conicconformal:Dce,conicequalarea:Q1,conicequidistant:Fce,equalEarth:Ice,equirectangular:Nce,gnomonic:Pce,identity:jce,mercator:Tce,mollweide:Yce,naturalEarth1:Lce,orthographic:zce,stereographic:Bce,transversemercator:Uce};for(const e in tb)hS(e,tb[e]);function Jce(){}const Qs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function eL(){var e=1,t=1,n=u;function r(o,l){return l.map(c=>i(o,c))}function i(o,l){var c=[],f=[];return s(o,l,d=>{n(d,o,l),Kce(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,g=c.length,p;h<g;++h)if(efe((p=c[h])[0],d)!==-1){p.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(o,l,c){var f=new Array,d=new Array,h,g,p,m,b,y;for(h=g=-1,m=o[0]>=l,Qs[m<<1].forEach(v);++h<e-1;)p=m,m=o[h+1]>=l,Qs[p|m<<1].forEach(v);for(Qs[m<<0].forEach(v);++g<t-1;){for(h=-1,m=o[g*e+e]>=l,b=o[g*e]>=l,Qs[m<<1|b<<2].forEach(v);++h<e-1;)p=m,m=o[g*e+e+h+1]>=l,y=b,b=o[g*e+h+1]>=l,Qs[p|m<<1|b<<2|y<<3].forEach(v);Qs[m|b<<3].forEach(v)}for(h=-1,b=o[g*e]>=l,Qs[b<<2].forEach(v);++h<e-1;)y=b,b=o[g*e+h+1]>=l,Qs[b<<2|y<<3].forEach(v);Qs[b<<3].forEach(v);function v(_){var x=[_[0][0]+h,_[0][1]+g],E=[_[1][0]+h,_[1][1]+g],w=a(x),k=a(E),A,N;(A=d[w])?(N=f[k])?(delete d[A.end],delete f[N.start],A===N?(A.ring.push(E),c(A.ring)):f[A.start]=d[N.end]={start:A.start,end:N.end,ring:A.ring.concat(N.ring)}):(delete d[A.end],A.ring.push(E),d[A.end=k]=A):(A=f[k])?(N=d[w])?(delete f[A.start],delete d[N.end],A===N?(A.ring.push(E),c(A.ring)):f[N.start]=d[A.end]={start:N.start,end:A.end,ring:N.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(x),f[A.start=w]=A):f[w]=d[k]={start:w,end:k,ring:[x,E]}}}function a(o){return o[0]*2+o[1]*(e+1)*4}function u(o,l,c){o.forEach(f=>{var d=f[0],h=f[1],g=d|0,p=h|0,m,b=l[p*e+g];d>0&&d<e&&g===d&&(m=l[p*e+g-1],f[0]=d+(c-m)/(b-m)-.5),h>0&&h<t&&p===h&&(m=l[(p-1)*e+g],f[1]=h+(c-m)/(b-m)-.5)})}return r.contour=i,r.size=function(o){if(!arguments.length)return[e,t];var l=Math.floor(o[0]),c=Math.floor(o[1]);return l>=0&&c>=0||W("invalid size"),e=l,t=c,r},r.smooth=function(o){return arguments.length?(n=o?u:Jce,r):n===u},r}function Kce(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function efe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=tfe(e,t[n]))return i;return 0}function tfe(e,t){for(var n=t[0],r=t[1],i=-1,s=0,a=e.length,u=a-1;s<a;u=s++){var o=e[s],l=o[0],c=o[1],f=e[u],d=f[0],h=f[1];if(nfe(o,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function nfe(e,t,n){var r;return rfe(e,t,n)&&ife(e[r=+(e[0]===t[0])],n[r],t[r])}function rfe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ife(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function tL(e,t,n){return function(r){var i=ks(r),s=n?Math.min(i[0],0):i[0],a=i[1],u=a-s,o=t?ju(s,a,e):u/(e+1);return Qr(s+o,a,o)}}function gS(e){V.call(this,null,e)}gS.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ce(gS,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Qn,s=eL().smooth(e.smooth!==!1),a=e.thresholds||sfe(r,i,e),u=e.as===null?null:e.as||"contour",o=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,X(a)?a:a(c.values));afe(f,c,l,e),f.forEach(d=>{o.push(iy(l,ht(u!=null?{[u]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=o,n}});function sfe(e,t,n){const r=tL(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>ul(t(i).values)))}function afe(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(We(i)&&(i=i(n,r)),We(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const a=(Ot(i)?i:i[0])||1,u=(Ot(i)?i:i[1])||1,o=s&&s[0]||0,l=s&&s[1]||0;e.forEach(nL(t,a,u,o,l))}function nL(e,t,n,r,i){const s=e.x1||0,a=e.y1||0,u=t*n<0;function o(f){f.forEach(l)}function l(f){u&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(o),f}}function BT(e,t,n){const r=e>=0?e:iE(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function u_(e){return We(e)?e:Jn(+e)}function rL(){var e=o=>o[0],t=o=>o[1],n=rd,r=[-1,-1],i=960,s=500,a=2;function u(o,l){const c=BT(r[0],o,e)>>a,f=BT(r[1],o,t)>>a,d=c?c+2:0,h=f?f+2:0,g=2*d+(i>>a),p=2*h+(s>>a),m=new Float32Array(g*p),b=new Float32Array(g*p);let y=m;o.forEach(_=>{const x=d+(+e(_)>>a),E=h+(+t(_)>>a);x>=0&&x<g&&E>=0&&E<p&&(m[x+E*g]+=+n(_))}),c>0&&f>0?(Fc(g,p,m,b,c),Rc(g,p,b,m,f),Fc(g,p,m,b,c),Rc(g,p,b,m,f),Fc(g,p,m,b,c),Rc(g,p,b,m,f)):c>0?(Fc(g,p,m,b,c),Fc(g,p,b,m,c),Fc(g,p,m,b,c),y=b):f>0&&(Rc(g,p,m,b,f),Rc(g,p,b,m,f),Rc(g,p,m,b,f),y=b);const v=l?Math.pow(2,-2*a):1/C$(y);for(let _=0,x=g*p;_<x;++_)y[_]*=v;return{values:y,scale:1<<a,width:g,height:p,x1:d,y1:h,x2:d+(i>>a),y2:h+(s>>a)}}return u.x=function(o){return arguments.length?(e=u_(o),u):e},u.y=function(o){return arguments.length?(t=u_(o),u):t},u.weight=function(o){return arguments.length?(n=u_(o),u):n},u.size=function(o){if(!arguments.length)return[i,s];var l=+o[0],c=+o[1];return l>=0&&c>=0||W("invalid size"),i=l,s=c,u},u.cellSize=function(o){return arguments.length?((o=+o)>=1||W("invalid cell size"),a=Math.floor(Math.log(o)/Math.LN2),u):1<<a},u.bandwidth=function(o){return arguments.length?(o=pe(o),o.length===1&&(o=[+o[0],+o[0]]),o.length!==2&&W("invalid bandwidth"),r=o,u):r},u}function Fc(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<t;++a)for(let u=0,o=0;u<e+i;++u)u<e&&(o+=n[u+a*e]),u>=i&&(u>=s&&(o-=n[u-s+a*e]),r[u-i+a*e]=o/Math.min(u+1,e-1+s-u,s))}function Rc(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<e;++a)for(let u=0,o=0;u<t+i;++u)u<t&&(o+=n[a+u*e]),u>=i&&(u>=s&&(o-=n[a+(u-s)*e]),r[a+(u-i)*e]=o/Math.min(u+1,t-1+s-u,s))}function pS(e){V.call(this,null,e)}pS.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ufe=["x","y","weight","size","cellSize","bandwidth"];function iL(e,t){return ufe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ce(pS,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=ofe(r,e.groupby),s=(e.groupby||[]).map(Kt),a=iL(rL(),e),u=e.as||"grid",o=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return o=i.map(c=>ht(l({[u]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=o,n}});function ofe(e,t){var n=[],r=c=>c(u),i,s,a,u,o,l;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)u=e[s],o=t.map(r),l=i[o],l||(i[o]=l=[],l.dims=o,n.push(l)),l.push(u);return n}function mS(e){V.call(this,null,e)}mS.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ce(mS,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=eL().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||tL(e.count||10,e.nice,!!i),a=e.size,u,o;return i||(i=t.materialize(t.SOURCE).source,u=iL(rL(),e)(i,!0),o=nL(u,u.scale||1,u.scale||1,0,0),a=[u.width,u.height],i=u.values),s=X(s)?s:s(i),i=r.size(a)(i,s),o&&i.forEach(o),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ht),n}});const Lw="Feature",bS="FeatureCollection",lfe="MultiPoint";function yS(e){V.call(this,null,e)}yS.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ce(yS,V,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],a=i&&i[1],u=e.geojson||!i&&Qn,o=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Gn(u))||s&&t.modified(Gn(s))||a&&t.modified(Gn(a)),(!this.value||l)&&(o=t.SOURCE,this._features=n=[],this._points=r=[]),u&&t.visit(o,c=>n.push(u(c))),s&&a&&(t.visit(o,c=>{var f=s(c),d=a(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Lw,geometry:{type:lfe,coordinates:r}})),this.value={type:bS,features:n}}});function vS(e){V.call(this,null,e)}vS.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ce(vS,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Qn,s=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=Kj(e.projection),n.materialize().reflow()):a=i===Qn||t.modified(i.fields)?n.ADD_MOD:n.ADD;const u=cfe(r,e.pointRadius);return n.visit(a,o=>o[s]=r(i(o))),r.pointRadius(u),n.modifies(s)}});function cfe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function _S(e){V.call(this,null,e)}_S.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ce(_S,V,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],a=s[0],u=s[1],o;function l(c){const f=n([r(c),i(c)]);f?(c[a]=f[0],c[u]=f[1]):(c[a]=void 0,c[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(o=t.modified(r.fields)||t.modified(i.fields),t.visit(o?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function xS(e){V.call(this,null,e)}xS.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ce(xS,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=ffe(Kj(e.projection),e.field||Fr("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=r),n.modifies(i)}});function ffe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(s),a};return r.context=i=>(e.context(i),r),r}function wS(e){V.call(this,[],e),this.generator=ice()}wS.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ce(wS,V,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)We(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(EF(n[0],i)):t.add.push(ht(i)),n[0]=i,t}});function ES(e){V.call(this,null,e)}ES.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ce(ES,V,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Qn,s=hfe(e.opacity,e),a=dfe(e.color,e),u=e.as||"image",o={$x:0,$y:0,$value:0,$max:r?ul(n.map(l=>ul(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Ge({},l,o);r||(f.$max=ul(c.values||[])),l[u]=gfe(c,f,a.dep?a:Jn(a(f)),s.dep?s:Jn(s(f)))}),t.reflow(!0).modifies(u)}});function dfe(e,t){let n;return We(e)?(n=r=>Bu(e(r,t)),n.dep=sL(e)):n=Jn(Bu(e||"#888")),n}function hfe(e,t){let n;return We(e)?(n=r=>e(r,t),n.dep=sL(e)):e?n=Jn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function sL(e){if(!We(e))return!1;const t=Vi(Gn(e));return t.$x||t.$y||t.$value||t.$max}function gfe(e,t,n,r){const i=e.width,s=e.height,a=e.x1||0,u=e.y1||0,o=e.x2||i,l=e.y2||s,c=e.values,f=c?m=>c[m]:bu,d=Mu(o-a,l-u),h=d.getContext("2d"),g=h.getImageData(0,0,o-a,l-u),p=g.data;for(let m=u,b=0;m<l;++m){t.$y=m-u;for(let y=a,v=m*i;y<o;++y,b+=4){t.$x=y-a,t.$value=f(y+v);const _=n(t);p[b+0]=_.r,p[b+1]=_.g,p[b+2]=_.b,p[b+3]=~~(255*r(t))}}return h.putImageData(g,0,0),d}function aL(e){V.call(this,null,e),this.modified(!0)}ce(aL,V,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=mfe(e.type),jw.forEach(r=>{e[r]!=null&&UT(n,r,e[r])})):jw.forEach(r=>{e.modified(r)&&UT(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&pfe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pfe(e,t){const n=bfe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function mfe(e){const t=hS((e||"mercator").toLowerCase());return t||W("Unrecognized projection type: "+e),t()}function UT(e,t,n){We(e[t])&&e[t](n)}function bfe(e){return e=pe(e),e.length===1?e[0]:{type:bS,features:e.reduce((t,n)=>t.concat(yfe(n)),[])}}function yfe(e){return e.type===bS?e.features:pe(e).filter(t=>t!=null).map(t=>t.type===Lw?t:{type:Lw,geometry:t})}const vfe=Object.freeze(Object.defineProperty({__proto__:null,contour:mS,geojson:yS,geopath:vS,geopoint:_S,geoshape:xS,graticule:wS,heatmap:ES,isocontour:gS,kde2d:pS,projection:aL},Symbol.toStringTag,{value:"Module"}));function _fe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,u,o=0,l=0;for(s=0;s<a;++s)u=n[s],o+=u.x,l+=u.y;for(o=(o/a-e)*r,l=(l/a-t)*r,s=0;s<a;++s)u=n[s],u.x-=o,u.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function xfe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return uL(this.cover(t,n),t,n,e)}function uL(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},u=e._x0,o=e._y0,l=e._x1,c=e._y1,f,d,h,g,p,m,b,y;if(!s)return e._root=a,e;for(;s.length;)if((p=t>=(f=(u+l)/2))?u=f:l=f,(m=n>=(d=(o+c)/2))?o=d:c=d,i=s,!(s=s[b=m<<1|p]))return i[b]=a,e;if(h=+e._x.call(null,s.data),g=+e._y.call(null,s.data),t===h&&n===g)return a.next=s,i?i[b]=a:e._root=a,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(p=t>=(f=(u+l)/2))?u=f:l=f,(m=n>=(d=(o+c)/2))?o=d:c=d;while((b=m<<1|p)===(y=(g>=d)<<1|h>=f));return i[y]=s,i[b]=a,e}function wfe(e){var t,n,r=e.length,i,s,a=new Array(r),u=new Array(r),o=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,u[n]=s,i<o&&(o=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(o>c||l>f)return this;for(this.cover(o,l).cover(c,f),n=0;n<r;++n)uL(this,a[n],u[n],e[n]);return this}function Efe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,u=this._root,o,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,o=new Array(4),o[l]=u,u=o,a*=2,l){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Sfe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kfe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function lr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Ofe(e,t,n){var r,i=this._x0,s=this._y0,a,u,o,l,c=this._x1,f=this._y1,d=[],h=this._root,g,p;for(h&&d.push(new lr(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);g=d.pop();)if(!(!(h=g.node)||(a=g.x0)>c||(u=g.y0)>f||(o=g.x1)<i||(l=g.y1)<s))if(h.length){var m=(a+o)/2,b=(u+l)/2;d.push(new lr(h[3],m,b,o,l),new lr(h[2],a,b,m,l),new lr(h[1],m,u,o,b),new lr(h[0],a,u,m,b)),(p=(t>=b)<<1|e>=m)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=g)}else{var y=e-+this._x.call(null,h.data),v=t-+this._y.call(null,h.data),_=y*y+v*v;if(_<n){var x=Math.sqrt(n=_);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function Afe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,u=this._y0,o=this._x1,l=this._y1,c,f,d,h,g,p,m,b;if(!n)return this;if(n.length)for(;;){if((g=c>=(d=(a+o)/2))?a=d:o=d,(p=f>=(h=(u+l)/2))?u=h:l=h,t=n,!(n=n[m=p<<1|g]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,b=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function Cfe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Tfe(){return this._root}function Mfe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Dfe(e){var t=[],n,r=this._root,i,s,a,u,o;for(r&&t.push(new lr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,u=n.x1,o=n.y1)&&r.length){var l=(s+u)/2,c=(a+o)/2;(i=r[3])&&t.push(new lr(i,l,c,u,o)),(i=r[2])&&t.push(new lr(i,s,c,l,o)),(i=r[1])&&t.push(new lr(i,l,a,u,c)),(i=r[0])&&t.push(new lr(i,s,a,l,c))}return this}function Nfe(e){var t=[],n=[],r;for(this._root&&t.push(new lr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,u=r.y0,o=r.x1,l=r.y1,c=(a+o)/2,f=(u+l)/2;(s=i[0])&&t.push(new lr(s,a,u,c,f)),(s=i[1])&&t.push(new lr(s,c,u,o,f)),(s=i[2])&&t.push(new lr(s,a,f,c,l)),(s=i[3])&&t.push(new lr(s,c,f,o,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function $fe(e){return e[0]}function Ffe(e){return arguments.length?(this._x=e,this):this._x}function Rfe(e){return e[1]}function Ife(e){return arguments.length?(this._y=e,this):this._y}function SS(e,t,n){var r=new kS(t??$fe,n??Rfe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function kS(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function qT(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var mr=SS.prototype=kS.prototype;mr.copy=function(){var e=new kS(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=qT(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=qT(r));return e};mr.add=xfe;mr.addAll=wfe;mr.cover=Efe;mr.data=Sfe;mr.extent=kfe;mr.find=Ofe;mr.remove=Afe;mr.removeAll=Cfe;mr.root=Tfe;mr.size=Mfe;mr.visit=Dfe;mr.visitAfter=Nfe;mr.x=Ffe;mr.y=Ife;function cr(e){return function(){return e}}function ku(e){return(e()-.5)*1e-6}function Pfe(e){return e.x+e.vx}function jfe(e){return e.y+e.vy}function Lfe(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=cr(e==null?1:+e));function a(){for(var l,c=t.length,f,d,h,g,p,m,b=0;b<s;++b)for(f=SS(t,Pfe,jfe).visitAfter(u),l=0;l<c;++l)d=t[l],p=n[d.index],m=p*p,h=d.x+d.vx,g=d.y+d.vy,f.visit(y);function y(v,_,x,E,w){var k=v.data,A=v.r,N=p+A;if(k){if(k.index>d.index){var O=h-k.x-k.vx,$=g-k.y-k.vy,C=O*O+$*$;C<N*N&&(O===0&&(O=ku(r),C+=O*O),$===0&&($=ku(r),C+=$*$),C=(N-(C=Math.sqrt(C)))/C*i,d.vx+=(O*=C)*(N=(A*=A)/(m+A)),d.vy+=($*=C)*N,k.vx-=O*(N=1-N),k.vy-=$*N)}return}return _>h+N||E<h-N||x>g+N||w<g-N}}function u(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function o(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,c){t=l,r=c,o()},a.iterations=function(l){return arguments.length?(s=+l,a):s},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:cr(+l),o(),a):e},a}function zfe(e){return e.index}function HT(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Bfe(e){var t=zfe,n=f,r,i=cr(30),s,a,u,o,l,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(u[m.source.index],u[m.target.index])}function d(m){for(var b=0,y=e.length;b<c;++b)for(var v=0,_,x,E,w,k,A,N;v<y;++v)_=e[v],x=_.source,E=_.target,w=E.x+E.vx-x.x-x.vx||ku(l),k=E.y+E.vy-x.y-x.vy||ku(l),A=Math.sqrt(w*w+k*k),A=(A-s[v])/A*m*r[v],w*=A,k*=A,E.vx-=w*(N=o[v]),E.vy-=k*N,x.vx+=w*(N=1-N),x.vy+=k*N}function h(){if(a){var m,b=a.length,y=e.length,v=new Map(a.map((x,E)=>[t(x,E,a),x])),_;for(m=0,u=new Array(b);m<y;++m)_=e[m],_.index=m,typeof _.source!="object"&&(_.source=HT(v,_.source)),typeof _.target!="object"&&(_.target=HT(v,_.target)),u[_.source.index]=(u[_.source.index]||0)+1,u[_.target.index]=(u[_.target.index]||0)+1;for(m=0,o=new Array(y);m<y;++m)_=e[m],o[m]=u[_.source.index]/(u[_.source.index]+u[_.target.index]);r=new Array(y),g(),s=new Array(y),p()}}function g(){if(a)for(var m=0,b=e.length;m<b;++m)r[m]=+n(e[m],m,e)}function p(){if(a)for(var m=0,b=e.length;m<b;++m)s[m]=+i(e[m],m,e)}return d.initialize=function(m,b){a=m,l=b,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:cr(+m),g(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:cr(+m),p(),d):i},d}var Ufe={value:()=>{}};function oL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _m(n)}function _m(e){this._=e}function qfe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_m.prototype=oL.prototype={constructor:_m,on:function(e,t){var n=this._,r=qfe(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=Hfe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=VT(n[i],e.name,t);else if(t==null)for(i in n)n[i]=VT(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _m(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Hfe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function VT(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ufe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var If=0,Eh=0,Kd=0,lL=1e3,nb,Sh,rb=0,kl=0,Uy=0,x0=typeof performance=="object"&&performance.now?performance:Date,cL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function OS(){return kl||(cL(Vfe),kl=x0.now()+Uy)}function Vfe(){kl=0}function ib(){this._call=this._time=this._next=null}ib.prototype=fL.prototype={constructor:ib,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?OS():+n)+(t==null?0:+t),!this._next&&Sh!==this&&(Sh?Sh._next=this:nb=this,Sh=this),this._call=e,this._time=n,zw()},stop:function(){this._call&&(this._call=null,this._time=1/0,zw())}};function fL(e,t,n){var r=new ib;return r.restart(e,t,n),r}function Gfe(){OS(),++If;for(var e=nb,t;e;)(t=kl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--If}function GT(){kl=(rb=x0.now())+Uy,If=Eh=0;try{Gfe()}finally{If=0,Xfe(),kl=0}}function Wfe(){var e=x0.now(),t=e-rb;t>lL&&(Uy-=t,rb=e)}function Xfe(){for(var e,t=nb,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nb=n);Sh=e,zw(r)}function zw(e){if(!If){Eh&&(Eh=clearTimeout(Eh));var t=e-kl;t>24?(e<1/0&&(Eh=setTimeout(GT,e-x0.now()-Uy)),Kd&&(Kd=clearInterval(Kd))):(Kd||(rb=x0.now(),Kd=setInterval(Wfe,lL)),If=1,cL(GT))}}function Yfe(e,t,n){var r=new ib,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,a,u){a=+a,u=u==null?OS():+u,r._restart(function o(l){l+=i,r._restart(o,i+=a,u),s(l)},a,u)},r.restart(e,t,n),r)}const Zfe=1664525,Qfe=1013904223,WT=4294967296;function Jfe(){let e=1;return()=>(e=(Zfe*e+Qfe)%WT)/WT}function Kfe(e){return e.x}function ede(e){return e.y}var tde=10,nde=Math.PI*(3-Math.sqrt(5));function rde(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,u=new Map,o=fL(f),l=oL("tick","end"),c=Jfe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(o.stop(),l.call("end",t))}function d(p){var m,b=e.length,y;p===void 0&&(p=1);for(var v=0;v<p;++v)for(n+=(s-n)*i,u.forEach(function(_){_(n)}),m=0;m<b;++m)y=e[m],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function h(){for(var p=0,m=e.length,b;p<m;++p){if(b=e[p],b.index=p,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var y=tde*Math.sqrt(.5+p),v=p*nde;b.x=y*Math.cos(v),b.y=y*Math.sin(v)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function g(p){return p.initialize&&p.initialize(e,c),p}return h(),t={tick:d,restart:function(){return o.restart(f),t},stop:function(){return o.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),u.forEach(g),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(s=+p,t):s},velocityDecay:function(p){return arguments.length?(a=1-p,t):1-a},randomSource:function(p){return arguments.length?(c=p,u.forEach(g),t):c},force:function(p,m){return arguments.length>1?(m==null?u.delete(p):u.set(p,g(m)),t):u.get(p)},find:function(p,m,b){var y=0,v=e.length,_,x,E,w,k;for(b==null?b=1/0:b*=b,y=0;y<v;++y)w=e[y],_=p-w.x,x=m-w.y,E=_*_+x*x,E<b&&(k=w,b=E);return k},on:function(p,m){return arguments.length>1?(l.on(p,m),t):l.on(p)}}}function ide(){var e,t,n,r,i=cr(-30),s,a=1,u=1/0,o=.81;function l(h){var g,p=e.length,m=SS(e,Kfe,ede).visitAfter(f);for(r=h,g=0;g<p;++g)t=e[g],m.visit(d)}function c(){if(e){var h,g=e.length,p;for(s=new Array(g),h=0;h<g;++h)p=e[h],s[p.index]=+i(p,h,e)}}function f(h){var g=0,p,m,b=0,y,v,_;if(h.length){for(y=v=_=0;_<4;++_)(p=h[_])&&(m=Math.abs(p.value))&&(g+=p.value,b+=m,y+=m*p.x,v+=m*p.y);h.x=y/b,h.y=v/b}else{p=h,p.x=p.data.x,p.y=p.data.y;do g+=s[p.data.index];while(p=p.next)}h.value=g}function d(h,g,p,m){if(!h.value)return!0;var b=h.x-t.x,y=h.y-t.y,v=m-g,_=b*b+y*y;if(v*v/o<_)return _<u&&(b===0&&(b=ku(n),_+=b*b),y===0&&(y=ku(n),_+=y*y),_<a&&(_=Math.sqrt(a*_)),t.vx+=b*h.value*r/_,t.vy+=y*h.value*r/_),!0;if(h.length||_>=u)return;(h.data!==t||h.next)&&(b===0&&(b=ku(n),_+=b*b),y===0&&(y=ku(n),_+=y*y),_<a&&(_=Math.sqrt(a*_)));do h.data!==t&&(v=s[h.data.index]*r/_,t.vx+=b*v,t.vy+=y*v);while(h=h.next)}return l.initialize=function(h,g){e=h,n=g,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:cr(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.distanceMax=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l.theta=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l}function sde(e){var t=cr(.1),n,r,i;typeof e!="function"&&(e=cr(e==null?0:+e));function s(u){for(var o=0,l=n.length,c;o<l;++o)c=n[o],c.vx+=(i[o]-c.x)*r[o]*u}function a(){if(n){var u,o=n.length;for(r=new Array(o),i=new Array(o),u=0;u<o;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return s.initialize=function(u){n=u,a()},s.strength=function(u){return arguments.length?(t=typeof u=="function"?u:cr(+u),a(),s):t},s.x=function(u){return arguments.length?(e=typeof u=="function"?u:cr(+u),a(),s):e},s}function ade(e){var t=cr(.1),n,r,i;typeof e!="function"&&(e=cr(e==null?0:+e));function s(u){for(var o=0,l=n.length,c;o<l;++o)c=n[o],c.vy+=(i[o]-c.y)*r[o]*u}function a(){if(n){var u,o=n.length;for(r=new Array(o),i=new Array(o),u=0;u<o;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return s.initialize=function(u){n=u,a()},s.strength=function(u){return arguments.length?(t=typeof u=="function"?u:cr(+u),a(),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:cr(+u),a(),s):e},s}const XT={center:_fe,collide:Lfe,nbody:ide,link:Bfe,x:sde,y:ade},kh="forces",Bw=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ude=["static","iterations"],dL=["x","y","vx","vy"];function AS(e){V.call(this,null,e)}AS.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:dL}]};ce(AS,V,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Bw),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&hL(n,e,0,t)):(this.value=n=lde(t.source,e),n.on("tick",ode(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(ude)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let u=this._argops,o=0,l=u.length,c;o<l;++o)if(c=u[o],!(c.name!==kh||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,a;i<s;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(dL)}});function ode(e,t){return()=>e.touch(t).run()}function lde(e,t){const n=rde(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),hL(n,t,!0).on("end",()=>s=!0)}function hL(e,t,n,r){var i=pe(t.forces),s,a,u,o;for(s=0,a=Bw.length;s<a;++s)u=Bw[s],u!==kh&&t.modified(u)&&e[u](t[u]);for(s=0,a=i.length;s<a;++s)o=kh+s,u=n||t.modified(kh,s)?fde(i[s]):r&&cde(i[s],r)?e.force(o):null,u&&e.force(o,u);for(a=e.numForces||0;s<a;++s)e.force(kh+s,null);return e.numForces=i.length,e}function cde(e,t){var n,r;for(n in e)if(We(r=e[n])&&t.modified(Gn(r)))return 1;return 0}function fde(e){var t,n;Se(XT,e.force)||W("Unrecognized force: "+e.force),t=XT[e.force]();for(n in e)We(t[n])&&dde(t[n],e[n],e);return t}function dde(e,t,n){e(We(t)?r=>t(r,n):t)}const hde=Object.freeze(Object.defineProperty({__proto__:null,force:AS},Symbol.toStringTag,{value:"Module"}));function gde(e,t){return e.parent===t.parent?1:2}function pde(e){return e.reduce(mde,0)/e.length}function mde(e,t){return e+t.x}function bde(e){return 1+e.reduce(yde,0)}function yde(e,t){return Math.max(e,t.y)}function vde(e){for(var t;t=e.children;)e=t[0];return e}function _de(e){for(var t;t=e.children;)e=t[t.length-1];return e}function xde(){var e=gde,t=1,n=1,r=!1;function i(s){var a,u=0;s.eachAfter(function(d){var h=d.children;h?(d.x=pde(h),d.y=bde(h)):(d.x=a?u+=e(d,a):0,d.y=0,a=d)});var o=vde(s),l=_de(s),c=o.x-e(o,l)/2,f=l.x+e(l,o)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function wde(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ede(){return this.eachAfter(wde)}function Sde(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function kde(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Ode(e,t){for(var n=this,r=[n],i=[],s,a,u,o=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,u=s.length;a<u;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++o,this);return this}function Ade(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Cde(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Tde(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Mde(e){for(var t=this,n=Dde(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Dde(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Nde(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function $de(){return Array.from(this)}function Fde(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Rde(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ide(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function CS(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Lde)):t===void 0&&(t=jde);for(var n=new Pf(e),r,i=[n],s,a,u,o;r=i.pop();)if((a=t(r.data))&&(o=(a=Array.from(a)).length))for(r.children=a,u=o-1;u>=0;--u)i.push(s=a[u]=new Pf(a[u])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(gL)}function Pde(){return CS(this).eachBefore(zde)}function jde(e){return e.children}function Lde(e){return Array.isArray(e)?e[1]:null}function zde(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function gL(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Pf(e){this.data=e,this.depth=this.height=0,this.parent=null}Pf.prototype=CS.prototype={constructor:Pf,count:Ede,each:Sde,eachAfter:Ode,eachBefore:kde,find:Ade,sum:Cde,sort:Tde,path:Mde,ancestors:Nde,descendants:$de,leaves:Fde,links:Rde,copy:Pde,[Symbol.iterator]:Ide};function xm(e){return e==null?null:pL(e)}function pL(e){if(typeof e!="function")throw new Error;return e}function Qo(){return 0}function qc(e){return function(){return e}}const Bde=1664525,Ude=1013904223,YT=4294967296;function qde(){let e=1;return()=>(e=(Bde*e+Ude)%YT)/YT}function Hde(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vde(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Gde(e,t){for(var n=0,r=(e=Vde(Array.from(e),t)).length,i=[],s,a;n<r;)s=e[n],a&&mL(a,s)?++n:(a=Xde(i=Wde(i,s)),n=0);return a}function Wde(e,t){var n,r;if(o_(t,e))return[t];for(n=0;n<e.length;++n)if(Pp(t,e[n])&&o_(Oh(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Pp(Oh(e[n],e[r]),t)&&Pp(Oh(e[n],t),e[r])&&Pp(Oh(e[r],t),e[n])&&o_(bL(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Pp(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function mL(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function o_(e,t){for(var n=0;n<t.length;++n)if(!mL(e,t[n]))return!1;return!0}function Xde(e){switch(e.length){case 1:return Yde(e[0]);case 2:return Oh(e[0],e[1]);case 3:return bL(e[0],e[1],e[2])}}function Yde(e){return{x:e.x,y:e.y,r:e.r}}function Oh(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,a=t.y,u=t.r,o=s-n,l=a-r,c=u-i,f=Math.sqrt(o*o+l*l);return{x:(n+s+o/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+u)/2}}function bL(e,t,n){var r=e.x,i=e.y,s=e.r,a=t.x,u=t.y,o=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,g=i-u,p=i-c,m=o-s,b=f-s,y=r*r+i*i-s*s,v=y-a*a-u*u+o*o,_=y-l*l-c*c+f*f,x=h*g-d*p,E=(g*_-p*v)/(x*2)-r,w=(p*m-g*b)/x,k=(h*v-d*_)/(x*2)-i,A=(d*b-h*m)/x,N=w*w+A*A-1,O=2*(s+E*w+k*A),$=E*E+k*k-s*s,C=-(Math.abs(N)>1e-6?(O+Math.sqrt(O*O-4*N*$))/(2*N):$/O);return{x:r+E+w*C,y:i+k+A*C,r:C}}function ZT(e,t,n){var r=e.x-t.x,i,s,a=e.y-t.y,u,o,l=r*r+a*a;l?(s=t.r+n.r,s*=s,o=e.r+n.r,o*=o,s>o?(i=(l+o-s)/(2*l),u=Math.sqrt(Math.max(0,o/l-i*i)),n.x=e.x-i*r-u*a,n.y=e.y-i*a+u*r):(i=(l+s-o)/(2*l),u=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-u*a,n.y=t.y+i*a+u*r)):(n.x=t.x+n.r,n.y=t.y)}function QT(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function JT(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function jp(e){this._=e,this.next=null,this.previous=null}function Zde(e,t){if(!(s=(e=Hde(e)).length))return 0;var n,r,i,s,a,u,o,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;ZT(r,n,i=e[2]),n=new jp(n),r=new jp(r),i=new jp(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(o=3;o<s;++o){ZT(n._,r._,i=e[o]),i=new jp(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(QT(l._,i._)){r=l,n.next=r,r.previous=n,--o;continue e}f+=l._.r,l=l.next}else{if(QT(c._,i._)){n=c,n.next=r,r.previous=n,--o;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=JT(n);(i=i.next)!==r;)(u=JT(i))<a&&(n=i,a=u);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Gde(n,t),o=0;o<s;++o)n=e[o],n.x-=i.x,n.y-=i.y;return i.r}function Qde(e){return Math.sqrt(e.value)}function Jde(){var e=null,t=1,n=1,r=Qo;function i(s){const a=qde();return s.x=t/2,s.y=n/2,e?s.eachBefore(KT(e)).eachAfter(l_(r,.5,a)).eachBefore(e9(1)):s.eachBefore(KT(Qde)).eachAfter(l_(Qo,1,a)).eachAfter(l_(r,s.r/Math.min(t,n),a)).eachBefore(e9(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=xm(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:qc(+s),i):r},i}function KT(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function l_(e,t,n){return function(r){if(i=r.children){var i,s,a=i.length,u=e(r)*t||0,o;if(u)for(s=0;s<a;++s)i[s].r+=u;if(o=Zde(i,n),u)for(s=0;s<a;++s)i[s].r-=u;r.r=o+u}}}function e9(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function yL(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function vg(e,t,n,r,i){for(var s=e.children,a,u=-1,o=s.length,l=e.value&&(r-t)/e.value;++u<o;)a=s[u],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Kde(){var e=1,t=1,n=0,r=!1;function i(a){var u=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/u,a.eachBefore(s(t,u)),r&&a.eachBefore(yL),a}function s(a,u){return function(o){o.children&&vg(o,o.x0,a*(o.depth+1)/u,o.x1,a*(o.depth+2)/u);var l=o.x0,c=o.y0,f=o.x1-n,d=o.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),o.x0=l,o.y0=c,o.x1=f,o.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var ehe={depth:-1},t9={},c_={};function the(e){return e.id}function nhe(e){return e.parentId}function n9(){var e=the,t=nhe,n;function r(i){var s=Array.from(i),a=e,u=t,o,l,c,f,d,h,g,p,m=new Map;if(n!=null){const b=s.map((_,x)=>rhe(n(_,x,i))),y=b.map(r9),v=new Set(b).add("");for(const _ of y)v.has(_)||(v.add(_),b.push(_),y.push(r9(_)),s.push(c_));a=(_,x)=>b[x],u=(_,x)=>y[x]}for(c=0,o=s.length;c<o;++c)l=s[c],h=s[c]=new Pf(l),(g=a(l,c,i))!=null&&(g+="")&&(p=h.id=g,m.set(p,m.has(p)?t9:h)),(g=u(l,c,i))!=null&&(g+="")&&(h.parent=g);for(c=0;c<o;++c)if(h=s[c],g=h.parent){if(d=m.get(g),!d)throw new Error("missing: "+g);if(d===t9)throw new Error("ambiguous: "+g);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===c_&&f.children.length===1;)f=f.children[0],--o;for(let b=s.length-1;b>=0&&(h=s[b],h.data===c_);--b)h.data=null}if(f.parent=ehe,f.eachBefore(function(b){b.depth=b.parent.depth+1,--o}).eachBefore(gL),f.parent=null,o>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=xm(i),r):e},r.parentId=function(i){return arguments.length?(t=xm(i),r):t},r.path=function(i){return arguments.length?(n=xm(i),r):n},r}function rhe(e){e=`${e}`;let t=e.length;return Uw(e,t-1)&&!Uw(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function r9(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Uw(e,t););return e.slice(0,t)}function Uw(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function ihe(e,t){return e.parent===t.parent?1:2}function f_(e){var t=e.children;return t?t[0]:e.t}function d_(e){var t=e.children;return t?t[t.length-1]:e.t}function she(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ahe(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function uhe(e,t,n){return e.a.parent===t.parent?e.a:n}function wm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}wm.prototype=Object.create(Pf.prototype);function ohe(e){for(var t=new wm(e,0),n,r=[t],i,s,a,u;n=r.pop();)if(s=n._.children)for(n.children=new Array(u=s.length),a=u-1;a>=0;--a)r.push(i=n.children[a]=new wm(s[a],a)),i.parent=n;return(t.parent=new wm(null,0)).children=[t],t}function lhe(){var e=ihe,t=1,n=1,r=null;function i(l){var c=ohe(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),r)l.eachBefore(o);else{var f=l,d=l,h=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var g=f===d?1:e(f,d)/2,p=g-f.x,m=t/(d.x+g+p),b=n/(h.depth||1);l.eachBefore(function(y){y.x=(y.x+p)*m,y.y=y.depth*b})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){ahe(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=u(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function u(l,c,f){if(c){for(var d=l,h=l,g=c,p=d.parent.children[0],m=d.m,b=h.m,y=g.m,v=p.m,_;g=d_(g),d=f_(d),g&&d;)p=f_(p),h=d_(h),h.a=l,_=g.z+y-d.z-m+e(g._,d._),_>0&&(she(uhe(g,l,f),l,_),m+=_,b+=_),y+=g.m,m+=d.m,v+=p.m,b+=h.m;g&&!d_(h)&&(h.t=g,h.m+=y-b),d&&!f_(p)&&(p.t=d,p.m+=m-v,f=l)}return f}function o(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function qy(e,t,n,r,i){for(var s=e.children,a,u=-1,o=s.length,l=e.value&&(i-n)/e.value;++u<o;)a=s[u],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var vL=(1+Math.sqrt(5))/2;function _L(e,t,n,r,i,s){for(var a=[],u=t.children,o,l,c=0,f=0,d=u.length,h,g,p=t.value,m,b,y,v,_,x,E;c<d;){h=i-n,g=s-r;do m=u[f++].value;while(!m&&f<d);for(b=y=m,x=Math.max(g/h,h/g)/(p*e),E=m*m*x,_=Math.max(y/E,E/b);f<d;++f){if(m+=l=u[f].value,l<b&&(b=l),l>y&&(y=l),E=m*m*x,v=Math.max(y/E,E/b),v>_){m-=l;break}_=v}a.push(o={value:m,dice:h<g,children:u.slice(c,f)}),o.dice?vg(o,n,r,i,p?r+=g*m/p:s):qy(o,n,r,p?n+=h*m/p:i,s),p-=m,c=f}return a}const xL=function e(t){function n(r,i,s,a,u){_L(t,r,i,s,a,u)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(vL);function che(){var e=xL,t=!1,n=1,r=1,i=[0],s=Qo,a=Qo,u=Qo,o=Qo,l=Qo;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(yL),d}function f(d){var h=i[d.depth],g=d.x0+h,p=d.y0+h,m=d.x1-h,b=d.y1-h;m<g&&(g=m=(g+m)/2),b<p&&(p=b=(p+b)/2),d.x0=g,d.y0=p,d.x1=m,d.y1=b,d.children&&(h=i[d.depth+1]=s(d)/2,g+=l(d)-h,p+=a(d)-h,m-=u(d)-h,b-=o(d)-h,m<g&&(g=m=(g+m)/2),b<p&&(p=b=(p+b)/2),e(d,g,p,m,b))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=pL(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:qc(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:qc(+d),c):a},c.paddingRight=function(d){return arguments.length?(u=typeof d=="function"?d:qc(+d),c):u},c.paddingBottom=function(d){return arguments.length?(o=typeof d=="function"?d:qc(+d),c):o},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:qc(+d),c):l},c}function fhe(e,t,n,r,i){var s=e.children,a,u=s.length,o,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;c(0,u,e.value,t,n,r,i);function c(f,d,h,g,p,m,b){if(f>=d-1){var y=s[f];y.x0=g,y.y0=p,y.x1=m,y.y1=b;return}for(var v=l[f],_=h/2+v,x=f+1,E=d-1;x<E;){var w=x+E>>>1;l[w]<_?x=w+1:E=w}_-l[x-1]<l[x]-_&&f+1<x&&--x;var k=l[x]-v,A=h-k;if(m-g>b-p){var N=h?(g*A+m*k)/h:m;c(f,x,k,g,p,N,b),c(x,d,A,N,p,m,b)}else{var O=h?(p*A+b*k)/h:b;c(f,x,k,g,p,m,O),c(x,d,A,g,O,m,b)}}}function dhe(e,t,n,r,i){(e.depth&1?qy:vg)(e,t,n,r,i)}const hhe=function e(t){function n(r,i,s,a,u){if((o=r._squarify)&&o.ratio===t)for(var o,l,c,f,d=-1,h,g=o.length,p=r.value;++d<g;){for(l=o[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?vg(l,i,s,a,p?s+=(u-s)*l.value/p:u):qy(l,i,s,p?i+=(a-i)*l.value/p:a,u),p-=l.value}else r._squarify=o=_L(t,r,i,s,a,u),o.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(vL);function qw(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function TS(e){V.call(this,null,e)}TS.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const ghe=e=>e.values;ce(TS,V,{transform(e,t){t.source||W("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(a=>{a.children&&ry(a.data)&&i.rem.push(a.data)}),this.value=s=CS({values:pe(e.keys).reduce((a,u)=>(a.key(u),a),phe()).entries(i.source)},ghe),n&&s.each(a=>{a.children&&(a=ht(a.data),i.add.push(a),i.source.push(a))}),qw(s,Ae,Ae)),i.source.root=s,i}});function phe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const a=i.length,u=e[s++],o={},l={};let c=-1,f,d,h;for(;++c<a;)f=u(d=i[c])+"",(h=o[f])?h.push(d):o[f]=[d];for(f in o)l[f]=n(o[f],s);return l}function r(i,s){if(++s>e.length)return i;const a=[];for(const u in i)a.push({key:u,values:r(i[u],s)});return a}return t}function Ma(e){V.call(this,null,e)}const mhe=(e,t)=>e.parent===t.parent?1:2;ce(Ma,V,{transform(e,t){(!t.source||!t.source.root)&&W(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Xl(e.sort,a=>a.data)),bhe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?mhe:rd);try{this.value=n(i)}catch(a){W(a)}return i.each(a=>yhe(a,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function bhe(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function yhe(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const Hw=["x","y","r","depth","children"];function MS(e){Ma.call(this,e)}MS.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Hw.length,default:Hw}]};ce(MS,Ma,{layout:Jde,params:["radius","size","padding"],fields:Hw});const Vw=["x0","y0","x1","y1","depth","children"];function DS(e){Ma.call(this,e)}DS.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Vw.length,default:Vw}]};ce(DS,Ma,{layout:Kde,params:["size","round","padding"],fields:Vw});function NS(e){V.call(this,null,e)}NS.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ce(NS,V,{transform(e,t){t.source||W("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?qw(n9().id(e.key).parentId(e.parentKey)(i.source),e.key,hi):qw(n9()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const i9={tidy:lhe,cluster:xde},Gw=["x","y","depth","children"];function $S(e){Ma.call(this,e)}$S.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Gw.length,default:Gw}]};ce($S,Ma,{layout(e){const t=e||"tidy";if(Se(i9,t))return i9[t]();W("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Gw});function FS(e){V.call(this,[],e)}FS.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ce(FS,V,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||W("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>s[Ae(a)]=1),r.each(a=>{const u=a.data,o=a.parent&&a.parent.data;o&&s[Ae(u)]&&s[Ae(o)]&&i.add.push(ht({source:o,target:u}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>s[Ae(a)]=1),n.forEach(a=>{(s[Ae(a.source)]||s[Ae(a.target)])&&i.mod.push(a)})),i}});const s9={binary:fhe,dice:vg,slice:qy,slicedice:dhe,squarify:xL,resquarify:hhe},Ww=["x0","y0","x1","y1","depth","children"];function RS(e){Ma.call(this,e)}RS.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ww.length,default:Ww}]};ce(RS,Ma,{layout(){const e=che();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Se(s9,t)?e.tile(s9[t]):W("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Ww});const vhe=Object.freeze(Object.defineProperty({__proto__:null,nest:TS,pack:MS,partition:DS,stratify:NS,tree:$S,treelinks:FS,treemap:RS},Symbol.toStringTag,{value:"Module"})),h_=4278190080;function _he(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function xhe(e,t,n,r,i){const s=e.width,a=e.height,u=r||i,o=Mu(s,a).getContext("2d"),l=Mu(s,a).getContext("2d"),c=u&&Mu(s,a).getContext("2d");n.forEach(k=>Em(o,k,!1)),Em(l,t,!1),u&&Em(c,t,!0);const f=g_(o,s,a),d=g_(l,s,a),h=u&&g_(c,s,a),g=e.bitmap(),p=u&&e.bitmap();let m,b,y,v,_,x,E,w;for(b=0;b<a;++b)for(m=0;m<s;++m)_=b*s+m,x=f[_]&h_,w=d[_]&h_,E=u&&h[_]&h_,(x||E||w)&&(y=e(m),v=e(b),!i&&(x||w)&&g.set(y,v),u&&(x||E)&&p.set(y,v));return[g,p]}function g_(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Em(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>Em(e,s.items,n))}):ti[r].draw(e,{items:n?t.map(whe):t})}function whe(e){const t=iy(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Js=5,tr=31,w0=32,pu=new Uint32Array(w0+1),Mi=new Uint32Array(w0+1);Mi[0]=0;pu[0]=~Mi[0];for(let e=1;e<=w0;++e)Mi[e]=Mi[e-1]<<1|1,pu[e]=~Mi[e];function Ehe(e,t){const n=new Uint32Array(~~((e*t+w0)/w0));function r(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{const u=a*e+s;return n[u>>>Js]&1<<(u&tr)},set:(s,a)=>{const u=a*e+s;r(u>>>Js,1<<(u&tr))},clear:(s,a)=>{const u=a*e+s;i(u>>>Js,~(1<<(u&tr)))},getRange:(s,a,u,o)=>{let l=o,c,f,d,h;for(;l>=a;--l)if(c=l*e+s,f=l*e+u,d=c>>>Js,h=f>>>Js,d===h){if(n[d]&pu[c&tr]&Mi[(f&tr)+1])return!0}else{if(n[d]&pu[c&tr]||n[h]&Mi[(f&tr)+1])return!0;for(let g=d+1;g<h;++g)if(n[g])return!0}return!1},setRange:(s,a,u,o)=>{let l,c,f,d,h;for(;a<=o;++a)if(l=a*e+s,c=a*e+u,f=l>>>Js,d=c>>>Js,f===d)r(f,pu[l&tr]&Mi[(c&tr)+1]);else for(r(f,pu[l&tr]),r(d,Mi[(c&tr)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,a,u,o)=>{let l,c,f,d,h;for(;a<=o;++a)if(l=a*e+s,c=a*e+u,f=l>>>Js,d=c>>>Js,f===d)i(f,Mi[l&tr]|pu[(c&tr)+1]);else for(i(f,Mi[l&tr]),i(d,pu[(c&tr)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,a,u,o)=>s<0||a<0||o>=t||u>=e}}function She(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),a=u=>~~((u+n)/r);return a.invert=u=>u*r-n,a.bitmap=()=>Ehe(i,s),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function khe(e,t,n,r){const i=e.width,s=e.height;return function(a){const u=a.datum.datum.items[r].items,o=u.length,l=a.datum.fontSize,c=Bi.width(a.datum,a.datum.text);let f=0,d,h,g,p,m,b,y;for(let v=0;v<o;++v)d=u[v].x,g=u[v].y,h=u[v].x2===void 0?d:u[v].x2,p=u[v].y2===void 0?g:u[v].y2,m=(d+h)/2,b=(g+p)/2,y=Math.abs(h-d+p-g),y>=f&&(f=y,a.x=m,a.y=b);return m=c/2,b=l/2,d=a.x-m,h=a.x+m,g=a.y-b,p=a.y+b,a.align="center",d<0&&h<=i?a.align="left":0<=d&&i<h&&(a.align="right"),a.baseline="middle",g<0&&p<=s?a.baseline="top":0<=g&&s<p&&(a.baseline="bottom"),!0}}function sb(e,t,n,r,i,s){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>s}function Ou(e,t,n,r,i,s,a,u){const o=i*s/(r*2),l=e(t-o),c=e(t+o),f=e(n-(s=s/2)),d=e(n+s);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||u&&u.getRange(l,f,c,d)}function Ohe(e,t,n,r){const i=e.width,s=e.height,a=t[0],u=t[1];function o(l,c,f,d,h){const g=e.invert(l),p=e.invert(c);let m=f,b=s,y;if(!sb(g,p,d,h,i,s)&&!Ou(e,g,p,h,d,m,a,u)&&!Ou(e,g,p,h,d,h,a,null)){for(;b-m>=1;)y=(m+b)/2,Ou(e,g,p,h,d,y,a,u)?b=y:m=y;if(m>f)return[g,p,m,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Bi.width(l.datum,l.datum.text);let g=n?d:0,p=!1,m=!1,b=0,y,v,_,x,E,w,k,A,N,O,$,C,T,S,M,F,L;for(let H=0;H<f;++H){for(y=c[H].x,_=c[H].y,v=c[H].x2===void 0?y:c[H].x2,x=c[H].y2===void 0?_:c[H].y2,y>v&&(L=y,y=v,v=L),_>x&&(L=_,_=x,x=L),N=e(y),$=e(v),O=~~((N+$)/2),C=e(_),S=e(x),T=~~((C+S)/2),k=O;k>=N;--k)for(A=T;A>=C;--A)F=o(k,A,g,h,d),F&&([l.x,l.y,g,p]=F);for(k=O;k<=$;++k)for(A=T;A<=S;++A)F=o(k,A,g,h,d),F&&([l.x,l.y,g,p]=F);!p&&!n&&(M=Math.abs(v-y+x-_),E=(y+v)/2,w=(_+x)/2,M>=b&&!sb(E,w,h,d,i,s)&&!Ou(e,E,w,d,h,d,a,null)&&(b=M,l.x=E,l.y=w,m=!0))}return p||m?(E=h/2,w=d/2,a.setRange(e(l.x-E),e(l.y-w),e(l.x+E),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}const Ahe=[-1,-1,1,1],Che=[-1,1,-1,1];function The(e,t,n,r){const i=e.width,s=e.height,a=t[0],u=t[1],o=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Bi.width(l.datum,l.datum.text),g=[];let p=n?d:0,m=!1,b=!1,y=0,v,_,x,E,w,k,A,N,O,$,C,T;for(let S=0;S<f;++S){for(v=c[S].x,x=c[S].y,_=c[S].x2===void 0?v:c[S].x2,E=c[S].y2===void 0?x:c[S].y2,g.push([e((v+_)/2),e((x+E)/2)]);g.length;)if([A,N]=g.pop(),!(a.get(A,N)||u.get(A,N)||o.get(A,N))){o.set(A,N);for(let M=0;M<4;++M)w=A+Ahe[M],k=N+Che[M],o.outOfBounds(w,k,w,k)||g.push([w,k]);if(w=e.invert(A),k=e.invert(N),O=p,$=s,!sb(w,k,h,d,i,s)&&!Ou(e,w,k,d,h,O,a,u)&&!Ou(e,w,k,d,h,d,a,null)){for(;$-O>=1;)C=(O+$)/2,Ou(e,w,k,d,h,C,a,u)?$=C:O=C;O>p&&(l.x=w,l.y=k,p=O,m=!0)}}!m&&!n&&(T=Math.abs(_-v+E-x),w=(v+_)/2,k=(x+E)/2,T>=y&&!sb(w,k,h,d,i,s)&&!Ou(e,w,k,d,h,d,a,null)&&(y=T,l.x=w,l.y=k,b=!0))}return m||b?(w=h/2,k=d/2,a.setRange(e(l.x-w),e(l.y-k),e(l.x+w),e(l.y+k)),l.align="center",l.baseline="middle",!0):!1}}const Mhe=["right","center","left"],Dhe=["bottom","middle","top"];function Nhe(e,t,n,r){const i=e.width,s=e.height,a=t[0],u=t[1],o=r.length;return function(l){var c;const f=l.boundary,d=l.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let h=(c=l.textWidth)!==null&&c!==void 0?c:0,g,p,m,b,y,v,_,x,E,w,k,A,N,O,$;for(let C=0;C<o;++C){if(g=(n[C]&3)-1,p=(n[C]>>>2&3)-1,m=g===0&&p===0||r[C]<0,b=g&&p?Math.SQRT1_2:1,y=r[C]<0?-1:1,v=f[1+g]+r[C]*g*b,k=f[4+p]+y*d*p/2+r[C]*p*b,x=k-d/2,E=k+d/2,A=e(v),O=e(x),$=e(E),!h)if(a9(A,A,O,$,a,u,v,v,x,E,f,m))h=Bi.width(l.datum,l.datum.text);else continue;if(w=v+y*h*g/2,v=w-h/2,_=w+h/2,A=e(v),N=e(_),a9(A,N,O,$,a,u,v,_,x,E,f,m))return l.x=g?g*y<0?_:v:w,l.y=p?p*y<0?E:x:k,l.align=Mhe[g*y+1],l.baseline=Dhe[p*y+1],a.setRange(A,O,N,$),!0}return!1}}function a9(e,t,n,r,i,s,a,u,o,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const p_=0,m_=4,b_=8,y_=0,v_=1,__=2,$he={"top-left":p_+y_,top:p_+v_,"top-right":p_+__,left:m_+y_,middle:m_+v_,right:m_+__,"bottom-left":b_+y_,bottom:b_+v_,"bottom-right":b_+__},Fhe={naive:khe,"reduced-search":Ohe,floodfill:The};function Rhe(e,t,n,r,i,s,a,u,o,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Ihe(r,f),h=Phe(i,f),g=jhe(e[0].datum),p=g==="group"&&e[0].datum.items[o].marktype,m=p==="area",b=Lhe(g,p,u,o),y=l===null||l===1/0,v=m&&c==="naive";let _=-1,x=-1;const E=e.map(N=>{const O=y?Bi.width(N,N.text):void 0;return _=Math.max(_,O),x=Math.max(x,N.fontSize),{datum:N,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(N),textWidth:O}});l=l===null||l===1/0?Math.max(_,x)+Math.max(...r):l;const w=She(t[0],t[1],l);let k;if(!v){n&&E.sort(($,C)=>n($.datum,C.datum));let N=!1;for(let $=0;$<h.length&&!N;++$)N=h[$]===5||d[$]<0;const O=(g&&a||m)&&e.map($=>$.datum);k=s.length||O?xhe(w,O||[],s,N,m):_he(w,a&&E)}const A=m?Fhe[c](w,k,a,o):Nhe(w,k,h,d);return E.forEach(N=>N.opacity=+A(N)),E}function Ihe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Phe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=$he[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function jhe(e){return e&&e.mark&&e.mark.marktype}function Lhe(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const a=s.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{const a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const Xw=["x","y","opacity","align","baseline"],wL=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function IS(e){V.call(this,null,e)}IS.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:wL},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Xw.length,default:Xw}]};ce(IS,V,{transform(e,t){function n(s){const a=e[s];return We(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&W("Size parameter should be specified as a [width, height] array.");const i=e.as||Xw;return Rhe(t.materialize(t.SOURCE).source||[],e.size,e.sort,pe(e.offset==null?1:e.offset),pe(e.anchor||wL),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const zhe=Object.freeze(Object.defineProperty({__proto__:null,label:IS},Symbol.toStringTag,{value:"Module"}));function EL(e,t){var n=[],r=function(c){return c(u)},i,s,a,u,o,l;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)u=e[s],o=t.map(r),l=i[o],l||(i[o]=l=[],l.dims=o,n.push(l)),l.push(u);return n}function PS(e){V.call(this,null,e)}PS.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ce(PS,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=EL(r,e.groupby),s=(e.groupby||[]).map(Kt),a=s.length,u=e.as||[Kt(e.x),Kt(e.y)],o=[];i.forEach(l=>{BF(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<a;++d)f[s[d]]=l.dims[d];f[u[0]]=c[0],f[u[1]]=c[1],o.push(ht(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o}return n}});const Yw={linear:mE,log:PF,exp:jF,pow:LF,quad:bE,poly:zF},Bhe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function jS(e){V.call(this,null,e)}jS.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Yw)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ce(jS,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=EL(r,e.groupby),s=(e.groupby||[]).map(Kt),a=e.method||"linear",u=e.order||3,o=Bhe(a,u),l=e.as||[Kt(e.x),Kt(e.y)],c=Yw[a],f=[];let d=e.extent;Se(Yw,a)||W("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=o){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const p=c(h,e.x,e.y,u);if(e.params){f.push(ht({keys:h.dims,coef:p.coef,rSquared:p.rSquared}));return}const m=d||ks(h,e.x),b=y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[l[0]]=y[0],v[l[1]]=y[1],f.push(ht(v))};a==="linear"?m.forEach(y=>b([y,p.predict(y)])):fy(p.predict,m,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Uhe=Object.freeze(Object.defineProperty({__proto__:null,loess:PS,regression:jS},Symbol.toStringTag,{value:"Module"})),ba=11102230246251565e-32,jn=134217729,qhe=(3+8*ba)*ba;function x_(e,t,n,r,i){let s,a,u,o,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(a=l+s,u=s-(a-l),l=t[++f]):(a=c+s,u=s-(a-c),c=r[++d]),s=a,u!==0&&(i[h++]=u);f<e&&d<n;)c>l==c>-l?(a=s+l,o=a-s,u=s-(a-o)+(l-o),l=t[++f]):(a=s+c,o=a-s,u=s-(a-o)+(c-o),c=r[++d]),s=a,u!==0&&(i[h++]=u);for(;f<e;)a=s+l,o=a-s,u=s-(a-o)+(l-o),l=t[++f],s=a,u!==0&&(i[h++]=u);for(;d<n;)a=s+c,o=a-s,u=s-(a-o)+(c-o),c=r[++d],s=a,u!==0&&(i[h++]=u);return(s!==0||h===0)&&(i[h++]=s),h}function Hhe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function _g(e){return new Float64Array(e)}const Vhe=(3+16*ba)*ba,Ghe=(2+12*ba)*ba,Whe=(9+64*ba)*ba*ba,Ic=_g(4),u9=_g(8),o9=_g(12),l9=_g(16),nr=_g(4);function Xhe(e,t,n,r,i,s,a){let u,o,l,c,f,d,h,g,p,m,b,y,v,_,x,E,w,k;const A=e-i,N=n-i,O=t-s,$=r-s;_=A*$,d=jn*A,h=d-(d-A),g=A-h,d=jn*$,p=d-(d-$),m=$-p,x=g*m-(_-h*p-g*p-h*m),E=O*N,d=jn*O,h=d-(d-O),g=O-h,d=jn*N,p=d-(d-N),m=N-p,w=g*m-(E-h*p-g*p-h*m),b=x-w,f=x-b,Ic[0]=x-(b+f)+(f-w),y=_+b,f=y-_,v=_-(y-f)+(b-f),b=v-E,f=v-b,Ic[1]=v-(b+f)+(f-E),k=y+b,f=k-y,Ic[2]=y-(k-f)+(b-f),Ic[3]=k;let C=Hhe(4,Ic),T=Ghe*a;if(C>=T||-C>=T||(f=e-A,u=e-(A+f)+(f-i),f=n-N,l=n-(N+f)+(f-i),f=t-O,o=t-(O+f)+(f-s),f=r-$,c=r-($+f)+(f-s),u===0&&o===0&&l===0&&c===0)||(T=Whe*a+qhe*Math.abs(C),C+=A*c+$*u-(O*l+N*o),C>=T||-C>=T))return C;_=u*$,d=jn*u,h=d-(d-u),g=u-h,d=jn*$,p=d-(d-$),m=$-p,x=g*m-(_-h*p-g*p-h*m),E=o*N,d=jn*o,h=d-(d-o),g=o-h,d=jn*N,p=d-(d-N),m=N-p,w=g*m-(E-h*p-g*p-h*m),b=x-w,f=x-b,nr[0]=x-(b+f)+(f-w),y=_+b,f=y-_,v=_-(y-f)+(b-f),b=v-E,f=v-b,nr[1]=v-(b+f)+(f-E),k=y+b,f=k-y,nr[2]=y-(k-f)+(b-f),nr[3]=k;const S=x_(4,Ic,4,nr,u9);_=A*c,d=jn*A,h=d-(d-A),g=A-h,d=jn*c,p=d-(d-c),m=c-p,x=g*m-(_-h*p-g*p-h*m),E=O*l,d=jn*O,h=d-(d-O),g=O-h,d=jn*l,p=d-(d-l),m=l-p,w=g*m-(E-h*p-g*p-h*m),b=x-w,f=x-b,nr[0]=x-(b+f)+(f-w),y=_+b,f=y-_,v=_-(y-f)+(b-f),b=v-E,f=v-b,nr[1]=v-(b+f)+(f-E),k=y+b,f=k-y,nr[2]=y-(k-f)+(b-f),nr[3]=k;const M=x_(S,u9,4,nr,o9);_=u*c,d=jn*u,h=d-(d-u),g=u-h,d=jn*c,p=d-(d-c),m=c-p,x=g*m-(_-h*p-g*p-h*m),E=o*l,d=jn*o,h=d-(d-o),g=o-h,d=jn*l,p=d-(d-l),m=l-p,w=g*m-(E-h*p-g*p-h*m),b=x-w,f=x-b,nr[0]=x-(b+f)+(f-w),y=_+b,f=y-_,v=_-(y-f)+(b-f),b=v-E,f=v-b,nr[1]=v-(b+f)+(f-E),k=y+b,f=k-y,nr[2]=y-(k-f)+(b-f),nr[3]=k;const F=x_(M,o9,4,nr,l9);return l9[F-1]}function Lp(e,t,n,r,i,s){const a=(t-s)*(n-i),u=(e-i)*(r-s),o=a-u;if(a===0||u===0||a>0!=u>0)return o;const l=Math.abs(a+u);return Math.abs(o)>=Vhe*l?o:-Xhe(e,t,n,r,i,s,l)}const c9=Math.pow(2,-52),zp=new Uint32Array(512);class ab{static from(t,n=Khe,r=e0e){const i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){const u=t[a];s[2*a]=n(u),s[2*a+1]=r(u)}return new ab(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,a=t.length>>1;let u=1/0,o=1/0,l=-1/0,c=-1/0;for(let N=0;N<a;N++){const O=t[2*N],$=t[2*N+1];O<u&&(u=O),$<o&&(o=$),O>l&&(l=O),$>c&&(c=$),this._ids[N]=N}const f=(u+l)/2,d=(o+c)/2;let h=1/0,g,p,m;for(let N=0;N<a;N++){const O=w_(f,d,t[2*N],t[2*N+1]);O<h&&(g=N,h=O)}const b=t[2*g],y=t[2*g+1];h=1/0;for(let N=0;N<a;N++){if(N===g)continue;const O=w_(b,y,t[2*N],t[2*N+1]);O<h&&O>0&&(p=N,h=O)}let v=t[2*p],_=t[2*p+1],x=1/0;for(let N=0;N<a;N++){if(N===g||N===p)continue;const O=Qhe(b,y,v,_,t[2*N],t[2*N+1]);O<x&&(m=N,x=O)}let E=t[2*m],w=t[2*m+1];if(x===1/0){for(let $=0;$<a;$++)this._dists[$]=t[2*$]-t[0]||t[2*$+1]-t[1];Qc(this._ids,this._dists,0,a-1);const N=new Uint32Array(a);let O=0;for(let $=0,C=-1/0;$<a;$++){const T=this._ids[$];this._dists[T]>C&&(N[O++]=T,C=this._dists[T])}this.hull=N.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Lp(b,y,v,_,E,w)<0){const N=p,O=v,$=_;p=m,v=E,_=w,m=N,E=O,w=$}const k=Jhe(b,y,v,_,E,w);this._cx=k.x,this._cy=k.y;for(let N=0;N<a;N++)this._dists[N]=w_(t[2*N],t[2*N+1],k.x,k.y);Qc(this._ids,this._dists,0,a-1),this._hullStart=g;let A=3;r[g]=n[m]=p,r[p]=n[g]=m,r[m]=n[p]=g,i[g]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(b,y)]=g,s[this._hashKey(v,_)]=p,s[this._hashKey(E,w)]=m,this.trianglesLen=0,this._addTriangle(g,p,m,-1,-1,-1);for(let N=0,O,$;N<this._ids.length;N++){const C=this._ids[N],T=t[2*C],S=t[2*C+1];if(N>0&&Math.abs(T-O)<=c9&&Math.abs(S-$)<=c9||(O=T,$=S,C===g||C===p||C===m))continue;let M=0;for(let ge=0,ke=this._hashKey(T,S);ge<this._hashSize&&(M=s[(ke+ge)%this._hashSize],!(M!==-1&&M!==r[M]));ge++);M=n[M];let F=M,L;for(;L=r[F],Lp(T,S,t[2*F],t[2*F+1],t[2*L],t[2*L+1])>=0;)if(F=L,F===M){F=-1;break}if(F===-1)continue;let H=this._addTriangle(F,C,r[F],-1,-1,i[F]);i[C]=this._legalize(H+2),i[F]=H,A++;let J=r[F];for(;L=r[J],Lp(T,S,t[2*J],t[2*J+1],t[2*L],t[2*L+1])<0;)H=this._addTriangle(J,C,L,i[C],-1,i[J]),i[C]=this._legalize(H+2),r[J]=J,A--,J=L;if(F===M)for(;L=n[F],Lp(T,S,t[2*L],t[2*L+1],t[2*F],t[2*F+1])<0;)H=this._addTriangle(L,C,F,-1,i[F],i[L]),this._legalize(H+2),i[L]=H,r[F]=F,A--,F=L;this._hullStart=n[C]=F,r[F]=n[J]=C,r[C]=J,s[this._hashKey(T,S)]=C,s[this._hashKey(t[2*F],t[2*F+1])]=F}this.hull=new Uint32Array(A);for(let N=0,O=this._hullStart;N<A;N++)this.hull[N]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Yhe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,a=0;for(;;){const u=r[t],o=t-t%3;if(a=o+(t+2)%3,u===-1){if(s===0)break;t=zp[--s];continue}const l=u-u%3,c=o+(t+1)%3,f=l+(u+2)%3,d=n[a],h=n[t],g=n[c],p=n[f];if(Zhe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1])){n[t]=p,n[u]=d;const b=r[f];if(b===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,b),this._link(u,r[a]),this._link(a,f);const y=l+(u+1)%3;s<zp.length&&(zp[s++]=y)}else{if(s===0)break;t=zp[--s]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,a){const u=this.trianglesLen;return this._triangles[u]=t,this._triangles[u+1]=n,this._triangles[u+2]=r,this._link(u,i),this._link(u+1,s),this._link(u+2,a),this.trianglesLen+=3,u}}function Yhe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function w_(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Zhe(e,t,n,r,i,s,a,u){const o=e-a,l=t-u,c=n-a,f=r-u,d=i-a,h=s-u,g=o*o+l*l,p=c*c+f*f,m=d*d+h*h;return o*(f*m-p*h)-l*(c*m-p*d)+g*(c*h-f*d)<0}function Qhe(e,t,n,r,i,s){const a=n-e,u=r-t,o=i-e,l=s-t,c=a*a+u*u,f=o*o+l*l,d=.5/(a*l-u*o),h=(l*c-u*f)*d,g=(a*f-o*c)*d;return h*h+g*g}function Jhe(e,t,n,r,i,s){const a=n-e,u=r-t,o=i-e,l=s-t,c=a*a+u*u,f=o*o+l*l,d=.5/(a*l-u*o),h=e+(l*c-u*f)*d,g=t+(a*f-o*c)*d;return{x:h,y:g}}function Qc(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],a=t[s];let u=i-1;for(;u>=n&&t[e[u]]>a;)e[u+1]=e[u--];e[u+1]=s}else{const i=n+r>>1;let s=n+1,a=r;eh(e,i,s),t[e[n]]>t[e[r]]&&eh(e,n,r),t[e[s]]>t[e[r]]&&eh(e,s,r),t[e[n]]>t[e[s]]&&eh(e,n,s);const u=e[s],o=t[u];for(;;){do s++;while(t[e[s]]<o);do a--;while(t[e[a]]>o);if(a<s)break;eh(e,s,a)}e[n+1]=e[a],e[a]=u,r-s+1>=a-n?(Qc(e,t,s,r),Qc(e,t,n,a-1)):(Qc(e,t,n,a-1),Qc(e,t,s,r))}}function eh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Khe(e){return e[0]}function e0e(e){return e[1]}const f9=1e-6;class rl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>f9||Math.abs(this._y1-s)>f9)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Zw{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let t0e=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h=0,g=0,p=r.length,m,b;h<p;h+=3,g+=2){const y=r[h]*2,v=r[h+1]*2,_=r[h+2]*2,x=t[y],E=t[y+1],w=t[v],k=t[v+1],A=t[_],N=t[_+1],O=w-x,$=k-E,C=A-x,T=N-E,S=(O*T-$*C)*2;if(Math.abs(S)<1e-9){let M=1e9;const F=r[0]*2;M*=Math.sign((t[F]-x)*T-(t[F+1]-E)*C),m=(x+A)/2-M*T,b=(E+N)/2+M*C}else{const M=1/S,F=O*O+$*$,L=C*C+T*T;m=x+(T*F-$*L)*M,b=E+(O*L-C*F)*M}s[g]=m,s[g+1]=b}let a=n[n.length-1],u,o=a*4,l,c=t[2*a],f,d=t[2*a+1];i.fill(0);for(let h=0;h<n.length;++h)a=n[h],u=o,l=c,f=d,o=a*4,c=t[2*a],d=t[2*a+1],i[u+2]=i[o]=f-d,i[u+3]=i[o+1]=c-l}render(t){const n=t==null?t=new rl:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:a,vectors:u}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,g=Math.floor(d/3)*2,p=a[h],m=a[h+1],b=a[g],y=a[g+1];this._renderSegment(p,m,b,y,t)}let o,l=s[s.length-1];for(let c=0;c<s.length;++c){o=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=a[f],h=a[f+1],g=o*4,p=this._project(d,h,u[g+2],u[g+3]);p&&this._renderSegment(d,h,p[0],p[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new rl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new rl:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Zw;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let a;const u=this._regioncode(t,n),o=this._regioncode(r,i);u===0&&o===0?(s.moveTo(t,n),s.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,u,o))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let u=0,o=i.length;u<o;u+=2)if(n[s]==i[u]&&n[s+1]==i[u+1]&&n[(s+2)%a]==i[(u+o-2)%o]&&n[(s+3)%a]==i[(u+o-1)%o]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,a=r[t];if(a===-1)return null;const u=[];let o=a;do{const l=Math.floor(o/3);if(u.push(n[l*2],n[l*2+1]),o=o%3===2?o-2:o+1,s[o]!==t)break;o=i[o]}while(o!==a&&o!==-1);return u}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,s,a,u=n[r-2],o=n[r-1],l,c=this._regioncode(u,o),f,d=0;for(let h=0;h<r;h+=2)if(s=u,a=o,u=n[h],o=n[h+1],l=c,c=this._regioncode(u,o),l===0&&c===0)f=d,d=0,i?i.push(u,o):i=[u,o];else{let g,p,m,b,y;if(l===0){if((g=this._clipSegment(s,a,u,o,l,c))===null)continue;[p,m,b,y]=g}else{if((g=this._clipSegment(u,o,s,a,c,l))===null)continue;[b,y,p,m]=g,f=d,d=this._edgecode(p,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(p,m):i=[p,m]}f=d,d=this._edgecode(b,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(b,y):i=[b,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,a){for(;;){if(s===0&&a===0)return[t,n,r,i];if(s&a)return null;let u,o,l=s||a;l&8?(u=t+(r-t)*(this.ymax-n)/(i-n),o=this.ymax):l&4?(u=t+(r-t)*(this.ymin-n)/(i-n),o=this.ymin):l&2?(o=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(o=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=o,s=this._regioncode(t,n)):(r=u,i=o,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,a){let u=Array.from(n),o;if((o=this._project(u[0],u[1],r,i))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],s,a))&&u.push(o[0],o[1]),u=this._clipFinite(t,u))for(let l=0,c=u.length,f,d=this._edgecode(u[c-2],u[c-1]);l<c;l+=2)f=d,d=this._edgecode(u[l],u[l+1]),f&&d&&(l=this._edge(t,f,d,u,l),c=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,r,i,s){for(;n!==r;){let a,u;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,u=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,u=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,u=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,u=this.ymin;break}(i[s]!==a||i[s+1]!==u)&&this.contains(t,a,u)&&(i.splice(s,0,a,u),s+=2)}if(i.length>4)for(let a=0;a<i.length;a+=2){const u=(a+2)%i.length,o=(a+4)%i.length;(i[a]===i[u]&&i[u]===i[o]||i[a+1]===i[u+1]&&i[u+1]===i[o+1])&&(i.splice(u,2),a-=2)}return s}_project(t,n,r,i){let s=1/0,a,u,o;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(o=this.ymin,u=t+(s=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(o=this.ymax,u=t+(s=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<s&&(u=this.xmax,o=n+(s=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<s&&(u=this.xmin,o=n+(s=a)*i)}return[u,o]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}};const n0e=2*Math.PI,Pc=Math.pow;function r0e(e){return e[0]}function i0e(e){return e[1]}function s0e(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function a0e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class LS{static from(t,n=r0e,r=i0e,i){return new LS("length"in t?u0e(t,n,r,i):Float64Array.from(o0e(t,n,r,i)))}constructor(t){this._delaunator=new ab(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&s0e(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const o=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*o],n[2*o+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const g=a0e(n[2*d],n[2*d+1],f);n[2*d]=g[0],n[2*d+1]=g[1]}this._delaunator=new ab(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let o=0,l=r.length;o<l;++o){const c=s[o%3===2?o-2:o+1];(r[o]===-1||a[c]===-1)&&(a[c]=o)}for(let o=0,l=i.length;o<l;++o)u[i[o]]=o;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new t0e(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:a,collinear:u}=this;if(u){const f=u.indexOf(t);f>0&&(yield u[f-1]),f<u.length-1&&(yield u[f+1]);return}const o=n[t];if(o===-1)return;let l=o,c=-1;do{if(yield c=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==o)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:a,halfedges:u,triangles:o,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Pc(n-l[t*2],2)+Pc(r-l[t*2+1],2);const d=i[t];let h=d;do{let g=o[h];const p=Pc(n-l[g*2],2)+Pc(r-l[g*2+1],2);if(p<f&&(f=p,c=g),h=h%3===2?h-2:h+1,o[h]!==t)break;if(h=u[h],h===-1){if(h=s[(a[t]+1)%s.length],h!==g&&Pc(n-l[h*2],2)+Pc(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new rl:void 0,{points:r,halfedges:i,triangles:s}=this;for(let a=0,u=i.length;a<u;++a){const o=i[a];if(o<a)continue;const l=s[a]*2,c=s[o]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new rl:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){const u=i[s],o=i[s+1];t.moveTo(u+n,o),t.arc(u,o,n,0,n0e)}return r&&r.value()}renderHull(t){const n=t==null?t=new rl:void 0,{hull:r,points:i}=this,s=r[0]*2,a=r.length;t.moveTo(i[s],i[s+1]);for(let u=1;u<a;++u){const o=2*r[u];t.lineTo(i[o],i[o+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Zw;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new rl:void 0,{points:i,triangles:s}=this,a=s[t*=3]*2,u=s[t+1]*2,o=s[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.lineTo(i[o],i[o+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Zw;return this.renderTriangle(t,n),n.value()}}function u0e(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){const u=e[a];s[a*2]=t.call(r,u,a,e),s[a*2+1]=n.call(r,u,a,e)}return s}function*o0e(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function zS(e){V.call(this,null,e)}zS.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const l0e=[-1e5,-1e5,1e5,1e5];ce(zS,V,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:l0e;const s=this.value=LS.from(r,e.x,e.y).voronoi(i);for(let a=0,u=r.length;a<u;++a){const o=s.cellPolygon(a);r[a][n]=o?c0e(o):null}return t.reflow(e.modified()).modifies(n)}});function c0e(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}const f0e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:zS},Symbol.toStringTag,{value:"Module"}));var E_=Math.PI/180,Ah=1<<11>>5,Sm=1<<11;function d0e(){var e=[256,256],t,n,r,i,s,a,u,o=SL,l=[],c=Math.random,f={};f.layout=function(){for(var g=d(Mu()),p=y0e((e[0]>>5)*e[1]),m=null,b=l.length,y=-1,v=[],_=l.map(E=>({text:t(E),font:n(E),style:i(E),weight:s(E),rotate:a(E),size:~~(r(E)+1e-14),padding:u(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,w)=>w.size-E.size);++y<b;){var x=_[y];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,h0e(g,x,_,y),x.hasText&&h(p,x,m)&&(v.push(x),m?p0e(m,x):m=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return v};function d(g){g.width=g.height=1;var p=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(Ah<<5)/p,g.height=Sm/p;var m=g.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:p}}function h(g,p,m){for(var b=p.x,y=p.y,v=Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=o(e),x=c()<.5?1:-1,E=-x,w,k,A;(w=_(E+=x))&&(k=~~w[0],A=~~w[1],!(Math.min(Math.abs(k),Math.abs(A))>=v));)if(p.x=b+k,p.y=y+A,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>e[0]||p.y+p.y1>e[1])&&(!m||!g0e(p,g,e[0]))&&(!m||m0e(p,m))){for(var N=p.sprite,O=p.width>>5,$=e[0]>>5,C=p.x-(O<<4),T=C&127,S=32-T,M=p.y1-p.y0,F=(p.y+p.y0)*$+(C>>5),L,H=0;H<M;H++){L=0;for(var J=0;J<=O;J++)g[F+J]|=L<<S|(J<O?(L=N[H*O+J])>>>T:0);F+=$}return p.sprite=null,!0}return!1}return f.words=function(g){return arguments.length?(l=g,f):l},f.size=function(g){return arguments.length?(e=[+g[0],+g[1]],f):e},f.font=function(g){return arguments.length?(n=Bo(g),f):n},f.fontStyle=function(g){return arguments.length?(i=Bo(g),f):i},f.fontWeight=function(g){return arguments.length?(s=Bo(g),f):s},f.rotate=function(g){return arguments.length?(a=Bo(g),f):a},f.text=function(g){return arguments.length?(t=Bo(g),f):t},f.spiral=function(g){return arguments.length?(o=v0e[g]||g,f):o},f.fontSize=function(g){return arguments.length?(r=Bo(g),f):r},f.padding=function(g){return arguments.length?(u=Bo(g),f):u},f.random=function(g){return arguments.length?(c=g,f):c},f}function h0e(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(Ah<<5)/s,Sm/s);var a=0,u=0,o=0,l=n.length,c,f,d,h,g;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var p=Math.sin(t.rotate*E_),m=Math.cos(t.rotate*E_),b=c*m,y=c*p,v=d*m,_=d*p;c=Math.max(Math.abs(b+_),Math.abs(b-_))+31>>5<<5,d=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else c=c+31>>5<<5;if(d>o&&(o=d),a+c>=Ah<<5&&(a=0,u+=o,o=0),u+d>=Sm)break;i.translate((a+(c>>1))/s,(u+(d>>1))/s),t.rotate&&i.rotate(t.rotate*E_),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=a,t.yoff=u,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var x=i.getImageData(0,0,(Ah<<5)/s,Sm/s).data,E=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)E[h]=0;if(a=t.xoff,a==null)return;u=t.yoff;var w=0,k=-1;for(g=0;g<d;g++){for(h=0;h<c;h++){var A=f*g+(h>>5),N=x[(u+g)*(Ah<<5)+(a+h)<<2]?1<<31-h%32:0;E[A]|=N,w|=N}w?k=g:(t.y0++,d--,g--,u++)}t.y1=t.y0+k,t.sprite=E.slice(0,(t.y1-t.y0)*f)}}}function g0e(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),a=s&127,u=32-a,o=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<o;f++){c=0;for(var d=0;d<=i;d++)if((c<<u|(d<i?(c=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function p0e(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function m0e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function SL(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function b0e(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function y0e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Bo(e){return typeof e=="function"?e:function(){return e}}var v0e={archimedean:SL,rectangular:b0e};const kL=["x","y","font","fontSize","fontStyle","fontWeight","angle"],_0e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function BS(e){V.call(this,d0e(),e)}BS.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:kL}]};ce(BS,V,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&W("Wordcloud size dimensions must be non-zero.");function n(g){const p=e[g];return We(p)&&t.modified(p.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||_0e.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,a=e.as||kL;let u=e.fontSize||14,o;if(We(u)?o=e.fontSizeRange:u=Jn(u),o){const g=u,p=ft("sqrt")().domain(ks(i,g)).range(o);u=m=>p(g(m))}i.forEach(g=>{g[a[0]]=NaN,g[a[1]]=NaN,g[a[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(pi).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let g=0,p,m;g<h;++g)p=l[g],m=p.datum,m[a[0]]=p.x+f,m[a[1]]=p.y+d,m[a[2]]=p.font,m[a[3]]=p.size,m[a[4]]=p.style,m[a[5]]=p.weight,m[a[6]]=p.rotate;return t.reflow(r).modifies(a)}});const x0e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:BS},Symbol.toStringTag,{value:"Module"})),w0e=e=>new Uint8Array(e),E0e=e=>new Uint16Array(e),zh=e=>new Uint32Array(e);function S0e(){let e=8,t=[],n=zh(0),r=Bp(0,e),i=Bp(0,e);return{data:()=>t,seen:()=>n=k0e(n,t.length),add(s){for(let a=0,u=t.length,o=s.length,l;a<o;++a)l=s[a],l._index=u++,t.push(l)},remove(s,a){const u=t.length,o=Array(u-s),l=t;let c,f,d;for(f=0;!a[f]&&f<u;++f)o[f]=t[f],l[f]=f;for(d=f;f<u;++f)c=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],o[d]=c,c._index=d++),r[f]=0;return t=o,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){r[s]|=a},clear(s,a){r[s]&=~a},resize(s,a){const u=r.length;(s>u||a>e)&&(e=Math.max(a,e),r=Bp(s,e,r),i=Bp(s,e))}}}function k0e(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Bp(e,t,n){const r=(t<257?w0e:t<65537?E0e:zh)(e);return n&&r.set(n),r}function d9(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const a=this,u=a.bisect(a.range,i.value),o=i.index,l=u[0],c=u[1],f=o.length;let d;for(d=0;d<l;++d)s[o[d]]|=r;for(d=c;d<f;++d)s[o[d]]|=r;return a}}}function h9(){let e=zh(0),t=[],n=0;function r(u,o,l){if(!o.length)return[];const c=n,f=o.length,d=zh(f);let h=Array(f),g,p,m;for(m=0;m<f;++m)h[m]=u(o[m]),d[m]=m;if(h=O0e(h,d),c)g=t,p=e,t=Array(c+f),e=zh(c+f),A0e(l,g,p,c,h,d,f,t,e);else{if(l>0)for(m=0;m<f;++m)d[m]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(u,o){const l=n;let c,f,d;for(f=0;!o[e[f]]&&f<l;++f);for(d=f;f<l;++f)o[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-u}function s(u){for(let o=0,l=n;o<l;++o)e[o]=u[e[o]]}function a(u,o){let l;return o?l=o.length:(o=t,l=n),[HK(o,u[0],0,l),e1(o,u[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:s,index:()=>e,size:()=>n}}function O0e(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),WK(e,t)}function A0e(e,t,n,r,i,s,a,u,o){let l=0,c=0,f;for(f=0;l<r&&c<a;++f)t[l]<i[c]?(u[f]=t[l],o[f]=n[l++]):(u[f]=i[c],o[f]=s[c++]+e);for(;l<r;++l,++f)u[f]=t[l],o[f]=n[l];for(;c<a;++c,++f)u[f]=i[c],o[f]=s[c]+e}function US(e){V.call(this,S0e(),e),this._indices=null,this._dims=null}US.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ce(US,V,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],a=r.length;let u=0,o,l;for(;u<a;++u)o=n[u].fname,l=i[o]||(i[o]=h9()),s.push(d9(l,u,r[u]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,a=this._dims,u=this.value,o=u.curr(),l=u.prev(),c=u.all(),f=n.rem=n.add,d=n.mod,h=i.length,g={};let p,m,b,y,v,_,x,E,w;if(l.set(o),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&u.add(t.add),t.mod.length)for(_={},y=t.mod,x=0,E=y.length;x<E;++x)_[y[x]._index]=1;for(x=0;x<h;++x)w=r[x],(!a[x]||e.modified("fields",x)||t.modified(w.fields))&&(b=w.fname,(p=g[b])||(s[b]=m=h9(),g[b]=p=m.insert(w,t.source,0)),a[x]=d9(m,x,i[x]).onAdd(p,o));for(x=0,E=u.data().length;x<E;++x)v[x]||(l[x]!==o[x]?f.push(x):_[x]&&o[x]!==c&&d.push(x));return u.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,a=this._indices,u=e.fields,o={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,g,p;i.resize(c,f),i.add(r);const m=i.curr(),b=i.prev(),y=i.all();for(h=0;h<f;++h)g=u[h].fname,p=o[g]||(o[g]=a[g].insert(u[h],r,d)),s[h].onAdd(p,m);for(;d<c;++d)b[d]=y,m[d]!==y&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),a=e.mod;let u,o,l;for(u=0,o=a.length;u<o;++u)l=a[u]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),a=i.prev(),u=i.all(),o={},l=n.rem,c=t.rem;let f,d,h,g;for(f=0,d=c.length;f<d;++f)h=c[f]._index,o[h]=1,a[h]=g=s[h],s[h]=u,g!==u&&l.push(h);for(h in r)r[h].remove(d,o);return this.reindex(t,d,o),o},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const a in r)r[a].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,a=r.length;let u=0,o,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(o=l,++u);if(u===1)u=r[o].one,this.incrementOne(r[o],i[o],n.add,n.rem);else for(l=0,u=0;l<a;++l)e.modified("query",l)&&(u|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return u},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),a=i.curr(),u=i.prev(),o=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],g=l[1],p=e.one;let m,b,y;if(f<h)for(m=f,b=Math.min(h,d);m<b;++m)y=o[m],s[y]!==n&&(u[y]=a[y],s[y]=n,r.push(y)),a[y]^=p;else if(f>h)for(m=h,b=Math.min(f,g);m<b;++m)y=o[m],s[y]!==n&&(u[y]=a[y],s[y]=n,r.push(y)),a[y]^=p;if(d>g)for(m=Math.max(f,g),b=d;m<b;++m)y=o[m],s[y]!==n&&(u[y]=a[y],s[y]=n,r.push(y)),a[y]^=p;else if(d<g)for(m=Math.max(h,d),b=g;m<b;++m)y=o[m],s[y]!==n&&(u[y]=a[y],s[y]=n,r.push(y)),a[y]^=p;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),a=e.index(),u=e.bisect(e.range),o=e.bisect(t),l=o[0],c=o[1],f=u[0],d=u[1],h=e.one;let g,p,m;if(l<f)for(g=l,p=Math.min(f,c);g<p;++g)m=a[g],s[m]^=h,n.push(m);else if(l>f)for(g=f,p=Math.min(l,d);g<p;++g)m=a[g],s[m]^=h,r.push(m);if(c>d)for(g=Math.max(l,d),p=c;g<p;++g)m=a[g],s[m]^=h,n.push(m);else if(c<d)for(g=Math.max(f,c),p=d;g<p;++g)m=a[g],s[m]^=h,r.push(m);e.range=t.slice()}});function qS(e){V.call(this,null,e)}qS.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ce(qS,V,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),a=r.data(),u=r.curr(),o=r.prev(),l=c=>u[c]&n?null:a[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=u[c]&n;return!f&&f^o[c]&n?a[c]:null}),s.filter(s.REM,c=>{const f=u[c]&n;return f&&!(f^(f^o[c]&n))?a[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(u[c]&n)===i?a[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const C0e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:US,resolvefilter:qS},Symbol.toStringTag,{value:"Module"})),T0e="RawCode",Ol="Literal",M0e="Property",D0e="Identifier",N0e="ArrayExpression",$0e="BinaryExpression",OL="CallExpression",F0e="ConditionalExpression",R0e="LogicalExpression",I0e="MemberExpression",P0e="ObjectExpression",j0e="UnaryExpression";function Qi(e){this.type=e}Qi.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=L0e(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function L0e(e){switch(e.type){case N0e:return e.elements;case $0e:case R0e:return[e.left,e.right];case OL:return[e.callee].concat(e.arguments);case F0e:return[e.test,e.consequent,e.alternate];case I0e:return[e.object,e.property];case P0e:return e.properties;case M0e:return[e.key,e.value];case j0e:return[e.argument];case D0e:case Ol:case T0e:default:return[]}}var zs,we,G,Xn,bt,Hy=1,xg=2,Al=3,lo=4,Vy=5,Jl=6,_r=7,wg=8,z0e=9;zs={};zs[Hy]="Boolean";zs[xg]="<end>";zs[Al]="Identifier";zs[lo]="Keyword";zs[Vy]="Null";zs[Jl]="Numeric";zs[_r]="Punctuator";zs[wg]="String";zs[z0e]="RegularExpression";var B0e="ArrayExpression",U0e="BinaryExpression",q0e="CallExpression",H0e="ConditionalExpression",AL="Identifier",V0e="Literal",G0e="LogicalExpression",W0e="MemberExpression",X0e="ObjectExpression",Y0e="Property",Z0e="UnaryExpression",xn="Unexpected token %0",Q0e="Unexpected number",J0e="Unexpected string",K0e="Unexpected identifier",ege="Unexpected reserved word",tge="Unexpected end of input",Qw="Invalid regular expression",S_="Invalid regular expression: missing /",CL="Octal literals are not allowed in strict mode.",nge="Duplicate data property in object literal not allowed in strict mode",Nn="ILLEGAL",E0="Disabled.",rge=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ige=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Gy(e,t){if(!e)throw new Error("ASSERT: "+t)}function ia(e){return e>=48&&e<=57}function HS(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Bh(e){return"01234567".indexOf(e)>=0}function sge(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function S0(e){return e===10||e===13||e===8232||e===8233}function Eg(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&rge.test(String.fromCharCode(e))}function ub(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ige.test(String.fromCharCode(e))}const age={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function TL(){for(;G<Xn;){const e=we.charCodeAt(G);if(sge(e)||S0(e))++G;else break}}function Jw(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)G<Xn&&HS(we[G])?(r=we[G++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):lt({},xn,Nn);return String.fromCharCode(i)}function uge(){var e,t,n,r;for(e=we[G],t=0,e==="}"&&lt({},xn,Nn);G<Xn&&(e=we[G++],!!HS(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&lt({},xn,Nn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function ML(){var e,t;for(e=we.charCodeAt(G++),t=String.fromCharCode(e),e===92&&(we.charCodeAt(G)!==117&&lt({},xn,Nn),++G,e=Jw("u"),(!e||e==="\\"||!Eg(e.charCodeAt(0)))&&lt({},xn,Nn),t=e);G<Xn&&(e=we.charCodeAt(G),!!ub(e));)++G,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),we.charCodeAt(G)!==117&&lt({},xn,Nn),++G,e=Jw("u"),(!e||e==="\\"||!ub(e.charCodeAt(0)))&&lt({},xn,Nn),t+=e);return t}function oge(){var e,t;for(e=G++;G<Xn;){if(t=we.charCodeAt(G),t===92)return G=e,ML();if(ub(t))++G;else break}return we.slice(e,G)}function lge(){var e,t,n;return e=G,t=we.charCodeAt(G)===92?ML():oge(),t.length===1?n=Al:age.hasOwnProperty(t)?n=lo:t==="null"?n=Vy:t==="true"||t==="false"?n=Hy:n=Al,{type:n,value:t,start:e,end:G}}function k_(){var e=G,t=we.charCodeAt(G),n,r=we[G],i,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++G,{type:_r,value:String.fromCharCode(t),start:e,end:G};default:if(n=we.charCodeAt(G+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return G+=2,{type:_r,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:G};case 33:case 61:return G+=2,we.charCodeAt(G)===61&&++G,{type:_r,value:we.slice(e,G),start:e,end:G}}}if(a=we.substr(G,4),a===">>>=")return G+=4,{type:_r,value:a,start:e,end:G};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return G+=3,{type:_r,value:s,start:e,end:G};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return G+=2,{type:_r,value:i,start:e,end:G};if(i==="//"&&lt({},xn,Nn),"<>=!+-*%&|^/".indexOf(r)>=0)return++G,{type:_r,value:r,start:e,end:G};lt({},xn,Nn)}function cge(e){let t="";for(;G<Xn&&HS(we[G]);)t+=we[G++];return t.length===0&&lt({},xn,Nn),Eg(we.charCodeAt(G))&&lt({},xn,Nn),{type:Jl,value:parseInt("0x"+t,16),start:e,end:G}}function fge(e){let t="0"+we[G++];for(;G<Xn&&Bh(we[G]);)t+=we[G++];return(Eg(we.charCodeAt(G))||ia(we.charCodeAt(G)))&&lt({},xn,Nn),{type:Jl,value:parseInt(t,8),octal:!0,start:e,end:G}}function g9(){var e,t,n;if(n=we[G],Gy(ia(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=G,e="",n!=="."){if(e=we[G++],n=we[G],e==="0"){if(n==="x"||n==="X")return++G,cge(t);if(Bh(n))return fge(t);n&&ia(n.charCodeAt(0))&&lt({},xn,Nn)}for(;ia(we.charCodeAt(G));)e+=we[G++];n=we[G]}if(n==="."){for(e+=we[G++];ia(we.charCodeAt(G));)e+=we[G++];n=we[G]}if(n==="e"||n==="E")if(e+=we[G++],n=we[G],(n==="+"||n==="-")&&(e+=we[G++]),ia(we.charCodeAt(G)))for(;ia(we.charCodeAt(G));)e+=we[G++];else lt({},xn,Nn);return Eg(we.charCodeAt(G))&&lt({},xn,Nn),{type:Jl,value:parseFloat(e),start:t,end:G}}function dge(){var e="",t,n,r,i,s=!1;for(t=we[G],Gy(t==="'"||t==='"',"String literal must starts with a quote"),n=G,++G;G<Xn;)if(r=we[G++],r===t){t="";break}else if(r==="\\")if(r=we[G++],!r||!S0(r.charCodeAt(0)))switch(r){case"u":case"x":we[G]==="{"?(++G,e+=uge()):e+=Jw(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Bh(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),G<Xn&&Bh(we[G])&&(s=!0,i=i*8+"01234567".indexOf(we[G++]),"0123".indexOf(r)>=0&&G<Xn&&Bh(we[G])&&(i=i*8+"01234567".indexOf(we[G++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&we[G]===`
`&&++G;else{if(S0(r.charCodeAt(0)))break;e+=r}return t!==""&&lt({},xn,Nn),{type:wg,value:e,octal:s,start:n,end:G}}function hge(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";lt({},Qw)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{lt({},Qw)}try{return new RegExp(e,t)}catch{return null}}function gge(){var e,t,n,r,i;for(e=we[G],Gy(e==="/","Regular expression literal must start with a slash"),t=we[G++],n=!1,r=!1;G<Xn;)if(e=we[G++],t+=e,e==="\\")e=we[G++],S0(e.charCodeAt(0))&&lt({},S_),t+=e;else if(S0(e.charCodeAt(0)))lt({},S_);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||lt({},S_),i=t.substr(1,t.length-2),{value:i,literal:t}}function pge(){var e,t,n;for(t="",n="";G<Xn&&(e=we[G],!!ub(e.charCodeAt(0)));)++G,e==="\\"&&G<Xn?lt({},xn,Nn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&lt({},Qw,n),{value:n,literal:t}}function mge(){var e,t,n,r;return bt=null,TL(),e=G,t=gge(),n=pge(),r=hge(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:G}}function bge(e){return e.type===Al||e.type===lo||e.type===Hy||e.type===Vy}function DL(){if(TL(),G>=Xn)return{type:xg,start:G,end:G};const e=we.charCodeAt(G);return Eg(e)?lge():e===40||e===41||e===59?k_():e===39||e===34?dge():e===46?ia(we.charCodeAt(G+1))?g9():k_():ia(e)?g9():k_()}function kr(){const e=bt;return G=e.end,bt=DL(),G=e.end,e}function NL(){const e=G;bt=DL(),G=e}function yge(e){const t=new Qi(B0e);return t.elements=e,t}function p9(e,t,n){const r=new Qi(e==="||"||e==="&&"?G0e:U0e);return r.operator=e,r.left=t,r.right=n,r}function vge(e,t){const n=new Qi(q0e);return n.callee=e,n.arguments=t,n}function _ge(e,t,n){const r=new Qi(H0e);return r.test=e,r.consequent=t,r.alternate=n,r}function VS(e){const t=new Qi(AL);return t.name=e,t}function Ch(e){const t=new Qi(V0e);return t.value=e.value,t.raw=we.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function m9(e,t,n){const r=new Qi(W0e);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function xge(e){const t=new Qi(X0e);return t.properties=e,t}function b9(e,t,n){const r=new Qi(Y0e);return r.key=t,r.value=n,r.kind=e,r}function wge(e,t){const n=new Qi(Z0e);return n.operator=e,n.argument=t,n.prefix=!0,n}function lt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,a)=>(Gy(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=G,n.description=i,n}function Wy(e){e.type===xg&&lt(e,tge),e.type===Jl&&lt(e,Q0e),e.type===wg&&lt(e,J0e),e.type===Al&&lt(e,K0e),e.type===lo&&lt(e,ege),lt(e,xn,e.value)}function Yn(e){const t=kr();(t.type!==_r||t.value!==e)&&Wy(t)}function zt(e){return bt.type===_r&&bt.value===e}function O_(e){return bt.type===lo&&bt.value===e}function Ege(){const e=[];for(G=bt.start,Yn("[");!zt("]");)zt(",")?(kr(),e.push(null)):(e.push(Cl()),zt("]")||Yn(","));return kr(),yge(e)}function y9(){G=bt.start;const e=kr();return e.type===wg||e.type===Jl?(e.octal&&lt(e,CL),Ch(e)):VS(e.value)}function Sge(){var e,t,n,r;if(G=bt.start,e=bt,e.type===Al)return n=y9(),Yn(":"),r=Cl(),b9("init",n,r);if(e.type===xg||e.type===_r)Wy(e);else return t=y9(),Yn(":"),r=Cl(),b9("init",t,r)}function kge(){var e=[],t,n,r,i={},s=String;for(G=bt.start,Yn("{");!zt("}");)t=Sge(),t.key.type===AL?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?lt({},nge):i[r]=!0,e.push(t),zt("}")||Yn(",");return Yn("}"),xge(e)}function Oge(){Yn("(");const e=GS();return Yn(")"),e}const Age={if:1};function Cge(){var e,t,n;if(zt("("))return Oge();if(zt("["))return Ege();if(zt("{"))return kge();if(e=bt.type,G=bt.start,e===Al||Age[bt.value])n=VS(kr().value);else if(e===wg||e===Jl)bt.octal&&lt(bt,CL),n=Ch(kr());else{if(e===lo)throw new Error(E0);e===Hy?(t=kr(),t.value=t.value==="true",n=Ch(t)):e===Vy?(t=kr(),t.value=null,n=Ch(t)):zt("/")||zt("/=")?(n=Ch(mge()),NL()):Wy(kr())}return n}function Tge(){const e=[];if(Yn("("),!zt(")"))for(;G<Xn&&(e.push(Cl()),!zt(")"));)Yn(",");return Yn(")"),e}function Mge(){G=bt.start;const e=kr();return bge(e)||Wy(e),VS(e.value)}function Dge(){return Yn("."),Mge()}function Nge(){Yn("[");const e=GS();return Yn("]"),e}function $ge(){var e,t,n;for(e=Cge();;)if(zt("."))n=Dge(),e=m9(".",e,n);else if(zt("("))t=Tge(),e=vge(e,t);else if(zt("["))n=Nge(),e=m9("[",e,n);else break;return e}function v9(){const e=$ge();if(bt.type===_r&&(zt("++")||zt("--")))throw new Error(E0);return e}function km(){var e,t;if(bt.type!==_r&&bt.type!==lo)t=v9();else{if(zt("++")||zt("--"))throw new Error(E0);if(zt("+")||zt("-")||zt("~")||zt("!"))e=kr(),t=km(),t=wge(e.value,t);else{if(O_("delete")||O_("void")||O_("typeof"))throw new Error(E0);t=v9()}}return t}function _9(e){let t=0;if(e.type!==_r&&e.type!==lo)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Fge(){var e,t,n,r,i,s,a,u,o,l;if(e=bt,o=km(),r=bt,i=_9(r),i===0)return o;for(r.prec=i,kr(),t=[e,bt],a=km(),s=[o,r,a];(i=_9(bt))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),u=s.pop().value,o=s.pop(),t.pop(),n=p9(u,o,a),s.push(n);r=kr(),r.prec=i,s.push(r),t.push(bt),n=km(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=p9(s[l-1].value,s[l-2],n),l-=2;return n}function Cl(){var e,t,n;return e=Fge(),zt("?")&&(kr(),t=Cl(),Yn(":"),n=Cl(),e=_ge(e,t,n)),e}function GS(){const e=Cl();if(zt(","))throw new Error(E0);return e}function WS(e){we=e,G=0,Xn=we.length,bt=null,NL();const t=GS();if(bt.type!==xg)throw new Error("Unexpect token after expression.");return t}var $L={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function FL(e){function t(a,u,o,l){let c=e(u[0]);return o&&(c=o+"("+c+")",o.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(l<0?"":l===0?"()":"("+u.slice(1).map(e).join(",")+")")}function n(a,u,o){return l=>t(a,l,u,o)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&W("Missing arguments to clamp function."),a.length>3&&W("Too many arguments to clamp function.");const u=a.map(e);return"Math.max("+u[1]+", Math.min("+u[2]+","+u[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&W("Missing arguments to if function."),a.length>3&&W("Too many arguments to if function.");const u=a.map(e);return"("+u[0]+"?"+u[1]+":"+u[2]+")"}}}function Rge(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function RL(e){e=e||{};const t=e.allowed?Vi(e.allowed):{},n=e.forbidden?Vi(e.forbidden):{},r=e.constants||$L,i=(e.functions||FL)(f),s=e.globalvar,a=e.fieldvar,u=We(s)?s:g=>`${s}["${g}"]`;let o={},l={},c=0;function f(g){if(me(g))return g;const p=d[g.type];return p==null&&W("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return c>0?p:Se(n,p)?W("Illegal identifier: "+p):Se(r,p)?r[p]:Se(t,p)?p:(o[p]=1,u(p))},MemberExpression:g=>{const p=!g.computed,m=f(g.object);p&&(c+=1);const b=f(g.property);return m===a&&(l[Rge(b)]=1),p&&(c-=1),m+(p?"."+b:"["+b+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&W("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,b=Se(i,p)&&i[p];return b||W("Unrecognized function: "+p),We(b)?b(m):b+"("+m.map(f).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(f).join(",")+"]",BinaryExpression:g=>"("+f(g.left)+" "+g.operator+" "+f(g.right)+")",UnaryExpression:g=>"("+g.operator+f(g.argument)+")",ConditionalExpression:g=>"("+f(g.test)+"?"+f(g.consequent)+":"+f(g.alternate)+")",LogicalExpression:g=>"("+f(g.left)+g.operator+f(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(f).join(",")+"}",Property:g=>{c+=1;const p=f(g.key);return c-=1,p+":"+f(g.value)}};function h(g){const p={code:f(g),globals:Object.keys(o),fields:Object.keys(l)};return o={},l={},p}return h.functions=i,h.constants=r,h}function x9(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ige(e){let t=e,n=e,r=e;e.length!==2&&(t=(u,o)=>e(u)-o,n=x9,r=(u,o)=>x9(e(u),o));function i(u,o,l=0,c=u.length){if(l<c){if(n(o,o)!==0)return c;do{const f=l+c>>>1;r(u[f],o)<0?l=f+1:c=f}while(l<c)}return l}function s(u,o,l=0,c=u.length){if(l<c){if(n(o,o)!==0)return c;do{const f=l+c>>>1;r(u[f],o)<=0?l=f+1:c=f}while(l<c)}return l}function a(u,o,l=0,c=u.length){const f=i(u,o,l,c-1);return f>l&&t(u[f-1],o)>-t(u[f],o)?f-1:f}return{left:i,center:a,right:s}}function Pge(e,...t){e=new t1(e),t=t.map(jge);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function jge(e){return e instanceof t1?e:new t1(e)}function Lge(...e){const t=new t1;for(const n of e)for(const r of n)t.add(r);return t}const XS="intersect",w9="union",zge="vlMulti",Bge="vlPoint",E9="or",Uge="and",ls="_vgsid_",k0=Fr(ls),qge="E",Hge="R",Vge="R-E",Gge="R-LE",Wge="R-RE",ob="index:unit";function S9(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,a,u;s<i;++s)if(u=n[s],u.getter=Fr.getter||Fr(u.field),a=u.getter(e),Au(a)&&(a=qn(a)),Au(r[s])&&(r[s]=qn(r[s])),Au(r[s][0])&&(r[s]=r[s].map(qn)),u.type===qge){if(X(r[s])?r[s].indexOf(a)<0:a!==r[s])return!1}else if(u.type===Hge){if(!Wc(a,r[s]))return!1}else if(u.type===Wge){if(!Wc(a,r[s],!0,!1))return!1}else if(u.type===Vge){if(!Wc(a,r[s],!1,!1))return!1}else if(u.type===Gge&&!Wc(a,r[s],!1,!0))return!1;return!0}function Xge(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[ob]&&r[ob].value:void 0,a=n===XS,u=i.length,o=0,l,c,f,d,h;o<u;++o)if(l=i[o],s&&a){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=S9(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=S9(t,l),a^h)return h;return u&&a}const IL=Ige(k0),Yge=IL.left,Zge=IL.right;function Qge(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[ob]&&r[ob].value:void 0,a=n===XS,u=k0(t),o=Yge(i,u);if(o===i.length||k0(i[o])!==u)return!1;if(s&&a){if(s.size===1)return!0;if(Zge(i,u)-o<s.size)return!1}return!0}function Jge(e,t){return e.map(n=>Ge(t.fields?{values:t.fields.map(r=>(r.getter||(r.getter=Fr(r.field)))(n.datum))}:{[ls]:k0(n.datum)},t))}function Kge(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],a={},u={},o={},l,c,f,d,h,g,p,m,b,y,v=s.length,_=0,x,E;_<v;++_)if(l=s[_],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,E=c.length;x<E;++x)h=c[x],p=a[h.field]||(a[h.field]={}),m=p[d]||(p[d]=[]),o[h.field]=b=h.type.charAt(0),y=A_["".concat(b,"_union")],p[d]=y(m,pe(f[x]));n&&(m=u[d]||(u[d]=[]),m.push(pe(f).reduce((w,k,A)=>(w[c[A].field]=k,w),{})))}else h=ls,g=k0(l),p=a[h]||(a[h]={}),m=p[d]||(p[d]=[]),m.push(g),n&&(m=u[d]||(u[d]=[]),m.push({[ls]:g}));if(t=t||w9,a[ls]?a[ls]=A_["".concat(ls,"_").concat(t)](...Object.values(a[ls])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(k=>a[w][k]).reduce((k,A)=>k===void 0?A:A_["".concat(o[w],"_").concat(t)](k,A))}),s=Object.keys(u),n&&s.length){const w=r?Bge:zge;a[w]=t===w9?{[E9]:s.reduce((k,A)=>(k.push(...u[A]),k),[])}:{[Uge]:s.map(k=>({[E9]:u[k]}))}}return a}var A_={["".concat(ls,"_union")]:Lge,["".concat(ls,"_intersect")]:Pge,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=qn(t[0]),r=qn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=qn(t[0]),r=qn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const epe=":",tpe="@";function YS(e,t,n,r){t[0].type!==Ol&&W("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&rt(t).value,a="unit",u=tpe+a,o=epe+i;s===XS&&!Se(r,u)&&(r[u]=n.getData(i).indataRef(n,a)),Se(r,o)||(r[o]=n.getData(i).tuplesRef())}function PL(e){const t=this.context.data[e];return t?t.values.value:[]}function npe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function rpe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(hi).insert(t)),1}function ipe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Sg=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},spe=Sg("format"),jL=Sg("timeFormat"),ape=Sg("utcFormat"),upe=Sg("timeParse"),ope=Sg("utcParse"),Up=new Date(2e3,0,1);function Xy(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Up.setYear(2e3),Up.setMonth(e),Up.setDate(t),jL.call(this,Up,n))}function lpe(e){return Xy.call(this,e,1,"%B")}function cpe(e){return Xy.call(this,e,1,"%b")}function fpe(e){return Xy.call(this,0,2+e,"%A")}function dpe(e){return Xy.call(this,0,2+e,"%a")}const hpe=":",gpe="@",Kw="%",LL="$";function ZS(e,t,n,r){t[0].type!==Ol&&W("First argument to data functions must be a string literal.");const i=t[0].value,s=hpe+i;if(!Se(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function ppe(e,t,n,r){t[0].type!==Ol&&W("First argument to indata must be a string literal."),t[1].type!==Ol&&W("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,a=gpe+s;Se(a,r)||(r[a]=n.getData(i).indataRef(n,s))}function Cr(e,t,n,r){if(t[0].type===Ol)k9(n,r,t[0].value);else for(e in n.scales)k9(n,r,e)}function k9(e,t,n){const r=Kw+n;if(!Se(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Da(e,t){let n;return We(e)?e:me(e)?(n=t.scales[e])&&n.value:void 0}function mpe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Cr,n._range=Cr,n._scale=Cr;const r=i=>"_["+(i.type===Ol?fe(Kw+i.value):fe(Kw)+"+"+e(i))+"]";return{_bandwidth:i=>"this.__bandwidth(".concat(r(i[0]),")"),_range:i=>"".concat(r(i[0]),".range()"),_scale:i=>"".concat(r(i[0]),"(").concat(e(i[1]),")")}}function QS(e,t){return function(n,r,i){if(n){const s=Da(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const bpe=QS("area",Ple),ype=QS("bounds",Ble),vpe=QS("centroid",Wle);function _pe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function JS(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function xpe(){return JS(this.context.dataflow,"warn",arguments)}function wpe(){return JS(this.context.dataflow,"info",arguments)}function Epe(){return JS(this.context.dataflow,"debug",arguments)}function C_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function e3(e){const t=Bu(e),n=C_(t.r),r=C_(t.g),i=C_(t.b);return .2126*n+.7152*r+.0722*i}function Spe(e,t){const n=e3(e),r=e3(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function kpe(){const e=[].slice.call(arguments);return e.unshift({}),Ge(...e)}function zL(e,t){return e===t||e!==e&&t!==t?!0:X(e)?X(t)&&e.length===t.length?Ope(e,t):!1:be(e)&&be(t)?BL(e,t):!1}function Ope(e,t){for(let n=0,r=e.length;n<r;++n)if(!zL(e[n],t[n]))return!1;return!0}function BL(e,t){for(const n in e)if(!zL(e[n],t[n]))return!1;return!0}function O9(e){return t=>BL(e,t)}function Ape(e,t,n,r,i,s){const a=this.context.dataflow,u=this.context.data[e],o=u.input,l=a.stamp();let c=u.changes,f,d;if(a._trigger===!1||!(o.value.length||t||r))return 0;if((!c||c.stamp<l)&&(u.changes=c=a.changeset(),c.stamp=l,a.runAfter(()=>{u.modified=!0,a.pulse(o,c).run()},!0,1)),n&&(f=n===!0?hi:X(n)||ry(n)?n:O9(n),c.remove(f)),t&&c.insert(t),r&&(f=O9(r),o.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Cpe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function Tpe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const A9={};function Mpe(e,t){const n=A9[t]||(A9[t]=Fr(t));return X(e)?e.map(n):n(e)}function KS(e){return X(e)||ArrayBuffer.isView(e)?e:null}function ek(e){return KS(e)||(me(e)?e:null)}function Dpe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return KS(e).join(...n)}function Npe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ek(e).indexOf(...n)}function $pe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ek(e).lastIndexOf(...n)}function Fpe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ek(e).slice(...n)}function Rpe(e,t,n){return We(n)&&W("Function argument passed to replace."),String(e).replace(t,n)}function Ipe(e){return KS(e).slice().reverse()}function Ppe(e,t,n){return l4(e||0,t||0,n||0)}function jpe(e,t){const n=Da(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Lpe(e,t){const n=Da(e,(t||this).context);return n?n.copy():void 0}function zpe(e,t){const n=Da(e,(t||this).context);return n?n.domain():[]}function Bpe(e,t,n){const r=Da(e,(n||this).context);return r?X(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Upe(e,t){const n=Da(e,(t||this).context);return n&&n.range?n.range():[]}function qpe(e,t,n){const r=Da(e,(n||this).context);return r?r(t):void 0}function Hpe(e,t,n,r,i){e=Da(e,(i||this).context);const s=BI(t,n);let a=e.domain(),u=a[0],o=rt(a),l=Qn;return o-u?l=TI(e,u,o):e=(e.interpolator?ft("sequential")().interpolator(e.interpolator()):ft("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,o=1]),e.ticks&&(a=e.ticks(+r||15),u!==a[0]&&a.unshift(u),o!==rt(a)&&a.push(o)),a.forEach(c=>s.stop(l(c),e(c))),s}function Vpe(e,t,n){const r=Da(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Gpe(e){let t=null;return function(n){return n?p0(n,t=t||Tf(e)):e}}const UL=e=>e.data;function qL(e,t){const n=PL.call(t,e);return n.root&&n.root.lookup||{}}function Wpe(e,t,n){const r=qL(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(UL):void 0}function Xpe(e,t){const n=qL(e,this)[t];return n?n.ancestors().map(UL):void 0}const HL=()=>typeof window<"u"&&window||null;function Ype(){const e=HL();return e?e.screen:{}}function Zpe(){const e=HL();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Qpe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function VL(e,t,n){if(!e)return[];const[r,i]=e,s=new an().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return DP(a,s,Jpe(t))}function Jpe(e){let t=null;if(e){const n=pe(e.marktype),r=pe(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Kpe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;const i=e[e.length-1];return i===void 0||Math.sqrt((i[0]-t)**2+(i[1]-n)**2)>r?(e.push([t,n]),[...e]):e}function eme(e){return(e??[]).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?"M ".concat(i,",").concat(s," "):r===e.length-1?" Z":"L ".concat(i,",").concat(s," ")},"")}function tme(e,t,n){const{x:r,y:i,mark:s}=n,a=new an().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[o,l]of t)o<a.x1&&(a.x1=o),o>a.x2&&(a.x2=o),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),VL([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter(o=>nme(o.x,o.y,t))}function nme(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[a,u]=n[s],[o,l]=n[i];l>t!=u>t&&e<(a-o)*(t-l)/(u-l)+o&&r++}return r&1}const O0={random(){return pi()},cumulativeNormal:oy,cumulativeLogNormal:cE,cumulativeUniform:gE,densityNormal:sE,densityLogNormal:lE,densityUniform:hE,quantileNormal:ly,quantileLogNormal:fE,quantileUniform:pE,sampleNormal:uy,sampleLogNormal:oE,sampleUniform:dE,isArray:X,isBoolean:Vl,isDate:Au,isDefined(e){return e!==void 0},isNumber:Ot,isObject:be,isRegExp:c$,isString:me,isTuple:ry,isValid(e){return e!=null&&e===e},toBoolean:j6,toDate(e){return L6(e)},toNumber:qn,toString:z6,indexof:Npe,join:Dpe,lastindexof:$pe,replace:Rpe,reverse:Ipe,slice:Fpe,flush:o$,lerp:f$,merge:kpe,pad:g$,peek:rt,pluck:Mpe,span:Z0,inrange:Wc,truncate:p$,rgb:Bu,lab:p1,hcl:m1,hsl:h1,luminance:e3,contrast:Spe,sequence:Qr,format:spe,utcFormat:ape,utcParse:ope,utcOffset:X$,utcSequence:Q$,timeFormat:jL,timeParse:upe,timeOffset:W$,timeSequence:Z$,timeUnitSpecifier:I$,monthFormat:lpe,monthAbbrevFormat:cpe,dayFormat:fpe,dayAbbrevFormat:dpe,quarter:i$,utcquarter:s$,week:j$,utcweek:B$,dayofyear:P$,utcdayofyear:z$,warn:xpe,info:wpe,debug:Epe,extent(e){return ks(e)},inScope:_pe,intersect:VL,clampRange:a$,pinchDistance:Cpe,pinchAngle:Tpe,screen:Ype,containerSize:Qpe,windowSize:Zpe,bandspace:Ppe,setdata:rpe,pathShape:Gpe,panLinear:e$,panLog:t$,panPow:n$,panSymlog:r$,zoomLinear:N6,zoomLog:$6,zoomPow:Km,zoomSymlog:F6,encode:ipe,modify:Ape,lassoAppend:Kpe,lassoPath:eme,intersectLasso:tme},rme=["view","item","group","xy","x","y"],ime="event.vega.",GL="this.",tk={},WL={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(fe(LL+e),"]"),functions:sme,constants:$L,visitors:tk},t3=RL(WL);function sme(e){const t=FL(e);rme.forEach(n=>t[n]=ime+n);for(const n in O0)t[n]=GL+n;return Ge(t,mpe(e,O0,tk)),t}function on(e,t,n){return arguments.length===1?O0[e]:(O0[e]=t,n&&(tk[e]=n),t3&&(t3.functions[e]=GL+e),this)}on("bandwidth",jpe,Cr);on("copy",Lpe,Cr);on("domain",zpe,Cr);on("range",Upe,Cr);on("invert",Bpe,Cr);on("scale",qpe,Cr);on("gradient",Hpe,Cr);on("geoArea",bpe,Cr);on("geoBounds",ype,Cr);on("geoCentroid",vpe,Cr);on("geoShape",Vpe,Cr);on("indata",npe,ppe);on("data",PL,ZS);on("treePath",Wpe,ZS);on("treeAncestors",Xpe,ZS);on("vlSelectionTest",Xge,YS);on("vlSelectionIdTest",Qge,YS);on("vlSelectionResolve",Kge,YS);on("vlSelectionTuples",Jge);function Ms(e,t){const n={};let r;try{e=me(e)?e:fe(e)+"",r=WS(e)}catch{W("Expression parse error: "+e)}r.visit(s=>{if(s.type!==OL)return;const a=s.callee.name,u=WL.visitors[a];u&&u(a,s.arguments,t,n)});const i=t3(r);return i.globals.forEach(s=>{const a=LL+s;!Se(n,a)&&t.getSignal(s)&&(n[a]=t.signalRef(s))}),{$expr:Ge({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function ame(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const ume=Vi(["rule"]),C9=Vi(["group","image","rect"]);function ome(e,t){let n="";return ume[t]||(e.x2&&(e.x?(C9[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(C9[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function nk(e){return(e+"").toLowerCase()}function lme(e){return nk(e)==="operator"}function cme(e){return nk(e)==="collect"}function th(e,t,n){n[n.length-1]!==";"&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function fme(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(r,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(r," : ")}var dme={operator:(e,t)=>th(e,["_"],t.code),parameter:(e,t)=>th(e,["datum","_"],t.code),event:(e,t)=>th(e,["event"],t.code),handler:(e,t)=>{const n="var datum=event.item&&event.item.datum;return ".concat(t.code,";");return th(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const a="o["+fe(s)+"]";i+="$=".concat(r[s].code,";if(").concat(a,"!==$)").concat(a,"=$,m=1;")}return i+=ome(r,n),i+="return m;",th(e,["item","_"],i)},codegen:{get(e){const t="[".concat(e.map(fe).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator(e,t){let n;const r=(s,a)=>{const u=t[a];let o,l;return s.path?(o="a".concat(s.path),l="b".concat(s.path)):((n=n||{})["f"+a]=s,o="this.f".concat(a,"(a)"),l="this.f".concat(a,"(b)")),fme(o,l,-u,u)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function hme(e){const t=this;lme(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function gme(e){const t=this;if(e.params){const n=t.get(e.id);n||W("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function pme(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=X(i)?i.map(s=>T9(s,n,t)):T9(i,n,t)}return t}function T9(e,t,n){if(!e||!be(e))return e;for(let r=0,i=M9.length,s;r<i;++r)if(s=M9[r],Se(e,s.key))return s.parse(e,t,n);return e}var M9=[{key:"$ref",parse:mme},{key:"$key",parse:yme},{key:"$expr",parse:bme},{key:"$field",parse:vme},{key:"$encode",parse:xme},{key:"$compare",parse:_me},{key:"$context",parse:wme},{key:"$subflow",parse:Eme},{key:"$tupleid",parse:Sme}];function mme(e,t){return t.get(e.$ref)||W("Operator not defined: "+e.$ref)}function bme(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=Ur(t.parameterExpression(e.$expr),e.$fields,e.$name))}function yme(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=P6(e.$key,e.$flat,t.expr.codegen))}function vme(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Fr(e.$field,e.$name,t.expr.codegen))}function _me(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pe(e.$compare).map(i=>i&&i.$tupleid?Ae:i);return t.fn[n]||(t.fn[n]=R6(r,e.$order,t.expr.codegen))}function xme(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ur(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function wme(e,t){return t}function Eme(e,t){const n=e.$subflow;return function(r,i,s){const a=t.fork().parse(n),u=a.get(n.operators[0].id),o=a.signals.parent;return o&&o.set(s),u.detachSubflow=()=>t.detach(a),u}}function Sme(){return Ae}function kme(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&W("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Ome(e){var t=this,n=be(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,a=void 0;r||W("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(a=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,a)}const Ame={skip:!0};function Cme(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const a=t.signals[s];e.signals(s,a)&&(r[s]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const a=t.data[s];e.data(s,a)&&(i[s]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Tme(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Ame)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(hi).insert(r[s]))}),(e.subcontext||[]).forEach((s,a)=>{const u=t.subcontext[a];u&&u.setState(s)})}function XL(e,t,n,r){return new YL(e,t,n,r)}function YL(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||dme,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function D9(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}YL.prototype=D9.prototype={fork(){const e=new D9(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),cme(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const a=n.data[s]||(n.data[s]={});e.data[s].forEach(u=>a[u]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[nk(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:ame,parseOperator:hme,parseOperatorParameters:gme,parseParameters:pme,parseStream:kme,parseUpdate:Ome,getState:Cme,setState:Tme};function Mme(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),ZL(t,e.description()))}function ZL(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Dme(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const T_="default";function Nme(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:T_,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,s=i?me(i)?i:i.user:T_,a=r.item&&r.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return me(r)||(i=r.item,r=r.user),n3(e,r&&r!==T_?r:i||r),i},{cursor:t})}function n3(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function lb(e,t){var n=e._runtime.data;return Se(n,t)||W("Unrecognized data set: "+t),n[t]}function $me(e,t){return arguments.length<2?lb(this,e).values.value:Yy.call(this,e,Yl().remove(hi).insert(t))}function Yy(e,t){SF(t)||W("Second argument to changes must be a changeset.");const n=lb(this,e);return n.modified=!0,this.pulse(n.input,t)}function Fme(e,t){return Yy.call(this,e,Yl().insert(t))}function Rme(e,t){return Yy.call(this,e,Yl().remove(t))}function QL(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function JL(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Zy(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ime(e){var t=Zy(e),n=QL(e),r=JL(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Pme(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,a,u;return i&&(u=Zy(e),a=t.changedTouches?t.changedTouches[0]:t,s=Iy(a,i),s[0]-=u[0],s[1]-=u[1]),t.dataflow=e,t.item=n,t.vega=jme(e,n,s),t}function jme(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var u=r,o;if(a){for(o=t;o;o=o.mark.group)if(o.mark.name===a){u=o;break}}return u&&u.mark&&u.mark.interactive?u:{}}function s(a){if(!a)return n;me(a)&&(a=i(a));const u=n.slice();for(;a;)u[0]-=a.x||0,u[1]-=a.y||0,a=a.mark&&a.mark.group;return u}return{view:Jn(e),item:Jn(t||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}const N9="view",Lme="timer",zme="window",Bme={trap:!1};function Ume(e){const t=Ge({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{X(r[s])&&(r[s]=Vi(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function KL(e,t,n,r){e._eventListeners.push({type:n,sources:pe(t),handler:r})}function qme(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function qp(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||be(r)&&!r[n]?(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1):!0}function Hme(e,t,n){var r=this,i=new ay(n),s=function(l,c){r.runAsync(null,()=>{e===N9&&qme(r,t)&&l.preventDefault(),i.receive(Pme(r,l,c))})},a;if(e===Lme)qp(r,"timer",t)&&r.timer(s,t);else if(e===N9)qp(r,"view",t)&&r.addEventListener(t,s,Bme);else if(e===zme?qp(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&qp(r,"selector",t)&&(a=document.querySelectorAll(e)),!a)r.warn("Can not resolve event source: "+e);else{for(var u=0,o=a.length;u<o;++u)a[u].addEventListener(t,s);KL(r,a,t,s)}return i}function $9(e){return e.item}function F9(e){return e.item.mark.source}function R9(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Vme(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",$9),F9,R9(e)),this.on(this.events("view","mouseout",$9),F9,R9(t)),this}function Gme(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function Jr(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Wme="vega-bind",Xme="vega-bind-name",Yme="vega-bind-radio";function Zme(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=I6(r.debounce,i.update))),(r.input==null&&r.element?Qme:Kme)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Qme(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),KL(r,t,i,s),e.set=a=>{t.value=a,t.dispatchEvent(Jme(i))}}function Jme(e){return typeof Event<"u"?new Event(e):{type:e}}function Kme(e,t,n,r){const i=r.signal(n.signal),s=Jr("div",{class:Wme}),a=n.input==="radio"?s:s.appendChild(Jr("label"));a.appendChild(Jr("span",{class:Xme},n.name||n.signal)),t.appendChild(s);let u=e1e;switch(n.input){case"checkbox":u=t1e;break;case"select":u=n1e;break;case"radio":u=r1e;break;case"range":u=i1e;break}u(e,a,n,i)}function e1e(e,t,n,r){const i=Jr("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function t1e(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Jr("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=a=>s.checked=!!a||null}function n1e(e,t,n,r){const i=Jr("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,u)=>{const o={value:a};cb(a,r)&&(o.selected=!0),i.appendChild(Jr("option",o,(s[u]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let u=0,o=n.options.length;u<o;++u)if(cb(n.options[u],a)){i.selectedIndex=u;return}}}function r1e(e,t,n,r){const i=Jr("span",{class:Yme}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,u)=>{const o={type:"radio",name:n.signal,value:a};cb(a,r)&&(o.checked=!0);const l=Jr("input",o);l.addEventListener("change",()=>e.update(a));const c=Jr("label",{},(s[u]||a)+"");return c.prepend(l),i.appendChild(c),l}),e.set=a=>{const u=e.elements,o=u.length;for(let l=0;l<o;++l)cb(u[l].value,a)&&(u[l].checked=!0)}}function i1e(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,a=n.step||ju(s,i,100),u=Jr("input",{type:"range",name:n.signal,min:s,max:i,step:a});u.value=r;const o=Jr("span",{},+r);t.appendChild(u),t.appendChild(o);const l=()=>{o.textContent=u.value,e.update(+u.value)};u.addEventListener("input",l),u.addEventListener("change",l),e.elements=[u],e.set=c=>{u.value=c,o.textContent=c}}function cb(e,t){return e===t||e+""==t+""}function ez(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,QL(e),JL(e),Zy(e),i,s).background(e.background())}function rk(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function s1e(e,t,n,r){const i=new r(e.loader(),rk(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Zy(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function a1e(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Py(r);e=n._el=e?M_(n,e,!0):null,Mme(n),s||n.error("Unrecognized renderer type: "+r);const a=s.handler||mg,u=e?s.renderer:s.headless;return n._renderer=u?ez(n,n._renderer,e,u):null,n._handler=s1e(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=M_(n,t,!0):e.appendChild(Jr("form",{class:"vega-bindings"})),n._bind.forEach(o=>{o.param.element&&i!=="container"&&(o.element=M_(n,o.param.element,!!o.param.input))}),n._bind.forEach(o=>{Zme(n,o.element||t,o)})),n}function M_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const nh=e=>+e||0,u1e=e=>({top:e,bottom:e,left:e,right:e});function I9(e){return be(e)?{top:nh(e.top),bottom:nh(e.bottom),left:nh(e.left),right:nh(e.right)}:u1e(nh(e))}async function ik(e,t,n,r){const i=Py(t),s=i&&i.headless;return s||W("Unrecognized renderer type: "+t),await e.runAsync(),ez(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function o1e(e,t){e!==wu.Canvas&&e!==wu.SVG&&e!==wu.PNG&&W("Unrecognized image type: "+e);const n=await ik(this,e,t);return e===wu.SVG?l1e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function l1e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function c1e(e,t){return(await ik(this,wu.Canvas,e,t)).canvas()}async function f1e(e){return(await ik(this,wu.SVG,e)).svg()}function d1e(e,t,n){return XL(e,Ef,O0,n).parse(t)}function h1e(e){var t=this._runtime.scales;return Se(t,e)||W("Unrecognized scale or projection: "+e),t[e].value}var tz="width",nz="height",sk="padding",P9={skip:!0};function rz(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===sk?r.left+r.right:0)}function iz(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===sk?r.top+r.bottom:0)}function g1e(e){var t=e._signals,n=t[tz],r=t[nz],i=t[sk];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,u=>{e._width=u.size,e._viewWidth=rz(e,u.size),s()},{size:n}),e._resizeHeight=e.add(null,u=>{e._height=u.size,e._viewHeight=iz(e,u.size),s()},{size:r});const a=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function p1e(e,t,n,r,i,s){this.runAfter(a=>{let u=0;a._autosize=0,a.width()!==n&&(u=1,a.signal(tz,n,P9),a._resizeWidth.skip(!0)),a.height()!==r&&(u=1,a.signal(nz,r,P9),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),u&&a.run("enter"),s&&a.runAfter(o=>o.resize())},!1,1)}function m1e(e){return this._runtime.getState(e||{data:b1e,signals:y1e,recurse:!0})}function b1e(e,t){return t.modified&&X(t.input.value)&&e.indexOf("_:vega:_")}function y1e(e,t){return!(e==="parent"||t instanceof Ef.proxy)}function v1e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function _1e(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Yfe(n,t))}function x1e(e,t,n,r){const i=e.element();i&&i.setAttribute("title",w1e(r))}function w1e(e){return e==null?"":X(e)?sz(e):be(e)&&!Au(e)?E1e(e):e+""}function E1e(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(X(n)?sz(n):az(n))}).join(`
`)}function sz(e){return"["+e.map(az).join(", ")+"]"}function az(e){return X(e)?"[]":be(e)&&!Au(e)?"{}":e}function uz(e,t){const n=this;if(t=t||{},Kc.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Ge({},e.locale,t.locale);n.locale(gF(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||wu.Canvas,n._scenegraph=new L4;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||x1e,n._redraw=!0,n._handler=new mg().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Ume(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=d1e(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Ge({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=rz(n,n._width),n._viewHeight=iz(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,g1e(n),Dme(n),Nme(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function Hp(e,t){return Se(e._signals,t)?e._signals[t]:W("Unrecognized signal name: "+fe(t))}function oz(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function j9(e,t,n,r){let i=oz(n,r);return i||(i=rk(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function L9(e,t,n){const r=oz(t,n);return r&&t._targets.remove(r),e}ce(uz,Kc,{async evaluate(e,t,n){if(await Kc.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ime(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&lm(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&ZL(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Hp(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",I9(e)):I9(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Py(e)||W("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Kc.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Hp(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:p1e,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=rk(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return j9(this,e,Hp(this,e),t)},removeSignalListener(e,t){return L9(this,Hp(this,e),t)},addDataListener(e,t){return j9(this,e,lb(this,e).values,t)},removeDataListener(e,t){return L9(this,lb(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=n3(this,null);this._globalCursor=!!e,t&&n3(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:_1e,events:Hme,finalize:Gme,hover:Vme,data:$me,change:Yy,insert:Fme,remove:Rme,scale:h1e,initialize:a1e,toImageURL:o1e,toCanvas:c1e,toSVG:f1e,getState:m1e,setState:v1e});const S1e="view",fb="[",db="]",lz="{",cz="}",k1e=":",fz=",",O1e="@",A1e=">",C1e=/[[\]{}]/,T1e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let dz,hz;function co(e,t,n){return dz=t||S1e,hz=n||T1e,gz(e.trim()).map(r3)}function M1e(e){return hz[e]}function Uh(e,t,n,r,i){const s=e.length;let a=0,u;for(;t<s;++t){if(u=e[t],!a&&u===n)return t;i&&i.indexOf(u)>=0?--a:r&&r.indexOf(u)>=0&&++a}return t}function gz(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Uh(e,i,fz,fb+lz,db+cz),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function r3(e){return e[0]==="["?D1e(e):N1e(e)}function D1e(e){const t=e.length;let n=1,r;if(n=Uh(e,n,db,fb,db),n===t)throw"Empty between selector: "+e;if(r=gz(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==A1e)throw"Expected '>' after between selector: "+e;r=r.map(r3);const i=r3(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function N1e(e){const t={source:dz},n=[];let r=[0,0],i=0,s=0,a=e.length,u=0,o,l;if(e[a-1]===cz){if(u=e.lastIndexOf(lz),u>=0){try{r=$1e(e.substring(u+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,u).trim(),a=e.length}else throw"Unmatched right brace: "+e;u=0}if(!a)throw e;if(e[0]===O1e&&(i=++u),o=Uh(e,u,k1e),o<a&&(n.push(e.substring(s,o).trim()),s=u=++o),u=Uh(e,u,fb),u===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,u).trim()),l=[],s=++u,s===a)throw"Unmatched left bracket: "+e;for(;u<a;){if(u=Uh(e,u,db),u===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,u).trim()),u<a-1&&e[++u]!==fb)throw"Expected left bracket: "+e;s=++u}if(!(a=n.length)||C1e.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):M1e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function $1e(e){const t=e.split(fz);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function F1e(e){return be(e)?e:{type:e||"pad"}}const rh=e=>+e||0,R1e=e=>({top:e,bottom:e,left:e,right:e});function I1e(e){return be(e)?e.signal?e:{top:rh(e.top),bottom:rh(e.bottom),left:rh(e.left),right:rh(e.right)}:R1e(rh(e))}const wn=e=>be(e)&&!X(e)?Ge({},e):{value:e};function z9(e,t,n,r){return n!=null?(be(n)&&!X(n)||X(n)&&n.length&&be(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Fn(e,t,n){for(const r in t)z9(e,r,t[r]);for(const r in n)z9(e,r,n[r],"update")}function gd(e,t,n){for(const r in t)n&&Se(n,r)||(e[r]=Ge(e[r]||{},t[r]));return e}function Hc(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const ak="mark",uk="frame",ok="scope",P1e="axis",j1e="axis-domain",L1e="axis-grid",z1e="axis-label",B1e="axis-tick",U1e="axis-title",q1e="legend",H1e="legend-band",V1e="legend-entry",G1e="legend-gradient",pz="legend-label",W1e="legend-symbol",X1e="legend-title",Y1e="title",Z1e="title-text",Q1e="title-subtitle";function J1e(e,t,n,r,i){const s={},a={};let u,o,l,c;o="lineBreak",t==="text"&&i[o]!=null&&!Hc(o,e)&&D_(s,o,i[o]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===uk?i.group:n===ak?Ge({},i.mark,i[t]):null;for(o in c)l=Hc(o,e)||(o==="fill"||o==="stroke")&&(Hc("fill",e)||Hc("stroke",e)),l||D_(s,o,c[o]);pe(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Hc(h,e)||D_(s,h,d[h])}),e=Ge({},e);for(o in s)c=s[o],c.signal?(u=u||{})[o]=c:a[o]=c;return e.enter=Ge(a,e.enter),u&&(e.update=Ge(u,e.update)),e}function D_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const mz=e=>me(e)?fe(e):e.signal?`(${e.signal})`:bz(e);function Qy(e){if(e.gradient!=null)return ebe(e);let t=e.signal?`(${e.signal})`:e.color?K1e(e.color):e.field!=null?bz(e.field):e.value!==void 0?fe(e.value):void 0;return e.scale!=null&&(t=tbe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Om(e.exponent)})`),e.mult!=null&&(t+=`*${Om(e.mult)}`),e.offset!=null&&(t+=`+${Om(e.offset)}`),e.round&&(t=`round(${t})`),t}const Vp=(e,t,n,r)=>`(${e}(${[t,n,r].map(Qy).join(",")})+'')`;function K1e(e){return e.c?Vp("hcl",e.h,e.c,e.l):e.h||e.s?Vp("hsl",e.h,e.s,e.l):e.l||e.a?Vp("lab",e.l,e.a,e.b):e.r||e.g||e.b?Vp("rgb",e.r,e.g,e.b):null}function ebe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:fe(n));for(;t.length&&rt(t)==null;)t.pop();return t.unshift(mz(e.gradient)),`gradient(${t.join(",")})`}function Om(e){return be(e)?"("+Qy(e)+")":e}function bz(e){return yz(be(e)?e:{datum:e})}function yz(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):W("Invalid field reference: "+fe(e));return e.signal||(r=me(r)?Rs(r).map(fe).join("]["):yz(r)),t+"["+r+"]"}function tbe(e,t){const n=mz(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Om(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function nbe(e){let t="";return e.forEach(n=>{const r=Qy(n);t+=n.test?`(${n.test})?${r}:`:r}),rt(t)===":"&&(t+="null"),t}function vz(e,t,n,r,i,s){const a={};s=s||{},s.encoders={$encode:a},e=J1e(e,t,n,r,i.config);for(const u in e)a[u]=rbe(e[u],t,s,i);return s}function rbe(e,t,n,r){const i={},s={};for(const a in e)e[a]!=null&&(i[a]=sbe(ibe(e[a]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function ibe(e){return X(e)?nbe(e):Qy(e)}function sbe(e,t,n,r){const i=Ms(e,t);return i.$fields.forEach(s=>r[s]=1),Ge(n,i.$params),i.$expr}const abe="outer",ube=["value","update","init","react","bind"];function B9(e,t){W(e+' for "outer" push: '+fe(t))}function _z(e,t){const n=e.name;if(e.push===abe)t.signals[n]||B9("No prior signal definition",n),ube.forEach(r=>{e[r]!==void 0&&B9("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function i3(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Jy(e,t,n,r){return new i3(e,t,n,r)}function hb(e,t){return Jy("operator",e,t)}function Oe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function A0(e,t){return t?{$field:e,$name:t}:{$field:e}}const s3=A0("key");function U9(e,t){return{$compare:e,$order:t}}function obe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const lbe="ascending",cbe="descending";function fbe(e){return be(e)?(e.order===cbe?"-":"+")+Ky(e.op,e.field):""}function Ky(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const lk="scope",a3="view";function hn(e){return e&&e.signal}function dbe(e){return e&&e.expr}function Am(e){if(hn(e))return!0;if(be(e)){for(const t in e)if(Am(e[t]))return!0}return!1}function Ci(e,t){return e??t}function fl(e){return e&&e.signal||e}const q9="timer";function C0(e,t){return(e.merge?gbe:e.stream?pbe:e.type?mbe:W("Invalid stream specification: "+fe(e)))(e,t)}function hbe(e){return e===lk?a3:e||a3}function gbe(e,t){const n=e.merge.map(i=>C0(i,t)),r=ck({merge:n},e,t);return t.addStream(r).id}function pbe(e,t){const n=C0(e.stream,t),r=ck({stream:n},e,t);return t.addStream(r).id}function mbe(e,t){let n;e.type===q9?(n=t.event(q9,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(hbe(e.source),e.type);const r=ck({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function ck(e,t,n){let r=t.between;return r&&(r.length!==2&&W('Stream "between" parameter must have 2 entries: '+fe(t)),e.between=[C0(r[0],n),C0(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(bbe(t.marktype,t.markname,t.markrole)),t.source===lk&&r.push("inScope(event.item)"),r.length&&(e.filter=Ms("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function bbe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const ybe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function vbe(e,t,n){const r=e.encode,i={target:n};let s=e.events,a=e.update,u=[];s||W("Signal update missing events specification."),me(s)&&(s=co(s,t.isSubscope()?lk:a3)),s=pe(s).filter(o=>o.signal||o.scale?(u.push(o),0):1),u.length>1&&(u=[xbe(u)]),s.length&&u.push(s.length>1?{merge:s}:s[0]),r!=null&&(a&&W("Signal encode and update are mutually exclusive."),a="encode(item(),"+fe(r)+")"),i.update=me(a)?Ms(a,t):a.expr!=null?Ms(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:ybe,$params:{$value:t.signalRef(a.signal)}}:W("Invalid signal update specification."),e.force&&(i.options={force:!0}),u.forEach(o=>t.addUpdate(Ge(_be(o,t),i)))}function _be(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):C0(e,t)}}function xbe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function wbe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?W("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ms(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>vbe(i,t,n.id))}const At=e=>(t,n,r)=>Jy(e,n,t||void 0,r),xz=At("aggregate"),Ebe=At("axisticks"),wz=At("bound"),Ji=At("collect"),H9=At("compare"),Sbe=At("datajoin"),Ez=At("encode"),kbe=At("expression"),Obe=At("facet"),Abe=At("field"),Cbe=At("key"),Tbe=At("legendentries"),Mbe=At("load"),Dbe=At("mark"),Nbe=At("multiextent"),$be=At("multivalues"),Fbe=At("overlap"),Rbe=At("params"),Sz=At("prefacet"),Ibe=At("projection"),Pbe=At("proxy"),jbe=At("relay"),kz=At("render"),Lbe=At("scale"),Kl=At("sieve"),zbe=At("sortitems"),Oz=At("viewlayout"),Bbe=At("values");let Ube=0;const Az={min:"min",max:"max",count:"sum"};function qbe(e,t){const n=e.type||"linear";EI(n)||W("Unrecognized scale type: "+fe(n)),t.addScale(e.name,{type:n,domain:void 0})}function Hbe(e,t){const n=t.getScale(e.name).params;let r;n.domain=Cz(e.domain,e,t),e.range!=null&&(n.range=Mz(e,t,n)),e.interpolate!=null&&eye(e.interpolate,n),e.nice!=null&&(n.nice=Kbe(e.nice)),e.bins!=null&&(n.bins=Jbe(e.bins,t));for(r in e)Se(n,r)||r==="name"||(n[r]=li(e[r],t))}function li(e,t){return be(e)?e.signal?t.signalRef(e.signal):W("Unsupported object: "+fe(e)):e}function Cm(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>li(n,t))}function ev(e){W("Can not find data set: "+fe(e))}function Cz(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&W("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(X(e)?Vbe:e.fields?Wbe:Gbe)(e,t,n)}function Vbe(e,t,n){return e.map(r=>li(r,n))}function Gbe(e,t,n){const r=n.getData(e.data);return r||ev(e.data),Cf(t.type)?r.valuesRef(n,e.field,Tz(e.sort,!1)):OI(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Wbe(e,t,n){const r=e.data,i=e.fields.reduce((s,a)=>(a=me(a)?{data:r,field:a}:X(a)||a.signal?Xbe(a,n):a,s.push(a),s),[]);return(Cf(t.type)?Ybe:OI(t.type)?Zbe:Qbe)(e,n,i)}function Xbe(e,t){const n="_:vega:_"+Ube++,r=Ji({});if(X(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+fe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Kl({})]),{data:n,field:"data"}}function Ybe(e,t,n){const r=Tz(e.sort,!0);let i,s;const a=n.map(l=>{const c=t.getData(l.data);return c||ev(l.data),c.countsRef(t,l.field,r)}),u={groupby:s3,pulse:a};r&&(i=r.op||"count",s=r.field?Ky(i,r.field):"count",u.ops=[Az[i]],u.fields=[t.fieldRef(s)],u.as=[s]),i=t.add(xz(u));const o=t.add(Ji({pulse:Oe(i)}));return s=t.add(Bbe({field:s3,sort:t.sortRef(r),pulse:Oe(o)})),Oe(s)}function Tz(e,t){return e&&(!e.field&&!e.op?be(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?W("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Az[e.op]&&W("Multiple domain scales can not be sorted using "+e.op)),e}function Zbe(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||ev(i.data),s.domainRef(t,i.field)});return Oe(t.add($be({values:r})))}function Qbe(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||ev(i.data),s.extentRef(t,i.field)});return Oe(t.add(Nbe({extents:r})))}function Jbe(e,t){return e.signal||X(e)?Cm(e,t):t.objectProperty(e)}function Kbe(e){return be(e)?{interval:li(e.interval),step:li(e.step)}:li(e)}function eye(e,t){t.interpolate=li(e.type||e),e.gamma!=null&&(t.interpolateGamma=li(e.gamma))}function Mz(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(me(i)){if(r&&Se(r,i))return e=Ge({},e,{range:r[i]}),Mz(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Cf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:W("Unrecognized scale range value: "+fe(i))}else if(i.scheme){n.scheme=X(i.scheme)?Cm(i.scheme,t):li(i.scheme,t),i.extent&&(n.schemeExtent=Cm(i.extent,t)),i.count&&(n.schemeCount=li(i.count,t));return}else if(i.step){n.rangeStep=li(i.step,t);return}else{if(Cf(e.type)&&!X(i))return Cz(i,e,t);X(i)||W("Unsupported range type: "+fe(i))}return i.map(s=>(X(s)?Cm:li)(s,t))}function tye(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=u3(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=u3(n[i],i,t));t.addProjection(e.name,r)}function u3(e,t,n){return X(e)?e.map(r=>u3(r,t,n)):be(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:W("Unsupported parameter object: "+fe(e)):e}const Ki="top",pd="left",md="right",Wu="bottom",Dz="center",nye="vertical",rye="start",iye="middle",sye="end",o3="index",fk="label",aye="offset",jf="perc",uye="perc2",fi="value",kg="guide-label",dk="guide-title",oye="group-title",lye="group-subtitle",V9="symbol",Tm="gradient",l3="discrete",c3="size",cye="shape",fye="fill",dye="stroke",hye="strokeWidth",gye="strokeDash",pye="opacity",hk=[c3,cye,fye,dye,hye,gye,pye],Og={name:1,style:1,interactive:1},st={value:0},di={value:1},tv="group",Nz="rect",gk="rule",mye="symbol",ec="text";function T0(e){return e.type=tv,e.interactive=e.interactive||!1,e}function qr(e,t){const n=(r,i)=>Ci(e[r],Ci(t[r],i));return n.isVertical=r=>nye===Ci(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ci(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ci(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ci(e.columns,Ci(t.columns,+n.isVertical(!0))),n}function $z(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function bye(e,t,n){const r=t.config.style[n];return r&&r[e]}function nv(e,t,n){return`item.anchor === '${rye}' ? ${e} : item.anchor === '${sye}' ? ${t} : ${n}`}const pk=nv(fe(pd),fe(md),fe(Dz));function yye(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},be(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Fz(e,t){return t?e?be(e)?Object.assign({},e,{offset:Fz(e.offset,t)}):{value:e,offset:t}:t:e}function ni(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=gd(e.encode,t,Og)):e.interactive=!1,e}function vye(e,t,n,r){const i=qr(e,n),s=i.isVertical(),a=i.gradientThickness(),u=i.gradientLength();let o,l,c,f,d;s?(l=[0,1],c=[0,0],f=a,d=u):(l=[0,0],c=[1,0],f=u,d=a);const h={enter:o={opacity:st,x:st,y:st,width:wn(f),height:wn(d)},update:Ge({},o,{opacity:di,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:st}};return Fn(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ni({type:Nz,role:G1e,encode:h},r)}function _ye(e,t,n,r,i){const s=qr(e,n),a=s.isVertical(),u=s.gradientThickness(),o=s.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const g={opacity:st,fill:{scale:t,field:fi}};g[l]={signal:h+"datum."+jf,mult:o},g[c]=st,g[f]={signal:h+"datum."+uye,mult:o},g[d]=wn(u);const p={enter:g,update:Ge({},g,{opacity:di}),exit:{opacity:st}};return Fn(p,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ni({type:Nz,role:H1e,key:fi,from:i,encode:p},r)}const xye=`datum.${jf}<=0?"${pd}":datum.${jf}>=1?"${md}":"${Dz}"`,wye=`datum.${jf}<=0?"${Wu}":datum.${jf}>=1?"${Ki}":"${iye}"`;function G9(e,t,n,r){const i=qr(e,t),s=i.isVertical(),a=wn(i.gradientThickness()),u=i.gradientLength();let o=i("labelOverlap"),l,c,f,d,h="";const g={enter:l={opacity:st},update:c={opacity:di,text:{field:fk}},exit:{opacity:st}};return Fn(g,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ci(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:wye},f="y",d="x",h="1-"):(l.align=c.align={signal:xye},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+jf,mult:u},l[d]=c[d]=a,a.offset=Ci(e.labelOffset,t.gradientLabelOffset)||0,o=o?{separation:i("labelSeparation"),method:o,order:"datum."+o3}:void 0,ni({type:ec,role:pz,style:kg,key:fi,from:r,encode:g,overlap:o},n)}function Eye(e,t,n,r,i){const s=qr(e,t),a=n.entries,u=!!(a&&a.interactive),o=a?a.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${aye} : datum.${c3}`,h=l?wn(l):{field:c3},g=`datum.${o3}`,p=`max(1, ${i})`;let m,b,y,v,_;h.mult=.5,m={enter:b={opacity:st,x:{signal:d,mult:.5,offset:c},y:h},update:y={opacity:di,x:b.x,y:b.y},exit:{opacity:st}};let x=null,E=null;e.fill||(x=t.symbolBaseFillColor,E=t.symbolBaseStrokeColor),Fn(m,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",E),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),hk.forEach(N=>{e[N]&&(y[N]=b[N]={scale:e[N],field:fi})});const w=ni({type:mye,role:W1e,key:fi,from:f,clip:l?!0:void 0,encode:m},n.symbols),k=wn(c);k.offset=s("labelOffset"),m={enter:b={opacity:st,x:{signal:d,offset:k},y:h},update:y={opacity:di,text:{field:fk},x:b.x,y:b.y},exit:{opacity:st}},Fn(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=ni({type:ec,role:pz,style:kg,key:fi,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!l},width:st,height:l?wn(l):st,opacity:st},exit:{opacity:st},update:y={opacity:di,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${p})`,y.row.signal=`${g}%${v}`,y.column.signal=`floor(${g} / ${v})`,_={field:["row",g]}):(y.row.signal=`floor(${g} / ${p})`,y.column.signal=`${g} % ${p}`,_={field:g}),y.column.signal=`(${i})?${y.column.signal}:${g}`,r={facet:{data:r,name:"value",groupby:o3}},T0({role:ok,from:r,encode:gd(m,a,Og),marks:[w,A],name:o,interactive:u,sort:_})}function Sye(e,t){const n=qr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const mk='item.orient === "left"',bk='item.orient === "right"',rv=`(${mk} || ${bk})`,kye=`datum.vgrad && ${rv}`,Oye=nv('"top"','"bottom"','"middle"'),Aye=nv('"right"','"left"','"center"'),Cye=`datum.vgrad && ${bk} ? (${Aye}) : (${rv} && !(datum.vgrad && ${mk})) ? "left" : ${pk}`,Tye=`item._anchor || (${rv} ? "middle" : "start")`,Mye=`${kye} ? (${mk} ? -90 : 90) : 0`,Dye=`${rv} ? (datum.vgrad ? (${bk} ? "bottom" : "top") : ${Oye}) : "top"`;function Nye(e,t,n,r){const i=qr(e,t),s={enter:{opacity:st},update:{opacity:di,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:st}};return Fn(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Tye},angle:{signal:Mye},align:{signal:Cye},baseline:{signal:Dye},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ni({type:ec,role:X1e,style:dk,from:r,encode:s},n)}function $ye(e,t){let n;return be(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+W9(e.path)+")":e.sphere&&(n="geoShape("+W9(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function W9(e){return be(e)&&e.signal?e.signal:fe(e)}function Rz(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===tv?ok:t||ak}function Fye(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Rz(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Rye(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function yk(e,t){const n=AF(e.type);n||W("Unrecognized transform type: "+fe(e.type));const r=Jy(n.type.toLowerCase(),null,Iz(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Iz(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const a=e.params[s];r[a.name]=Iye(a,t,n)}return r}function Iye(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Pye(e,t,n);if(i===void 0){e.required&&W("Missing required "+fe(t.type)+" parameter: "+fe(e.name));return}else{if(r==="param")return jye(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!hn(i)?i.map(s=>X9(e,s,n)):X9(e,i,n)}function X9(e,t,n){const r=e.type;if(hn(t))return Z9(r)?W("Expression references can not be signals."):N_(r)?n.fieldRef(t):Q9(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||N_(r);return i&&Lye(t)?n.exprRef(t.expr,t.as):i&&zye(t)?A0(t.field,t.as):Z9(r)?Ms(t,n):Bye(r)?Oe(n.getData(t).values):N_(r)?A0(t):Q9(r)?n.compareRef(t):t}}function Pye(e,t,n){return me(t.from)||W('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function jye(e,t,n){const r=t[e.name];return e.array?(X(r)||W("Expected an array of sub-parameters. Instead: "+fe(r)),r.map(i=>Y9(e,i,n))):Y9(e,r,n)}function Y9(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const u in i.key)if(i.key[u]!==t[u]){i=null;break}if(i)break}i||W("Unsupported parameter: "+fe(t));const s=Ge(Iz(i,t,n),i.key);return Oe(n.add(Rbe(s)))}const Lye=e=>e&&e.expr,zye=e=>e&&e.field,Bye=e=>e==="data",Z9=e=>e==="expr",N_=e=>e==="field",Q9=e=>e==="compare";function Uye(e,t,n){let r,i,s,a,u;return e?(r=e.facet)&&(t||W("Only group marks can be faceted."),r.field!=null?a=u=Mm(r,n):(e.data?u=Oe(n.getData(e.data).aggregate):(s=yk(Ge({type:"aggregate",groupby:pe(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=Mm(r,n),a=u=Oe(n.add(s))),i=n.keyRef(r.groupby,!0))):a=Oe(n.add(Ji(null,[{}]))),a||(a=Mm(e,n)),{key:i,pulse:a,parent:u}}function Mm(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Oe(t.getData(e.data).output)}function Tl(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Tl.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],a=null,u=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);u<n;++u)t[u].params.pulse=Oe(t[u-1]),e.add(t[u]),t[u].type==="aggregate"&&(a=t[u]);return new Tl(e,s,i,r,a)};function Pz(e){return me(e)?e:null}function J9(e,t,n){const r=Ky(n.op,n.field);let i;if(t.ops){for(let s=0,a=t.as.length;s<a;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function ih(e,t,n,r,i,s,a){const u=t[n]||(t[n]={}),o=fbe(s);let l=Pz(i),c,f;if(l!=null&&(e=t.scope,l=l+(o?"|"+o:""),c=u[l]),!c){const d=s?{field:s3,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Oe(t.output)};o&&(d.sort=e.sortRef(s)),f=e.add(Jy(r,void 0,d)),a&&(t.index[i]=f),c=Oe(f),l!=null&&(u[l]=c)}return c}Tl.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=Pz(t);let a,u,o;return s!=null&&(e=r.scope,a=i[s]),a?n&&n.field&&J9(e,a.agg.params,n):(o={groupby:e.fieldRef(t,"key"),pulse:Oe(r.output)},n&&n.field&&J9(e,o,n),u=e.add(xz(o)),a=e.add(Ji({pulse:Oe(u)})),a={agg:u,ref:Oe(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Oe(this.values)},extentRef(e,t){return ih(e,this,"extent","extent",t,!1)},domainRef(e,t){return ih(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return ih(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return ih(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ih(e,this,"indata","tupleindex",t,!0,!0)}};function qye(e,t,n){const r=e.from.facet,i=r.name,s=Mm(r,t);let a;r.name||W("Facet must have a name: "+fe(r)),r.data||W("Facet must reference a data set: "+fe(r)),r.field?a=t.add(Sz({field:t.fieldRef(r.field),pulse:s})):r.groupby?a=t.add(Obe({key:t.keyRef(r.groupby),group:Oe(t.proxy(n.parent)),pulse:s})):W("Facet must specify groupby or field: "+fe(r));const u=t.fork(),o=u.add(Ji()),l=u.add(Kl({pulse:Oe(o)}));u.addData(i,new Tl(u,o,o,l)),u.addSignal("parent",null),a.params.subflow={$subflow:u.parse(e).toRuntime()}}function Hye(e,t,n){const r=t.add(Sz({pulse:n.pulse})),i=t.fork();i.add(Kl()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function jz(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,a=e.modify,u=e.values,o=t.add(hb()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,a,u].map(f=>f??"null").join(",")+"),0)",c=Ms(l,t);o.update=c.$expr,o.params=c.$params}function iv(e,t){const n=Rz(e),r=e.type===tv,i=e.from&&e.from.facet,s=e.overlap;let a=e.layout||n===ok||n===uk,u,o,l,c,f,d,h;const g=n===ak||a||i,p=Uye(e.from,r,t);o=t.add(Sbe({key:p.key||(e.key?A0(e.key):void 0),pulse:p.pulse,clean:!r}));const m=Oe(o);o=l=t.add(Ji({pulse:m})),o=t.add(Dbe({markdef:Fye(e),interactive:Rye(e.interactive,t),clip:$ye(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Oe(o)}));const b=Oe(o);o=c=t.add(Ez(vz(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),o.params.parent=t.encode(),e.transform&&e.transform.forEach(E=>{const w=yk(E,t),k=w.metadata;(k.generates||k.changes)&&W("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),w.params.pulse=Oe(o),t.add(o=w)}),e.sort&&(o=t.add(zbe({sort:t.compareRef(e.sort),pulse:Oe(o)})));const y=Oe(o);(i||a)&&(a=t.add(Oz({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:y})),d=Oe(a));const v=t.add(wz({mark:b,pulse:d||y}));h=Oe(v),r&&(g&&(u=t.operators,u.pop(),a&&u.pop()),t.pushState(y,d||h,m),i?qye(e,t,p):g?Hye(e,t,p):t.parse(e),t.popState(),g&&(a&&u.push(a),u.push(v))),s&&(h=Vye(s,h,t));const _=t.add(kz({pulse:h})),x=t.add(Kl({pulse:Oe(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Tl(t,l,_,x)),e.on&&e.on.forEach(E=>{(E.insert||E.remove||E.toggle)&&W("Marks only support modify triggers."),jz(E,t,f)}))}function Vye(e,t,n){const r=e.method,i=e.bound,s=e.separation,a={separation:hn(s)?n.signalRef(s.signal):s,method:hn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const u=i.tolerance;a.boundTolerance=hn(u)?n.signalRef(u.signal):+u,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Oe(n.add(Fbe(a)))}function Gye(e,t){const n=t.config.legend,r=e.encode||{},i=qr(e,n),s=r.legend||{},a=s.name||void 0,u=s.interactive,o=s.style,l={};let c=0,f,d,h;hk.forEach(v=>e[v]?(l[v]=e[v],c=c||e[v]):0),c||W("Missing valid scale for legend.");const g=Wye(e,t.scaleType(c)),p={title:e.title!=null,scales:l,type:g,vgrad:g!=="symbol"&&i.isVertical()},m=Oe(t.add(Ji(null,[p]))),b={enter:{x:{value:0},y:{value:0}}},y=Oe(t.add(Tbe(d={type:g,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===Tm?(h=[vye(e,c,n,r.gradient),G9(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${fl(i.gradientLength())})/100))`)):g===l3?h=[_ye(e,c,n,r.gradient,y),G9(e,n,r.labels,y)]:(f=Sye(e,n),h=[Eye(e,n,r,y,fl(f.columns))],d.size=Zye(e,t,h[0].marks)),h=[T0({role:V1e,from:m,encode:b,marks:h,layout:f,interactive:u})],p.title&&h.push(Nye(e,n,r.title,m)),iv(T0({role:q1e,from:m,encode:gd(Yye(i,e,n),s,Og),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:u,style:o}),t)}function Wye(e,t){let n=e.type||V9;return!e.type&&Xye(e)===1&&(e.fill||e.stroke)&&(n=g4(t)?Tm:tw(t)?l3:V9),n!==Tm?n:tw(t)?l3:Tm}function Xye(e){return hk.reduce((t,n)=>t+(e[n]?1:0),0)}function Yye(e,t,n){const r={enter:{},update:{}};return Fn(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Zye(e,t,n){const r=fl(K9("size",e,n)),i=fl(K9("strokeWidth",e,n)),s=fl(Qye(n[1].encode,t,kg));return Ms(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function K9(e,t,n){return t[e]?`scale("${t[e]}",datum)`:$z(e,n[0].encode)}function Qye(e,t,n){return $z("fontSize",e)||bye("fontSize",t,n)}const Jye=`item.orient==="${pd}"?-90:item.orient==="${md}"?90:0`;function Kye(e,t){e=me(e)?{text:e}:e;const n=qr(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,a=i.interactive,u=i.style,o=[],l={},c=Oe(t.add(Ji(null,[l])));return o.push(nve(e,n,eve(e),c)),e.subtitle&&o.push(rve(e,n,r.subtitle,c)),iv(T0({role:Y1e,from:c,encode:tve(n,i),marks:o,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:u}),t)}function eve(e){const t=e.encode;return t&&t.title||Ge({name:e.name,interactive:e.interactive,style:e.style},t)}function tve(e,t){const n={enter:{},update:{}};return Fn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:pk},angle:{signal:Jye},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),gd(n,t,Og)}function nve(e,t,n,r){const i={value:0},s=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Fn(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ni({type:ec,role:Z1e,style:oye,from:r,encode:a},n)}function rve(e,t,n,r){const i={value:0},s=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Fn(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ni({type:ec,role:Q1e,style:lye,from:r,encode:a},n)}function ive(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(yk(r,t))}),e.on&&e.on.forEach(r=>{jz(r,t,e.name)}),t.addDataPipeline(e.name,sve(e,t,n))}function sve(e,t,n){const r=[];let i=null,s=!1,a=!1,u,o,l,c,f;for(e.values?hn(e.values)||Am(e.format)?(r.push(e7(t,e)),r.push(i=Uo())):r.push(i=Uo({$ingest:e.values,$format:e.format})):e.url?Am(e.url)||Am(e.format)?(r.push(e7(t,e)),r.push(i=Uo())):r.push(i=Uo({$request:e.url,$format:e.format})):e.source&&(i=u=pe(e.source).map(d=>Oe(t.getData(d).output)),r.push(null)),o=0,l=n.length;o<l;++o)c=n[o],f=c.metadata,!i&&!f.source&&r.push(i=Uo()),r.push(c),f.generates&&(a=!0),f.modifies&&!a&&(s=!0),f.source?i=c:f.changes&&(i=null);return u&&(l=u.length-1,r[0]=jbe({derive:s,pulse:l?u:u[0]}),(s||l)&&r.splice(1,0,Uo())),i||r.push(Uo()),r.push(Kl({})),r}function Uo(e){const t=Ji({},e);return t.metadata={source:!0},t}function e7(e,t){return Mbe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Lz=e=>e===Wu||e===Ki,sv=(e,t,n)=>hn(e)?lve(e.signal,t,n):e===pd||e===Ki?t:n,En=(e,t,n)=>hn(e)?uve(e.signal,t,n):Lz(e)?t:n,Ui=(e,t,n)=>hn(e)?ove(e.signal,t,n):Lz(e)?n:t,zz=(e,t,n)=>hn(e)?cve(e.signal,t,n):e===Ki?{value:t}:{value:n},ave=(e,t,n)=>hn(e)?fve(e.signal,t,n):e===md?{value:t}:{value:n},uve=(e,t,n)=>Bz(`${e} === '${Ki}' || ${e} === '${Wu}'`,t,n),ove=(e,t,n)=>Bz(`${e} !== '${Ki}' && ${e} !== '${Wu}'`,t,n),lve=(e,t,n)=>vk(`${e} === '${pd}' || ${e} === '${Ki}'`,t,n),cve=(e,t,n)=>vk(`${e} === '${Ki}'`,t,n),fve=(e,t,n)=>vk(`${e} === '${md}'`,t,n),Bz=(e,t,n)=>(t=t!=null?wn(t):t,n=n!=null?wn(n):n,t7(t)&&t7(n)?(t=t?t.signal||fe(t.value):null,n=n?n.signal||fe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ge({test:e},t)].concat(n||[])),t7=e=>e==null||Object.keys(e).length===1,vk=(e,t,n)=>({signal:`${e} ? (${Jc(t)}) : (${Jc(n)})`}),dve=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${pd}' ? (${Jc(r)}) : `:"")+(n!=null?`${e} === '${Wu}' ? (${Jc(n)}) : `:"")+(i!=null?`${e} === '${md}' ? (${Jc(i)}) : `:"")+(t!=null?`${e} === '${Ki}' ? (${Jc(t)}) : `:"")+"(null)"}),Jc=e=>hn(e)?e.signal:e==null?null:fe(e),hve=(e,t)=>t===0?0:hn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},rf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function jc(e,t,n,r){let i;if(t&&Se(t,e))return t[e];if(Se(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[dk][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[kg][i]}return null}function n7(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function gve(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,u,o,l;if(hn(a)){const f=n7([n.axisX,n.axisY]),d=n7([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);u={};for(l of f)u[l]=En(a,jc(l,n.axisX,i,r),jc(l,n.axisY,i,r));o={};for(l of d)o[l]=dve(a.signal,jc(l,n.axisTop,i,r),jc(l,n.axisBottom,i,r),jc(l,n.axisLeft,i,r),jc(l,n.axisRight,i,r))}else u=a===Ki||a===Wu?n.axisX:n.axisY,o=n["axis"+a[0].toUpperCase()+a.slice(1)];return u||o||s?Ge({},i,u,o,s):i}function pve(e,t,n,r){const i=qr(e,t),s=e.orient;let a,u;const o={enter:a={opacity:st},update:u={opacity:di},exit:{opacity:st}};Fn(o,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=r7(e,0),c=r7(e,1);return a.x=u.x=En(s,l,st),a.x2=u.x2=En(s,c),a.y=u.y=Ui(s,l,st),a.y2=u.y2=Ui(s,c),ni({type:gk,role:j1e,from:r,encode:o},n)}function r7(e,t){return{scale:e.scale,range:t}}function mve(e,t,n,r,i){const s=qr(e,t),a=e.orient,u=e.gridScale,o=sv(a,1,-1),l=bve(e.offset,o);let c,f,d;const h={enter:c={opacity:st},update:d={opacity:di},exit:f={opacity:st}};Fn(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const g={scale:e.scale,field:fi,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},p=En(a,{signal:"height"},{signal:"width"}),m=u?{scale:u,range:0,mult:o,offset:l}:{value:0,offset:l},b=u?{scale:u,range:1,mult:o,offset:l}:Ge(p,{mult:o,offset:l});return c.x=d.x=En(a,g,m),c.y=d.y=Ui(a,g,m),c.x2=d.x2=Ui(a,b),c.y2=d.y2=En(a,b),f.x=En(a,g),f.y=Ui(a,g),ni({type:gk,role:L1e,key:fi,from:r,encode:h},n)}function bve(e,t){if(t!==1)if(!be(e))e=hn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ge({},e);for(;n.mult!=null;)if(be(n.mult))n=n.mult=Ge({},n.mult);else return n.mult=hn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function yve(e,t,n,r,i,s){const a=qr(e,t),u=e.orient,o=sv(u,-1,1);let l,c,f;const d={enter:l={opacity:st},update:f={opacity:di},exit:c={opacity:st}};Fn(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=wn(i);h.mult=o;const g={scale:e.scale,field:fi,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return f.y=l.y=En(u,st,g),f.y2=l.y2=En(u,h),c.x=En(u,g),f.x=l.x=Ui(u,st,g),f.x2=l.x2=Ui(u,h),c.y=Ui(u,g),ni({type:gk,role:B1e,key:fi,from:r,encode:d},n)}function $_(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function vve(e,t,n,r,i,s){const a=qr(e,t),u=e.orient,o=e.scale,l=sv(u,-1,1),c=fl(a("labelFlush")),f=fl(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let g=c===0||!!c,p;const m=wn(i);m.mult=l,m.offset=wn(a("labelPadding")||0),m.offset.mult=l;const b={scale:o,field:fi,band:.5,offset:Fz(s.offset,a("labelOffset"))},y=En(u,g?$_(o,c,'"left"','"right"','"center"'):{value:"center"},ave(u,"left","right")),v=En(u,zz(u,"bottom","top"),g?$_(o,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=$_(o,c,`-(${f})`,f,0);g=g&&f;const x={opacity:st,x:En(u,b,m),y:Ui(u,b,m)},E={enter:x,update:p={opacity:di,text:{field:fk},x:x.x,y:x.y,align:y,baseline:v},exit:{opacity:st,x:x.x,y:x.y}};Fn(E,{dx:!d&&g?En(u,_):null,dy:!h&&g?Ui(u,_):null}),Fn(E,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const w=a("labelBound");let k=a("labelOverlap");return k=k||w?{separation:a("labelSeparation"),method:k,order:"datum.index",bound:w?{scale:o,orient:u,tolerance:w}:null}:void 0,p.align!==y&&(p.align=rf(p.align,y)),p.baseline!==v&&(p.baseline=rf(p.baseline,v)),ni({type:ec,role:z1e,style:kg,key:fi,from:r,encode:E,overlap:k},n)}function _ve(e,t,n,r){const i=qr(e,t),s=e.orient,a=sv(s,-1,1);let u,o;const l={enter:u={opacity:st,anchor:wn(i("titleAnchor",null)),align:{signal:pk}},update:o=Ge({},u,{opacity:di,text:wn(e.title)}),exit:{opacity:st}},c={signal:`lerp(range("${e.scale}"), ${nv(0,1,.5)})`};return o.x=En(s,c),o.y=Ui(s,c),u.angle=En(s,st,hve(a,90)),u.baseline=En(s,zz(s,Wu,Ki),{value:Wu}),o.angle=u.angle,o.baseline=u.baseline,Fn(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),xve(i,s,l,n),l.update.align=rf(l.update.align,u.align),l.update.angle=rf(l.update.angle,u.angle),l.update.baseline=rf(l.update.baseline,u.baseline),ni({type:ec,role:U1e,style:dk,from:r,encode:l},n)}function xve(e,t,n,r){const i=(u,o)=>u!=null?(n.update[o]=rf(wn(u),n.update[o]),!1):!Hc(o,r),s=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===s?wn(a):En(t,wn(a),wn(s))}function wve(e,t){const n=gve(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,a=i.interactive,u=i.style,o=qr(e,n),l=yye(o),c={scale:e.scale,ticks:!!o("ticks"),labels:!!o("labels"),grid:!!o("grid"),domain:!!o("domain"),title:e.title!=null},f=Oe(t.add(Ji({},[c]))),d=Oe(t.add(Ebe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let g;return c.grid&&h.push(mve(e,n,r.grid,d,l)),c.ticks&&(g=o("tickSize"),h.push(yve(e,n,r.ticks,d,g,l))),c.labels&&(g=c.ticks?g:0,h.push(vve(e,n,r.labels,d,g,l))),c.domain&&h.push(pve(e,n,r.domain,f)),c.title&&h.push(_ve(e,n,r.title,f)),iv(T0({role:P1e,from:f,encode:gd(Eve(o,e),i,Og),marks:h,aria:o("aria"),description:o("description"),zindex:o("zindex"),name:s,interactive:a,style:u}),t)}function Eve(e,t){const n={enter:{},update:{}};return Fn(n,{orient:e("orient"),offset:e("offset")||0,position:Ci(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Uz(e,t,n){const r=pe(e.signals),i=pe(e.scales);return n||r.forEach(s=>_z(s,t)),pe(e.projections).forEach(s=>tye(s,t)),i.forEach(s=>qbe(s,t)),pe(e.data).forEach(s=>ive(s,t)),i.forEach(s=>Hbe(s,t)),(n||r).forEach(s=>wbe(s,t)),pe(e.axes).forEach(s=>wve(s,t)),pe(e.marks).forEach(s=>iv(s,t)),pe(e.legends).forEach(s=>Gye(s,t)),e.title&&Kye(e.title,t),t.parseLambdas(),t}const Sve=e=>gd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function kve(e,t){const n=t.config,r=Oe(t.root=t.add(hb())),i=Ove(e,n);i.forEach(l=>_z(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Ji()),a=t.add(Ez(vz(Sve(e.encode),tv,uk,e.style,t,{pulse:Oe(s)}))),u=t.add(Oz({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Oe(a)}));t.operators.pop(),t.pushState(Oe(a),Oe(u),null),Uz(e,t,i),t.operators.push(u);let o=t.add(wz({mark:r,pulse:Oe(u)}));return o=t.add(kz({pulse:Oe(o)})),o=t.add(Kl({pulse:Oe(o)})),t.addData("root",new Tl(t,s,s,o)),t}function sh(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Ove(e,t){const n=a=>Ci(e[a],t[a]),r=[sh("background",n("background")),sh("autosize",F1e(n("autosize"))),sh("padding",I1e(n("padding"))),sh("width",n("width")||0),sh("height",n("height")||0)],i=r.reduce((a,u)=>(a[u.name]=u,a),{}),s={};return pe(e.signals).forEach(a=>{Se(i,a.name)?a=Ge(i[a.name],a):r.push(a),s[a.name]=a}),pe(t.signals).forEach(a=>{!Se(s,a.name)&&!Se(i,a.name)&&r.push(a)}),r}function qz(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function i7(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}qz.prototype=i7.prototype={parse(e){return Uz(e,this)},fork(){return new i7(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof i3?Oe(e):e;return this.add(Pbe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let a,u;r&&(a=r.data||(r.data={}),u=a[i]||(a[i]=[]),u.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Oe(this.add(Kl({pulse:e})))),this._parent.push(t),this._lookup.push(n?Oe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return rt(this._parent)},encode(){return rt(this._encode)},lookup(){return rt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(me(e))return A0(e,t);e.signal||W("Unsupported field reference: "+fe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Oe(this.add(Abe(i)))}return r},compareRef(e){let t=!1;const n=s=>hn(s)?(t=!0,this.signalRef(s.signal)):dbe(s)?(t=!0,this.exprRef(s.expr)):s,r=pe(e.field).map(n),i=pe(e.order).map(n);return t?Oe(this.add(H9({fields:r,orders:i}))):U9(r,i)},keyRef(e,t){let n=!1;const r=s=>hn(s)?(n=!0,Oe(i[s.signal])):s,i=this.signals;return e=pe(e).map(r),n?Oe(this.add(Cbe({fields:e,flat:t}))):obe(e,t)},sortRef(e){if(!e)return e;const t=Ky(e.op,e.field),n=e.order||lbe;return n.signal?Oe(this.add(H9({fields:t,orders:this.signalRef(n.signal)}))):U9(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Se(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&W("Duplicate signal name: "+fe(e));const n=t instanceof i3?t:this.add(hb(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||W("Unrecognized signal name: "+fe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Oe(this.signals[e]):(Se(this.lambdas,e)||(this.lambdas[e]=this.add(hb(null))),Oe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ms(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!be(e)?e:this.signalRef(e.signal||_k(e))},exprRef(e,t){const n={expr:Ms(e,this)};return t&&(n.expr.$name=t),Oe(this.add(kbe(n)))},addBinding(e,t){this.bindings||W("Nested signals do not support binding: "+fe(e)),this.bindings.push(Ge({signal:e},t))},addScaleProj(e,t){Se(this.scales,e)&&W("Duplicate scale or projection name: "+fe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Lbe(t))},addProjection(e,t){this.addScaleProj(e,Ibe(t))},getScale(e){return this.scales[e]||W("Unrecognized scale name: "+fe(e)),this.scales[e]},scaleRef(e){return Oe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Se(this.data,e)&&W("Duplicate data set name: "+fe(e)),this.data[e]=t},getData(e){return this.data[e]||W("Undefined data set name: "+fe(e)),this.data[e]},addDataPipeline(e,t){return Se(this.data,e)&&W("Duplicate data set name: "+fe(e)),this.addData(e,Tl.fromEntries(this,t))}};function _k(e){return(X(e)?Ave:Cve)(e)}function Ave(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(be(i)?i.signal||_k(i):fe(i))}return n+"]"}function Cve(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+fe(r)+":"+(be(i)?i.signal||_k(i):fe(i));return t+"}"}function Tve(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Mve(e,t,n){return be(e)||W("Input Vega specification must be an object."),t=Vb(Tve(),t,e.config),kve(e,new qz(t,n)).toRuntime()}var Dve="5.22.1";Ge(Ef,Fre,tle,$le,vfe,hde,zhe,vhe,Uhe,f0e,x0e,C0e);const Nve=Object.freeze(Object.defineProperty({__proto__:null,Bounds:an,CanvasHandler:mg,CanvasRenderer:O1,DATE:Ir,DAY:Un,DAYOFYEAR:Cs,Dataflow:Kc,Debug:YN,Error:T6,EventStream:ay,Gradient:BI,GroupItem:Ty,HOURS:Kr,Handler:Vu,Info:XN,Item:Cy,MILLISECONDS:Gi,MINUTES:ei,MONTH:Wn,Marks:ti,MultiPulse:eE,None:WN,Operator:Tt,Parameters:sy,Pulse:Tu,QUARTER:Rr,RenderType:wu,Renderer:js,ResourceLoader:E4,SECONDS:gi,SVGHandler:B4,SVGRenderer:W4,SVGStringRenderer:X4,Scenegraph:L4,TIME_UNITS:H6,Transform:V,View:uz,WEEK:fn,Warn:M6,YEAR:$n,accessor:Ur,accessorFields:Gn,accessorName:Kt,array:pe,ascending:Xb,bandwidthNRD:iE,bin:MF,bootstrapCI:DF,boundClip:RP,boundContext:dg,boundItem:ow,boundMark:aP,boundStroke:Ta,changeset:Yl,clampRange:a$,codegenExpression:RL,compare:R6,constant:Jn,cumulativeLogNormal:cE,cumulativeNormal:oy,cumulativeUniform:gE,dayofyear:P$,debounce:I6,defaultLocale:Y6,definition:AF,densityLogNormal:lE,densityNormal:sE,densityUniform:hE,domChild:Sr,domClear:Ni,domCreate:_u,domFind:z4,dotbin:NF,error:W,expressionFunction:on,extend:Ge,extent:ks,extentIndex:u$,falsy:lu,fastmap:id,field:Fr,flush:o$,font:Fy,fontFamily:pg,fontSize:Ps,format:om,formatLocale:a1,formats:J6,hasOwnProperty:Se,id:X0,identity:Qn,inferType:mF,inferTypes:bF,ingest:ht,inherits:ce,inrange:Wc,interpolate:p4,interpolateColors:Oy,interpolateRange:AI,intersect:DP,intersectBoxLine:Xc,intersectPath:S4,intersectPoint:k4,intersectRule:YI,isArray:X,isBoolean:Vl,isDate:Au,isFunction:We,isIterable:l$,isNumber:Ot,isObject:be,isRegExp:c$,isString:me,isTuple:ry,key:P6,lerp:f$,lineHeight:qu,loader:ty,locale:gF,logger:D6,lruCache:d$,markup:G4,merge:h$,mergeConfig:Vb,multiLineOffset:I4,one:rd,pad:g$,panLinear:e$,panLog:t$,panPow:n$,panSymlog:r$,parse:Mve,parseExpression:WS,parseSelector:co,path:hy,pathCurves:_4,pathEqual:IP,pathParse:Tf,pathRectangle:HI,pathRender:p0,pathSymbols:qI,pathTrail:VI,peek:rt,point:Iy,projection:hS,quantileLogNormal:fE,quantileNormal:ly,quantileUniform:pE,quantiles:nE,quantizeInterpolator:CI,quarter:i$,quartiles:rE,get random(){return pi},randomInteger:jne,randomKDE:uE,randomLCG:Pne,randomLogNormal:FF,randomMixture:RF,randomNormal:aE,randomUniform:IF,read:_F,regressionExp:jF,regressionLinear:mE,regressionLoess:BF,regressionLog:PF,regressionPoly:zF,regressionPow:LF,regressionQuad:bE,renderModule:Py,repeat:lh,resetDefaultLocale:Fte,resetSVGClipId:WI,resetSVGDefIds:boe,responseType:vF,runtimeContext:XL,sampleCurve:fy,sampleLogNormal:oE,sampleNormal:uy,sampleUniform:dE,scale:ft,sceneEqual:Y4,sceneFromJSON:oP,scenePickVisit:_1,sceneToJSON:uP,sceneVisit:Wi,sceneZOrder:O4,scheme:m4,serializeXML:EP,setRandom:Rne,span:Z0,splitAccessPath:Rs,stringValue:fe,textMetrics:Bi,timeBin:eF,timeFloor:H$,timeFormatLocale:l0,timeInterval:ud,timeOffset:W$,timeSequence:Z$,timeUnitSpecifier:I$,timeUnits:V6,toBoolean:j6,toDate:L6,toNumber:qn,toSet:Vi,toString:z6,transform:CF,transforms:Ef,truncate:p$,truthy:hi,tupleid:Ae,typeParsers:qx,utcFloor:V$,utcInterval:od,utcOffset:X$,utcSequence:Q$,utcdayofyear:z$,utcquarter:s$,utcweek:B$,version:Dve,visitArray:du,week:j$,writeConfig:Y0,zero:bu,zoomLinear:N6,zoomLog:$6,zoomPow:Km,zoomSymlog:F6},Symbol.toStringTag,{value:"Module"})),$ve="vega-lite",Fve='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Rve="5.5.0",Ive=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Pve="https://vega.github.io/vega-lite/",jve="Vega-Lite is a concise high-level language for interactive visualization.",Lve=["vega","chart","visualization"],zve="build/vega-lite.js",Bve="build/vega-lite.min.js",Uve="build/vega-lite.min.js",qve="build/src/index",Hve="build/src/index.d.ts",Vve={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},Gve=["bin","build","src","vega-lite*","tsconfig.json"],Wve={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"yarn run prebuild && yarn build && yarn shipit",shipit:"auto shipit"},Xve={type:"git",url:"https://github.com/vega/vega-lite.git"},Yve="BSD-3-Clause",Zve={url:"https://github.com/vega/vega-lite/issues"},Qve={"@auto-it/conventional-commits":"^10.37.6","@auto-it/first-time-contributor":"^10.37.6","@babel/core":"^7.19.1","@babel/preset-env":"^7.19.1","@babel/preset-typescript":"^7.18.6","@rollup/plugin-alias":"^4.0.0","@rollup/plugin-babel":"^6.0.0","@rollup/plugin-commonjs":"^23.0.0","@rollup/plugin-json":"^4.1.0","@types/jest":"^27.4.1","@rollup/plugin-node-resolve":"^14.1.0","@types/chai":"^4.3.3","@types/d3":"^7.4.0","@types/mkdirp":"^1.0.2","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.38.0","@typescript-eslint/parser":"^5.38.0",ajv:"^8.11.0","ajv-formats":"^2.1.1",auto:"^10.37.6",chai:"^4.3.6",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^2.2.2",d3:"^7.6.1","del-cli":"^5.0.0",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-prettier":"^4.2.1","gh-pages":"^4.0.0",jest:"^27.5.1","highlight.js":"^11.6.0","jest-dev-server":"^6.1.1",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.7.1",puppeteer:"^15.0.0",rollup:"^2.79.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^14.0.1",terser:"^5.15.0","ts-jest":"^29.0.1","ts-json-schema-generator":"^1.1.1","vega-cli":"^5.22.1",typescript:"~4.8.3","vega-datasets":"~2.5.1","vega-embed":"^6.21.0","vega-tooltip":"^0.28.0","yaml-front-matter":"^4.1.1"},Jve={"@types/clone":"~2.1.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.4.0","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.6.0"},Kve={vega:"^5.22.0"},e2e={node:">=12"},t2e={name:$ve,author:Fve,version:Rve,collaborators:Ive,homepage:Pve,description:jve,keywords:Lve,main:zve,unpkg:Bve,jsdelivr:Uve,module:qve,types:Hve,bin:Vve,files:Gve,scripts:Wve,repository:Xve,license:Yve,bugs:Zve,devDependencies:Qve,dependencies:Jve,peerDependencies:Kve,engines:e2e};var f3={},n2e={get exports(){return f3},set exports(e){f3=e}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var s;try{s=Promise}catch{s=function(){}}function a(d,h,g,p,m){typeof h=="object"&&(g=h.depth,p=h.prototype,m=h.includeNonEnumerable,h=h.circular);var b=[],y=[],v=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof g>"u"&&(g=1/0);function _(x,E){if(x===null)return null;if(E===0)return x;var w,k;if(typeof x!="object")return x;if(n(x,r))w=new r;else if(n(x,i))w=new i;else if(n(x,s))w=new s(function(F,L){x.then(function(H){F(_(H,E-1))},function(H){L(_(H,E-1))})});else if(a.__isArray(x))w=[];else if(a.__isRegExp(x))w=new RegExp(x.source,f(x)),x.lastIndex&&(w.lastIndex=x.lastIndex);else if(a.__isDate(x))w=new Date(x.getTime());else{if(v&&Buffer.isBuffer(x))return Buffer.allocUnsafe?w=Buffer.allocUnsafe(x.length):w=new Buffer(x.length),x.copy(w),w;n(x,Error)?w=Object.create(x):typeof p>"u"?(k=Object.getPrototypeOf(x),w=Object.create(k)):(w=Object.create(p),k=p)}if(h){var A=b.indexOf(x);if(A!=-1)return y[A];b.push(x),y.push(w)}n(x,r)&&x.forEach(function(F,L){var H=_(L,E-1),J=_(F,E-1);w.set(H,J)}),n(x,i)&&x.forEach(function(F){var L=_(F,E-1);w.add(L)});for(var N in x){var O;k&&(O=Object.getOwnPropertyDescriptor(k,N)),!(O&&O.set==null)&&(w[N]=_(x[N],E-1))}if(Object.getOwnPropertySymbols)for(var $=Object.getOwnPropertySymbols(x),N=0;N<$.length;N++){var C=$[N],T=Object.getOwnPropertyDescriptor(x,C);T&&!T.enumerable&&!m||(w[C]=_(x[C],E-1),T.enumerable||Object.defineProperty(w,C,{enumerable:!1}))}if(m)for(var S=Object.getOwnPropertyNames(x),N=0;N<S.length;N++){var M=S[N],T=Object.getOwnPropertyDescriptor(x,M);T&&T.enumerable||(w[M]=_(x[M],E-1),Object.defineProperty(w,M,{enumerable:!1}))}return w}return _(d,g)}a.clonePrototype=function(h){if(h===null)return null;var g=function(){};return g.prototype=h,new g};function u(d){return Object.prototype.toString.call(d)}a.__objToStr=u;function o(d){return typeof d=="object"&&u(d)==="[object Date]"}a.__isDate=o;function l(d){return typeof d=="object"&&u(d)==="[object Array]"}a.__isArray=l;function c(d){return typeof d=="object"&&u(d)==="[object RegExp]"}a.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return a.__getRegExpFlags=f,a}();e.exports&&(e.exports=t)})(n2e);const r2e=f3;var i2e=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},xk=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(s){return function(a){return function(u,o){var l={key:u,value:a[u]},c={key:o,value:a[o]};return s(l,c)}}}(t.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var u,o;if(Array.isArray(a)){for(o="[",u=0;u<a.length;u++)u&&(o+=","),o+=s(a[u])||"null";return o+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(a)-1,c=Object.keys(a).sort(r&&r(a));for(o="",u=0;u<c.length;u++){var f=c[u],d=s(a[f]);d&&(o&&(o+=","),o+=JSON.stringify(f)+":"+d)}return i.splice(l,1),"{"+o+"}"}}(e)};function wk(e){return!!e.or}function Ek(e){return!!e.and}function Sk(e){return!!e.not}function Dm(e,t){if(Sk(e))Dm(e.not,t);else if(Ek(e))for(const n of e.and)Dm(n,t);else if(wk(e))for(const n of e.or)Dm(n,t);else t(e)}function sf(e,t){return Sk(e)?{not:sf(e.not,t)}:Ek(e)?{and:e.and.map(n=>sf(n,t))}:wk(e)?{or:e.or.map(n=>sf(n,t))}:t(e)}const gs=i2e,qe=r2e;function Hz(e){throw new Error(e)}function Lf(e,t){const n={};for(const r of t)Se(e,r)&&(n[r]=e[r]);return n}function Tr(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>xk(e)).join(",")})`};const Ft=xk;function it(e){if(Ot(e))return e;const t=me(e)?e:xk(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function d3(e){return e===!1||e===null}function et(e,t){return e.includes(t)}function Ml(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function kk(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Vz(e,...t){for(const n of t)s2e(e,n??{});return e}function s2e(e,t){for(const n of ee(t))Y0(e,n,t[n],!0)}function ps(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function a2e(e,t){const n=ee(e),r=ee(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Gz(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Ok(e,t){for(const n of e)if(t.has(n))return!0;return!1}function h3(e){const t=new Set;for(const n of e){const i=Rs(n).map((a,u)=>u===0?a:`[${a}]`),s=i.map((a,u)=>i.slice(0,u+1).join(""));for(const a of s)t.add(a)}return t}function Ak(e,t){return e===void 0||t===void 0?!0:Ok(h3(e),h3(t))}function kt(e){return ee(e).length===0}const ee=Object.keys,Zn=Object.values,Xu=Object.entries;function M0(e){return e===!0||e===!1}function Ht(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function qh(e,t){return Sk(e)?`!(${qh(e.not,t)})`:Ek(e)?`(${e.and.map(n=>qh(n,t)).join(") && (")})`:wk(e)?`(${e.or.map(n=>qh(n,t)).join(") || (")})`:t(e)}function gb(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&gb(e[n],t)&&delete e[n],kt(e)}function Ag(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Ck(e,t="datum"){const n=Rs(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(fe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function Wz(e,t="datum"){return`${t}[${fe(Rs(e).join("."))}]`}function u2e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function bi(e){return`${Rs(e).map(u2e).join("\\.")}`}function Dl(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Tk(e){return`${Rs(e).join(".")}`}function zf(e){return e?Rs(e).length:0}function un(...e){for(const t of e)if(t!==void 0)return t}let Xz=42;function Yz(e){const t=++Xz;return e?String(e)+t:t}function o2e(){Xz=42}function Zz(e){return Qz(e)?e:`__${e}`}function Qz(e){return e.startsWith("__")}function D0(e){if(e!==void 0)return(e%360+360)%360}function av(e){return Ot(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Cg=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ya="row",va="column",uv="facet",Wt="x",kn="y",es="x2",Bs="y2",fo="xOffset",bd="yOffset",ts="radius",Na="radius2",xi="theta",$a="theta2",Us="latitude",qs="longitude",ns="latitude2",yi="longitude2",jr="color",Hs="fill",Vs="stroke",Lr="shape",Fa="size",tc="angle",Ra="opacity",ho="fillOpacity",go="strokeOpacity",po="strokeWidth",mo="strokeDash",Tg="text",Mg="order",Dg="detail",ov="key",Nl="tooltip",lv="href",cv="url",fv="description",l2e={x:1,y:1,x2:1,y2:1},Jz={theta:1,theta2:1,radius:1,radius2:1};function Kz(e){return e in Jz}const Mk={longitude:1,longitude2:1,latitude:1,latitude2:1};function c2e(e){switch(e){case Us:return"y";case ns:return"y2";case qs:return"x";case yi:return"x2"}}function f2e(e){return e in Mk}const d2e=ee(Mk),Dk=Object.assign(Object.assign(Object.assign(Object.assign({},l2e),Jz),Mk),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function af(e){return e===jr||e===Hs||e===Vs}const eB={row:1,column:1,facet:1},ci=ee(eB),Nk=Object.assign(Object.assign({},Dk),eB),h2e=ee(Nk),g2e=Cg(Nk,["order","detail","tooltip"]),p2e=Cg(g2e,["row","column","facet"]);function m2e(e){return!!p2e[e]}function tB(e){return!!Nk[e]}const b2e=[es,Bs,ns,yi,$a,Na];function nB(e){return nc(e)!==e}function nc(e){switch(e){case es:return Wt;case Bs:return kn;case ns:return Us;case yi:return qs;case $a:return xi;case Na:return ts}return e}function Yu(e){if(Kz(e))switch(e){case xi:return"startAngle";case $a:return"endAngle";case ts:return"outerRadius";case Na:return"innerRadius"}return e}function Gs(e){switch(e){case Wt:return es;case kn:return Bs;case Us:return ns;case qs:return yi;case xi:return $a;case ts:return Na}}function zr(e){switch(e){case Wt:case es:return"width";case kn:case Bs:return"height"}}function y2e(e){switch(e){case Wt:return"xOffset";case kn:return"yOffset";case es:return"x2Offset";case Bs:return"y2Offset";case xi:return"thetaOffset";case ts:return"radiusOffset";case $a:return"theta2Offset";case Na:return"radius2Offset"}}function rB(e){switch(e){case Wt:return"xOffset";case kn:return"yOffset"}}function iB(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const v2e=ee(Dk),$k=Cg(Dk,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),_2e=ee($k),Fk={x:1,y:1},Ws=ee(Fk);function On(e){return e in Fk}const Rk={theta:1,radius:1},x2e=ee(Rk);function dv(e){return e==="width"?Wt:kn}const sB={xOffset:1,yOffset:1};function yd(e){return e in sB}const aB=Cg($k,["text","tooltip","href","url","description","detail","key","order"]),w2e=ee(aB);function E2e(e){return!!$k[e]}function S2e(e){switch(e){case jr:case Hs:case Vs:case Fa:case Lr:case Ra:case po:case mo:return!0;case ho:case go:case tc:return!1}}const uB=Object.assign(Object.assign(Object.assign(Object.assign({},Fk),Rk),sB),aB),hv=ee(uB);function bo(e){return!!uB[e]}function k2e(e,t){return A2e(e)[t]}const oB={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},O2e=Cg(oB,["geoshape"]);function A2e(e){switch(e){case jr:case Hs:case Vs:case fv:case Dg:case ov:case Nl:case lv:case Mg:case Ra:case ho:case go:case po:case uv:case ya:case va:return oB;case Wt:case kn:case fo:case bd:case Us:case qs:return O2e;case es:case Bs:case ns:case yi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Fa:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case mo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Lr:return{point:"always",geoshape:"always"};case Tg:return{text:"always"};case tc:return{point:"always",square:"always",text:"always"};case cv:return{image:"always"};case xi:return{text:"always",arc:"always"};case ts:return{text:"always",arc:"always"};case $a:case Na:return{arc:"always"}}}function F_(e){switch(e){case Wt:case kn:case xi:case ts:case fo:case bd:case Fa:case tc:case po:case Ra:case ho:case go:case es:case Bs:case $a:case Na:return;case uv:case ya:case va:case Lr:case mo:case Tg:case Nl:case lv:case cv:case fv:return"discrete";case jr:case Hs:case Vs:return"flexible";case Us:case qs:case ns:case yi:case Dg:case ov:case Mg:return}}const C2e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},T2e={count:1,min:1,max:1};function Aa(e){return!!e&&!!e.argmin}function yo(e){return!!e&&!!e.argmax}function Ik(e){return me(e)&&!!C2e[e]}const M2e=new Set(["count","valid","missing","distinct"]);function lB(e){return me(e)&&M2e.has(e)}function D2e(e){return me(e)&&et(["min","max"],e)}const N2e=new Set(["count","sum","distinct","valid","missing"]),$2e=new Set(["mean","average","median","q1","q3","min","max"]);function cB(e){return Vl(e)&&(e=Sv(e,void 0)),"bin"+ee(e).map(t=>gv(e[t])?Ht(`_${t}_${Xu(e[t])}`):Ht(`_${t}_${e[t]}`)).join("")}function Pt(e){return e===!0||rc(e)&&!e.binned}function Mn(e){return e==="binned"||rc(e)&&e.binned===!0}function rc(e){return be(e)}function gv(e){return e==null?void 0:e.param}function s7(e){switch(e){case ya:case va:case Fa:case jr:case Hs:case Vs:case po:case Ra:case ho:case go:case Lr:return 6;case mo:return 4;default:return 10}}function Ng(e){return!!(e!=null&&e.expr)}function Er(e){const t=ee(e||{}),n={};for(const r of t)n[r]=Yr(e[r]);return n}var F2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fB(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:a,color:u,subtitleColor:o,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:g}=e,p=F2e(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},p),u?{fill:u}:{}),b=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),s!==void 0?{angle:s}:{}),a!==void 0?{limit:a}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o?{subtitleColor:o}:{}),l?{subtitleFont:l}:{}),c?{subtitleFontSize:c}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),h?{subtitleLineHeight:h}:{}),g?{subtitlePadding:g}:{}),v=Lf(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:v,nonMarkTitleProperties:b,subtitle:y}}function mu(e){return me(e)||X(e)&&me(e[0])}function Ee(e){return!!(e!=null&&e.signal)}function vo(e){return!!e.step}function R2e(e){return X(e)?!1:"fields"in e&&!("data"in e)}function I2e(e){return X(e)?!1:"fields"in e&&"data"in e}function da(e){return X(e)?!1:"field"in e&&"data"in e}const P2e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},j2e=ee(P2e),L2e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},g3=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var Pk=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dB(e){const t=X(e.condition)?e.condition.map(a7):a7(e.condition);return Object.assign(Object.assign({},Yr(e)),{condition:t})}function Yr(e){if(Ng(e)){const{expr:t}=e,n=Pk(e,["expr"]);return Object.assign({signal:t},n)}return e}function a7(e){if(Ng(e)){const{expr:t}=e,n=Pk(e,["expr"]);return Object.assign({signal:t},n)}return e}function Bt(e){if(Ng(e)){const{expr:t}=e,n=Pk(e,["expr"]);return Object.assign({signal:t},n)}return Ee(e)?e:e!==void 0?{value:e}:void 0}function z2e(e){return Ee(e)?e.signal:fe(e)}function u7(e){return Ee(e)?e.signal:fe(e.value)}function _a(e){return Ee(e)?e.signal:e==null?null:fe(e)}function B2e(e,t,n){for(const r of n){const i=$l(r,t.markDef,t.config);i!==void 0&&(e[r]=Bt(i))}return e}function hB(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function mt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:$l(e,t,n,r)}function $l(e,t,n,{vgChannel:r}={}){return un(r?pb(e,t,n.style):void 0,pb(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function pb(e,t,n){return gB(e,hB(t),n)}function gB(e,t,n){t=pe(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function pB(e,t){return pe(e).reduce((n,r)=>{var i;return n.field.push(de(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function mB(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(gs(i,r))return;n.push(r)}),n}function bB(e,t){return gs(e,t)||!t?e:e?[...pe(e),...pe(t)].join(", "):t}function yB(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((mu(n)||Ee(n))&&(mu(r)||Ee(r)))return{explicit:e.explicit,value:bB(n,r)};if(mu(n)||Ee(n))return{explicit:e.explicit,value:n};if(mu(r)||Ee(r))return{explicit:e.explicit,value:r};if(!mu(n)&&!Ee(n)&&!mu(r)&&!Ee(r))return{explicit:e.explicit,value:mB(n,r)};throw new Error("It should never reach here")}function jk(e){return`Invalid specification ${Ft(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const U2e='Autosize "fit" only works for single views and layered views.';function o7(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function l7(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function c7(e){return e?`Dropping "fit-${e}" because spec has discrete ${zr(e)}.`:'Dropping "fit" because spec has discrete size.'}function Lk(e){return`Unknown field for ${e}. Cannot calculate view size.`}function f7(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function q2e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function H2e(e){return`The "nearest" transform is not supported for ${e} marks.`}function vB(e){return`Selection not supported for ${e} yet.`}function V2e(e){return`Cannot find a selection named "${e}".`}const G2e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",W2e="Legend bindings are only supported for selections over an individual field or encoding channel.";function X2e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Y2e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Z2e="The same selection must be used to override scale domains in a layered view.",Q2e='Interval selections should be initialized using "x" and/or "y" keys.';function J2e(e){return`Unknown repeated value "${e}".`}function d7(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const K2e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function e_e(e){return`Unrecognized parse "${e}".`}function h7(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const t_e="Attempt to add the same child twice.";function n_e(e){return`Ignoring an invalid transform: ${Ft(e)}.`}const r_e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function g7(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function i_e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ft(t)} is overridden by a child projection ${Ft(n)}.`}const s_e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function a_e(e){return`${e}Offset dropped because ${e} is continuous`}function u_e(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function o_e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ft(n)}}.`}function _B(e){return`Invalid field type "${e}".`}function l_e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function c_e(e){return`Invalid aggregation operator "${e}".`}function xB(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function f_e(e){return`Position range does not support relative band size for ${e}.`}function p3(e,t){return`Dropping ${Ft(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const d_e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function pv(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function h_e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function g_e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function p_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function m_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function b_e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function R_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function y_e(e){return`The ${e} for range marks cannot be an expression`}function v_e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function __e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function x_e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function w_e(e){return`Cannot use the relative band size with ${e} scale.`}function E_e(e){return`Using unaggregated domain with raw field has no effect (${Ft(e)}).`}function S_e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function k_e(e){return`Unaggregated domain is currently unsupported for log scale (${Ft(e)}).`}function O_e(e){return`Cannot apply size to non-oriented mark "${e}".`}function A_e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function C_e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function wB(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function EB(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function T_e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ft(n)} and ${Ft(r)}). Using ${Ft(n)}.`}function M_e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ft(n)} and ${Ft(r)}). Using the union of the two domains.`}function D_e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function N_e(e){return`Dropping sort property ${Ft(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const p7="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",$_e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",F_e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",R_e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function I_e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function P_e(e){return`Cannot stack non-linear scale (${e}).`}function j_e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function mb(e,t){return`Invalid ${e}: ${Ft(t)}.`}function L_e(e){return`Dropping day from datetime ${Ft(e)} as day cannot be combined with other units.`}function z_e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function B_e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function U_e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function m7(e){return`1D error band does not support ${e}.`}function SB(e){return`Channel ${e} is required for "binned" bin.`}function q_e(e){return`Channel ${e} should not be used with "binned" bin.`}function H_e(e){return`Domain for ${e} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const kB=D6(M6);let Bf=kB;function V_e(e){return Bf=e,Bf}function G_e(){return Bf=kB,Bf}function ne(...e){Bf.warn(...e)}function W_e(...e){Bf.debug(...e)}function ic(e){if(e&&be(e)){for(const t of Bk)if(t in e)return!0}return!1}const OB=["january","february","march","april","may","june","july","august","september","october","november","december"],X_e=OB.map(e=>e.substr(0,3)),AB=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Y_e=AB.map(e=>e.substr(0,3));function Z_e(e){if(av(e)&&(e=+e),Ot(e))return e>4&&ne(mb("quarter",e)),e-1;throw new Error(mb("quarter",e))}function Q_e(e){if(av(e)&&(e=+e),Ot(e))return e-1;{const t=e.toLowerCase(),n=OB.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=X_e.indexOf(r);if(i!==-1)return i;throw new Error(mb("month",e))}}function J_e(e){if(av(e)&&(e=+e),Ot(e))return e%7;{const t=e.toLowerCase(),n=AB.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Y_e.indexOf(r);if(i!==-1)return i;throw new Error(mb("day",e))}}function zk(e,t){const n=[];if(t&&e.day!==void 0&&ee(e).length>1&&(ne(L_e(e)),e=qe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Q_e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Z_e(e.quarter):e.quarter;n.push(Ot(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?J_e(e.day):e.day;n.push(Ot(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function N0(e){const n=zk(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function K_e(e){const n=zk(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function exe(e){const t=zk(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var txe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const CB={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Bk=ee(CB);function nxe(e){return!!CB[e]}function Uk(e){return e.startsWith("utc")}function rxe(e){return e.substr(3)}const ixe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function qk(e){return Bk.filter(t=>TB(e,t))}function TB(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function sxe(e,t,{end:n}={end:!1}){const r=Ck(t),i=Uk(e)?"utc":"";function s(o){return o==="quarter"?`(${i}quarter(${r})-1)`:`${i}${o}(${r})`}let a;const u={};for(const o of Bk)TB(e,o)&&(u[o]=s(o),a=o);return n&&(u[a]+="+1"),K_e(u)}function MB(e){if(!e)return;const t=qk(e);return`timeUnitSpecifier(${Ft(t)}, ${Ft(ixe)})`}function axe(e,t,n){if(!e)return;const r=MB(e);return`${n||Uk(e)?"utc":"time"}Format(${t}, ${r})`}function Kn(e){if(!e)return;let t;return me(e)?t={unit:e}:be(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),Uk(t.unit)&&(t.utc=!0,t.unit=rxe(t.unit)),t}function uxe(e){const t=Kn(e),{utc:n}=t,r=txe(t,["utc"]);return r.unit?(n?"utc":"")+ee(r).map(i=>Ht(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+ee(r).map(i=>Ht(`_${i}_${r[i]}`)).join("")}function oxe(e){return e==null?void 0:e.param}function Hk(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Vk(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Gk(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Wk(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Xk(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Yk(e){if(e!=null&&e.field){if(X(e.range)&&e.range.length===2)return!0;if(Ee(e.range))return!0}return!1}function Zk(e){return!!(e!=null&&e.field)&&(X(e.oneOf)||X(e.in))}function lxe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function DB(e){return Zk(e)||Hk(e)||Yk(e)||Vk(e)||Wk(e)||Gk(e)||Xk(e)}function as(e,t){return kv(e,{timeUnit:t,wrapTime:!0})}function cxe(e,t){return e.map(n=>as(n,t))}function NB(e,t=!0){var n;const{field:r}=e,i=(n=Kn(e.timeUnit))===null||n===void 0?void 0:n.unit,s=i?`time(${sxe(i,r)})`:de(e,{expr:"datum"});if(Hk(e))return`${s}===${as(e.equal,i)}`;if(Vk(e)){const a=e.lt;return`${s}<${as(a,i)}`}else if(Wk(e)){const a=e.gt;return`${s}>${as(a,i)}`}else if(Gk(e)){const a=e.lte;return`${s}<=${as(a,i)}`}else if(Xk(e)){const a=e.gte;return`${s}>=${as(a,i)}`}else{if(Zk(e))return`indexof([${cxe(e.oneOf,i).join(",")}], ${s}) !== -1`;if(lxe(e))return Qk(s,e.valid);if(Yk(e)){const{range:a}=e,u=Ee(a)?{signal:`${a.signal}[0]`}:a[0],o=Ee(a)?{signal:`${a.signal}[1]`}:a[1];if(u!==null&&o!==null&&t)return"inrange("+s+", ["+as(u,i)+", "+as(o,i)+"])";const l=[];return u!==null&&l.push(`${s} >= ${as(u,i)}`),o!==null&&l.push(`${s} <= ${as(o,i)}`),l.length>0?l.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ft(e)}`)}function Qk(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function fxe(e){var t;return DB(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=Kn(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const $g={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function dxe(e){return e==="quantitative"||e==="temporal"}function $B(e){return e==="ordinal"||e==="nominal"}const Fl=$g.quantitative,Jk=$g.ordinal,Uf=$g.temporal,Kk=$g.nominal,vd=$g.geojson;function hxe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Fl:return"quantitative";case"t":case Uf:return"temporal";case"o":case Jk:return"ordinal";case"n":case Kk:return"nominal";case vd:return"geojson"}}var gxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Mr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},m3={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function pxe(e,t){const n=m3[e],r=m3[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const mxe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function b7(e){return mxe[e]}const FB=new Set(["linear","log","pow","sqrt","symlog"]),RB=new Set([...FB,"time","utc"]);function IB(e){return FB.has(e)}const PB=new Set(["quantile","quantize","threshold"]),bxe=new Set([...RB,...PB,"sequential","identity"]),yxe=new Set(["ordinal","bin-ordinal","point","band"]);function An(e){return yxe.has(e)}function ri(e){return bxe.has(e)}function Li(e){return RB.has(e)}function qf(e){return PB.has(e)}const vxe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function _xe(e){return!me(e)&&!!e.name}function jB(e){return e==null?void 0:e.param}function xxe(e){return e==null?void 0:e.unionWith}function wxe(e){return be(e)&&"field"in e}const Exe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Sxe=gxe(Exe,["type","domain","range","rangeMax","rangeMin","scheme"]),kxe=ee(Sxe);function b3(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Li(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Li(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return Li(e);case"nice":return Li(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ri(e)&&!et(["log","time","utc","threshold","quantile"],e)}}function LB(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return af(e)?void 0:x_e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Oxe(e,t){return et([Jk,Kk],t)?e===void 0||An(e):t===Uf?et([Mr.TIME,Mr.UTC,void 0],e):t===Fl?IB(e)||qf(e)||e===void 0:!0}function Axe(e,t,n=!1){if(!bo(e))return!1;switch(e){case Wt:case kn:case fo:case bd:case xi:case ts:return Li(t)||t==="band"?!0:t==="point"?!n:!1;case Fa:case po:case Ra:case ho:case go:case tc:return Li(t)||qf(t)||et(["band","point","ordinal"],t);case jr:case Hs:case Vs:return t!=="band";case mo:case Lr:return t==="ordinal"||qf(t)}}const br={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},zB=br.arc,mv=br.area,bv=br.bar,Cxe=br.image,yv=br.line,vv=br.point,Txe=br.rect,bb=br.rule,BB=br.text,e5=br.tick,Mxe=br.trail,t5=br.circle,n5=br.square,UB=br.geoshape;function _o(e){return["line","area","trail"].includes(e)}function qB(e){return["rect","bar","image","arc"].includes(e)}const Dxe=new Set(ee(br));function Ds(e){return e.type}const Nxe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],$xe=["fill","fillOpacity"],Fxe=[...Nxe,...$xe],Rxe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},y7=ee(Rxe),Ixe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},Pxe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},jxe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},HB=ee(jxe);function Rl(e){return e&&e.band!=null}const Lxe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},VB=5,zxe={binSpacing:1,continuousBandSize:VB,timeUnitBandPosition:.5},Bxe={binSpacing:0,continuousBandSize:VB,timeUnitBandPosition:.5},Uxe={thickness:1};function qxe(e){return Ds(e)?e.type:e}function r5(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,a=s5(e);return le(n)&&!lB(n.aggregate)&&i&&Li(i.get("type"))?Hxe({fieldDef:n,channel:t,markDef:r,ref:a,config:s}):a}function Hxe({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return _o(n.type)?r:mt("invalid",n,i)===null?[Vxe(e,t),r]:r}function Vxe(e,t){const n=i5(e,!0),i=nc(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function i5(e,t=!0){return Qk(me(e)?e:de(e,{expr:"datum"}),!t)}function Gxe(e){const{datum:t}=e;return ic(t)?N0(t):`${Ft(t)}`}function dl(e,t,n,r){const i={};if(t&&(i.scale=t),Xs(e)){const{datum:s}=e;ic(s)?i.signal=N0(s):Ee(s)?i.signal=s.signal:Ng(s)?i.signal=s.expr:i.value=s}else i.field=de(e,n);if(r){const{offset:s,band:a}=r;s&&(i.offset=s),a&&(i.band=a)}return i}function yb({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:s=.5}){const a=0<s&&s<1?"datum":void 0,u=de(t,{expr:a,suffix:i}),o=n!==void 0?de(n,{expr:a}):de(t,{suffix:"end",expr:a}),l={};if(s===0||s===1){l.scale=e;const c=s===0?u:o;l.field=c}else{const c=Ee(s)?`${s.signal} * ${u} + (1-${s.signal}) * ${o}`:`${s} * ${u} + ${1-s} * ${o}`;l.signal=`scale("${e}", ${c})`}return r&&(l.offset=r),l}function s5({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:u,offset:o,defaultRef:l,bandPosition:c}){var f;if(t){if(ze(t)){const d=a==null?void 0:a.get("type");if(vi(t)){c??(c=KB({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:h,timeUnit:g,type:p}=t;if(Pt(h)||c&&g&&p===Uf)return u!=null&&u.impute?dl(t,s,{binSuffix:"mid"},{offset:o}):c&&!An(d)?yb({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:o}):dl(t,s,Pg(t,e)?{binSuffix:"range"}:{},{offset:o});if(Mn(h)){if(le(n))return yb({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:o});ne(SB(e===Wt?es:Bs))}}return dl(t,s,An(d)?{binSuffix:"range"}:{},{offset:o,band:d==="band"?(f=c??t.bandPosition)!==null&&f!==void 0?f:.5:void 0})}else if(Xi(t)){const d=t.value,h=o?{offset:o}:{};return Object.assign(Object.assign({},Hh(e,d)),h)}}return We(l)&&(l=l()),l&&Object.assign(Object.assign({},l),o?{offset:o}:{})}function Hh(e,t){return et(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:et(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Bt(t)}function Il(e){return e&&e!=="number"&&e!=="time"}function GB(e,t,n){return`${e}(${t}${n?`, ${Ft(n)}`:""})`}const Wxe="  ";function a5({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var a,u;if(Il(n))return zi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=WB(e,r,i),l=Hf(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(l==="quantitative"){if(i&&s.normalizedNumberFormatType)return zi({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return zi({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(l==="temporal"&&s.timeFormatType&&le(e)&&e.timeUnit===void 0)return zi({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Gf(e)){const c=Yxe({field:o,timeUnit:le(e)?(a=Kn(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:sc(e)&&((u=e.scale)===null||u===void 0?void 0:u.type)===Mr.UTC});return c?{signal:c}:void 0}if(t=y3({type:l,specifiedFormat:t,config:s,normalizeStack:i}),le(e)&&Pt(e.bin)){const c=de(e,{expr:r,binSuffix:"end"});return{signal:Fg(o,c,t,n,s)}}else return t||Hf(e)==="quantitative"?{signal:`${ZB(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function WB(e,t,n){return le(e)?n?`${de(e,{expr:t,suffix:"end"})}-${de(e,{expr:t,suffix:"start"})}`:de(e,{expr:t}):Gxe(e)}function zi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:a}){if(a??(a=WB(e,r,i)),a!=="datum.value"&&le(e)&&Pt(e.bin)){const u=de(e,{expr:r,binSuffix:"end"});return{signal:Fg(a,u,t,n,s)}}return{signal:GB(n,a,t)}}function XB(e,t,n,r,i,s){var a;if(!Il(r)&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Hf(e)==="quantitative"&&(i.normalizedNumberFormatType&&Vf(e)&&e.stack==="normalize"||i.numberFormatType))){if(Vf(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return y3({type:"quantitative",config:i,normalizeStack:!0});if(Gf(e)){const u=le(e)?(a=Kn(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return u===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Xxe({specifiedFormat:n,timeUnit:u,config:i,omitTimeFormatConfig:s})}return y3({type:t,specifiedFormat:n,config:i})}}function YB(e,t,n){var r;if(e&&(Ee(e)||e==="number"||e==="time"))return e;if(Gf(t)&&n!=="time"&&n!=="utc")return le(t)&&(!((r=Kn(t==null?void 0:t.timeUnit))===null||r===void 0)&&r.utc)?"utc":"time"}function y3({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(me(t))return t;if(e===Fl)return r?n.normalizedNumberFormat:n.numberFormat}function Xxe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:MB(t)}:r?void 0:n.timeFormat)}function ZB(e,t){return`format(${e}, "${t||""}")`}function v7(e,t,n,r){var i;return Il(n)?GB(n,e,t):ZB(e,(i=me(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function Fg(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Fg(e,t,i.numberFormat,i.numberFormatType,i);const s=v7(e,n,r,i),a=v7(t,n,r,i);return`${Qk(e,!1)} ? "null" : ${s} + "${Wxe}" + ${a}`}function Yxe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=me(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):axe(t,e,s)}const _v="min",Zxe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function _7(e){return e in Zxe}function QB(e){return!!(e!=null&&e.encoding)}function xs(e){return e&&(e.op==="count"||!!e.field)}function JB(e){return e&&X(e)}function Rg(e){return"row"in e||"column"in e}function u5(e){return!!e&&"header"in e}function xv(e){return"facet"in e}var v3=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Qxe(e){return e.param}function Jxe(e){return e&&!me(e)&&"repeat"in e}function x7(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function o5(e){return"sort"in e}function KB({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ze(e)&&e.bandPosition!==void 0)return e.bandPosition;if(le(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return qB(n.type)?0:$l("timeUnitBandPosition",n,r);if(Pt(s))return .5}}function eU({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:a}){var u,o,l;const c=zr(e),f=mt(a?"size":c,r,i,{vgChannel:c});if(f!==void 0)return f;if(le(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:$l("timeUnitBandSize",r,i)};if(Pt(h)&&!An(s))return{band:1}}if(qB(r.type))return s?An(s)?((u=i[r.type])===null||u===void 0?void 0:u.discreteBandSize)||{band:1}:(o=i[r.type])===null||o===void 0?void 0:o.continuousBandSize:(l=i[r.type])===null||l===void 0?void 0:l.discreteBandSize}function tU(e,t,n,r){return Pt(e.bin)||e.timeUnit&&vi(e)&&e.type==="temporal"?KB({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function wv(e){return e&&"condition"in e}function Ev(e){const t=e==null?void 0:e.condition;return!!t&&!X(t)&&le(t)}function Ig(e){const t=e==null?void 0:e.condition;return!!t&&!X(t)&&ze(t)}function Kxe(e){const t=e==null?void 0:e.condition;return!!t&&(X(t)||Xi(t))}function le(e){return e&&(!!e.field||e.aggregate==="count")}function Hf(e){return e==null?void 0:e.type}function Xs(e){return e&&"datum"in e}function ms(e){return vi(e)&&!vb(e)||_3(e)}function _3(e){return Xs(e)&&Ot(e.datum)}function ze(e){return le(e)||Xs(e)}function vi(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Xi(e){return e&&"value"in e&&"value"in e}function sc(e){return e&&("scale"in e||"sort"in e)}function Vf(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function nU(e){return e&&"legend"in e}function rU(e){return e&&("format"in e||"formatType"in e)}function ewe(e){return Tr(e,["legend","axis","header","scale"])}function twe(e){return"op"in e}function de(e,t={}){var n,r,i;let s=e.field;const a=t.prefix;let u=t.suffix,o="";if(rwe(e))s=Zz("count");else{let l;if(!t.nofn)if(twe(e))l=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;Pt(c)?(l=cB(c),u=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):f?yo(f)?(o=`["${s}"]`,s=`argmax_${f.argmax}`):Aa(f)?(o=`["${s}"]`,s=`argmin_${f.argmin}`):l=String(f):d&&(l=uxe(d),u=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}l&&(s=s?`${l}_${s}`:l)}return u&&(s=`${s}_${u}`),a&&(s=`${a}_${s}`),t.forAs?Tk(s):t.expr?Wz(s,t.expr)+o:bi(s)+o}function vb(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return le(e)&&!!e.bin;case"temporal":return!1}throw new Error(_B(e.type))}function nwe(e){var t;return sc(e)&&qf((t=e.scale)===null||t===void 0?void 0:t.type)}function rwe(e){return e.aggregate==="count"}function iwe(e,t){var n;const{field:r,bin:i,timeUnit:s,aggregate:a}=e;if(a==="count")return t.countTitle;if(Pt(i))return`${r} (binned)`;if(s){const u=(n=Kn(s))===null||n===void 0?void 0:n.unit;if(u)return`${r} (${qk(u).join("-")})`}else if(a)return yo(a)?`${r} for max ${a.argmax}`:Aa(a)?`${r} for min ${a.argmin}`:`${Ag(a)} of ${r}`;return r}function swe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(yo(t))return`${i} for argmax(${t.argmax})`;if(Aa(t))return`${i} for argmin(${t.argmin})`;const s=Kn(r),a=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Pt(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const iU=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return swe(e);default:return iwe(e,t)}};let sU=iU;function aU(e){sU=e}function awe(){aU(iU)}function uf(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,s;const a=(i=l5(e))===null||i===void 0?void 0:i.title;if(!le(e))return a??e.title;const u=e,o=r?c5(u,t):void 0;return n?un(a,u.title,o):(s=a??u.title)!==null&&s!==void 0?s:o}function l5(e){if(Vf(e)&&e.axis)return e.axis;if(nU(e)&&e.legend)return e.legend;if(u5(e)&&e.header)return e.header}function c5(e,t){return sU(e,t)}function _b(e){var t;if(rU(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=l5(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function uwe(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(o5(e)&&X(e.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:s}=e;if(s)return"temporal";if(i||r&&!yo(r)&&!Aa(r))return"quantitative";if(sc(e)&&(!((n=e.scale)===null||n===void 0)&&n.type))switch(m3[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ns(e){if(le(e))return e;if(Ev(e))return e.condition}function dn(e){if(ze(e))return e;if(Ig(e))return e.condition}function uU(e,t,n,r={}){if(me(e)||Ot(e)||Vl(e)){const i=me(e)?"string":Ot(e)?"number":"boolean";return ne(o_e(t,i,e)),{value:e}}return ze(e)?xb(e,t,n,r):Ig(e)?Object.assign(Object.assign({},e),{condition:xb(e.condition,t,n,r)}):e}function xb(e,t,n,r){if(rU(e)){const{format:i,formatType:s}=e,a=v3(e,["format","formatType"]);if(Il(s)&&!n.customFormatTypes)return ne(g7(t)),xb(a,t,n,r)}else{const i=Vf(e)?"axis":nU(e)?"legend":u5(e)?"header":null;if(i&&e[i]){const s=e[i],{format:a,formatType:u}=s,o=v3(s,["format","formatType"]);if(Il(u)&&!n.customFormatTypes)return ne(g7(t)),xb(Object.assign(Object.assign({},e),{[i]:o}),t,n,r)}}return le(e)?f5(e,t,r):owe(e)}function owe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ot(n)?"quantitative":me(n)?"nominal":ic(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function f5(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:a}=e,u=Object.assign({},e);if(!n&&r&&!Ik(r)&&!yo(r)&&!Aa(r)&&(ne(c_e(r)),delete u.aggregate),i&&(u.timeUnit=Kn(i)),a&&(u.field=`${a}`),Pt(s)&&(u.bin=Sv(s,t)),Mn(s)&&!On(t)&&ne(q_e(t)),vi(u)){const{type:o}=u,l=hxe(o);o!==l&&(u.type=l),o!=="quantitative"&&lB(r)&&(ne(l_e(o,r)),u.type="quantitative")}else if(!nB(t)){const o=uwe(u,t);u.type=o}if(vi(u)){const{compatible:o,warning:l}=lwe(u,t)||{};o===!1&&ne(l)}if(o5(u)&&me(u.sort)){const{sort:o}=u;if(_7(o))return Object.assign(Object.assign({},u),{sort:{encoding:o}});const l=o.substr(1);if(o.charAt(0)==="-"&&_7(l))return Object.assign(Object.assign({},u),{sort:{encoding:l,order:"descending"}})}if(u5(u)){const{header:o}=u;if(o){const{orient:l}=o,c=v3(o,["orient"]);if(l)return Object.assign(Object.assign({},u),{header:Object.assign(Object.assign({},c),{labelOrient:o.labelOrient||l,titleOrient:o.titleOrient||l})})}}return u}function Sv(e,t){return Vl(e)?{maxbins:s7(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:s7(t)}):e}const Lc={compatible:!0};function lwe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ya:case va:case uv:return vb(e)?Lc:{compatible:!1,warning:p_e(t)};case Wt:case kn:case fo:case bd:case jr:case Hs:case Vs:case Tg:case Dg:case ov:case Nl:case lv:case cv:case tc:case xi:case ts:case fv:return Lc;case qs:case yi:case Us:case ns:return n!==Fl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Lc;case Ra:case ho:case go:case po:case Fa:case $a:case Na:case es:case Bs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Lc;case Lr:case mo:return!vb(e)&&!nwe(e)?{compatible:!1,warning:m_e(t)}:Lc;case Mg:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Lc}}function Gf(e){const{formatType:t}=_b(e);return t==="time"||!t&&cwe(e)}function cwe(e){return e&&(e.type==="temporal"||le(e)&&!!e.timeUnit)}function kv(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var s;const a=t&&((s=Kn(t))===null||s===void 0?void 0:s.unit);let u=a||n==="temporal",o;return Ng(e)?o=e.expr:Ee(e)?o=e.signal:ic(e)?(u=!0,o=N0(e)):(me(e)||Ot(e))&&u&&(o=`datetime(${Ft(e)})`,nxe(a)&&(Ot(e)&&e<1e4||me(e)&&isNaN(Date.parse(e)))&&(o=N0({[a]:e}))),o?r&&u?`time(${o})`:o:i?void 0:Ft(e)}function oU(e,t){const{type:n}=e;return t.map(r=>{const i=kv(r,{timeUnit:le(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function Pg(e,t){return Pt(e.bin)?bo(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const w7={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function jg(e){return e==null?void 0:e.condition}const lU=["domain","grid","labels","ticks","title"],fwe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},cU={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},dwe=Object.assign(Object.assign({},cU),{style:1,labelExpr:1,encoding:1});function E7(e){return!!dwe[e]}const hwe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},fU=ee(hwe);function Ia(e){return"mark"in e}class Ov{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ia(t)?qxe(t.mark)===this.name:!1}}var gwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hl(e,t){const n=e&&e[t];return n?X(n)?Ml(n,r=>!!r.field):le(n)||Ev(n):!1}function dU(e,t){const n=e&&e[t];return n?X(n)?Ml(n,r=>!!r.field):le(n)||Xs(n)||Ig(n):!1}function x3(e,t){if(On(t)){const n=e[t];if((le(n)||Xs(n))&&$B(n.type)){const r=rB(t);return dU(e,r)}}return!1}function d5(e){return Ml(h2e,t=>{if(hl(e,t)){const n=e[t];if(X(n))return Ml(n,r=>!!r.aggregate);{const r=Ns(n);return r&&!!r.aggregate}}return!1})}function hU(e,t){const n=[],r=[],i=[],s=[],a={};return h5(e,(u,o)=>{if(le(u)){const{field:l,aggregate:c,bin:f,timeUnit:d}=u,h=gwe(u,["field","aggregate","bin","timeUnit"]);if(c||d||f){const g=l5(u),p=g==null?void 0:g.title;let m=de(u,{forAs:!0});const b=Object.assign(Object.assign(Object.assign({},p?[]:{title:uf(u,t,{allowDisabling:!0})}),h),{field:m});if(c){let y;if(yo(c)?(y="argmax",m=de({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${m}.${l}`):Aa(c)?(y="argmin",m=de({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(y=c),y){const v={op:y,as:m};l&&(v.field=l),s.push(v)}}else if(n.push(m),vi(u)&&Pt(f)){if(r.push({bin:f,field:l,as:m}),n.push(de(u,{binSuffix:"end"})),Pg(u,o)&&n.push(de(u,{binSuffix:"range"})),On(o)){const y={field:`${m}_end`};a[`${o}2`]=y}b.bin="binned",nB(o)||(b.type=Fl)}else if(d){i.push({timeUnit:d,field:l,as:m});const y=vi(u)&&u.type!==Uf&&"time";y&&(o===Tg||o===Nl?b.formatType=y:E2e(o)?b.legend=Object.assign({formatType:y},b.legend):On(o)&&(b.axis=Object.assign({formatType:y},b.axis)))}a[o]=b}else n.push(l),a[o]=e[o]}else a[o]=e[o]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function pwe(e,t,n){const r=k2e(t,n);if(r){if(r==="binned"){const i=e[t===es?Wt:kn];return!!(le(i)&&le(e[t])&&Mn(i.bin))}}else return!1;return!0}function mwe(e,t,n,r){const i={};for(const s of ee(e))tB(s)||ne(g_e(s));for(let s of v2e){if(!e[s])continue;const a=e[s];if(yd(s)){const u=iB(s),o=i[u];if(le(o)){if(dxe(o.type)&&le(a)){ne(a_e(u));continue}}else s=u,ne(u_e(u))}if(s==="angle"&&t==="arc"&&!e.theta&&(ne(s_e),s=xi),!pwe(e,s,t)){ne(pv(s,t));continue}if(s===Fa&&t==="line"){const u=Ns(e[s]);if(u!=null&&u.aggregate){ne(d_e);continue}}if(s===jr&&(n?"fill"in e:"stroke"in e)){ne(xB("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Dg||s===Mg&&!X(a)&&!Xi(a)||s===Nl&&X(a))a&&(i[s]=pe(a).reduce((u,o)=>(le(o)?u.push(f5(o,s)):ne(p3(o,s)),u),[]));else{if(s===Nl&&a===null)i[s]=null;else if(!le(a)&&!Xs(a)&&!Xi(a)&&!wv(a)&&!Ee(a)){ne(p3(a,s));continue}i[s]=uU(a,s,r)}}return i}function Av(e,t){const n={};for(const r of ee(e)){const i=uU(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function bwe(e){const t=[];for(const n of ee(e))if(hl(e,n)){const r=e[n],i=pe(r);for(const s of i)le(s)?t.push(s):Ev(s)&&t.push(s.condition)}return t}function h5(e,t,n){if(e)for(const r of ee(e)){const i=e[r];if(X(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function ywe(e,t,n,r){return e?ee(e).reduce((i,s)=>{const a=e[s];return X(a)?a.reduce((u,o)=>t.call(r,u,o,s),i):t.call(r,i,a,s)},n):n}function gU(e,t){return ee(t).reduce((n,r)=>{switch(r){case Wt:case kn:case lv:case fv:case cv:case es:case Bs:case fo:case bd:case xi:case $a:case ts:case Na:case Us:case qs:case ns:case yi:case Tg:case Lr:case tc:case Nl:return n;case Mg:if(e==="line"||e==="trail")return n;case Dg:case ov:{const i=t[r];if(X(i)||le(i))for(const s of pe(i))s.aggregate||n.push(de(s,{}));return n}case Fa:if(e==="trail")return n;case jr:case Hs:case Vs:case Ra:case ho:case go:case mo:case po:{const i=Ns(t[r]);return i&&!i.aggregate&&n.push(de(i,{})),n}}},[])}var pU=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function vwe(e){const{tooltip:t}=e,n=pU(e,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(X(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return X(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function w3(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:u})=>{const o=r?` of ${g5(t)}`:"";return{field:a+t.field,type:t.type,title:Ee(u)?{signal:`${u}"${escape(o)}"`}:u+o}}),s=bwe(n).map(ewe);return{tooltip:[...i,...ps(s,it)]}}function g5(e){const{title:t,field:n}=e;return un(t,n)}function p5(e,t,n,r,i){const{scale:s,axis:a}=n;return({partName:u,mark:o,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=g5(n);return mU(e,u,i,{mark:o,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},me(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{}),r),f)})}}function mU(e,t,n,r){const{clip:i,color:s,opacity:a}=e,u=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),s?{color:s}:{}),a?{opacity:a}:{}),Ds(r.mark)?r.mark:{type:r.mark}),{style:`${u}-${String(t)}`}),Vl(e[t])?{}:e[t])})]:[]}function bU(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],a=r[`${i}2`],u=r[`${i}Error`],o=r[`${i}Error2`];return{continuousAxisChannelDef:Gp(s,n),continuousAxisChannelDef2:Gp(a,n),continuousAxisChannelDefError:Gp(u,n),continuousAxisChannelDefError2:Gp(o,n),continuousAxis:i}}function Gp(e,t){if(e!=null&&e.aggregate){const{aggregate:n}=e,r=pU(e,["aggregate"]);return n!==t&&ne(U_e(n,t)),r}else return e}function yU(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Ds(n)&&n.orient)return n.orient;if(ms(i)){if(ms(s)){const a=le(i)&&i.aggregate,u=le(s)&&s.aggregate;if(!a&&u===t)return"vertical";if(!u&&a===t)return"horizontal";if(a===t&&u===t)throw new Error("Both x and y cannot have aggregate");return Gf(s)&&!Gf(i)?"horizontal":"vertical"}return"horizontal"}else{if(ms(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var Nm=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wb="boxplot",_we=["box","median","outliers","rule","ticks"],xwe=new Ov(wb,_U);function vU(e){return Ot(e)?"tukey":e}function _U(e,{config:t}){var n,r;e=Object.assign(Object.assign({},e),{encoding:Av(e.encoding,t)});const{mark:i,encoding:s,params:a,projection:u}=e,o=Nm(e,["mark","encoding","params","projection"]),l=Ds(i)?i:{type:i};a&&ne(vB("boxplot"));const c=(n=l.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=mt("size",l,t),d=l.invalid,h=vU(c),{bins:g,timeUnits:p,transform:m,continuousAxisChannelDef:b,continuousAxis:y,groupby:v,aggregate:_,encodingWithoutContinuousAxis:x,ticksOrient:E,boxOrient:w,customTooltipWithoutAggregatedField:k}=wwe(e,c,t),{color:A,size:N}=x,O=Nm(x,["color","size"]),$=In=>p5(l,y,b,In,t.boxplot),C=$(O),T=$(x),S=$(Object.assign(Object.assign({},O),N?{size:N}:{})),M=w3([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,x),F={type:"tick",color:"black",opacity:1,orient:E,invalid:d,aria:!1},L=h==="min-max"?M:w3([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,x),H=[...C({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:L}),...C({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:L}),...C({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:L}),...C({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:L})],J=[...h!=="tukey"?H:[],...T({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:w,invalid:d,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...S({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:d},be(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:E,aria:!1}),positionPrefix:"mid_box",extraEncoding:M})];if(h==="min-max")return Object.assign(Object.assign({},o),{transform:((r=o.transform)!==null&&r!==void 0?r:[]).concat(m),layer:J});const ge=`datum["lower_box_${b.field}"]`,ke=`datum["upper_box_${b.field}"]`,Y=`(${ke} - ${ge})`,ye=`${ge} - ${c} * ${Y}`,Ne=`${ke} + ${c} * ${Y}`,ut=`datum["${b.field}"]`,ot={joinaggregate:xU(b.field),groupby:v},ln={transform:[{filter:`(${ye} <= ${ut}) && (${ut} <= ${Ne})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${b.field}`},{op:"max",field:b.field,as:`upper_whisker_${b.field}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${b.field}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${b.field}`},..._],groupby:v}],layer:H},he=Nm(O,["tooltip"]),{scale:Me,axis:Ie}=b,te=g5(b),Et=Tr(Ie,["title"]),Je=mU(l,"outliers",t.boxplot,{transform:[{filter:`(${ut} < ${ye}) || (${ut} > ${Ne})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[y]:Object.assign(Object.assign(Object.assign({field:b.field,type:b.type},te!==void 0?{title:te}:{}),Me!==void 0?{scale:Me}:{}),kt(Et)?{}:{axis:Et})},he),A?{color:A}:{}),k?{tooltip:k}:{})})[0];let Xt;const jt=[...g,...p,ot];return Je?Xt={transform:jt,layer:[Je,ln]}:(Xt=ln,Xt.transform.unshift(...jt)),Object.assign(Object.assign({},o),{layer:[Xt,{transform:m,layer:J}]})}function xU(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function wwe(e,t,n){const r=yU(e,wb),{continuousAxisChannelDef:i,continuousAxis:s}=bU(e,r,wb),a=i.field,u=vU(t),o=[...xU(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(u==="min-max"?"upper_whisker_":"max_")+a}],l=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],c=e.encoding,f=s;c[f];const d=Nm(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:g}=vwe(d),{bins:p,timeUnits:m,aggregate:b,groupby:y,encoding:v}=hU(g,n),_=r==="vertical"?"horizontal":"vertical",x=r,E=[...p,...m,{aggregate:[...b,...o],groupby:y},...l];return{bins:p,timeUnits:m,transform:E,groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:x,customTooltipWithoutAggregatedField:h}}var S7=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const m5="errorbar",Ewe=["ticks","rule"],Swe=new Ov(m5,wU);function wU(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Av(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:u,outerSpec:o,tooltipEncoding:l}=EU(e,m5,t);delete s.size;const c=p5(u,i,r,s,t.errorbar),f=u.thickness,d=u.size,h=Object.assign(Object.assign({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),g=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return Object.assign(Object.assign(Object.assign({},o),{transform:n}),g.length>1?{layer:g}:Object.assign({},g[0]))}function kwe(e,t){const{encoding:n}=e;if(Owe(n))return{orient:yU(e,t),inputType:"raw"};const r=Awe(n),i=Cwe(n),s=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const u=n.x2,o=n.y2;if(ze(u)&&ze(o))throw new Error(`${t} cannot have both x2 and y2`);if(ze(u)){if(ms(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ze(o)){if(ms(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const u=n.xError,o=n.xError2,l=n.yError,c=n.yError2;if(ze(o)&&!ze(u))throw new Error(`${t} cannot have xError2 without xError`);if(ze(c)&&!ze(l))throw new Error(`${t} cannot have yError2 without yError`);if(ze(u)&&ze(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ze(u)){if(ms(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ze(l)){if(ms(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Owe(e){return(ze(e.x)||ze(e.y))&&!ze(e.x2)&&!ze(e.y2)&&!ze(e.xError)&&!ze(e.xError2)&&!ze(e.yError)&&!ze(e.yError2)}function Awe(e){return ze(e.x2)||ze(e.y2)}function Cwe(e){return ze(e.xError)||ze(e.xError2)||ze(e.yError)||ze(e.yError2)}function EU(e,t,n){var r;const{mark:i,encoding:s,params:a,projection:u}=e,o=S7(e,["mark","encoding","params","projection"]),l=Ds(i)?i:{type:i};a&&ne(vB(t));const{orient:c,inputType:f}=kwe(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:g,continuousAxisChannelDefError2:p,continuousAxis:m}=bU(e,c,t),{errorBarSpecificAggregate:b,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=Twe(l,d,h,g,p,f,t,n),x=s,E=m;x[E];const w=m==="x"?"x2":"y2";x[w];const k=m==="x"?"xError":"yError";x[k];const A=m==="x"?"xError2":"yError2";x[A];const N=S7(x,[typeof E=="symbol"?E:E+"",typeof w=="symbol"?w:w+"",typeof k=="symbol"?k:k+"",typeof A=="symbol"?A:A+""]),{bins:O,timeUnits:$,aggregate:C,groupby:T,encoding:S}=hU(N,n),M=[...C,...b],F=f!=="raw"?[]:T,L=w3(v,d,S,_);return{transform:[...(r=o.transform)!==null&&r!==void 0?r:[],...O,...$,...M.length===0?[]:[{aggregate:M,groupby:F}],...y],groupby:F,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:S,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:L}}function Twe(e,t,n,r,i,s,a,u){let o=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":u.errorbar.center,g=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(g==="iqr")&&ne(B_e(h,g,a)),g==="stderr"||g==="stdev")o=[{op:g,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Ag(h)},{fieldPrefix:"upper_",titlePrefix:k7(h,g,"+")},{fieldPrefix:"lower_",titlePrefix:k7(h,g,"-")}],d=!0;else{let p,m,b;g==="ci"?(p="mean",m="ci0",b="ci1"):(p="median",m="q1",b="q3"),o=[{op:m,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:p,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:uf({field:c,aggregate:b,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:uf({field:c,aggregate:m,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:uf({field:c,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ne(z_e(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Dl(Dl(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:o,tooltipSummary:f,tooltipTitleWithFieldName:d}}function k7(e,t,n){return`${Ag(e)} ${n} ${t}`}const b5="errorband",Mwe=["band","borders"],Dwe=new Ov(b5,SU);function SU(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Av(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:u,tooltipEncoding:o}=EU(e,b5,t),l=a,c=p5(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const g=Object.assign(Object.assign({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),g),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign(Object.assign({},h),g),{aria:!1})):l.interpolate?ne(m7("interpolate")):l.tension&&ne(m7("tension")),Object.assign(Object.assign({},u),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:o}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:o}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:o})]})}const kU={};function y5(e,t,n){const r=new Ov(e,t);kU[e]={normalizer:r,parts:n}}function Nwe(){return ee(kU)}y5(wb,_U,_we);y5(m5,wU,Ewe);y5(b5,SU,Mwe);const $we=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],OU={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},AU={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Fwe=ee(OU),Rwe=ee(AU),Iwe={header:1,headerRow:1,headerColumn:1,headerFacet:1},CU=ee(Iwe),TU=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Pwe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},jwe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},$s="_vgsid_",Lwe={point:{on:"click",fields:[$s],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function v5(e){return e==="legend"||!!(e!=null&&e.legend)}function I_(e){return v5(e)&&be(e)}function _5(e){return!!(e!=null&&e.select)}var zwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function MU(e){const t=[];for(const n of e||[]){if(_5(n))continue;const{expr:r,bind:i}=n,s=zwe(n,["expr","bind"]);if(i&&r){const a=Object.assign(Object.assign({},s),{bind:i,init:r});t.push(a)}else{const a=Object.assign(Object.assign(Object.assign({},s),r?{update:r}:{}),i?{bind:i}:{});t.push(a)}}return t}function Bwe(e){return Cv(e)||w5(e)||x5(e)}function x5(e){return"concat"in e}function Cv(e){return"vconcat"in e}function w5(e){return"hconcat"in e}function DU({step:e,offsetIsDiscrete:t}){var n;return t?(n=e.for)!==null&&n!==void 0?n:"offset":"position"}function Fs(e){return be(e)&&e.step!==void 0}function O7(e){return e.view||e.width||e.height}const A7=20,Uwe={align:1,bounds:1,center:1,columns:1,spacing:1},qwe=ee(Uwe);function Hwe(e,t,n){var r,i;const s=n[t],a={},{spacing:u,columns:o}=s;u!==void 0&&(a.spacing=u),o!==void 0&&(xv(e)&&!Rg(e.facet)||x5(e))&&(a.columns=o),Cv(e)&&(a.columns=1);for(const l of qwe)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];a[l]=Ot(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:u,column:(i=c.column)!==null&&i!==void 0?i:u}}else a[l]=e[l];return a}var Vwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function E3(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function Eb(e,t){const n=Sb(e,t);return Fs(n)?n.step:NU}function Sb(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return un(r,{step:e.step})}const NU=20,Gwe={continuousWidth:200,continuousHeight:200,step:NU},Wwe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Gwe,mark:Pxe,arc:{},area:{},bar:zxe,circle:{},geoshape:{},image:{},line:{},point:{},rect:Bxe,rule:{color:"black"},square:{},text:{color:"black"},tick:Uxe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:vxe,projection:{},legend:Pwe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Lwe,style:{},title:{},facet:{spacing:A7},concat:{spacing:A7},normalizedNumberFormat:".0%"},Ks=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],C7={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},T7={blue:Ks[0],orange:Ks[1],red:Ks[2],teal:Ks[3],green:Ks[4],yellow:Ks[5],purple:Ks[6],pink:Ks[7],brown:Ks[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Xwe(e={}){return{signals:[{name:"color",value:be(e)?Object.assign(Object.assign({},T7),e):T7}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Ywe(e){return{signals:[{name:"fontSize",value:be(e)?Object.assign(Object.assign({},C7),e):C7}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Zwe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function $U(e){const t=ee(e||{}),n={};for(const r of t){const i=e[r];n[r]=jg(i)?dB(i):Yr(i)}return n}function Qwe(e){const t=ee(e),n={};for(const r of t)n[r]=$U(e[r]);return n}const Jwe=[...HB,...fU,...CU,"background","padding","legend","lineBreak","scale","style","title","view"];function FU(e={}){const{color:t,font:n,fontSize:r,selection:i}=e,s=Vwe(e,["color","font","fontSize","selection"]),a=Vb({},qe(Wwe),n?Zwe(n):{},t?Xwe(t):{},r?Ywe(r):{},s||{});i&&Y0(a,"selection",i,!0);const u=Tr(a,Jwe);for(const o of["background","lineBreak","padding"])a[o]&&(u[o]=Yr(a[o]));for(const o of HB)a[o]&&(u[o]=Er(a[o]));for(const o of fU)a[o]&&(u[o]=$U(a[o]));for(const o of CU)a[o]&&(u[o]=Er(a[o]));return a.legend&&(u.legend=Er(a.legend)),a.scale&&(u.scale=Er(a.scale)),a.style&&(u.style=Qwe(a.style)),a.title&&(u.title=Er(a.title)),a.view&&(u.view=Er(a.view)),u}const Kwe=new Set(["view",...Dxe]),e3e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],t3e=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Ixe);function n3e(e){e=qe(e);for(const t of e3e)delete e[t];if(e.axis)for(const t in e.axis)jg(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of $we)delete e.legend[t];if(e.mark){for(const t of y7)delete e.mark[t];e.mark.tooltip&&be(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(MU(e.params)),delete e.params);for(const t of Kwe){for(const r of y7)delete e[t][r];const n=t3e[t];if(n)for(const r of n)delete e[t][r];i3e(e,t)}for(const t of Nwe())delete e[t];r3e(e);for(const t in e)be(e[t])&&kt(e[t])&&delete e[t];return kt(e)?void 0:e}function r3e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=fB(e.title);kt(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),kt(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),kt(r)?delete e.title:e.title=r}function i3e(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s=Object.assign(Object.assign({},i),e.style[n??t]);kt(s)||(e.style[n??t]=s),r||delete e[t]}function Tv(e){return"layer"in e}function s3e(e){return"repeat"in e}function a3e(e){return!X(e.repeat)&&e.repeat.layer}var u3e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class E5{map(t,n){return xv(t)?this.mapFacet(t,n):s3e(t)?this.mapRepeat(t,n):w5(t)?this.mapHConcat(t,n):Cv(t)?this.mapVConcat(t,n):x5(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Tv(t))return this.mapLayer(t,n);if(Ia(t))return this.mapUnit(t,n);throw new Error(jk(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=u3e(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(s=>this.map(s,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const o3e={zero:1,center:1,normalize:1};function l3e(e){return e in o3e}const c3e=new Set([zB,bv,mv,bb,vv,t5,n5,yv,BB,e5]),f3e=new Set([bv,mv,zB]);function zc(e){return le(e)&&Hf(e)==="quantitative"&&!e.bin}function M7(e,t){var n,r;const i=t==="x"?"y":"radius",s=e[t],a=e[i];if(le(s)&&le(a))if(zc(s)&&zc(a)){if(s.stack)return t;if(a.stack)return i;const u=le(s)&&!!s.aggregate,o=le(a)&&!!a.aggregate;if(u!==o)return u?t:i;{const l=(n=s.scale)===null||n===void 0?void 0:n.type,c=(r=a.scale)===null||r===void 0?void 0:r.type;if(l&&l!=="linear")return i;if(c&&c!=="linear")return t}}else{if(zc(s))return t;if(zc(a))return i}else{if(zc(s))return t;if(zc(a))return i}}function d3e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function RU(e,t){var n,r;const i=Ds(e)?e.type:e;if(!c3e.has(i))return null;const s=M7(t,"x")||M7(t,"theta");if(!s)return null;const a=t[s],u=le(a)?de(a,{}):void 0,o=d3e(s),l=[],c=new Set;if(t[o]){const h=t[o],g=le(h)?de(h,{}):void 0;g&&g!==u&&(l.push(o),c.add(g));const p=o==="x"?"xOffset":"yOffset",m=t[p],b=le(m)?de(m,{}):void 0;b&&b!==u&&(l.push(p),c.add(b))}const f=_2e.reduce((h,g)=>{if(g!=="tooltip"&&hl(t,g)){const p=t[g];for(const m of pe(p)){const b=Ns(m);if(b.aggregate)continue;const y=de(b,{});(!y||!c.has(y))&&h.push({channel:g,fieldDef:b})}}return h},[]);let d;return a.stack!==void 0?Vl(a.stack)?d=a.stack?"zero":null:d=a.stack:f3e.has(i)&&(d="zero"),!d||!l3e(d)||d5(t)&&f.length===0?null:!((n=a==null?void 0:a.scale)===null||n===void 0)&&n.type&&((r=a==null?void 0:a.scale)===null||r===void 0?void 0:r.type)!==Mr.LINEAR?(ne(P_e(a.scale.type)),null):ze(t[Gs(s)])?(a.stack!==void 0&&ne(I_e(s)),null):(le(a)&&a.aggregate&&!N2e.has(a.aggregate)&&ne(j_e(a.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:s,impute:a.impute===null?!1:_o(i),stackBy:f,offset:d})}var IU=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function h3e(e){const t=IU(e,["point","line"]);return ee(t).length>1?t:t.type}function g3e(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:Tr(e[t],["point","line"])}));return e}function P_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?be(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?be(t.point)?t.point:{}:void 0}function D7(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class p3e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ia(t)){const{mark:r,encoding:i}=t,s=Ds(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!P_(s,n[s.type],i);case"area":return!!P_(s,n[s.type],i)||!!D7(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:a,mark:u,encoding:o}=t,l=IU(t,["params","projection","mark","encoding"]),c=Av(o,i),f=Ds(u)?u:{type:u},d=P_(f,i[f.type],c),h=f.type==="area"&&D7(f,i[f.type]),g=[Object.assign(Object.assign({},s?{params:s}:{}),{mark:h3e(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:Tr(c,["shape"])})],p=RU(f,c);let m=c;if(p){const{fieldChannel:b,offset:y}=p;m=Object.assign(Object.assign({},c),{[b]:Object.assign(Object.assign({},c[b]),y?{stack:y}:{})})}return m=Tr(m,["y2","x2"]),h&&g.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},Lf(f,["clip","interpolate","tension","tooltip"])),h),encoding:m})),d&&g.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Lf(f,["clip","tooltip"])),d),encoding:m})),r(Object.assign(Object.assign({},l),{layer:g}),Object.assign(Object.assign({},n),{config:g3e(i)}))}}var m3e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function b3e(e,t){return t?Rg(e)?jU(e,t):PU(e,t):e}function j_(e,t){return t?jU(e,t):e}function S3(e,t,n){const r=t[e];if(Jxe(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});ne(J2e(r.repeat));return}return t}function PU(e,t){if(e=S3("field",e,t),e!==void 0){if(e===null)return null;if(o5(e)&&xs(e.sort)){const n=S3("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function N7(e,t){if(le(e))return PU(e,t);{const n=S3("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function $7(e,t){if(ze(e)){const n=N7(e,t);if(n)return n;if(wv(e))return{condition:e.condition}}else{if(Ig(e)){const n=N7(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):m3e(e,["condition"])}return e}}function jU(e,t){const n={};for(const r in e)if(Se(e,r)){const i=e[r];if(X(i))n[r]=i.map(s=>$7(s,t)).filter(s=>s);else{const s=$7(i,t);s!==void 0&&(n[r]=s)}}return n}class y3e{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ia(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ds(r)&&r.type==="line")for(const i of b2e){const s=nc(i),a=n[s];if(n[i]&&(le(a)&&!Mn(a.bin)||Xs(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return ne(v_e(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:be(s)?Object.assign(Object.assign({},s),{type:"rule"}):"rule"}),n)}}var ou=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class v3e extends E5{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[xwe,Swe,Dwe,new p3e,new y3e]}map(t,n){if(Ia(t)){const r=hl(t.encoding,ya),i=hl(t.encoding,va),s=hl(t.encoding,uv);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=j_(t.encoding,n.repeater),a=Object.assign(Object.assign({},t),s?{encoding:s}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const u=this.mapLayerOrUnit.bind(this);for(const o of this.nonFacetUnitNormalizers)if(o.hasMatchingType(a,n.config))return o.run(a,n,u);return a}mapRepeat(t,n){return a3e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,s=ou(t,["repeat","spec"]),{row:a,column:u,layer:o}=r,{repeater:l={},repeaterPrefix:c=""}=n;return a||u?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),u?{column:u}:{}),spec:{repeat:{layer:o},spec:i}}),n):Object.assign(Object.assign({},s),{layer:o.map(f=>{const d=Object.assign(Object.assign({},l),{layer:f}),h=`${(i.name||"")+c}child__layer_${Ht(f)}`,g=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return g.name=h,g})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:s,data:a}=t,u=ou(t,["repeat","spec","data"]);!X(i)&&t.columns&&(t=Tr(t,["columns"]),ne(d7("repeat")));const o=[],{repeater:l={},repeaterPrefix:c=""}=n,f=!X(i)&&i.row||[l?l.row:null],d=!X(i)&&i.column||[l?l.column:null],h=X(i)&&i||[l?l.repeat:null];for(const p of h)for(const m of f)for(const b of d){const y={repeat:p,row:m,column:b,layer:l.layer},v=(s.name||"")+c+"child__"+(X(i)?`${Ht(p)}`:(i.row?`row_${Ht(m)}`:"")+(i.column?`column_${Ht(b)}`:"")),_=this.map(s,Object.assign(Object.assign({},n),{repeater:y,repeaterPrefix:v}));_.name=v,o.push(Tr(_,["data"]))}const g=X(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=s.data)!==null&&r!==void 0?r:a,align:"all"},u),{columns:g,concat:o})}mapFacet(t,n){const{facet:r}=t;return Rg(r)&&t.columns&&(t=Tr(t,["columns"]),ne(d7("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:a,config:u}=n,o=R7({parentProjection:a,projection:i}),l=F7({parentEncoding:s,encoding:j_(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),o?{projection:o}:{}),l?{encoding:l}:{}),{config:u})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:s,facet:a}=r,u=ou(r,["row","column","facet"]),{mark:o,width:l,projection:c,height:f,view:d,params:h,encoding:g}=t,p=ou(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:b}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),y=j_(u,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),b),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:o,encoding:y}),h?{params:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:s,facet:a}=t;if(i||s){a&&ne(b_e([...i?[ya]:[],...s?[va]:[]]));const u={},o={};for(const l of[ya,va]){const c=t[l];if(c){const f=ou(c,["align","center","spacing","columns"]);u[l]=f;for(const d of["align","center","spacing"])c[d]!==void 0&&((r=o[d])!==null&&r!==void 0||(o[d]={}),o[d][l]=c[d])}}return{facetMapping:u,layout:o}}else{const{align:u,center:o,spacing:l,columns:c}=a,f=ou(a,["align","center","spacing","columns"]);return{facetMapping:b3e(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},u?{align:u}:{}),o?{center:o}:{}),l?{spacing:l}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,s=ou(n,["parentEncoding","parentProjection"]);const{encoding:a,projection:u}=t,o=ou(t,["encoding","projection"]),l=Object.assign(Object.assign({},s),{parentEncoding:F7({parentEncoding:r,encoding:a,layer:!0}),parentProjection:R7({parentProjection:i,projection:u})});return super.mapLayer(o,l)}}function F7({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ee(e),...ee(t)]);for(const s of i){const a=t[s],u=e[s];if(ze(a)){const o=Object.assign(Object.assign({},u),a);r[s]=o}else Ig(a)?r[s]=Object.assign(Object.assign({},a),{condition:Object.assign(Object.assign({},u),a.condition)}):a||a===null?r[s]=a:(n||Xi(u)||Ee(u)||ze(u)||X(u))&&(r[s]=u)}}else r=t;return!r||kt(r)?void 0:r}function R7(e){const{parentProjection:t,projection:n}=e;return t&&n&&ne(i_e({parentProjection:t,projection:n})),n??t}function S5(e){return"filter"in e}function _3e(e){return(e==null?void 0:e.stop)!==void 0}function LU(e){return"lookup"in e}function x3e(e){return"data"in e}function w3e(e){return"param"in e}function E3e(e){return"pivot"in e}function S3e(e){return"density"in e}function k3e(e){return"quantile"in e}function O3e(e){return"regression"in e}function A3e(e){return"loess"in e}function C3e(e){return"sample"in e}function T3e(e){return"window"in e}function M3e(e){return"joinaggregate"in e}function D3e(e){return"flatten"in e}function N3e(e){return"calculate"in e}function zU(e){return"bin"in e}function $3e(e){return"impute"in e}function F3e(e){return"timeUnit"in e}function R3e(e){return"aggregate"in e}function I3e(e){return"stack"in e}function P3e(e){return"fold"in e}function j3e(e){return e.map(t=>S5(t)?{filter:sf(t.filter,fxe)}:t)}var Nu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class L3e extends E5{map(t,n){var r,i;return(r=n.emptySelections)!==null&&r!==void 0||(n.emptySelections={}),(i=n.selectionPredicates)!==null&&i!==void 0||(n.selectionPredicates={}),t=I7(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=I7(t,n),t.encoding){const r={};for(const[i,s]of Xu(t.encoding))r[i]=BU(s,n);t=Object.assign(Object.assign({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const r=t,{selection:i}=r,s=Nu(r,["selection"]);return i?Object.assign(Object.assign({},s),{params:Xu(i).map(([a,u])=>{var o;const l=u,{init:c,bind:f,empty:d}=l,h=Nu(l,["init","bind","empty"]);h.type==="single"?(h.type="point",h.toggle=!1):h.type==="multi"&&(h.type="point"),n.emptySelections[a]=d!=="none";for(const g of Zn((o=n.selectionPredicates[a])!==null&&o!==void 0?o:{}))g.empty=d!=="none";return{name:a,value:c,select:h,bind:f}})}):t}}function I7(e,t){const{transform:n}=e,r=Nu(e,["transform"]);if(n){const i=n.map(s=>{if(S5(s))return{filter:k3(s,t)};if(zU(s)&&rc(s.bin))return Object.assign(Object.assign({},s),{bin:UU(s.bin)});if(LU(s)){const a=s.from,{selection:u}=a,o=Nu(a,["selection"]);return u?Object.assign(Object.assign({},s),{from:Object.assign({param:u},o)}):s}return s});return Object.assign(Object.assign({},r),{transform:i})}return e}function BU(e,t){var n,r;const i=qe(e);if(le(i)&&rc(i.bin)&&(i.bin=UU(i.bin)),sc(i)&&(!((r=(n=i.scale)===null||n===void 0?void 0:n.domain)===null||r===void 0)&&r.selection)){const s=i.scale.domain,{selection:a}=s,u=Nu(s,["selection"]);i.scale.domain=Object.assign(Object.assign({},u),a?{param:a}:{})}if(wv(i))if(X(i.condition))i.condition=i.condition.map(s=>{const{selection:a,param:u,test:o}=s,l=Nu(s,["selection","param","test"]);return u?s:Object.assign(Object.assign({},l),{test:k3(s,t)})});else{const s=BU(i.condition,t),{selection:a,param:u,test:o}=s,l=Nu(s,["selection","param","test"]);i.condition=u?i.condition:Object.assign(Object.assign({},l),{test:k3(i.condition,t)})}return i}function UU(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n}=t,r=Nu(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},r),{param:n})})}return e}function k3(e,t){const n=r=>sf(r,i=>{var s,a,u;const o=(s=t.emptySelections[i])!==null&&s!==void 0?s:!0,l={param:i,empty:o};return(a=(u=t.selectionPredicates)[i])!==null&&a!==void 0||(u[i]=[]),t.selectionPredicates[i].push(l),l});return e.selection?n(e.selection):sf(e.test||e.filter,r=>r.selection?n(r.selection):r)}class O3 extends E5{map(t,n){var r;const i=(r=n.selections)!==null&&r!==void 0?r:[];if(t.params&&!Ia(t)){const s=[];for(const a of t.params)_5(a)?i.push(a):s.push(a);t.params=s}return n.selections=i,super.map(t,qU(t,n))}mapUnit(t,n){var r;const i=n.selections;if(!i||!i.length)return t;const s=((r=n.path)!==null&&r!==void 0?r:[]).concat(t.name),a=[];for(const u of i)if(!u.views||!u.views.length)a.push(u);else for(const o of u.views)(me(o)&&(o===t.name||s.indexOf(o)>=0)||X(o)&&o.map(l=>s.indexOf(l)).every((l,c,f)=>l!==-1&&(c===0||l>f[c-1])))&&a.push(u);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=O3.prototype[e];O3.prototype[e]=function(n,r){return t.call(this,n,qU(n,r))}}function qU(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:((n=t.path)!==null&&n!==void 0?n:[]).concat(e.name)}):t}function HU(e,t){t===void 0&&(t=FU(e.config));const n=q3e(e,t),{width:r,height:i}=e,s=H3e(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}const z3e=new v3e,B3e=new L3e,U3e=new O3;function q3e(e,t={}){const n={config:t};return U3e.map(z3e.map(B3e.map(e,n),n),n)}function P7(e){return me(e)?{type:e}:e??{}}function H3e(e,t,n){let{width:r,height:i}=t;const s=Ia(e)||Tv(e),a={};s?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(ne(o7("width")),r=void 0),i=="container"&&(ne(o7("height")),i=void 0));const u=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?P7(n.autosize):{}),P7(e.autosize));if(u.type==="fit"&&!s&&(ne(U2e),u.type="pad"),r=="container"&&!(u.type=="fit"||u.type=="fit-x")&&ne(l7("width")),i=="container"&&!(u.type=="fit"||u.type=="fit-y")&&ne(l7("height")),!gs(u,{type:"pad"}))return u}function V3e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function G3e(e){return e?`fit-${dv(e)}`:"fit"}const W3e=["background","padding"];function j7(e,t){const n={};for(const r of W3e)e&&e[r]!==void 0&&(n[r]=Yr(e[r]));return t&&(n.params=e.params),n}class Pa{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Pa(qe(this.explicit),qe(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return un(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ee(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function os(e){return{explicit:!0,value:e}}function Hr(e){return{explicit:!1,value:e}}function VU(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:Mv(t,n,r,i)}}function Mv(e,t,n,r){return e.explicit&&t.explicit&&ne(T_e(n,r,e.value,t.value)),e}function Zu(e,t,n,r,i=Mv){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:gs(e.value,t.value)?e:i(e,t,n,r)}class X3e extends Pa{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Wf(e){return"url"in e}function $0(e){return"values"in e}function GU(e){return"name"in e&&!Wf(e)&&!$0(e)&&!$u(e)}function $u(e){return e&&(WU(e)||XU(e)||k5(e))}function WU(e){return"sequence"in e}function XU(e){return"sphere"in e}function k5(e){return"graticule"in e}var Dt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Dt||(Dt={}));var Y3e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Pl(e,t=!0,n=Qn){if(X(e)){const r=e.map(i=>Pl(i,t,n));return t?`[${r.join(", ")}]`:r}else if(ic(e))return n(t?N0(e):exe(e));return t?n(Ft(e)):e}function Z3e(e,t){var n;for(const r of Zn((n=e.component.selection)!==null&&n!==void 0?n:{})){const i=r.name;let s=`${i}${Ku}, ${r.resolve==="global"?"true":`{unit: ${Xf(e)}}`}`;for(const a of Nv)a.defined(r)&&(a.signals&&(t=a.signals(e,r,t)),a.modifyExpr&&(s=a.modifyExpr(e,r,s)));t.push({name:i+T6e,on:[{events:{signal:r.name+Ku},update:`modify(${fe(r.name+jl)}, ${s})`}]})}return O5(t)}function Q3e(e,t){if(e.component.selection&&ee(e.component.selection).length){const n=fe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:co("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return O5(t)}function J3e(e,t){var n;let r=!1;for(const i of Zn((n=e.component.selection)!==null&&n!==void 0?n:{})){const s=i.name,a=fe(s+jl);if(t.filter(o=>o.name===s).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${cq}(${a}, ${fe(o)}${l}`})}r=!0;for(const o of Nv)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return r&&t.filter(s=>s.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),O5(t)}function K3e(e,t){var n;const r=[...t],i=Xf(e,{escape:!1});for(const s of Zn((n=e.component.selection)!==null&&n!==void 0?n:{})){const a={name:s.name+jl};if(s.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:$s}}]),s.init){const o=s.project.items.map(l=>Y3e(l,["signals"]));a.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[$s]:Pl(l,!1)[0]})):s.init.map(l=>({unit:i,fields:o,values:Pl(l,!1)}))}r.filter(o=>o.name===s.name+jl).length||r.push(a)}return r}function YU(e,t){var n;for(const r of Zn((n=e.component.selection)!==null&&n!==void 0?n:{}))for(const i of Nv)i.defined(r)&&i.marks&&(t=i.marks(e,r,t));return t}function e6e(e,t){for(const n of e.children)sn(n)&&(t=YU(n,t));return t}function t6e(e,t,n,r){const i=pq(e,t.param,t);return{signal:ri(n.get("type"))&&X(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function O5(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ct{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ne(t_e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class dr extends Ct{constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Yz()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var L7=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class ws extends Ct{constructor(t,n){super(t),this.formula=n}clone(){return new ws(null,qe(this.formula))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s)=>{const{field:a,timeUnit:u}=s;if(u){const o=de(s,{forAs:!0});i[it({as:o,field:a,timeUnit:u})]={as:o,field:a,timeUnit:u}}return i},{});return kt(r)?null:new ws(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,s=L7(r,["timeUnit"]),a=Kn(i),u=Object.assign(Object.assign({},s),{timeUnit:a});return new ws(t,{[it(u)]:u})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Xu(this.formula))t.has(i.as)||(n[r]=i);this.formula=n}producedFields(){return new Set(Zn(this.formula).map(t=>t.as))}dependentFields(){return new Set(Zn(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${it(this.formula)}`}assemble(){const t=[];for(const n of Zn(this.formula)){const{field:r,as:i,timeUnit:s}=n,a=Kn(s),{unit:u,utc:o}=a,l=L7(a,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:bi(r),type:"timeunit"},u?{units:qk(u)}:{}),o?{timezone:"utc"}:{}),l),{as:[i,`${i}_end`]}))}return t}}var n6e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Lg="_tuple_fields";class r6e{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const i6e={defined:()=>!0,parse:(e,t,n)=>{var r;const i=t.name,s=(r=t.project)!==null&&r!==void 0?r:t.project=new r6e,a={},u={},o=new Set,l=(p,m)=>{const b=m==="visual"?p.channel:p.field;let y=Ht(`${i}_${b}`);for(let v=1;o.has(y);v++)y=Ht(`${i}_${b}_${v}`);return o.add(y),{[m]:y}},c=t.type,f=e.config.selection[c],d=n.value!==void 0?pe(n.value):null;let{fields:h,encodings:g}=be(n.select)?n.select:{};if(!h&&!g&&d){for(const p of d)if(be(p))for(const m of ee(p))m2e(m)?(g||(g=[])).push(m):c==="interval"?(ne(Q2e),g=f.encodings):(h||(h=[])).push(m)}!h&&!g&&(g=f.encodings,"fields"in f&&(h=f.fields));for(const p of g??[]){const m=e.fieldDef(p);if(m){let b=m.field;if(m.aggregate){ne(q2e(p,m.aggregate));continue}else if(!b){ne(f7(p));continue}if(m.timeUnit){b=e.vgField(p);const y={timeUnit:m.timeUnit,as:b,field:m.field};u[it(y)]=y}if(!a[b]){let y="E";if(c==="interval"){const _=e.getScaleComponent(p).get("type");ri(_)&&(y="R")}else m.bin&&(y="R-RE");const v={field:b,channel:p,type:y};v.signals=Object.assign(Object.assign({},l(v,"data")),l(v,"visual")),s.items.push(a[b]=v),s.hasField[b]=s.hasChannel[p]=a[b],s.hasSelectionId=s.hasSelectionId||b===$s}}else ne(f7(p))}for(const p of h??[]){if(s.hasField[p])continue;const m={type:"E",field:p};m.signals=Object.assign({},l(m,"data")),s.items.push(m),s.hasField[p]=m,s.hasSelectionId=s.hasSelectionId||p===$s}d&&(t.init=d.map(p=>s.items.map(m=>be(p)?p[m.channel]!==void 0?p[m.channel]:p[m.field]:p))),kt(u)||(s.timeUnit=new ws(null,u))},signals:(e,t,n)=>{const r=t.name+Lg;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(s=>{const a=n6e(s,["signals","hasLegend"]);return a.field=bi(a.field),a})})}},Qu={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!bo(i))continue;const s=e.getScaleComponent(i),a=s?s.get("type"):void 0;if(!s||!ri(a)){ne(G2e);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(u=>u.name===a.signals.data).length===0);if(!e.parent||C3(e)||r.length===0)return n;const i=n.filter(a=>a.name===t.name)[0];let s=i.update;if(s.indexOf(cq)>=0)i.update=`{${r.map(a=>`${fe(bi(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const u=`${fe(bi(a.field))}: ${a.signals.data}`;s.includes(u)||(s=`${s.substring(0,s.length-1)}, ${u}}`)}i.update=s}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!C3(e))for(const r of t.scales){const i=n.filter(s=>s.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function A3(e,t){return`domain(${fe(e.scaleName(t))})`}function C3(e){var t;return e.parent&&Sd(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:C3(e.parent.parent))}var s6e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const of="_brush",T3="_scale_trigger",a6e={defined:e=>e.type==="interval",signals:(e,t,n)=>{const r=t.name,i=r+Lg,s=Qu.defined(t),a=t.init?t.init[0]:null,u=[],o=[];if(t.translate&&!s){const c=`!event.item || event.item.mark.name !== ${fe(r+of)}`;ZU(t,(f,d)=>{var h,g;const p=pe((h=(g=d.between[0]).filter)!==null&&h!==void 0?h:g.filter=[]);return p.includes(c)||p.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==Wt&&d!==kn){ne("Interval selections only support x and y encoding channels.");return}const h=a?a[f]:null,g=u6e(e,t,c,h),p=c.signals.data,m=c.signals.visual,b=fe(e.scaleName(d)),y=e.getScaleComponent(d).get("type"),v=ri(y)?"+":"";n.push(...g),u.push(p),o.push({scaleName:e.scaleName(d),expr:`(!isArray(${p}) || (${v}invert(${b}, ${m})[0] === ${v}${p}[0] && ${v}invert(${b}, ${m})[1] === ${v}${p}[1]))`})}),!s&&o.length&&n.push({name:r+T3,value:{},on:[{events:o.map(c=>({scale:c.scaleName})),update:`${o.map(c=>c.expr).join(" && ")} ? ${r+T3} : {}`}]});const l=`unit: ${Xf(e)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+Ku},a?{init:`{${l}: ${Pl(a)}}`}:{}),u.length?{on:[{events:[{signal:u.join(" || ")}],update:`${u.join(" && ")} ? {${l}: [${u}]} : null`}]}:{}))},marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,a=i==null?void 0:i.signals.visual,u=s==null?void 0:s.signals.visual,o=`data(${fe(t.name+jl)})`;if(Qu.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${u}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${u}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of ee(l))l[m]=[Object.assign({test:`${o}.length && ${o}[0].unit === ${Xf(e)}`},l[m]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,g=s6e(c,["fill","fillOpacity","cursor"]),p=ee(g).reduce((m,b)=>(m[b]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${u}[0] !== ${u}[1]`].filter(y=>y).join(" && "),value:g[b]},{value:null}],m),{});return[{name:`${r+of}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:l}},...n,{name:r+of,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),p)}}]}};function u6e(e,t,n,r){const i=n.channel,s=n.signals.visual,a=n.signals.data,u=Qu.defined(t),o=fe(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=p=>`scale(${o}, ${p})`,d=e.getSizeSignalRef(i===Wt?"width":"height").signal,h=`${i}(unit)`,g=ZU(t,(p,m)=>[...p,{events:m.between[0],update:`[${h}, ${h}]`},{events:m,update:`[${s}[0], clamp(${h}, 0, ${d})]`}]);return g.push({events:{signal:t.name+T3},update:ri(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),u?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},r?{init:Pl(r,!0,f)}:{value:[]}),{on:g}),Object.assign(Object.assign({name:a},r?{init:Pl(r)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]})]}function ZU(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(ne(`${r} is not an ordered event stream for interval selections.`),n),[])}const o6e={defined:e=>e.type==="point",signals:(e,t,n)=>{var r;const i=t.name,s=i+Lg,a=t.project,u="(item().isVoronoi ? datum.datum : datum)",o=Zn((r=e.component.selection)!==null&&r!==void 0?r:{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+of):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let c=`unit: ${Xf(e)}, `;if(t.project.hasSelectionId)c+=`${$s}: ${u}[${fe($s)}]`;else{const d=a.items.map(h=>{const g=e.fieldDef(h.channel);return g!=null&&g.bin?`[${u}[${fe(e.vgField(h.channel,{}))}], ${u}[${fe(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${u}[${fe(h.field)}]`}).join(", ");c+=`fields: ${s}, values: [${d}]`}const f=t.events;return n.concat([{name:i+Ku,on:f?[{events:f,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}};function _d(e,t,n,r){const i=wv(t)&&t.condition,s=r(t);if(i){const u=pe(i).map(o=>{const l=r(o);if(Qxe(o)){const{param:c,empty:f}=o,d=gq(e,{param:c,empty:f});return Object.assign({test:d},l)}else{const c=Ab(e,o.test);return Object.assign({test:c},l)}});return{[n]:[...u,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function A5(e,t="text"){const n=e.encoding[t];return _d(e,n,t,r=>Dv(r,e.config))}function Dv(e,t,n="datum"){if(e){if(Xi(e))return Bt(e.value);if(ze(e)){const{format:r,formatType:i}=_b(e);return a5({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function QU(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,a=n.tooltip;if(X(a))return{tooltip:z7({tooltip:a},s,i,t)};{const u=t.reactiveGeom?"datum.datum":"datum";return _d(e,a,"tooltip",o=>{const l=Dv(o,i,u);if(l)return l;if(o===null)return;let c=mt("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),me(c))return{value:c};if(be(c))return Ee(c)?c:c.content==="encoding"?z7(n,s,i,t):{signal:u}})}}function JU(e,t,n,{reactiveGeom:r}={}){const i={},s=r?"datum.datum":"datum",a=[];function u(l,c){const f=nc(c),d=vi(l)?l:Object.assign(Object.assign({},l),{type:e[f].type}),h=d.title||c5(d,n),g=pe(h).join(", ");let p;if(On(c)){const m=c==="x"?"x2":"y2",b=Ns(e[m]);if(Mn(d.bin)&&b){const y=de(d,{expr:s}),v=de(b,{expr:s}),{format:_,formatType:x}=_b(d);p=Fg(y,v,_,x,n),i[m]=!0}}if((On(c)||c===xi||c===ts)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:m,formatType:b}=_b(d);p=a5({fieldOrDatumDef:d,format:m,formatType:b,expr:s,config:n,normalizeStack:!0}).signal}p??(p=Dv(d,n,s).signal),a.push({channel:c,key:g,value:p})}h5(e,(l,c)=>{le(l)?u(l,c):Ev(l)&&u(l.condition,c)});const o={};for(const{channel:l,key:c,value:f}of a)!i[l]&&!o[c]&&(o[c]=f);return o}function z7(e,t,n,{reactiveGeom:r}={}){const i=JU(e,t,n,{reactiveGeom:r}),s=Xu(i).map(([a,u])=>`"${a}": ${u}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function l6e(e){const{markDef:t,config:n}=e,r=mt("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),c6e(e)),f6e(e))}function c6e(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=mt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in L2e?{}:{ariaRoleDescription:{value:t}}}function f6e(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return _d(e,s,"description",o=>Dv(o,e.config));const a=mt("description",n,r);if(a!=null)return{description:Bt(a)};if(r.aria===!1)return{};const u=JU(t,i,r);if(!kt(u))return{description:{signal:Xu(u).map(([o,l],c)=>`"${c>0?"; ":""}${o}: " + (${l})`).join(" + ")}}}function yn(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:a}=n;let{defaultRef:u,defaultValue:o}=n;u===void 0&&(o??(o=mt(e,r,s,{vgChannel:a,ignoreVgConfig:!0})),o!==void 0&&(u=Bt(o)));const l=i[e];return _d(t,l,a??e,c=>s5({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:u}))}function KU(e,t={filled:void 0}){var n,r,i,s;const{markDef:a,encoding:u,config:o}=e,{type:l}=a,c=(n=t.filled)!==null&&n!==void 0?n:mt("filled",a,o),f=et(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,d=(i=(r=mt(c===!0?"color":void 0,a,o,{vgChannel:"fill"}))!==null&&r!==void 0?r:o.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,h=(s=mt(c===!1?"color":void 0,a,o,{vgChannel:"stroke"}))!==null&&s!==void 0?s:o.mark[c===!1&&"color"],g=c?"fill":"stroke",p=Object.assign(Object.assign({},d?{fill:Bt(d)}:{}),h?{stroke:Bt(h)}:{});return a.color&&(c?a.fill:a.stroke)&&ne(xB("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},p),yn("color",e,{vgChannel:g,defaultValue:c?d:h})),yn("fill",e,{defaultValue:u.fill?d:void 0})),yn("stroke",e,{defaultValue:u.stroke?h:void 0}))}function d6e(e){const{encoding:t,mark:n}=e,r=t.order;return!_o(n)&&Xi(r)?_d(e,r,"zindex",i=>Bt(i.value)):{}}function F0({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,a=t[s],u=n[s];if((s==="xOffset"||s==="yOffset")&&u)return{offsetType:"encoding",offset:s5({channel:s,channelDef:u,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Bt(a),bandPosition:i})};const o=t[s];return o?{offsetType:"visual",offset:o}:{}}function Hn(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:a,stack:u}=t,o=i[e],l=i[Gs(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=F0({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),g=C5({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!o&&On(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:h6e({channel:e,channelDef:o,channel2Def:l,markDef:s,config:a,scaleName:c,scale:f,stack:u,offset:d,defaultRef:g,bandPosition:h==="encoding"?0:void 0});return p?{[r||e]:p}:void 0}function h6e(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:a}=e;if(ze(n)&&i&&t===i.fieldChannel){if(le(n)){let u=n.bandPosition;if(u===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(u=.5),u!==void 0)return yb({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:u,offset:s})}return dl(n,r,{suffix:"end"},{offset:s})}return r5(e)}function C5({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:a}=e;return()=>{const u=nc(n),o=Yu(n),l=mt(n,s,a,{vgChannel:o});if(l!==void 0)return Hh(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!et([Mr.LOG,Mr.TIME,Mr.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return u==="y"?{field:{group:"height"}}:{value:0};switch(u){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[zr(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const g6e={left:"x",center:"xc",right:"x2"},p6e={top:"y",middle:"yc",bottom:"y2"};function eq(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Yu(e);const i=e==="x"?"align":"baseline",s=mt(i,t,n);let a;return Ee(s)?(ne(y_e(i)),a=void 0):a=s,e==="x"?g6e[a||(r==="top"?"left":"center")]:p6e[a||r]}function kb(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?tq(e,t,{defaultPos:n,defaultPos2:r}):Hn(e,t,{defaultPos:n})}function tq(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,a=Gs(e),u=zr(e),o=m6e(t,r,a),l=o[u]?eq(e,i,s):Yu(e);return Object.assign(Object.assign({},Hn(e,t,{defaultPos:n,vgChannel:l})),o)}function m6e(e,t,n){const{encoding:r,mark:i,markDef:s,stack:a,config:u}=e,o=nc(n),l=zr(n),c=Yu(n),f=r[o],d=e.scaleName(o),h=e.getScaleComponent(o),{offset:g}=n in r||n in s?F0({channel:n,markDef:s,encoding:r,model:e}):F0({channel:o,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=zr(n),b=e.markDef[m];return b!=null?{[m]:{value:b}}:{[c]:{field:e.getName(n)}}}const p=b6e({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:u,scaleName:d,scale:h,stack:a,offset:g,defaultRef:void 0});return p!==void 0?{[c]:p}:Wp(n,s)||Wp(n,{[n]:pb(n,s,u.style),[l]:pb(l,s,u.style)})||Wp(n,u[i])||Wp(n,u.mark)||{[c]:C5({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function b6e({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:u,offset:o,defaultRef:l}){return ze(t)&&u&&e.charAt(0)===u.fieldChannel.charAt(0)?dl(t,s,{suffix:"start"},{offset:o}):r5({channel:e,channelDef:n,scaleName:s,scale:a,stack:u,markDef:r,config:i,offset:o,defaultRef:l})}function Wp(e,t){const n=zr(e),r=Yu(e);if(t[r]!==void 0)return{[r]:Hh(e,t[r])};if(t[e]!==void 0)return{[r]:Hh(e,t[e])};if(t[n]){const i=t[n];if(Rl(i))ne(f_e(n));else return{[n]:Hh(e,i)}}}function Ju(e,t){var n,r;const{config:i,encoding:s,markDef:a}=e,u=a.type,o=Gs(t),l=zr(t),c=s[t],f=s[o],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,g=a.orient,p=(r=(n=s[l])!==null&&n!==void 0?n:s.size)!==null&&r!==void 0?r:mt("size",a,i,{vgChannel:l}),m=u==="bar"&&(t==="x"?g==="vertical":g==="horizontal");return le(c)&&(Pt(c.bin)||Mn(c.bin)||c.timeUnit&&!f)&&!(p&&!Rl(p))&&!An(h)?_6e({fieldDef:c,fieldDef2:f,channel:t,model:e}):(ze(c)&&An(h)||m)&&!f?v6e(c,t,e):tq(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function y6e(e,t,n,r,i){if(Rl(i))if(n){const a=n.get("type");if(a==="band"){let u=`bandwidth('${t}')`;return i.band!==1&&(u=`${i.band} * ${u}`),{signal:`max(0.25, ${u})`}}else i.band!==1&&(ne(w_e(a)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Ee(i))return i;if(i)return{value:i}}if(n){const a=n.get("range");if(vo(a)&&Ot(a.step))return{value:a.step-2}}return{value:Eb(r.view,e)-2}}function v6e(e,t,n){const{markDef:r,encoding:i,config:s,stack:a}=n,u=r.orient,o=n.scaleName(t),l=n.getScaleComponent(t),c=zr(t),f=Gs(t),d=y2e(t),h=n.scaleName(d),g=u==="horizontal"&&t==="y"||u==="vertical"&&t==="x";let p;(i.size||r.size)&&(g?p=yn("size",n,{vgChannel:c,defaultRef:Bt(r.size)}):ne(O_e(r.type)));const m=!!p,b=eU({channel:t,fieldDef:e,markDef:r,config:s,scaleType:l==null?void 0:l.get("type"),useVlSizeChannel:g});p=p||{[c]:y6e(c,h||o,l,s,b)};const y=(l==null?void 0:l.get("type"))==="band"&&Rl(b)&&!m?"top":"middle",v=eq(t,r,s,y),_=v==="xc"||v==="yc",{offset:x,offsetType:E}=F0({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),w=r5({channel:t,channelDef:e,markDef:r,config:s,scaleName:o,scale:l,stack:a,offset:x,defaultRef:C5({model:n,defaultPos:"mid",channel:t,scaleName:o,scale:l}),bandPosition:_?E==="encoding"?0:.5:Ee(b)?{signal:`(1-${b})/2`}:Rl(b)?(1-b.band)/2:0});if(c)return Object.assign({[v]:w},p);{const k=Yu(f),A=p[c],N=x?Object.assign(Object.assign({},A),{offset:x}):A;return{[v]:w,[k]:X(w)?[w[0],Object.assign(Object.assign({},w[1]),{offset:N})]:Object.assign(Object.assign({},w),{offset:N})}}}function ah(e,t,n,r,i){if(Kz(e))return 0;const s=e==="x"||e==="y2"?-t/2:t/2;if(Ee(n)||Ee(i)||Ee(r)){const a=_a(n),u=_a(i),o=_a(r),l=o?`${o} + `:"",c=a?`(${a} ? -1 : 1) * `:"",f=u?`(${u} + ${s})`:s;return{signal:l+c+f}}else return i=i||0,r+(n?-i-s:+i+s)}function _6e({fieldDef:e,fieldDef2:t,channel:n,model:r}){var i,s,a;const{config:u,markDef:o,encoding:l}=r,c=r.getScaleComponent(n),f=r.scaleName(n),d=c?c.get("type"):void 0,h=c.get("reverse"),g=eU({channel:n,fieldDef:e,markDef:o,config:u,scaleType:d}),p=(i=r.component.axes[n])===null||i===void 0?void 0:i[0],m=(s=p==null?void 0:p.get("translate"))!==null&&s!==void 0?s:.5,b=On(n)&&(a=mt("binSpacing",o,u))!==null&&a!==void 0?a:0,y=Gs(n),v=Yu(n),_=Yu(y),{offset:x}=F0({channel:n,markDef:o,encoding:l,model:r,bandPosition:0}),E=Ee(g)?{signal:`(1-${g.signal})/2`}:Rl(g)?(1-g.band)/2:.5;if(Pt(e.bin)||e.timeUnit)return{[_]:B7({fieldDef:e,scaleName:f,bandPosition:E,offset:ah(y,b,h,m,x)}),[v]:B7({fieldDef:e,scaleName:f,bandPosition:Ee(E)?{signal:`1-${E.signal}`}:1-E,offset:ah(n,b,h,m,x)})};if(Mn(e.bin)){const w=dl(e,f,{},{offset:ah(y,b,h,m,x)});if(le(t))return{[_]:w,[v]:dl(t,f,{},{offset:ah(n,b,h,m,x)})};if(rc(e.bin)&&e.bin.step)return{[_]:w,[v]:{signal:`scale("${f}", ${de(e,{expr:"datum"})} + ${e.bin.step})`,offset:ah(n,b,h,m,x)}}}ne(SB(y))}function B7({fieldDef:e,scaleName:t,bandPosition:n,offset:r}){return yb({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r})}const x6e=new Set(["aria","width","height"]);function wi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?KU(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},w6e(e.markDef,t)),U7(e,"fill",n)),U7(e,"stroke",r)),yn("opacity",e)),yn("fillOpacity",e)),yn("strokeOpacity",e)),yn("strokeWidth",e)),yn("strokeDash",e)),d6e(e)),QU(e)),A5(e,"href")),l6e(e))}function U7(e,t,n){const{config:r,mark:i,markDef:s}=e;if(mt("invalid",s,r)==="hide"&&n&&!_o(i)){const u=E6e(e,{invalid:!0,channels:hv});if(u)return{[t]:[{test:u,value:null},...pe(n)]}}return n?{[t]:n}:{}}function w6e(e,t){return j2e.reduce((n,r)=>(!x6e.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Bt(e[r])),n),{})}function E6e(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,a)=>{const u=e.getScaleComponent(a);if(u){const o=u.get("type"),l=e.vgField(a,{expr:"datum"});l&&ri(o)&&(s[l]=!0)}return s},{}),i=ee(r);if(i.length>0){const s=t?"||":"&&";return i.map(a=>i5(a,t)).join(` ${s} `)}}function T5(e){const{config:t,markDef:n}=e;if(mt("invalid",n,t)){const i=S6e(e,{channels:Ws});if(i)return{defined:{signal:i}}}return{}}function S6e(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,a)=>{var u;const o=e.getScaleComponent(a);if(o){const l=o.get("type"),c=e.vgField(a,{expr:"datum",binSuffix:!((u=e.stack)===null||u===void 0)&&u.impute?"mid":void 0});c&&ri(l)&&(s[c]=!0)}return s},{}),i=ee(r);if(i.length>0){const s=t?"||":"&&";return i.map(a=>i5(a,t)).join(` ${s} `)}}function q7(e,t){if(t!==void 0)return{[e]:Bt(t)}}const L_="voronoi",nq={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(L_)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(_o(s))return ne(H2e(s)),n;const a={name:e.getName(L_),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},QU(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let u=0,o=!1;return n.forEach((l,c)=>{var f;const d=(f=l.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?u=c:d.indexOf(L_)>=0&&(o=!0)}),o||n.splice(u+1,0,a),n}},rq={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!v5(e.bind),parse:(e,t,n)=>fq(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,a=t.init&&t.init[0],u=nq.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((o,l)=>{var c,f;const d=Ht(`${r}_${o.field}`);n.filter(g=>g.name===d).length||n.unshift(Object.assign(Object.assign({name:d},a?{init:Pl(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${u}[${fe(o.field)}] : null`}]:[],bind:(f=(c=s[o.field])!==null&&c!==void 0?c:s[o.channel])!==null&&f!==void 0?f:s}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Ku)[0],a=r+Lg,u=i.items.map(l=>Ht(`${r}_${l.field}`)),o=u.map(l=>`${l} !== null`).join(" && ");return u.length&&(s.update=`${o} ? {fields: ${a}, values: [${u.join(", ")}]} : null`),delete s.value,delete s.on,n}},Ob="_toggle",iq={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Ob,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ku,r=t.name+Ob;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Xf(e)}}, `)+`${r} ? ${n} : null`}},k6e={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=me(t.clear)?co(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(rq.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ht(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(a=>a.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const a=n.findIndex(u=>u.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ku);r(i,"null"),iq.defined(t)&&(i=n.findIndex(s=>s.name===t.name+Ob),r(i,"false"))}return n}},sq={defined:e=>{const t=e.resolve==="global"&&e.bind&&v5(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==$s;return t&&!n&&ne(W2e),t&&n},parse:(e,t,n)=>{var r;const i=qe(n);if(i.select=me(i.select)?{type:i.select,toggle:t.toggle}:Object.assign(Object.assign({},i.select),{toggle:t.toggle}),fq(t,i),be(n.select)&&(n.select.on||n.select.clear)){const u='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=pe((r=o.filter)!==null&&r!==void 0?r:[]),o.filter.includes(u)||o.filter.push(u)}const s=I_(t.bind)?t.bind.legend:"click",a=me(s)?co(s,"view"):pe(s);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=I_(t.bind)&&t.bind.legend,s=a=>u=>{const o=qe(u);return o.markname=a,o};for(const a of t.project.items){if(!a.hasLegend)continue;const u=`${Ht(a.field)}_legend`,o=`${r}_${u}`;if(n.filter(c=>c.name===o).length===0){const c=i.merge.map(s(`${u}_symbols`)).concat(i.merge.map(s(`${u}_labels`))).concat(i.merge.map(s(`${u}_entries`)));n.unshift(Object.assign(Object.assign({name:o},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${o}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ku),a=r+Lg,u=i.items.filter(d=>d.hasLegend).map(d=>Ht(`${r}_${Ht(d.field)}_legend`)),l=`${u.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${u.join(", ")}]} : null`;t.events&&u.length>0?s.on.push({events:u.map(d=>({signal:d})),update:l}):u.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+Ob),f=I_(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function O6e(e,t,n){var r,i,s,a;const u=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;for(const o of Zn((i=e.component.selection)!==null&&i!==void 0?i:{})){const l=(s=o.project.hasField[u])!==null&&s!==void 0?s:o.project.hasChannel[t];if(l&&sq.defined(o)){const c=(a=n.get("selections"))!==null&&a!==void 0?a:[];c.push(o.name),n.set("selections",c,!1),l.hasLegend=!0}}}const aq="_translate_anchor",uq="_translate_delta",A6e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Qu.defined(t),s=r+aq,{x:a,y:u}=t.project.hasChannel;let o=co(t.translate,"scope");return i||(o=o.map(l=>(l.between[0].markname=r+of,l))),n.push({name:s,value:{},on:[{events:o.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?A3(e,Wt):`slice(${a.signals.visual})`}`:"")+(u!==void 0?`, extent_y: ${i?A3(e,kn):`slice(${u.signals.visual})`}`:"")+"}"}]},{name:r+uq,value:{},on:[{events:o,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&H7(e,t,a,"width",n),u!==void 0&&H7(e,t,u,"height",n),n}};function H7(e,t,n,r,i){var s,a;const u=t.name,o=u+aq,l=u+uq,c=n.channel,f=Qu.defined(t),d=i.filter(w=>w.name===n.signals[f?"data":"visual"])[0],h=e.getSizeSignalRef(r).signal,g=e.getScaleComponent(c),p=g.get("type"),m=g.get("reverse"),b=f?c===Wt?m?"":"-":m?"-":"":"",y=`${o}.extent_${c}`,v=`${b}${l}.${c} / ${f?`${h}`:`span(${y})`}`,_=f?p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear":"panLinear",x=f?p==="pow"?`, ${(s=g.get("exponent"))!==null&&s!==void 0?s:1}`:p==="symlog"?`, ${(a=g.get("constant"))!==null&&a!==void 0?a:1}`:"":"",E=`${_}(${y}, ${v}${x})`;d.on.push({events:{signal:l},update:f?E:`clampRange(${E}, 0, ${h})`})}const oq="_zoom_anchor",lq="_zoom_delta",C6e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Qu.defined(t),s=r+lq,{x:a,y:u}=t.project.hasChannel,o=fe(e.scaleName(Wt)),l=fe(e.scaleName(kn));let c=co(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+of,f))),n.push({name:r+oq,on:[{events:c,update:i?"{"+[o?`x: invert(${o}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&V7(e,t,a,"width",n),u!==void 0&&V7(e,t,u,"height",n),n}};function V7(e,t,n,r,i){var s,a;const u=t.name,o=n.channel,l=Qu.defined(t),c=i.filter(_=>_.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(o),h=d.get("type"),g=l?A3(e,o):c.name,p=u+lq,m=`${u}${oq}.${o}`,b=l?h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear":"zoomLinear",y=l?h==="pow"?`, ${(s=d.get("exponent"))!==null&&s!==void 0?s:1}`:h==="symlog"?`, ${(a=d.get("constant"))!==null&&a!==void 0?a:1}`:"":"",v=`${b}(${g}, ${m}, ${p}${y})`;c.on.push({events:{signal:p},update:l?v:`clampRange(${v}, 0, ${f})`})}const jl="_store",Ku="_tuple",T6e="_modify",cq="vlSelectionResolve",Nv=[o6e,a6e,i6e,iq,rq,Qu,sq,k6e,A6e,C6e,nq];function M6e(e){let t=e.parent;for(;t&&!Hi(t);)t=t.parent;return t}function Xf(e,{escape:t}={escape:!0}){let n=t?fe(e.name):e.name;const r=M6e(e);if(r){const{facet:i}=r;for(const s of ci)i[s]&&(n+=` + '__facet_${s}_' + (facet[${fe(r.vgField(s))}])`)}return n}function M5(e){var t;return Zn((t=e.component.selection)!==null&&t!==void 0?t:{}).reduce((n,r)=>n||r.project.hasSelectionId,!1)}function fq(e,t){(me(t.select)||!t.select.on)&&delete e.events,(me(t.select)||!t.select.clear)&&delete e.clear,(me(t.select)||!t.select.toggle)&&delete e.toggle}function M3(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...M3(e.object)),t.push(...M3(e.property))),t)}function dq(e){return e.object.type==="MemberExpression"?dq(e.object):e.object.name==="datum"}function hq(e){const t=WS(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&dq(r)&&n.add(M3(r).slice(1).join("."))}),n}class xd extends Ct{constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Ab(this.model,this.filter,this),this._dependentFields=hq(this.expr)}clone(){return new xd(null,this.model,qe(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function D6e(e,t){var n;const r={},i=e.config.selection;if(!t||!t.length)return r;for(const s of t){const a=Ht(s.name),u=s.select,o=me(u)?u:u.type,l=be(u)?qe(u):{type:o},c=i[o];for(const d in c)d==="fields"||d==="encodings"||(d==="mark"&&(l[d]=Object.assign(Object.assign({},c[d]),l[d])),(l[d]===void 0||l[d]===!0)&&(l[d]=(n=c[d])!==null&&n!==void 0?n:l[d]));const f=r[a]=Object.assign(Object.assign({},l),{name:a,type:o,init:s.value,bind:s.bind,events:me(l.on)?co(l.on,"scope"):pe(qe(l.on))});for(const d of Nv)d.defined(f)&&d.parse&&d.parse(e,f,s)}return r}function gq(e,t,n,r="datum"){const i=me(t)?t:t.param,s=Ht(i),a=fe(s+jl);let u;try{u=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(u.project.timeUnit){const d=n??e.component.data.raw,h=u.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const o=u.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=u.resolve==="global"?")":`, ${fe(u.resolve)})`,c=`${o}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function pq(e,t,n){const r=Ht(t),i=n.encoding;let s=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=a.project.items[0].field,a.project.items.length>1&&ne(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${fe(s)}.`);else if(i&&!s){const u=a.project.items.filter(o=>o.channel===i);!u.length||u.length>1?(s=a.project.items[0].field,ne((u.length?"Multiple ":"No ")+`matching ${fe(i)} encoding found for selection ${fe(n.param)}. Using "field": ${fe(s)}.`)):s=u[0].field}return`${a.name}[${fe(bi(s))}]`}function N6e(e,t){var n;for(const[r,i]of Xu((n=e.component.selection)!==null&&n!==void 0?n:{})){const s=e.getName(`lookup_${r}`);e.component.data.outputNodes[s]=i.materialized=new dr(new xd(t,e,{param:r}),s,Dt.Lookup,e.component.data.outputNodeRefCounts)}}function Ab(e,t,n){return qh(t,r=>me(r)?r:oxe(r)?gq(e,r,n):NB(r))}var Xp=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $6e(e,t){if(e)return X(e)&&!mu(e)?e.map(n=>c5(n,t)).join(", "):e}function z_(e,t,n,r){var i,s,a,u,o;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(s=(u=e.encode)[t])!==null&&s!==void 0||(u[t]={}),(a=(o=e.encode[t]).update)!==null&&a!==void 0||(o.update={}),e.encode[t].update[n]=r}function Th(e,t,n,r={header:!1}){var i,s;const a=e.combine(),{disable:u,orient:o,scale:l,labelExpr:c,title:f,zindex:d}=a,h=Xp(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!u){for(const g in h){const p=fwe[g],m=h[g];if(p&&p!==t&&p!=="both")delete h[g];else if(jg(m)){const{condition:b}=m,y=Xp(m,["condition"]),v=pe(b),_=w7[g];if(_){const{vgProp:x,part:E}=_,w=[...v.map(k=>{const{test:A}=k,N=Xp(k,["test"]);return Object.assign({test:Ab(null,A)},N)}),y];z_(h,E,x,w),delete h[g]}else if(_===null){const x={signal:v.map(E=>{const{test:w}=E,k=Xp(E,["test"]);return`${Ab(null,w)} ? ${u7(k)} : `}).join("")+u7(y)};h[g]=x}}else if(Ee(m)){const b=w7[g];if(b){const{vgProp:y,part:v}=b;z_(h,v,y,m),delete h[g]}}et(["labelAlign","labelBaseline"],g)&&h[g]===null&&delete h[g]}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:g}=h.encode;h.encode=Object.assign({},g?{grid:g}:{}),kt(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:l,orient:o},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:un(d,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let p=c;!((s=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&Ee(h.encode.labels.update.text)&&(p=Dl(c,"datum.label",h.encode.labels.update.text.signal)),z_(h,"labels","text",{signal:p})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const p of lU)e.hasAxisPart(p)||delete h.encode[p];kt(h.encode)&&delete h.encode}const g=$6e(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:o,grid:!1},g?{title:g}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:un(d,0)})}}}function mq(e){const{axes:t}=e.component,n=[];for(const r of Ws)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",a=e.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function F6e(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Th(i,"grid",t)),...r.map(i=>Th(i,"grid",t)),...n.map(i=>Th(i,"main",t)),...r.map(i=>Th(i,"main",t))].filter(i=>i)}function G7(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},u=t[n==="x"?"axisTop":"axisRight"]||{},o=new Set([...ee(a),...ee(u)]),l={};for(const c of o.values())l[c]={signal:`${r.signal} === "${s}" ? ${_a(a[c])} : ${_a(u[c])}`};return l}return t[i]})])}function R6e(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:IB(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",a=Ee(n)?"axisOrient":`axis${Ag(n)}`,u=[...i,...i.map(l=>s+l.substr(4))],o=["axis",a,s];return{vlOnlyAxisConfig:G7(u,r,e,n),vgAxisConfig:G7(o,r,e,n),axisConfigStyle:I6e([...o,...u],r)}}function I6e(e,t){var n;const r=[{}];for(const i of e){let s=(n=t[i])===null||n===void 0?void 0:n.style;if(s){s=pe(s);for(const a of s)r.push(t.style[a])}}return Object.assign.apply(null,r)}function D3(e,t,n,r={}){var i;const s=gB(e,n,t);if(s!==void 0)return{configFrom:"style",configValue:s};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[a])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const W7={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return XB(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return YB(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return(r=t.grid)!==null&&r!==void 0?r:P6e(n,e)},gridScale:({model:e,channel:t})=>j6e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||yq(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||bq(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:z6e(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:B6e(t.type,n,le(t)&&!!t.timeUnit,le(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var s;const a=e==="x"?"width":e==="y"?"height":void 0,u=a?t.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:q6e({fieldOrDatumDef:r,scaleType:i,size:u,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=vq(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",a=t.fieldDef(s);return mB(i?[x7(i)]:[],le(a)?[x7(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>H6e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:V6e(n,t)}};function P6e(e,t){return!An(e)&&le(t)&&!Pt(t==null?void 0:t.bin)&&!Mn(t==null?void 0:t.bin)}function j6e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function L6e(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Ee(s)?s:D0(s);{const{configValue:a}=D3("labelAngle",r,t==null?void 0:t.style,i);return a!==void 0?D0(a):n===Wt&&et([Kk,Jk],e.type)&&!(le(e)&&e.timeUnit)?270:void 0}}function N3(e){return`(((${e.signal} % 360) + 360) % 360)`}function bq(e,t,n,r){if(e!==void 0)if(n==="x"){if(Ee(e)){const i=N3(e),s=Ee(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ee(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ee(e)){const i=N3(e),s=Ee(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Ee(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function yq(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Ee(e)){const a=N3(e),u=Ee(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${u} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Ee(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function z6e(e,t){if(t==="x"&&et(["quantitative","temporal"],e))return!0}function B6e(e,t,n,r){if(n&&!be(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function U6e(e){return e==="x"?"bottom":"left"}function q6e({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!An(t)&&t!=="log"){if(le(e)){if(Pt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&et(["month","hours","day","quarter"],(i=Kn(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function vq(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,a=i?i.title:void 0;if(s&&a)return bB(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function H6e(e,t){const n=e.values;if(X(n))return oU(t,n);if(Ee(n))return n}function V6e(e,t){return e==="rect"&&vb(t)?1:0}class Yf extends Ct{constructor(t,n){super(t),this.transform=n,this._dependentFields=hq(this.transform.calculate)}clone(){return new Yf(null,qe(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(sc(r)&&JB(r.sort)){const{field:s,timeUnit:a}=r,u=r.sort,o=u.map((l,c)=>`${NB({field:s,timeUnit:a,equal:l})} ? ${c} : `).join("")+u.length;t=new Yf(t,{calculate:o,as:Zf(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${it(this.transform)}`}}function Zf(e,t,n){return de(e,Object.assign({prefix:t,suffix:"sort_index"},n??{}))}function $v(e,t){return et(["top","bottom"],t)?"column":et(["left","right"],t)||e==="row"?"row":"column"}function Qf(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return un((t||{})[e],i[e],n.header[e])}function Fv(e,t,n,r){const i={};for(const s of e){const a=Qf(s,t||{},n,r);a!==void 0&&(i[s]=a)}return i}const D5=["row","column"],N5=["header","footer"];function G6e(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:u}=Fv(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),o=$v(t,u),l=D0(a);return{name:`${t}-title`,type:"group",role:`${o}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),xq(l,o)),_q(o,l,s)),wq(r,i,t,Fwe,OU))}}function _q(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=yq(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function xq(e,t){const n=bq(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function W6e(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of N5)if(n[i])for(const s of n[i]){const a=Y6e(e,t,i,n,s);a!=null&&r.push(a)}return r}function X6e(e,t){var n;const{sort:r}=e;return xs(r)?{field:de(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:X(r)?{field:Zf(e,t,{expr:"datum"}),order:"ascending"}:{field:de(e,{expr:"datum"}),order:r??"ascending"}}function $3(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:u,labelExpr:o}=Fv(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=a5({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=$v(t,u);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:o?Dl(Dl(o,"datum.label",l),"datum.value",de(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),xq(s,c)),_q(c,s,a)),wq(n,e,t,Rwe,AU))}function Y6e(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:a}=r,u=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:f}=Fv(["labelOrient"],a.header,u,t);(t==="row"&&!et(["top","bottom"],f)||t==="column"&&!et(["left","right"],f))&&(s=$3(a,t,u))}const o=Hi(e)&&!Rg(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:X6e(a,t)}:{}),c&&o?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:l}:{})}}return null}const Z6e={column:{start:0,end:1},row:{start:1,end:0}};function Q6e(e,t){return Z6e[t][e]}function J6e(e,t){const n={};for(const r of ci){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:a}=Fv(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),u=$v(r,a),o=Q6e(s,u);o!==void 0&&(n[u]=o)}}return kt(n)?void 0:n}function wq(e,t,n,r,i){const s={};for(const a of r){if(!i[a])continue;const u=Qf(a,t==null?void 0:t.header,e,n);u!==void 0&&(s[i[a]]=u)}return s}function $5(e){return[...Yp(e,"width"),...Yp(e,"height"),...Yp(e,"childWidth"),...Yp(e,"childHeight")]}function Yp(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const a=s.get("type"),u=s.get("range");if(An(a)&&vo(u)){const o=e.scaleName(n);return Hi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[X7(o,u)]:[X7(o,u),{name:i,update:Eq(o,s,`domain('${o}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",u=E3(e.config.view,s?"width":"height"),o=`isFinite(${a}) ? ${a} : ${u}`;return[{name:i,init:o,on:[{update:o,events:"window:resize"}]}]}else return[{name:i,value:r}]}function X7(e,t){const n=`${e}_step`;return Ee(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Eq(e,t,n){const r=t.get("type"),i=t.get("padding"),s=un(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${_a(a)}, ${_a(s)}) * ${e}_step`}function Sq(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function kq(e,t){return ee(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),_d(t,i,r,s=>Bt(s.value)))},{})}function Oq(e,t){if(Hi(t))return e==="theta"?"independent":"shared";if(Sd(t))return"shared";if(z5(t))return On(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function F5(e,t){const n=e.scale[t],r=On(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&ne(D_e(t)),"independent"):e[r][t]||"shared"}const K6e=Object.assign(Object.assign({},jwe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Aq=ee(K6e);class eEe extends Pa{}const Y7={symbols:tEe,gradient:nEe,labels:rEe,entries:iEe};function tEe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){var a,u,o,l,c,f,d,h;if(s!=="symbol")return;const{markDef:g,encoding:p,config:m,mark:b}=n,y=g.filled&&b!=="trail";let v=Object.assign(Object.assign({},B2e({},n,Fxe)),KU(n,{filled:y}));const _=(a=i.get("symbolOpacity"))!==null&&a!==void 0?a:m.legend.symbolOpacity,x=(u=i.get("symbolFillColor"))!==null&&u!==void 0?u:m.legend.symbolFillColor,E=(o=i.get("symbolStrokeColor"))!==null&&o!==void 0?o:m.legend.symbolStrokeColor,w=_===void 0?(l=Cq(p.opacity))!==null&&l!==void 0?l:g.opacity:void 0;if(v.fill){if(r==="fill"||y&&r===jr)delete v.fill;else if(v.fill.field)x?delete v.fill:(v.fill=Bt((c=m.legend.symbolBaseFillColor)!==null&&c!==void 0?c:"black"),v.fillOpacity=Bt(w??1));else if(X(v.fill)){const k=(h=(d=F3((f=p.fill)!==null&&f!==void 0?f:p.color))!==null&&d!==void 0?d:g.fill)!==null&&h!==void 0?h:y&&g.color;k&&(v.fill=Bt(k))}}if(v.stroke){if(r==="stroke"||!y&&r===jr)delete v.stroke;else if(v.stroke.field||E)delete v.stroke;else if(X(v.stroke)){const k=un(F3(p.stroke||p.color),g.stroke,y?g.color:void 0);k&&(v.stroke={value:k})}}if(r!==Ra){const k=le(t)&&Mq(n,i,t);k?v.opacity=[Object.assign({test:k},Bt(w??1)),Bt(m.legend.unselectedOpacity)]:w&&(v.opacity=Bt(w))}return v=Object.assign(Object.assign({},v),e),kt(v)?void 0:v}function nEe(e,{model:t,legendType:n,legendCmpt:r}){var i;if(n!=="gradient")return;const{config:s,markDef:a,encoding:u}=t;let o={};const c=((i=r.get("gradientOpacity"))!==null&&i!==void 0?i:s.legend.gradientOpacity)===void 0?Cq(u.opacity)||a.opacity:void 0;return c&&(o.opacity=Bt(c)),o=Object.assign(Object.assign({},o),e),kt(o)?void 0:o}function rEe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},a=n.config,u=le(t)?Mq(n,i,t):void 0,o=u?[{test:u,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Il(c)?f=zi({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):l===void 0&&c===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=zi({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&le(t)&&t.timeUnit===void 0&&(f=zi({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const d=Object.assign(Object.assign(Object.assign({},o?{opacity:o}:{}),f?{text:f}:{}),e);return kt(d)?void 0:d}function iEe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function Cq(e){return Tq(e,(t,n)=>Math.max(t,n.value))}function F3(e){return Tq(e,(t,n)=>un(t,n.value))}function Tq(e,t){if(Kxe(e))return pe(e.condition).reduce(t,e.value);if(Xi(e))return e.value}function Mq(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=fe(n.field);return r.map(s=>`(!length(data(${fe(Ht(s)+jl)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Z7={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return XB(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return YB(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:fEe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:dEe(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:aEe(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>uf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(af(n)&&Li(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>sEe(t,e)};function sEe(e,t){const n=e.values;if(X(n))return oU(t,n);if(Ee(n))return n}function aEe(e,t,n,r){var i;if(t!=="shape"){const s=(i=F3(n))!==null&&i!==void 0?i:r;if(s)return s}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function uEe(e){const{legend:t}=e;return un(t.type,oEe(e))}function oEe({channel:e,timeUnit:t,scaleType:n}){if(af(e)){if(et(["quarter","month","day"],t))return"symbol";if(Li(n))return"gradient"}return"symbol"}function lEe({legendConfig:e,legendType:t,orient:n,legend:r}){var i,s;return(s=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:cEe(n,t)}function cEe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function fEe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:u,gradientVerticalMinLength:o}=e;if(Li(i))return n==="horizontal"?r==="top"||r==="bottom"?Q7(t,"width",a,s):a:Q7(t,"height",o,u)}function Q7(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function dEe(e){if(et(["quantile","threshold","log","symlog"],e))return"greedy"}function Dq(e){const t=sn(e)?hEe(e):bEe(e);return e.component.legends=t,t}function hEe(e){const{encoding:t}=e,n={};for(const r of[jr,...TU]){const i=dn(t[r]);!i||!e.getScaleComponent(r)||r===Lr&&le(i)&&i.type===vd||(n[r]=mEe(e,r))}return n}function gEe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function pEe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function mEe(e,t){var n,r,i;let s=e.legend(t);const{markDef:a,encoding:u,config:o}=e,l=o.legend,c=new eEe({},gEe(e,t));O6e(e,t,c);const f=s!==void 0?!s:l.disable;if(c.set("disable",f,s!==void 0),f)return c;s=s||{};const d=e.getScaleComponent(t).get("type"),h=dn(u[t]),g=le(h)?(n=Kn(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,p=s.orient||o.legend.orient||"right",m=uEe({legend:s,channel:t,timeUnit:g,scaleType:d}),b=lEe({legend:s,legendType:m,orient:p,legendConfig:l}),y={legend:s,channel:t,model:e,markDef:a,encoding:u,fieldOrDatumDef:h,legendConfig:l,config:o,scaleType:d,orient:p,legendType:m,direction:b};for(const w of Aq){if(m==="gradient"&&w.startsWith("symbol")||m==="symbol"&&w.startsWith("gradient"))continue;const k=w in Z7?Z7[w](y):s[w];if(k!==void 0){const A=pEe(k,w,s,e.fieldDef(t));(A||o.legend[w]===void 0)&&c.set(w,k,A)}}const v=(r=s==null?void 0:s.encoding)!==null&&r!==void 0?r:{},_=c.get("selections"),x={},E={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:m};for(const w of["labels","legend","title","symbols","gradient","entries"]){const k=kq((i=v[w])!==null&&i!==void 0?i:{},e),A=w in Y7?Y7[w](k,E):k;A!==void 0&&!kt(A)&&(x[w]=Object.assign(Object.assign(Object.assign({},_!=null&&_.length&&le(h)?{name:`${Ht(h.field)}_legend_${w}`}:{}),_!=null&&_.length?{interactive:!!_}:{}),{update:A}))}return kt(x)||c.set("encode",x,!!(s!=null&&s.encoding)),c}function bEe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Dq(r);for(const i of ee(r.component.legends))n.legend[i]=F5(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Nq(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ee(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Nq(e,t){var n,r,i,s;if(!e)return t.clone();const a=e.getWithExplicit("orient"),u=t.getWithExplicit("orient");if(a.explicit&&u.explicit&&a.value!==u.value)return;let o=!1;for(const l of Aq){const c=Zu(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return yEe(f,d);case"title":return yB(f,d);case"type":return o=!0,Hr("symbol")}return Mv(f,d,l,"legend")});e.setWithExplicit(l,c)}return o&&(!((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0)&&r.gradient&&gb(e.implicit,["encode","gradient"]),!((s=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&gb(e.explicit,["encode","gradient"])),e}function yEe(e,t){return t.value==="circle"?t:e}var vEe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _Ee(e,t,n,r){var i,s,a,u,o;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(s=(u=e.encode)[t])!==null&&s!==void 0||(u[t]={}),(a=(o=e.encode[t]).update)!==null&&a!==void 0||(o.update={}),e.encode[t].update[n]=r}function $q(e){const t=e.component.legends,n={};for(const i of ee(t)){const s=e.getScaleComponent(i),a=Ft(s.get("domains"));if(n[a])for(const u of n[a])Nq(u,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return Zn(n).flat().map(i=>xEe(i,e.config)).filter(i=>i!==void 0)}function xEe(e,t){var n,r,i;const s=e.combine(),{disable:a,labelExpr:u,selections:o}=s,l=vEe(s,["disable","labelExpr","selections"]);if(!a){if(t.aria===!1&&l.aria==null&&(l.aria=!1),!((n=l.encode)===null||n===void 0)&&n.symbols){const c=l.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!l.stroke&&(c.stroke={value:"transparent"});for(const f of TU)l[f]&&delete c[f]}if(l.title||delete l.title,u!==void 0){let c=u;!((i=(r=l.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0)&&i.update&&Ee(l.encode.labels.update.text)&&(c=Dl(u,"datum.label",l.encode.labels.update.text.signal)),_Ee(l,"labels","text",{signal:c})}return l}}function wEe(e){return Sd(e)||z5(e)?EEe(e):Fq(e)}function EEe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Fq(e))}function Fq(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},s=t.data.reduce((a,u)=>{const o=Ee(u)?u.signal:`data('${e.lookupDataSource(u)}')`;return et(a,o)||a.push(o),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const SEe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Rq extends Pa{constructor(t,n,r,i){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Iq(e){e.component.projection=sn(e)?kEe(e):CEe(e)}function kEe(e){var t;if(e.hasProjection){const n=Er(e.specifiedProjection),r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,s=r?OEe(e):void 0,a=new Rq(e.projectionName(!0),Object.assign(Object.assign({},(t=Er(e.config.projection))!==null&&t!==void 0?t:{}),n??{}),i,s);return a.get("type")||a.set("type","equalEarth",!1),a}}function OEe(e){const t=[],{encoding:n}=e;for(const r of[[qs,Us],[yi,ns]])(dn(n[r[0]])||dn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Lr)&&e.typedFieldDef(Lr).type===vd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Dt.Main)),t}function AEe(e,t){const n=kk(SEe,i=>!!(!Se(e.explicit,i)&&!Se(t.explicit,i)||Se(e.explicit,i)&&Se(t.explicit,i)&&gs(e.get(i),t.get(i))));if(gs(e.size,t.size)){if(n)return e;if(gs(e.explicit,{}))return t;if(gs(t.explicit,{}))return e}return null}function CEe(e){if(e.children.length===0)return;let t;for(const r of e.children)Iq(r);const n=kk(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=AEe(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Rq(r,t.specifiedProjection,t.size,qe(t.data));for(const s of e.children){const a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),r),a.merged=!0)}return i}}var TEe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function MEe(e,t,n,r){var i,s;if(Pg(t,n)){const a=sn(e)?(s=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&s!==void 0?s:{}:{},u=de(t,{expr:"datum"}),o=de(t,{expr:"datum",binSuffix:"end"});return{formulaAs:de(t,{binSuffix:"range",forAs:!0}),formula:Fg(u,o,a.format,a.formatType,r)}}return{}}function Pq(e,t){return`${cB(e)}_${t}`}function DEe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function R5(e,t,n){var r;const i=(r=Sv(n,void 0))!==null&&r!==void 0?r:{},s=Pq(i,t);return e.getName(`${s}_bins`)}function NEe(e){return"as"in e}function J7(e,t,n){let r,i;NEe(e)?r=me(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[de(e,{forAs:!0}),de(e,{binSuffix:"end",forAs:!0})];const s=Object.assign({},Sv(t,void 0)),a=Pq(s,e.field),{signal:u,extentSignal:o}=DEe(n,a);if(gv(s.extent)){const c=s.extent;i=pq(n,c.param,c),delete s.extent}const l=Object.assign(Object.assign(Object.assign({bin:s,field:e.field,as:[r]},u?{signal:u}:{}),o?{extentSignal:o}:{}),i?{span:i}:{});return{key:a,binComponent:l}}class Es extends Ct{constructor(t,n){super(t),this.bins=n}clone(){return new Es(null,qe(this.bins))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{if(vi(s)&&Pt(s.bin)){const{key:u,binComponent:o}=J7(s,s.bin,n);i[u]=Object.assign(Object.assign(Object.assign({},o),i[u]),MEe(n,s,a,n.config))}return i},{});return kt(r)?null:new Es(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=J7(n,n.bin,r);return new Es(t,{[i]:s})}merge(t,n){for(const r of ee(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=ps([...this.bins[r].as,...t.bins[r].as],it)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Zn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Zn(this.bins).map(t=>t.field))}hash(){return`Bin ${it(this.bins)}`}assemble(){return Zn(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,s=t.bin,{extent:a}=s,u=TEe(s,["extent"]),o=Object.assign(Object.assign(Object.assign({type:"bin",field:bi(t.field),as:r,signal:t.signal},gv(a)?{extent:null}:{extent:a}),t.span?{span:{signal:`span(${t.span})`}}:{}),u);!a&&t.extentSignal&&(n.push({type:"extent",field:bi(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:de({field:r[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function $Ee(e,t,n,r){var i;const s=sn(r)?r.encoding[Gs(t)]:void 0;if(vi(n)&&sn(r)&&tU(n,s,r.markDef,r.config))e.add(de(n,{})),e.add(de(n,{suffix:"end"})),n.bin&&Pg(n,t)&&e.add(de(n,{binSuffix:"range"}));else if(f2e(t)){const a=c2e(t);e.add(r.getName(a))}else e.add(de(n));return sc(n)&&wxe((i=n.scale)===null||i===void 0?void 0:i.range)&&e.add(n.scale.range.field),e}function FEe(e,t){var n;for(const r of ee(t)){const i=t[r];for(const s of ee(i))r in e?e[r][s]=new Set([...(n=e[r][s])!==null&&n!==void 0?n:[],...i[s]]):e[r]={[s]:i[s]}}}class qi extends Ct{constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}clone(){return new qi(null,new Set(this.dimensions),qe(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((a,u)=>{var o,l,c,f;const{aggregate:d,field:h}=a;if(d)if(d==="count")(o=i["*"])!==null&&o!==void 0||(i["*"]={}),i["*"].count=new Set([de(a,{forAs:!0})]);else{if(Aa(d)||yo(d)){const g=Aa(d)?"argmin":"argmax",p=d[g];(l=i[p])!==null&&l!==void 0||(i[p]={}),i[p][g]=new Set([de({op:g,field:p},{forAs:!0})])}else(c=i[h])!==null&&c!==void 0||(i[h]={}),i[h][d]=new Set([de(a,{forAs:!0})]);bo(u)&&n.scaleDomain(u)==="unaggregated"&&((f=i[h])!==null&&f!==void 0||(i[h]={}),i[h].min=new Set([de({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([de({field:h,aggregate:"max"},{forAs:!0})]))}else $Ee(s,u,a,n)}),s.size+ee(i).length===0)?null:new qi(t,s,i)}static makeFromTransform(t,n){var r,i,s;const a=new Set,u={};for(const o of n.aggregate){const{op:l,field:c,as:f}=o;l&&(l==="count"?((r=u["*"])!==null&&r!==void 0||(u["*"]={}),u["*"].count=new Set([f||de(o,{forAs:!0})])):((i=u[c])!==null&&i!==void 0||(u[c]={}),u[c][l]=new Set([f||de(o,{forAs:!0})])))}for(const o of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(o);return a.size+ee(u).length===0?null:new qi(t,a,u)}merge(t){return Gz(this.dimensions,t.dimensions)?(FEe(this.measures,t.measures),!0):(W_e("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ee(this.measures)])}producedFields(){const t=new Set;for(const n of ee(this.measures))for(const r of ee(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${it({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ee(this.measures))for(const a of ee(this.measures[s]))for(const u of this.measures[s][a])r.push(u),t.push(a),n.push(s==="*"?null:bi(s));return{type:"aggregate",groupby:[...this.dimensions].map(bi),ops:t,fields:n,as:r}}}class wd extends Ct{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of ci){const a=n.facet[s];if(a){const{bin:u,sort:o}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[de(a),...Pt(u)?[de(a,{binSuffix:"end"})]:[]]},xs(o)?{sortField:o}:X(o)?{sortIndexField:Zf(a,s)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of ci)this[n]&&(t+=` ${n.charAt(0)}:${it(this[n])}`);return t}get fields(){var t;const n=[];for(const r of ci)!((t=this[r])===null||t===void 0)&&t.fields&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of ci)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ws){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(An(i)&&vo(s)){const a=Rv(this.childModel,n),u=L5(a);u?t[n]=u:ne(Lk(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],a=[],u=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),a.push("max")):(s.push(r[i]),a.push("distinct")),u.push(`distinct_${r[i]}`));const{sortField:o,sortIndexField:l}=this[t];if(o){const{op:c=_v,field:f}=o;s.push(f),a.push(c),u.push(de(o,{forAs:!0}))}else l&&(s.push(l),a.push("max"),u.push(l));return{name:this[t].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},s.length?{fields:s,ops:a,as:u}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],u={};for(const c of D5){for(const f of N5){const d=(n=s[c]&&s[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){u[c]=!0;break}}if(u[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};a.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:l}=u;return(o||l)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){var t,n;const r=[];let i=null;const s=this.getChildIndependentFieldsWithStep(),{column:a,row:u,facet:o}=this;if(a&&u&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;const l=[].concat((t=s.x)!==null&&t!==void 0?t:[],(n=s.y)!==null&&n!==void 0?n:[]),c=l.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[va,ya])this[l]&&r.push(this.assembleRowColumnHeaderData(l,i,s));if(o){const l=this.assembleFacetHeaderData(s);l&&r.push(...l)}return r}}function K7(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function REe(e,t){const n=Ck(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=K7(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=K7(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return ne(e_e(t)),null}function IEe(e){const t={};return Dm(e.filter,n=>{var r;if(DB(n)){let i=null;Hk(n)?i=Yr(n.equal):Gk(n)?i=Yr(n.lte):Vk(n)?i=Yr(n.lt):Wk(n)?i=Yr(n.gt):Xk(n)?i=Yr(n.gte):Yk(n)?i=n.range[0]:Zk(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(ic(i)?t[n.field]="date":Ot(i)?t[n.field]="number":me(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function PEe(e){const t={};function n(r){Gf(r)?t[r.field]="date":r.type==="quantitative"&&D2e(r.aggregate)?t[r.field]="number":zf(r.field)>1?r.field in t||(t[r.field]="flatten"):sc(r)&&xs(r.sort)&&zf(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((sn(e)||Hi(e))&&e.forEachFieldDef((r,i)=>{if(vi(r))n(r);else{const s=nc(i),a=e.fieldDef(s);n(Object.assign(Object.assign({},r),{type:a.type}))}}),sn(e)){const{mark:r,markDef:i,encoding:s}=e;if(_o(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",u=s[a];le(u)&&u.type==="quantitative"&&!(u.field in t)&&(t[u.field]="number")}}return t}function jEe(e){const t={};if(sn(e)&&e.component.selection)for(const n of ee(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&zf(i.field)>1&&(t[i.field]="flatten")}return t}class Vn extends Ct{constructor(t,n){super(t),this._parse=n}clone(){return new Vn(null,qe(this._parse))}hash(){return`Parse ${it(this._parse)}`}static makeExplicit(t,n,r){var i;let s={};const a=n.data;return!$u(a)&&(!((i=a==null?void 0:a.format)===null||i===void 0)&&i.parse)&&(s=a.format.parse),this.makeWithAncestors(t,s,{},r)}static makeWithAncestors(t,n,r,i){for(const u of ee(r)){const o=i.getWithExplicit(u);o.value!==void 0&&(o.explicit||o.value===r[u]||o.value==="derived"||r[u]==="flatten"?delete r[u]:ne(h7(u,r[u],o.value)))}for(const u of ee(n)){const o=i.get(u);o!==void 0&&(o===n[u]?delete n[u]:ne(h7(u,n[u],o)))}const s=new Pa(n,r);i.copyAll(s);const a={};for(const u of ee(s.combine())){const o=s.get(u);o!==null&&(a[u]=o)}return ee(a).length===0||i.parseNothing?null:new Vn(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of ee(this._parse)){const r=this._parse[n];zf(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ee(this._parse))}dependentFields(){return new Set(ee(this._parse))}assembleTransforms(t=!1){return ee(this._parse).filter(n=>t?zf(n)>1:!0).map(n=>{const r=REe(n,this._parse[n]);return r?{type:"formula",expr:r,as:Tk(n)}:null}).filter(n=>n!==null)}}class eo extends Ct{clone(){return new eo(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([$s])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:$s}}}class zg extends Ct{constructor(t,n){super(t),this.params=n}clone(){return new zg(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${it(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class Bg extends Ct{constructor(t,n){super(t),this.params=n}clone(){return new Bg(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${it(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class Ll extends Ct{constructor(t){super(null),t??(t={name:"source"});let n;if($u(t)||(n=t.format?Object.assign({},Tr(t.format,["parse"])):{}),$0(t))this._data={values:t.values};else if(Wf(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];et(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else XU(t)?this._data={values:[{type:"Sphere"}]}:(GU(t)||$u(t))&&(this._data={});this._generator=$u(t),t.name&&(this._name=t.name),n&&!kt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var eM=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},LEe=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Mh;function I5(e){return e instanceof Ll||e instanceof zg||e instanceof Bg}class P5{constructor(){Mh.set(this,void 0),eM(this,Mh,!1,"f")}setModified(){eM(this,Mh,!0,"f")}get modifiedFlag(){return LEe(this,Mh,"f")}}Mh=new WeakMap;class ac extends P5{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class j5 extends P5{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class zEe extends j5{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ee(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class BEe extends j5{constructor(t){super(),this.requiresSelectionId=t&&M5(t)}run(t){t instanceof eo&&(this.requiresSelectionId&&(I5(t.parent)||t.parent instanceof qi||t.parent instanceof Vn)||(this.setModified(),t.remove()))}}class UEe extends P5{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof ws&&(r=t.producedFields(),Ok(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class qEe extends j5{constructor(){super()}run(t){t instanceof dr&&!t.isRequired()&&(this.setModified(),t.remove())}}class HEe extends ac{run(t){if(!I5(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Vn)if(t instanceof Vn)this.setModified(),t.merge(n);else{if(Ak(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class VEe extends ac{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Vn);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const a of r){const u=a.parse;for(const o of ee(u))o in i?i[o]!==u[o]&&s.add(o):i[o]=u[o]}for(const a of s)delete i[a];if(!kt(i)){this.setModified();const a=new Vn(t,i);for(const u of n){if(u instanceof Vn)for(const o of ee(i))delete u.parse[o];t.removeChild(u),u.parent=a,u instanceof Vn&&ee(u.parse).length===0&&u.remove()}}}}}class GEe extends ac{run(t){t instanceof dr||t.numChildren()>0||t instanceof wd||t instanceof Ll||(this.setModified(),t.remove())}}class WEe extends ac{run(t){const n=t.children.filter(i=>i instanceof ws),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class XEe extends ac{run(t){const n=t.children.filter(i=>i instanceof qi),r={};for(const i of n){const s=it(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ee(r)){const s=r[i];if(s.length>1){const a=s.pop();for(const u of s)a.merge(u)&&(t.removeChild(u),u.parent=a,u.remove(),this.setModified())}}}}class YEe extends ac{constructor(t){super(),this.model=t}run(t){const n=!(I5(t)||t instanceof xd||t instanceof Vn||t instanceof eo),r=[],i=[];for(const s of t.children)s instanceof Es&&(n&&!Ak(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const a of r)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Es?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class ZEe extends ac{run(t){const n=[...t.children];if(!Ml(n,a=>a instanceof dr)||t.numChildren()<=1)return;const i=[];let s;for(const a of n)if(a instanceof dr){let u=a;for(;u.numChildren()===1;){const[o]=u.children;if(o instanceof dr)u=o;else break}i.push(...u.children),s?(t.removeChild(a),a.parent=s.parent,s.parent.removeChild(s),s.parent=u,this.setModified()):s=u}else i.push(a);if(i.length){this.setModified();for(const a of i)a.parent.removeChild(a),a.parent=s}}}class uc extends Ct{constructor(t,n){super(t),this.transform=n}clone(){return new uc(null,qe(this.transform))}addDimensions(t){this.transform.groupby=ps(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:de(t)}hash(){return`JoinAggregateTransform ${it(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function QEe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=de(r);return i&&t.push(i),t},[])}function JEe(e){return X(e)&&e.every(t=>me(t))&&e.length>1}class xa extends Ct{constructor(t,n){super(t),this._stack=n}clone(){return new xa(null,qe(this._stack))}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:a="zero"}=n,u=[],o=[];if(n.sort!==void 0)for(const f of n.sort)u.push(f.field),o.push(un(f.order,"ascending"));const l={field:u,order:o};let c;return JEe(s)?c=s:me(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new xa(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:a,offset:u,impute:o}=r,l=s.map(h=>{const g=i[h];return Ns(g)}).filter(h=>!!h),c=QEe(n),f=n.encoding.order;let d;return X(f)||le(f)?d=pB(f):d=c.reduce((h,g)=>(h.field.push(g),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new xa(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:c,sort:d,offset:u,impute:o,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${it(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[de(i,{binSuffix:"mid"})]:[de(i,{}),de(i,{binSuffix:"end"})]:[de(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:a,offset:u,impute:o,as:l}=this._stack;if(o)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=de(c,{expr:"datum"}),g=de(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${g}`,as:de(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:de(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:u}),t}}class Ed extends Ct{constructor(t,n){super(t),this.transform=n}clone(){return new Ed(null,qe(this.transform))}addDimensions(t){this.transform.groupby=ps(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:de(t)}hash(){return`WindowTransform ${it(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],s=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),s.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const a=this.transform.frame,u=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&r.every(d=>Ik(d)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},u!==void 0?{groupby:u}:{});const o=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)o.push(d.field),l.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:o,order:l},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:r,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),u!==void 0?{groupby:u}:{}),a!==void 0?{frame:a}:{})}}function KEe(e){function t(n){if(!(n instanceof wd)){const r=n.clone();if(r instanceof dr){const i=I3+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof qi||r instanceof xa||r instanceof Ed||r instanceof uc)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function R3(e){if(e instanceof wd)if(e.numChildren()===1&&!(e.children[0]instanceof dr)){const t=e.children[0];(t instanceof qi||t instanceof xa||t instanceof Ed||t instanceof uc)&&t.addDimensions(e.fields),t.swapWithParent(),R3(e)}else{const t=e.model.component.data.main;jq(t);const n=KEe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(R3)}function jq(e){if(e instanceof dr&&e.type===Dt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof wd||(t.swapWithParent(),jq(e))}}const I3="scale_",Zp=5;function P3(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!P3(t.children))return!1}return!0}function Si(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function tM(e,t,n){let r=e.sources,i=!1;return i=Si(new qEe,r)||i,i=Si(new BEe(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Si(new GEe,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Si(new HEe,r)||i,i=Si(new YEe(t),r)||i,i=Si(new UEe,r)||i,i=Si(new VEe,r)||i,i=Si(new XEe,r)||i,i=Si(new WEe,r)||i,i=Si(new zEe,r)||i,i=Si(new ZEe,r)||i),e.sources=r,i}function e4e(e,t){P3(e.sources);let n=0,r=0;for(let i=0;i<Zp&&tM(e,t,!0);i++)n++;e.sources.map(R3);for(let i=0;i<Zp&&tM(e,t,!1);i++)r++;P3(e.sources),Math.max(n,r)===Zp&&ne(`Maximum optimization runs(${Zp}) reached.`)}class Dr{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Dr(()=>t(n))}}var t4e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Lq(e){sn(e)?n4e(e):r4e(e)}function n4e(e){const t=e.component.scales;for(const n of ee(t)){const r=s4e(e,n);if(t[n].setWithExplicit("domains",r),u4e(e,n),e.component.data.isFaceted){let s=e;for(;!Hi(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const u of r.value)da(u)&&(u.data=I3+u.data.replace(I3,""))}}}function r4e(e){for(const n of e.children)Lq(n);const t=e.component.scales;for(const n of ee(t)){let r,i=null;for(const s of e.children){const a=s.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Zu(r,a.getWithExplicit("domains"),"domains","scale",j3);const u=a.get("selectionExtent");i&&u&&i.param!==u.param&&ne(Z2e),i=u}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function i4e(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=nM(t,n);if(!i){ne(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=nM(t,n);if(i)return"unaggregated"}return e}function s4e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=i4e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&dn(r.x2)?dn(r.x)?Zu(fu(n,i,e,"x"),fu(n,i,e,"x2"),"domain","scale",j3):fu(n,i,e,"x2"):t==="y"&&dn(r.y2)?dn(r.y)?Zu(fu(n,i,e,"y"),fu(n,i,e,"y2"),"domain","scale",j3):fu(n,i,e,"y2"):fu(n,i,e,t)}function a4e(e,t,n){return e.map(r=>({signal:`{data: ${kv(r,{timeUnit:n,type:t})}}`}))}function B_(e,t,n){var r;const i=(r=Kn(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?a4e(e,t,i):[e]}function fu(e,t,n,r){const{encoding:i}=n,s=dn(i[r]),{type:a}=s,u=s.timeUnit;if(xxe(t)){const f=fu(e,void 0,n,r),d=B_(t.unionWith,a,u);return os([...d,...f.value])}else{if(Ee(t))return os([t]);if(t&&t!=="unaggregated"&&!jB(t))return os(B_(t,a,u))}const o=n.stack;if(o&&r===o.fieldChannel){if(o.offset==="normalize")return Hr([[0,1]]);const f=n.requestDataName(Dt.Main);return Hr([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const l=bo(r)&&le(s)?o4e(n,r,e):void 0;if(Xs(s)){const f=B_([s.datum],a,u);return Hr(f)}const c=s;if(t==="unaggregated"){const f=n.requestDataName(Dt.Main),{field:d}=s;return Hr([{data:f,field:de({field:d,aggregate:"min"})},{data:f,field:de({field:d,aggregate:"max"})}])}else if(Pt(c.bin)){if(An(e))return Hr(e==="bin-ordinal"?[]:[{data:M0(l)?n.requestDataName(Dt.Main):n.requestDataName(Dt.Raw),field:n.vgField(r,Pg(c,r)?{binSuffix:"range"}:{}),sort:l===!0||!be(l)?{field:n.vgField(r,{}),op:"min"}:l}]);{const{bin:f}=c;if(Pt(f)){const d=R5(n,c.field,f);return Hr([new Dr(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return Hr([{data:n.requestDataName(Dt.Main),field:n.vgField(r,{})}])}}else if(c.timeUnit&&et(["time","utc"],e)&&tU(c,sn(n)?n.encoding[Gs(r)]:void 0,n.markDef,n.config)){const f=n.requestDataName(Dt.Main);return Hr([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return Hr(l?[{data:M0(l)?n.requestDataName(Dt.Main):n.requestDataName(Dt.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(Dt.Main),field:n.vgField(r)}])}function U_(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n??(t?"sum":_v)},r?{field:bi(r)}:{}),i?{order:i}:{})}function u4e(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,s=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,a=jB(i)&&i,u=rc(s)&&gv(s.extent)&&s.extent;(a||u)&&r.set("selectionExtent",a??u,!0)}function o4e(e,t,n){if(!An(n))return;const r=e.fieldDef(t),i=r.sort;if(JB(i))return{op:"min",field:Zf(r,t),order:"ascending"};const{stack:s}=e,a=s?new Set([...s.groupbyFields,...s.stackBy.map(u=>u.fieldDef.field)]):void 0;if(xs(i)){const u=s&&!a.has(i.field);return U_(i,u)}else if(QB(i)){const{encoding:u,order:o}=i,l=e.fieldDef(u),{aggregate:c,field:f}=l,d=s&&!a.has(f);if(Aa(c)||yo(c))return U_({field:de(l),order:o},d);if(Ik(c)||!c)return U_({op:c,field:f,order:o},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(et(["ascending",void 0],i))return!0}}function nM(e,t){const{aggregate:n,type:r}=e;return n?me(n)&&!$2e.has(n)?{valid:!1,reason:S_e(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:k_e(e)}:{valid:!0}:{valid:!1,reason:E_e(e)}}function j3(e,t,n,r){return e.explicit&&t.explicit&&ne(M_e(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function l4e(e){const t=ps(e.map(a=>da(a)?t4e(a,["sort"]):a),it),n=ps(e.map(a=>{if(da(a)){const u=a.sort;return u!==void 0&&!M0(u)&&("op"in u&&u.op==="count"&&delete u.field,u.order==="ascending"&&delete u.order),u}}).filter(a=>a!==void 0),it);if(t.length===0)return;if(t.length===1){const a=e[0];if(da(a)&&n.length>0){let u=n[0];if(n.length>1)ne(p7),u=!0;else if(be(u)&&"field"in u){const o=u.field;a.field===o&&(u=u.order?{order:u.order}:!0)}return Object.assign(Object.assign({},a),{sort:u})}return a}const r=ps(n.map(a=>M0(a)||!("op"in a)||me(a.op)&&a.op in T2e?a:(ne(N_e(a)),!0)),it);let i;r.length===1?i=r[0]:r.length>1&&(ne(p7),i=!0);const s=ps(e.map(a=>da(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:t.map(u=>u.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function L5(e){if(da(e)&&me(e.field))return e.field;if(R2e(e)){let t;for(const n of e.fields)if(da(n)&&me(n.field)){if(!t)t=n.field;else if(t!==n.field)return ne($_e),t}return ne(F_e),t}else if(I2e(e)){ne(R_e);const t=e.fields[0];return me(t)?t:void 0}}function Rv(e,t){const r=e.component.scales[t].get("domains").map(i=>(da(i)&&(i.data=e.lookupDataSource(i.data)),i));return l4e(r)}var c4e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zq(e){return Sd(e)||z5(e)?e.children.reduce((t,n)=>t.concat(zq(n)),rM(e)):rM(e)}function rM(e){return ee(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:a,selectionExtent:u,domains:o,range:l,reverse:c}=i,f=c4e(i,["name","type","selectionExtent","domains","range","reverse"]),d=f4e(i.range,s,n,e),h=Rv(e,n),g=u?t6e(e,u,r,h):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},h?{domain:h}:{}),g?{domainRaw:g}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function f4e(e,t,n,r){if(On(n)){if(vo(e))return{step:{signal:`${t}_step`}}}else if(be(e)&&da(e))return Object.assign(Object.assign({},e),{data:r.lookupDataSource(e.data)});return e}class Bq extends Pa{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Ml(this.get("domains"),t=>X(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const d4e=["range","scheme"];function h4e(e){const t=e.component.scales;for(const n of hv){const r=t[n];if(!r)continue;const i=g4e(n,e);r.setWithExplicit("range",i)}}function iM(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=zr(t),a=e.getName(s);if(be(r)&&r.binned&&r.step!==void 0)return new Dr(()=>{const u=e.scaleName(t),o=`(domain("${u}")[1] - domain("${u}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${o})`});if(Pt(r)){const u=R5(e,i,r);return new Dr(()=>{const o=e.getSignalName(u),l=`(${o}.stop - ${o}.start) / ${o}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function g4e(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of d4e)if(n[f]!==void 0){const d=b3(s,f),h=LB(e,f);if(!d)ne(wB(s,f,e));else if(h)ne(h);else switch(f){case"range":{const g=n.range;if(X(g)){if(On(e))return os(g.map(p=>{if(p==="width"||p==="height"){const m=t.getName(p),b=t.getSignalName.bind(t);return Dr.fromName(b,m)}return p}))}else if(be(g))return os({data:t.requestDataName(Dt.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return os(g)}case"scheme":return os(p4e(n[f]))}}const a=e===Wt||e==="xOffset"?"width":"height",u=r[a];if(Fs(u)){if(On(e))if(An(s)){const f=Uq(u,t,e);if(f)return os({step:f})}else ne(EB(a));else if(yd(e)){const f=e===fo?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const g=qq(u,s);if(g)return os(g)}}}const{rangeMin:o,rangeMax:l}=n,c=m4e(e,t);return(o!==void 0||l!==void 0)&&b3(s,"rangeMin")&&X(c)&&c.length===2?os([o??c[0],l??c[1]]):Hr(c)}function p4e(e){return _xe(e)?Object.assign({scheme:e.name},Tr(e,["name"])):{scheme:e}}function m4e(e,t){const{size:n,config:r,mark:i,encoding:s}=t,a=t.getSignalName.bind(t),{type:u}=dn(s[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case Wt:case kn:{if(et(["point","band"],l)){const g=Hq(e,n,r.view);if(Fs(g))return{step:Uq(g,t,e)}}const d=zr(e),h=t.getName(d);return e===kn&&ri(l)?[Dr.fromName(a,h),0]:[0,Dr.fromName(a,h)]}case fo:case bd:return b4e(e,t,l);case Fa:{const d=t.component.scales[e].get("zero"),h=Vq(i,d,r),g=_4e(i,n,t,r);return qf(l)?v4e(h,g,y4e(l,r,c,e)):[h,g]}case xi:return[0,Math.PI*2];case tc:return[0,360];case ts:return[0,new Dr(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case po:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case mo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Lr:return"symbol";case jr:case Hs:case Vs:return l==="ordinal"?u==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ra:case ho:case go:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Uq(e,t,n){var r,i,s,a,u;const{encoding:o}=t,l=t.getScaleComponent(n),c=rB(n),f=o[c];if(DU({step:e,offsetIsDiscrete:ze(f)&&$B(f.type)})==="offset"&&dU(o,c)){const h=t.getScaleComponent(c);let p=`domain('${t.scaleName(c)}').length`;if(h.get("type")==="band"){const b=(i=(r=h.get("paddingInner"))!==null&&r!==void 0?r:h.get("padding"))!==null&&i!==void 0?i:0,y=(a=(s=h.get("paddingOuter"))!==null&&s!==void 0?s:h.get("padding"))!==null&&a!==void 0?a:0;p=`bandspace(${p}, ${b}, ${y})`}const m=(u=l.get("paddingInner"))!==null&&u!==void 0?u:l.get("padding");return{signal:`${e.step} * ${p} / (1-${z2e(m)})`}}else return e.step}function qq(e,t){if(DU({step:e,offsetIsDiscrete:An(t)})==="offset")return{step:e.step}}function b4e(e,t,n){const r=e===fo?"x":"y",s=t.getScaleComponent(r).get("type"),a=t.scaleName(r);if(s==="band"){const u=Hq(r,t.size,t.config.view);if(Fs(u)){const o=qq(u,n);if(o)return o}return[0,{signal:`bandwidth('${a}')`}]}else return Hz(`Cannot use ${e} scale if ${r} scale is not discrete.`)}function Hq(e,t,n){const r=e===Wt?"width":"height",i=t[r];return i||Sb(n,r)}function y4e(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&X(n)?n.length+1:(ne(H_e(r)),3)}}function v4e(e,t,n){const r=()=>{const i=_a(t),s=_a(e),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return Ee(t)?new Dr(r):{signal:r()}}function Vq(e,t,n){if(t)return Ee(t)?{signal:`${t.signal} ? 0 : ${Vq(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(pv("size",e))}const sM=.95;function _4e(e,t,n,r){const i={x:iM(n,"x"),y:iM(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=aM(t,i,r.view);return Ot(s)?s-1:new Dr(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=aM(t,i,r.view);return Ot(s)?Math.pow(sM*s,2):new Dr(()=>`pow(${sM} * ${s.signal}, 2)`)}}throw new Error(pv("size",e))}function aM(e,t,n){const r=Fs(e.width)?e.width.step:Eb(n,"width"),i=Fs(e.height)?e.height.step:Eb(n,"height");return t.x||t.y?new Dr(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Gq(e,t){sn(e)?x4e(e,t):Xq(e,t)}function x4e(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:a}=e;for(const u of ee(n)){const o=a[u],l=n[u],c=e.getScaleComponent(u),f=dn(i[u]),d=o[t],h=c.get("type"),g=c.get("padding"),p=c.get("paddingInner"),m=b3(h,t),b=LB(u,t);if(d!==void 0&&(m?b&&ne(b):ne(wB(h,t,u))),m&&b===void 0)if(d!==void 0){const y=f.timeUnit,v=f.type;switch(t){case"domainMax":case"domainMin":ic(o[t])||v==="temporal"||y?l.set(t,{signal:kv(o[t],{type:v,timeUnit:y})},!0):l.set(t,o[t],!0);break;default:l.copyKeyFromObject(t,o)}}else{const y=t in uM?uM[t]({model:e,channel:u,fieldOrDatumDef:f,scaleType:h,scalePadding:g,scalePaddingInner:p,domain:o.domain,domainMin:o.domainMin,domainMax:o.domainMax,markDef:s,config:r,hasNestedOffsetScale:x3(i,u),hasSecondaryRangeChannel:!!i[Gs(u)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}const uM={bins:({model:e,fieldOrDatumDef:t})=>le(t)?w4e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>E4e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>S4e(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>k4e(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>O4e(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>A4e(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=le(e)?e.sort:void 0;return C4e(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:a})=>T4e(e,t,n,r,i,s.scale,a)};function Wq(e){sn(e)?h4e(e):Xq(e,"range")}function Xq(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Wq(r):Gq(r,t);for(const r of ee(n)){let i;for(const s of e.children){const a=s.component.scales[r];if(a){const u=a.getWithExplicit(t);i=Zu(i,u,t,"scale",VU((o,l)=>{switch(t){case"range":return o.step&&l.step?o.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function w4e(e,t){const n=t.bin;if(Pt(n)){const r=R5(e,t.field,n);return new Dr(()=>e.getSignalName(r))}else if(Mn(n)&&rc(n)&&n.step!==void 0)return{step:n.step}}function E4e(e,t){if(et([jr,Hs,Vs],e)&&t!=="nominal")return"hcl"}function S4e(e,t,n,r,i,s){var a;if(!(!((a=Ns(s))===null||a===void 0)&&a.bin||X(n)||i!=null||r!=null||et([Mr.TIME,Mr.UTC],e)))return On(t)?!0:void 0}function k4e(e,t,n,r,i,s){if(On(e)){if(Li(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:u}=i;if(a==="bar"&&!(le(r)&&(r.bin||r.timeUnit))&&(u==="vertical"&&e==="x"||u==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Mr.POINT)return n.pointPadding}}function O4e(e,t,n,r,i,s=!1){if(e===void 0){if(On(t)){const{bandPaddingInner:a,barBandPaddingInner:u,rectBandPaddingInner:o,bandWithNestedOffsetPaddingInner:l}=i;return s?l:un(a,n==="bar"?u:o)}else if(yd(t)&&r===Mr.BAND)return i.offsetBandPaddingInner}}function A4e(e,t,n,r,i,s=!1){if(e===void 0){if(On(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:u}=i;if(s)return u;if(n===Mr.BAND)return un(a,Ee(r)?{signal:`${r.signal}/2`}:r/2)}else if(yd(t)){if(n===Mr.POINT)return .5;if(n===Mr.BAND)return i.offsetBandPaddingOuter}}}function C4e(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ri(e)&&t==="descending"?Ee(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ri(e)&&t==="descending")return!0}function T4e(e,t,n,r,i,s,a){if(!!n&&n!=="unaggregated"&&ri(i)){if(X(n)){const o=n[0],l=n[n.length-1];if(o<=0&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!qf(i))return!0;if(!(le(t)&&t.bin)&&et([...Ws,...x2e],e)){const{orient:o,type:l}=r;return et(["bar","area","line","trail"],l)&&(o==="horizontal"&&e==="y"||o==="vertical"&&e==="x")?!1:et(["bar","area"],l)&&!a?!0:s==null?void 0:s.zero}return!1}function M4e(e,t,n,r,i=!1){const s=D4e(t,n,r,i),{type:a}=e;return bo(t)?a!==void 0?Axe(t,a)?le(n)&&!Oxe(a,n.type)?(ne(C_e(a,s)),s):a:(ne(A_e(t,a,s)),s):s:null}function D4e(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(af(e)||F_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ne(R_(e,"ordinal")),"ordinal";if(On(e)||yd(e)){if(et(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Rk)return"band";const s=n[zr(e)];return Rl(s)||Vf(t)&&(!((i=t.axis)===null||i===void 0)&&i.tickBand)?"band":"point"}case"temporal":return af(e)?"time":F_(e)==="discrete"?(ne(R_(e,"temporal")),"ordinal"):le(t)&&t.timeUnit&&Kn(t.timeUnit).utc?"utc":"time";case"quantitative":return af(e)?le(t)&&Pt(t.bin)?"bin-ordinal":"linear":F_(e)==="discrete"?(ne(R_(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(_B(t.type))}function N4e(e,{ignoreRange:t}={}){Yq(e),Lq(e);for(const n of kxe)Gq(e,n);t||Wq(e)}function Yq(e){sn(e)?e.component.scales=$4e(e):e.component.scales=R4e(e)}function $4e(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of hv){const a=dn(t[s]);if(a&&n===UB&&s===Lr&&a.type===vd)continue;let u=a&&a.scale;if(yd(s)){const o=iB(s);if(!x3(t,o)){u&&ne(h_e(s));continue}}if(a&&u!==null&&u!==!1){u??(u={});const o=x3(t,s),l=M4e(u,s,a,r,o);i[s]=new Bq(e.scaleName(`${s}`,!0),{value:l,explicit:u.type===l})}}return i}const F4e=VU((e,t)=>b7(e)-b7(t));function R4e(e){var t,n;const r=e.component.scales={},i={},s=e.component.resolve;for(const a of e.children){Yq(a);for(const u of ee(a.component.scales))if((t=(n=s.scale)[u])!==null&&t!==void 0||(n[u]=Oq(u,e)),s.scale[u]==="shared"){const o=i[u],l=a.component.scales[u].getWithExplicit("type");o?pxe(o.value,l.value)?i[u]=Zu(o,l,"type","scale",F4e):(s.scale[u]="independent",delete i[u]):i[u]=l}}for(const a of ee(i)){const u=e.scaleName(a,!0),o=i[a];r[a]=new Bq(u,o);for(const l of e.children){const c=l.component.scales[a];c&&(l.renameScale(c.get("name"),u),c.merged=!0)}}return r}var q_=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class H_{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function sn(e){return(e==null?void 0:e.type)==="unit"}function Hi(e){return(e==null?void 0:e.type)==="facet"}function z5(e){return(e==null?void 0:e.type)==="concat"}function Sd(e){return(e==null?void 0:e.type)==="layer"}class B5{constructor(t,n,r,i,s,a,u){var o,l;this.type=n,this.parent=r,this.config=s,this.correctDataNames=c=>{var f,d,h;return!((f=c.from)===null||f===void 0)&&f.data&&(c.from.data=this.lookupDataSource(c.from.data)),!((h=(d=c.from)===null||d===void 0?void 0:d.facet)===null||h===void 0)&&h.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=r,this.config=s,this.view=Er(u),this.name=(o=t.name)!==null&&o!==void 0?o:i,this.title=mu(t.title)?{text:t.title}:t.title?Er(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new H_,this.projectionNameMap=r?r.projectionNameMap:new H_,this.signalNameMap=r?r.signalNameMap:new H_,this.data=t.data,this.description=t.description,this.transforms=j3e((l=t.transform)!==null&&l!==void 0?l:[]),this.layout=n==="layer"||n==="unit"?{}:Hwe(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:xv(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Pa,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?qe(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){N4e(this)}parseProjection(){Iq(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Dq(this)}assembleEncodeFromView(t){const n=q_(t,["style"]),r={};for(const i of ee(n)){const s=n[i];s!==void 0&&(r[i]=Bt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Bt(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):kt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=q_(t,["spacing"]),{component:i,config:s}=this,a=J6e(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ci)t[r].title&&n.push(G6e(this,r));for(const r of D5)n=n.concat(W6e(this,r));return n}assembleAxes(){return F6e(this.component.axes,this.config)}assembleLegends(){return $q(this)}assembleProjections(){return wEe(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:s}=i,a=q_(i,["encoding"]),u=Object.assign(Object.assign(Object.assign({},fB(this.config.title).nonMarkTitleProperties),a),s?{encode:{update:s}}:{});if(u.text)return et(["unit","layer"],this.type)?et(["middle",void 0],u.anchor)&&((n=u.frame)!==null&&n!==void 0||(u.frame="group")):(r=u.anchor)!==null&&r!==void 0||(u.anchor="start"),kt(u)?void 0:u}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Hi(this.parent)?zq(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return Ht((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Dt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Hi(this.parent)){const n=Sq(t),r=dv(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),a=i.get("range");if(An(s)&&vo(a)){const u=i.get("name"),o=Rv(this,r),l=L5(o);if(l){const c=de({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Eq(u,i,c)}}else return ne(Lk(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(tB(t)&&bo(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(V2e(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Zq extends B5{vgField(t,n={}){const r=this.fieldDef(t);if(r)return de(r,n)}reduceFieldDef(t,n){return ywe(this.getMapping(),(r,i,s)=>{const a=Ns(i);return a?t(r,a,s):r},n)}forEachFieldDef(t,n){h5(this.getMapping(),(r,i)=>{const s=Ns(r);s&&t(s,i)},n)}}var I4e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Iv extends Ct{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=qe(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(s=a[1])!==null&&s!==void 0?s:"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}clone(){return new Iv(null,qe(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${it(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=I4e(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class R0 extends Ct{constructor(t,n){super(t),this.filter=n}clone(){return new R0(null,Object.assign({},this.filter))}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(mt("invalid",s,r)!=="filter")return null;const u=n.reduceFieldDef((o,l,c)=>{const f=bo(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ri(d)&&l.aggregate!=="count"&&!_o(i)&&(o[l.field]=l)}return o},{});return ee(u).length?new R0(t,u):null}dependentFields(){return new Set(ee(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${it(this.filter)}`}assemble(){const t=ee(this.filter).reduce((n,r)=>{const i=this.filter[r],s=de(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class Pv extends Ct{constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,a)=>{var u;return(u=i[a])!==null&&u!==void 0?u:s})}clone(){return new Pv(this.parent,qe(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${it(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class jv extends Ct{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=qe(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new jv(null,qe(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${it(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class lf extends Ct{constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}clone(){return new lf(null,qe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[qs,Us],[yi,ns]]){const s=i.map(a=>{const u=dn(n.encoding[a]);return le(u)?u.field:Xs(u)?{expr:`${u.datum}`}:Xi(u)?{expr:`${u.value}`}:void 0});(s[0]||s[1])&&(t=new lf(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Lr)){const i=n.typedFieldDef(Lr);i.type===vd&&(t=new lf(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(me);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${it(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class I0 extends Ct{constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}clone(){return new I0(null,this.projection,qe(this.fields),qe(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[qs,Us],[yi,ns]]){const i=r.map(a=>{const u=dn(n.encoding[a]);return le(u)?u.field:Xs(u)?{expr:`${u.datum}`}:Xi(u)?{expr:`${u.value}`}:void 0}),s=r[0]===yi?"2":"";(i[0]||i[1])&&(t=new I0(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(me))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${it(this.fields)} ${it(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class gl extends Ct{constructor(t,n){super(t),this.transform=n}clone(){return new gl(null,qe(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new gl(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(le(i)&&le(s)){const a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;const u=i.impute?s:s.impute?i:void 0,{method:o,value:l,frame:c,keyvals:f}=a.impute,d=gU(n.mark,r);return new gl(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:u.field},o?{method:o}:{}),l!==void 0?{value:l}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${it(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:a,frame:u=[null,null]}=this.transform,o=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:_3e(r)?this.processSequence(r):r}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){const l=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:u,ignorePeers:!1},s?{groupby:s}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[o,l,c]}else return[o]}}var P4e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Lv extends Ct{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=qe(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new Lv(null,qe(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${it(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=P4e(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class P0 extends Ct{constructor(t,n,r){super(t),this.transform=n,this.secondary=r}clone(){return new P0(null,qe(this.transform),this.secondary)}static make(t,n,r,i){const s=n.component.data.sources,{from:a}=r;let u=null;if(x3e(a)){let o=Kq(a.data,s);o||(o=new Ll(a.data),s.push(o));const l=n.getName(`lookup_${i}`);u=new dr(o,l,Dt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=u}else if(w3e(a)){const o=a.param;r=Object.assign({as:o},r);let l;try{l=n.getSelectionComponent(Ht(o),o)}catch{throw new Error(X2e(o))}if(u=l.materialized,!u)throw new Error(Y2e(o))}return new P0(t,r,u.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${it({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:pe(this.transform.as)}:{});else{let n=this.transform.as;me(n)||(ne(r_e),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var j4e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class zv extends Ct{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=qe(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new zv(null,qe(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${it(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=j4e(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}var L4e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Bv extends Ct{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=qe(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new Bv(null,qe(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${it(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=L4e(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class Uv extends Ct{constructor(t,n){super(t),this.transform=n}clone(){return new Uv(null,qe(this.transform))}addDimensions(t){var n;this.transform.groupby=ps(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${it(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),r!==void 0?{groupby:r}:{})}}class qv extends Ct{constructor(t,n){super(t),this.transform=n}clone(){return new qv(null,qe(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${it(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Qq(e){let t=0;function n(r,i){var s;if(r instanceof Ll&&!r.isGenerator&&!Wf(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Vn&&(r.parent instanceof Ll&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof wd){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof zg||r instanceof Bg||r instanceof R0||r instanceof xd||r instanceof Yf||r instanceof I0||r instanceof qi||r instanceof P0||r instanceof Ed||r instanceof uc||r instanceof jv||r instanceof Pv||r instanceof Iv||r instanceof Lv||r instanceof zv||r instanceof Bv||r instanceof eo||r instanceof qv||r instanceof Uv)&&i.transform.push(r.assemble()),(r instanceof Es||r instanceof ws||r instanceof gl||r instanceof xa||r instanceof lf)&&i.transform.push(...r.assemble()),r instanceof dr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof dr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof dr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let a=i.name;!i.source||i.transform.length>0?e.push(i):a=i.source;for(const u of r.children)n(u,{name:null,source:a,transform:[]});break}}}return n}function z4e(e){const t=[],n=Qq(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function B4e(e,t){var n,r;const i=[],s=Qq(i);let a=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${a++}`);const l=o.assemble();s(o,l)}for(const o of i)o.transform.length===0&&delete o.transform;let u=0;for(const[o,l]of i.entries())((n=l.transform)!==null&&n!==void 0?n:[]).length===0&&!l.source&&i.splice(u++,0,i.splice(o,1)[0]);for(const o of i)for(const l of(r=o.transform)!==null&&r!==void 0?r:[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const o of i)o.name in t&&(o.values=t[o.name]);return i}function U4e(e){return e==="top"||e==="left"||Ee(e)?"header":"footer"}function q4e(e){for(const t of ci)H4e(e,t);oM(e,"x"),oM(e,"y")}function H4e(e,t){var n;const{facet:r,config:i,child:s,component:a}=e;if(e.channelHasField(t)){const u=r[t],o=Qf("title",null,i,t);let l=uf(u,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});s.component.layoutHeaders[t].title&&(l=X(l)?l.join(", "):l,l+=` / ${s.component.layoutHeaders[t].title}`,s.component.layoutHeaders[t].title=null);const c=Qf("labelOrient",u.header,i,t),f=u.header!==null?un((n=u.header)===null||n===void 0?void 0:n.labels,i.header.labels,!0):!1,d=et(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:u.header!==null?l:null,facetFieldDef:u,[d]:t==="facet"?[]:[Jq(e,t,f)]}}}function Jq(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function oM(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:s}=e.component;if(s.axis[t]=F5(s,t),s.axis[t]==="shared"){const a=t==="x"?"column":"row",u=i[a];for(const o of r.component.axes[t]){const l=U4e(o.get("orient"));(n=u[l])!==null&&n!==void 0||(u[l]=[Jq(e,a,!1)]);const c=Th(o,"main",e.config,{header:!0});c&&u[l][0].axes.push(c),o.mainExtracted=!0}}}}function V4e(e){U5(e),Cb(e,"width"),Cb(e,"height")}function G4e(e){U5(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Cb(e,t),Cb(e,n)}function U5(e){for(const t of e.children)t.parseLayoutSize()}function Cb(e,t){var n;const r=Sq(t),i=dv(r),s=e.component.resolve,a=e.component.layoutSize;let u;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(r),c=(n=s.scale[i])!==null&&n!==void 0?n:Oq(i,e);if(c==="independent"&&l.value==="step"){u=void 0;break}if(u){if(c==="independent"&&u.value!==l.value){u=void 0;break}u=Zu(u,l,r,"")}else u=l}if(u){for(const o of e.children)e.renameSignal(o.getName(r),e.getName(t)),o.component.layoutSize.set(r,"merged",!1);a.setWithExplicit(t,u)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function W4e(e){const{size:t,component:n}=e;for(const r of Ws){const i=zr(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Fs(s)?"step":s,!0)}else{const s=X4e(e,i);n.layoutSize.set(i,s,!1)}}}function X4e(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),a=i.get("range");if(An(s)){const u=Sb(r.view,t);return vo(a)||Fs(u)?"step":u}else return E3(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return E3(r.view,t);{const s=Sb(r.view,t);return Fs(s)?s.step:s}}}function L3(e,t,n){return de(t,Object.assign({suffix:`by_${de(e)}`},n??{}))}class Vh extends Zq{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=W5(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Rg(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ee(t),r={};for(const i of n){if(![ya,va].includes(i)){ne(pv(i,"facet"));break}const s=t[i];if(s.field===void 0){ne(p3(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=f5(t,n);return r.header?r.header=Er(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Hv(this),this.child.parseData()}parseLayoutSize(){U5(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),q4e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const s of ci)for(const a of N5){const u=this.component.layoutHeaders[s],o=u[a],{facetFieldDef:l}=u;if(l){const c=Qf("titleOrient",l.header,this.config,s);if(["right","bottom"].includes(c)){const f=$v(s,c);(t=i.titleAnchor)!==null&&t!==void 0||(i.titleAnchor={}),i.titleAnchor[f]="end"}}if(o!=null&&o[0]){const c=s==="row"?"height":"width",f=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(c)&&((n=i[f])!==null&&n!==void 0||(i[f]={}),i[f][s]=.5),u.title&&((r=i.offset)!==null&&r!==void 0||(i.offset={}),i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Vh))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Vh?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:de(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Vh){if(this.child.channelHasField("column")){const i=de(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Ws){const s=this.child.component.scales[i];if(s&&!s.merged){const a=s.get("type"),u=s.get("range");if(An(a)&&vo(u)){const o=Rv(this.child,i),l=L5(o);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):ne(Lk(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:a,as:u}=this.getCardinalityAggregateForChild(),o=[];for(const c of ci){const f=this.facet[c];if(f){o.push(de(f));const{bin:d,sort:h}=f;if(Pt(d)&&o.push(de(f,{binSuffix:"end"})),xs(h)){const{field:g,op:p=_v}=h,m=L3(f,h);r&&i?(s.push(m),a.push("max"),u.push(m)):(s.push(g),a.push(p),u.push(m))}else if(X(h)){const g=Zf(f,c);s.push(g),a.push("max"),u.push(g)}}}const l=!!r&&!!i;return Object.assign({name:t,data:n,groupby:o},l||s.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),s.length?{fields:s,ops:a,as:u}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?xs(r.sort)?[L3(r,r.sort,{expr:"datum"})]:X(r.sort)?[Zf(r,t,{expr:"datum"})]:[de(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(xs(i)?i.order:!X(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:r}=this;if(n.facet)return $3(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const s of D5)if(n[s]){const a=Qf("labelOrient",(t=n[s])===null||t===void 0?void 0:t.header,r,s);if(i[s].includes(a))return $3(n[s],s,r)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=z4e(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:ci.map(o=>this.facetSortFields(o)).flat(),order:ci.map(o=>this.facetSortOrder(o)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(Q3e(this,[])))]}getMapping(){return this.facet}}function Y4e(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(xs(s.sort)){const{field:a,op:u=_v}=s.sort;e=i=new uc(e,{joinaggregate:[{op:u,field:a,as:L3(s,s.sort,{forAs:!0})}],groupby:[de(s)]})}return i}return null}function Kq(e,t){var n,r,i,s;for(const a of t){const u=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const o=(n=e.format)===null||n===void 0?void 0:n.mesh,l=(r=u.format)===null||r===void 0?void 0:r.feature;if(o&&l)continue;const c=(i=e.format)===null||i===void 0?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=u.format)===null||s===void 0?void 0:s.mesh;if(!((o||f)&&o!==f)){if($0(e)&&$0(u)){if(gs(e.values,u.values))return a}else if(Wf(e)&&Wf(u)){if(e.url===u.url)return a}else if(GU(e)&&e.name===a.dataName)return a}}return null}function Z4e(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Ll({values:[]});return t.push(r),r}const n=Kq(e.data,t);if(n)return $u(e.data)||(n.data.format=Vz({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Ll(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Q4e(e,t,n){var r,i;let s=0;for(const a of t.transforms){let u,o;if(N3e(a))o=e=new Yf(e,a),u="derived";else if(S5(a)){const l=IEe(a);o=e=(r=Vn.makeWithAncestors(e,{},l,n))!==null&&r!==void 0?r:e,e=new xd(e,t,a.filter)}else if(zU(a))o=e=Es.makeFromTransform(e,a,t),u="number";else if(F3e(a))u="date",n.getWithExplicit(a.field).value===void 0&&(e=new Vn(e,{[a.field]:u}),n.set(a.field,u,!1)),o=e=ws.makeFromTransform(e,a);else if(R3e(a))o=e=qi.makeFromTransform(e,a),u="number",M5(t)&&(e=new eo(e));else if(LU(a))o=e=P0.make(e,t,a,s++),u="derived";else if(T3e(a))o=e=new Ed(e,a),u="number";else if(M3e(a))o=e=new uc(e,a),u="number";else if(I3e(a))o=e=xa.makeFromTransform(e,a),u="derived";else if(P3e(a))o=e=new jv(e,a),u="derived";else if(D3e(a))o=e=new Pv(e,a),u="derived";else if(E3e(a))o=e=new Uv(e,a),u="derived";else if(C3e(a))e=new qv(e,a);else if($3e(a))o=e=gl.makeFromTransform(e,a),u="derived";else if(S3e(a))o=e=new Iv(e,a),u="derived";else if(k3e(a))o=e=new zv(e,a),u="derived";else if(O3e(a))o=e=new Bv(e,a),u="derived";else if(A3e(a))o=e=new Lv(e,a),u="derived";else{ne(n_e(a));continue}if(o&&u!==void 0)for(const l of(i=o.producedFields())!==null&&i!==void 0?i:[])n.set(l,u,!1)}return e}function Hv(e){var t,n,r,i,s,a,u,o,l,c;let f=Z4e(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,g=e.data,m=!(g&&($u(g)||Wf(g)||$0(g)))&&e.parent?e.parent.component.data.ancestorParse.clone():new X3e;$u(g)?(WU(g)?f=new Bg(f,g.sequence):k5(g)&&(f=new zg(f,g.graticule)),m.parseNothing=!0):((t=g==null?void 0:g.format)===null||t===void 0?void 0:t.parse)===null&&(m.parseNothing=!0),f=(n=Vn.makeExplicit(f,e,m))!==null&&n!==void 0?n:f,f=new eo(f);const b=e.parent&&Sd(e.parent);(sn(e)||Hi(e))&&b&&(f=(r=Es.makeFromEncoding(f,e))!==null&&r!==void 0?r:f),e.transforms.length>0&&(f=Q4e(f,e,m));const y=jEe(e),v=PEe(e);f=(i=Vn.makeWithAncestors(f,{},Object.assign(Object.assign({},y),v),m))!==null&&i!==void 0?i:f,sn(e)&&(f=lf.parseAll(f,e),f=I0.parseAll(f,e)),(sn(e)||Hi(e))&&(b||(f=(s=Es.makeFromEncoding(f,e))!==null&&s!==void 0?s:f),f=(a=ws.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=Yf.parseAllForSortIndex(f,e));const _=e.getDataName(Dt.Raw),x=new dr(f,_,Dt.Raw,h);if(d[_]=x,f=x,sn(e)){const A=qi.makeFromEncoding(f,e);A&&(f=A,M5(e)&&(f=new eo(f))),f=(u=gl.makeFromEncoding(f,e))!==null&&u!==void 0?u:f,f=(o=xa.makeFromEncoding(f,e))!==null&&o!==void 0?o:f}sn(e)&&(f=(l=R0.make(f,e))!==null&&l!==void 0?l:f);const E=e.getDataName(Dt.Main),w=new dr(f,E,Dt.Main,h);d[E]=w,f=w,sn(e)&&N6e(e,w);let k=null;if(Hi(e)){const A=e.getName("facet");f=(c=Y4e(f,e.facet))!==null&&c!==void 0?c:f,k=new wd(f,e,A,w.getSource()),d[A]=k}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:x,main:w,facetRoot:k,ancestorParse:m})}class J4e extends B5{constructor(t,n,r,i){var s,a,u,o;super(t,"concat",n,r,i,t.resolve),(((a=(s=t.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((o=(u=t.resolve)===null||u===void 0?void 0:u.axis)===null||o===void 0?void 0:o.y)==="shared")&&ne(K2e),this.children=this.getChildren(t).map((l,c)=>W5(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Hv(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ee(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Cv(t)?t.vconcat:w5(t)?t.hconcat:t.concat}parseLayoutSize(){G4e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=$5(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function K4e(e){return e===!1||e===null}const eSe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},cU),{labelExpr:1,encode:1}),eH=ee(eSe);class q5 extends Pa{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new q5(qe(this.explicit),qe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!K4e(this.get(t))}hasOrientSignalRef(){return Ee(this.explicit.orient)}}function tSe(e,t,n){var r;const{encoding:i,config:s}=e,a=(r=dn(i[t]))!==null&&r!==void 0?r:dn(i[Gs(t)]),u=e.axis(t)||{},{format:o,formatType:l}=u;if(Il(l))return Object.assign({text:zi({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:s})},n);if(o===void 0&&l===void 0&&s.customFormatTypes){if(Hf(a)==="quantitative"){if(Vf(a)&&a.stack==="normalize"&&s.normalizedNumberFormatType)return Object.assign({text:zi({fieldOrDatumDef:a,field:"datum.value",format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,config:s})},n);if(s.numberFormatType)return Object.assign({text:zi({fieldOrDatumDef:a,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s})},n)}if(Hf(a)==="temporal"&&s.timeFormatType&&le(a)&&!a.timeUnit)return Object.assign({text:zi({fieldOrDatumDef:a,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})},n)}return n}function nSe(e){return Ws.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[lSe(n,e)]),t),{})}const rSe={bottom:"top",top:"bottom",left:"right",right:"left"};function iSe(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const s of e.children){s.parseAxesAndHeaders();for(const a of ee(s.component.axes))r.axis[a]=F5(e.component.resolve,a),r.axis[a]==="shared"&&(n[a]=sSe(n[a],s.component.axes[a]),n[a]||(r.axis[a]="independent",delete n[a]))}for(const s of Ws){for(const a of e.children)if(a.component.axes[s]){if(r.axis[s]==="independent"){n[s]=((t=n[s])!==null&&t!==void 0?t:[]).concat(a.component.axes[s]);for(const u of a.component.axes[s]){const{value:o,explicit:l}=u.getWithExplicit("orient");if(!Ee(o)){if(i[o]>0&&!l){const c=rSe[o];i[o]>i[c]&&u.set("orient",c,!1)}i[o]++}}}delete a.component.axes[s]}if(r.axis[s]==="independent"&&n[s]&&n[s].length>1)for(const a of n[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function sSe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const a=i.getWithExplicit("orient"),u=s.getWithExplicit("orient");if(a.explicit&&u.explicit&&a.value!==u.value)return;e[r]=aSe(i,s)}}}else return t.map(n=>n.clone());return e}function aSe(e,t){for(const n of eH){const r=Zu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return yB(i,s);case"gridScale":return{explicit:i.explicit,value:un(i.value,s.value)}}return Mv(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function uSe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ee(n.labelAngle)?n.labelAngle:D0(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===vq(r,i))return!0}return e===n[t]}const oSe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function lSe(e,t){var n,r,i;let s=t.axis(e);const a=new q5,u=dn(t.encoding[e]),{mark:o,config:l}=t,c=(s==null?void 0:s.orient)||((n=l[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=l.axis)===null||r===void 0?void 0:r.orient)||U6e(e),f=t.getScaleComponent(e).get("type"),d=R6e(e,f,c,t.config),h=s!==void 0?!s:D3("disable",l.style,s==null?void 0:s.style,d).configValue;if(a.set("disable",h,s!==void 0),h)return a;s=s||{};const g=L6e(u,s,e,l.style,d),p={fieldOrDatumDef:u,axis:s,channel:e,model:t,scaleType:f,orient:c,labelAngle:g,mark:o,config:l};for(const y of eH){const v=y in W7?W7[y](p):E7(y)?s[y]:void 0,_=v!==void 0,x=uSe(v,y,s,t,e);if(_&&x)a.set(y,v,x);else{const{configValue:E=void 0,configFrom:w=void 0}=E7(y)&&y!=="values"?D3(y,l.style,s.style,d):{},k=E!==void 0;_&&!k?a.set(y,v,x):(w!=="vgAxisConfig"||oSe.has(y)&&k||jg(E)||Ee(E))&&a.set(y,E,!1)}}const m=(i=s.encoding)!==null&&i!==void 0?i:{},b=lU.reduce((y,v)=>{var _;if(!a.hasAxisPart(v))return y;const x=kq((_=m[v])!==null&&_!==void 0?_:{},t),E=v==="labels"?tSe(t,e,x):x;return E!==void 0&&!kt(E)&&(y[v]={update:E}),y},{});return kt(b)||a.set("encode",b,!!s.encoding||s.labelAngle!==void 0),a}function cSe({encoding:e,size:t}){for(const n of Ws){const r=zr(n);Fs(t[r])&&ms(e[n])&&(delete t[r],ne(EB(r)))}return t}function fSe(e,t,n){const r=Er(e),i=mt("orient",r,n);if(r.orient=pSe(r.type,t,i),i!==void 0&&i!==r.orient&&ne(__e(r.orient,i)),r.type==="bar"&&r.orient){const u=mt("cornerRadiusEnd",r,n);if(u!==void 0){const o=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Lxe[r.orient];for(const l of o)r[l]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return mt("opacity",r,n)===void 0&&(r.opacity=hSe(r.type,t)),mt("cursor",r,n)===void 0&&(r.cursor=dSe(r,t,n)),r}function dSe(e,t,n){return t.href||e.href||mt("href",e,n)?"pointer":e.cursor}function hSe(e,t){if(et([vv,e5,t5,n5],e)&&!d5(t))return .7}function gSe(e,t,{graticule:n}){if(n)return!1;const r=$l("filled",e,t),i=e.type;return un(r,i!==vv&&i!==yv&&i!==bb)}function pSe(e,t,n){switch(e){case vv:case t5:case n5:case BB:case Txe:case Cxe:return}const{x:r,y:i,x2:s,y2:a}=t;switch(e){case bv:if(le(r)&&(Mn(r.bin)||le(i)&&i.aggregate&&!r.aggregate))return"vertical";if(le(i)&&(Mn(i.bin)||le(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s)return(le(r)&&r.type===Fl&&!Pt(r.bin)||_3(r))&&le(i)&&Mn(i.bin)?"horizontal":"vertical";if(!a)return(le(i)&&i.type===Fl&&!Pt(i.bin)||_3(i))&&le(r)&&Mn(r.bin)?"vertical":"horizontal"}case bb:if(s&&!(le(r)&&Mn(r.bin))&&a&&!(le(i)&&Mn(i.bin)))return;case mv:if(a)return le(i)&&Mn(i.bin)?"horizontal":"vertical";if(s)return le(r)&&Mn(r.bin)?"vertical":"horizontal";if(e===bb){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case yv:case e5:{const u=ms(r),o=ms(i);if(n)return n;if(u&&!o)return e!=="tick"?"horizontal":"vertical";if(!u&&o)return e!=="tick"?"vertical":"horizontal";if(u&&o){const l=r,c=i,f=l.type===Uf,d=c.type===Uf;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!l.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":l.aggregate&&!c.aggregate&&e!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const mSe={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Hn("x",e,{defaultPos:"mid"})),Hn("y",e,{defaultPos:"mid"})),Ju(e,"radius")),Ju(e,"theta"))},bSe={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),kb("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),kb("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),T5(e))},ySe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ju(e,"x")),Ju(e,"y"))},vSe={vgMark:"shape",encodeEntry:e=>Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&le(n)&&n.type===vd?{field:de(n,{expr:"datum"})}:{})]}},_Se={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Ju(e,"x")),Ju(e,"y")),A5(e,"url"))},xSe={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Hn("x",e,{defaultPos:"mid"})),Hn("y",e,{defaultPos:"mid"})),yn("size",e,{vgChannel:"strokeWidth"})),T5(e))},wSe={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Hn("x",e,{defaultPos:"mid"})),Hn("y",e,{defaultPos:"mid"})),yn("size",e)),T5(e))};function H5(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Hn("x",e,{defaultPos:"mid"})),Hn("y",e,{defaultPos:"mid"})),yn("size",e)),yn("angle",e)),ESe(e,n,t))}function ESe(e,t,n){return n?{shape:{value:n}}:yn("shape",e)}const SSe={vgMark:"symbol",encodeEntry:e=>H5(e)},kSe={vgMark:"symbol",encodeEntry:e=>H5(e,"circle")},OSe={vgMark:"symbol",encodeEntry:e=>H5(e,"square")},ASe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ju(e,"x")),Ju(e,"y"))},CSe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),kb("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),kb("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),yn("size",e,{vgChannel:"strokeWidth"}))}},TSe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Hn("x",e,{defaultPos:"mid"})),Hn("y",e,{defaultPos:"mid"})),A5(e)),yn("size",e,{vgChannel:"fontSize"})),yn("angle",e)),q7("align",MSe(e.markDef,n,t))),q7("baseline",DSe(e.markDef,n,t))),Hn("radius",e,{defaultPos:null})),Hn("theta",e,{defaultPos:null}))}};function MSe(e,t,n){if(mt("align",e,n)===void 0)return"center"}function DSe(e,t,n){if(mt("baseline",e,n)===void 0)return"middle"}const NSe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Hn("x",e,{defaultPos:"mid",vgChannel:"xc"})),Hn("y",e,{defaultPos:"mid",vgChannel:"yc"})),yn("size",e,{defaultValue:$Se(e),vgChannel:i})),{[s]:Bt(mt("thickness",n,t))})}};function $Se(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,s=i==="horizontal"?"width":"height",a=e.getScaleComponent(i==="horizontal"?"x":"y"),u=(t=mt("size",r,n,{vgChannel:s}))!==null&&t!==void 0?t:n.tick.bandSize;if(u!==void 0)return u;{const o=a?a.get("range"):void 0;return o&&vo(o)&&Ot(o.step)?o.step*3/4:Eb(n.view,s)*3/4}}const Qp={arc:mSe,area:bSe,bar:ySe,circle:kSe,geoshape:vSe,image:_Se,line:xSe,point:SSe,rect:ASe,rule:CSe,square:OSe,text:TSe,tick:NSe,trail:wSe};function FSe(e){if(et([yv,mv,Mxe],e.mark)){const t=gU(e.mark,e.encoding);if(t.length>0)return RSe(e,t)}else if(e.mark===bv){const t=g3.some(n=>mt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return ISe(e)}return V5(e)}const lM="faceted_path_";function RSe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:lM+e.requestDataName(Dt.Main),data:e.requestDataName(Dt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:V5(e,{fromPrefix:lM})}]}const cM="stack_group_";function ISe(e){var t;const[n]=V5(e,{fromPrefix:cM}),r=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),s=(c,f)=>{const d=[i({prefix:"min",suffix:"start",expr:f}),i({prefix:"max",suffix:"start",expr:f}),i({prefix:"min",suffix:"end",expr:f}),i({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${r}',${h})`).join(",")})`};let a,u;e.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},Lf(n.encode.update,["y","yc","y2","height",...g3])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),u={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},Tr(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},Lf(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),u={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},Tr(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const c of g3){const f=$l(c,e.markDef,e.config);n.encode.update[c]?(a[c]=n.encode.update[c],delete n.encode.update[c]):f&&(a[c]=Bt(f)),f&&(n.encode.update[c]={value:0})}const o=[];if(((t=e.stack.groupbyChannels)===null||t===void 0?void 0:t.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=de(f);d&&o.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&o.push(de(f,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(n.encode.update[f])return Object.assign(Object.assign({},c),{[f]:n.encode.update[f]});{const d=$l(f,e.markDef,e.config);return d!==void 0?Object.assign(Object.assign({},c),{[f]:Bt(d)}):c}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Dt.Main),name:cM+e.requestDataName(Dt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:u},marks:[n]}]}]}function PSe(e){var t;const{encoding:n,stack:r,mark:i,markDef:s,config:a}=e,u=n.order;if(!(!X(u)&&Xi(u)&&d3(u.value)||!u&&d3(mt("order",s,a)))){if((X(u)||le(u))&&!r)return pB(u,{expr:"datum"});if(_o(i)){const o=s.orient==="horizontal"?"y":"x",l=n[o];if(le(l)){const c=l.sort;if(X(c))return{field:de(l,{prefix:o,suffix:"sort_index",expr:"datum"})};if(xs(c))return{field:de({aggregate:d5(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(QB(c)){const f=e.fieldDef(c.encoding);return{field:de(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:de(l,{binSuffix:!((t=e.stack)===null||t===void 0)&&t.impute?"mid":void 0,expr:"datum"})}}return}}}function V5(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,a=un(r.clip,jSe(e),LSe(e)),u=hB(r),o=i.key,l=PSe(e),c=zSe(e),f=mt("aria",r,s),d=Qp[n].postEncodingTransform?Qp[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:Qp[n].vgMark},a?{clip:!0}:{}),u?{style:u}:{}),o?{key:o.field}:{}),l?{sort:l}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(Dt.Main)},encode:{update:Qp[n].encodeEntry(e)}}),d?{transform:d}:{})]}function jSe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function LSe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function zSe(e){if(!e.component.selection)return null;const t=ee(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ee(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class tH extends Zq{constructor(t,n,r,i={},s){var a;super(t,"unit",n,r,s,void 0,O7(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const u=Ds(t.mark)?Object.assign({},t.mark):{type:t.mark},o=u.type;u.filled===void 0&&(u.filled=gSe(u,s,{graticule:t.data&&k5(t.data)}));const l=this.encoding=mwe(t.encoding||{},o,u.filled,s);this.markDef=fSe(u,l,s),this.size=cSe({encoding:l,size:O7(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=RU(o,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=((a=t.params)!==null&&a!==void 0?a:[]).filter(c=>_5(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===UB,r=t&&d2e.some(i=>ze(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return hv.reduce((r,i)=>{var s;const a=dn(n[i]);return a&&(r[i]=this.initScale((s=a.scale)!==null&&s!==void 0?s:{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Er(t);return X(n)&&(i.domain=n.map(Yr)),X(r)&&(i.range=r.map(Yr)),i}initAxes(t){return Ws.reduce((n,r)=>{const i=t[r];if(ze(i)||r===Wt&&ze(t.x2)||r===kn&&ze(t.y2)){const s=ze(i)?i.axis:void 0;n[r]=s&&this.initAxis(Object.assign({},s))}return n},{})}initAxis(t){const n=ee(t),r={};for(const i of n){const s=t[i];r[i]=jg(s)?dB(s):Yr(s)}return r}initLegends(t){return w2e.reduce((n,r)=>{const i=dn(t[r]);if(i&&S2e(r)){const s=i.legend;n[r]=s&&Er(s)}return n},{})}parseData(){this.component.data=Hv(this)}parseLayoutSize(){W4e(this)}parseSelections(){this.component.selection=D6e(this,this.selection)}parseMarkGroup(){this.component.mark=FSe(this)}parseAxesAndHeaders(){this.component.axes=nSe(this)}assembleSelectionTopLevelSignals(t){return J3e(this,t)}assembleSignals(){return[...mq(this),...Z3e(this,[])]}assembleSelectionData(t){return K3e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return $5(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!Sd(this.parent))&&(n=YU(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};if(t!==void 0)return t;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return hl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ns(n)}typedFieldDef(t){const n=this.fieldDef(t);return vi(n)?n:null}}class G5 extends B5{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((u,o)=>{if(Tv(u))return new G5(u,this,this.getName(`layer_${o}`),a,s);if(Ia(u))return new tH(u,this,this.getName(`layer_${o}`),a,s);throw new Error(jk(u))})}parseData(){this.component.data=Hv(this);for(const t of this.children)t.parseData()}parseLayoutSize(){V4e(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ee(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){iSe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),mq(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),$5(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pe(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return e6e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),$q(this))}}function W5(e,t,n,r,i){if(xv(e))return new Vh(e,t,n,i);if(Tv(e))return new G5(e,t,n,r,i);if(Ia(e))return new tH(e,t,n,r,i);if(Bwe(e))return new J4e(e,t,n,i);throw new Error(jk(e))}var BSe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function USe(e,t={}){t.logger&&V_e(t.logger),t.fieldTitle&&aU(t.fieldTitle);try{const n=FU(Vb(t.config,e.config)),r=HU(e,n),i=W5(r,null,"",void 0,n);return i.parse(),e4e(i.component.data,i),{spec:HSe(i,qSe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&G_e(),t.fieldTitle&&awe()}}function qSe(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):me(t)&&(t={type:t}),i&&s&&V3e(t.type)){if(i==="step"&&s==="step")ne(c7()),t.type="pad";else if(i==="step"||s==="step"){const a=i==="step"?"width":"height";ne(c7(dv(a)));const u=a==="width"?"height":"width";t.type=G3e(u)}}return Object.assign(Object.assign(Object.assign({},ee(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),j7(n,!1)),j7(e,!0))}function HSe(e,t,n={},r){const i=e.config?n3e(e.config):void 0,s=[].concat(e.assembleSelectionData([]),B4e(e.component.data,n)),a=e.assembleProjections(),u=e.assembleTitle(),o=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f}=t,d=BSe(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),u?{title:u}:{}),o?{style:o}:{}),l?{encode:{update:l}}:{}),{data:s}),a.length>0?{projections:a}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...MU(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}const VSe=t2e.version,GSe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:zf,accessPathWithDatum:Ck,compile:USe,contains:et,deepEqual:gs,deleteNestedProperty:gb,duplicate:qe,entries:Xu,every:kk,fieldIntersection:Ak,flatAccessWithDatum:Wz,getFirstDefined:un,hasIntersection:Ok,hash:it,internalField:Zz,isBoolean:M0,isEmpty:kt,isEqual:a2e,isInternalField:Qz,isNullOrFalse:d3,isNumeric:av,keys:ee,logicalExpr:qh,mergeDeep:Vz,never:Hz,normalize:HU,normalizeAngle:D0,omit:Tr,pick:Lf,prefixGenerator:h3,removePathFromField:Tk,replaceAll:Dl,replacePathInField:bi,resetIdCounter:o2e,setEqual:Gz,some:Ml,stringify:Ft,titleCase:Ag,unique:ps,uniqueId:Yz,vals:Zn,varName:Ht,version:VSe},Symbol.toStringTag,{value:"Module"}));var nH=Object.prototype,il=nH.hasOwnProperty,hs,X5=typeof Symbol=="function"?Symbol:{},Vv=X5.iterator||"@@iterator",WSe=X5.asyncIterator||"@@asyncIterator",Tb=X5.toStringTag||"@@toStringTag";function rH(e,t,n,r){var i=t&&t.prototype instanceof z3?t:z3,s=Object.create(i.prototype),a=new B3(r||[]);return s._invoke=JSe(e,n,a),s}function Y5(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}var fM="suspendedStart",XSe="suspendedYield",dM="executing",Jp="completed",Ri={};function z3(){}function Gv(){}function Jf(){}var Z5={};Z5[Vv]=function(){return this};var V_=Object.getPrototypeOf,Kp=V_&&V_(V_(Q5([])));Kp&&Kp!==nH&&il.call(Kp,Vv)&&(Z5=Kp);var kd=Jf.prototype=z3.prototype=Object.create(Z5);Gv.prototype=kd.constructor=Jf;Jf.constructor=Gv;Jf[Tb]=Gv.displayName="GeneratorFunction";function iH(e){["next","throw","return"].forEach(function(t){e[t]=function(n){return this._invoke(t,n)}})}function sH(e){var t=typeof e=="function"&&e.constructor;return t?t===Gv||(t.displayName||t.name)==="GeneratorFunction":!1}function YSe(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,Jf):(e.__proto__=Jf,Tb in e||(e[Tb]="GeneratorFunction")),e.prototype=Object.create(kd),e}function ZSe(e){return{__await:e}}function Wv(e,t){function n(s,a,u,o){var l=Y5(e[s],e,a);if(l.type==="throw")o(l.arg);else{var c=l.arg,f=c.value;return f&&typeof f=="object"&&il.call(f,"__await")?t.resolve(f.__await).then(function(d){n("next",d,u,o)},function(d){n("throw",d,u,o)}):t.resolve(f).then(function(d){c.value=d,u(c)},function(d){return n("throw",d,u,o)})}}var r;function i(s,a){function u(){return new t(function(o,l){n(s,a,o,l)})}return r=r?r.then(u,u):u()}this._invoke=i}iH(Wv.prototype);Wv.prototype[WSe]=function(){return this};function QSe(e,t,n,r,i){i===void 0&&(i=Promise);var s=new Wv(rH(e,t,n,r),i);return sH(t)?s:s.next().then(function(a){return a.done?a.value:s.next()})}function JSe(e,t,n){var r=fM;return function(s,a){if(r===dM)throw new Error("Generator is already running");if(r===Jp){if(s==="throw")throw a;return uH()}for(n.method=s,n.arg=a;;){var u=n.delegate;if(u){var o=aH(u,n);if(o){if(o===Ri)continue;return o}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(r===fM)throw r=Jp,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);r=dM;var l=Y5(e,t,n);if(l.type==="normal"){if(r=n.done?Jp:XSe,l.arg===Ri)continue;return{value:l.arg,done:n.done}}else l.type==="throw"&&(r=Jp,n.method="throw",n.arg=l.arg)}}}function aH(e,t){var n=e.iterator[t.method];if(n===hs){if(t.delegate=null,t.method==="throw"){if(e.iterator.return&&(t.method="return",t.arg=hs,aH(e,t),t.method==="throw"))return Ri;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ri}var r=Y5(n,e.iterator,t.arg);if(r.type==="throw")return t.method="throw",t.arg=r.arg,t.delegate=null,Ri;var i=r.arg;if(!i)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,Ri;if(i.done)t[e.resultName]=i.value,t.next=e.nextLoc,t.method!=="return"&&(t.method="next",t.arg=hs);else return i;return t.delegate=null,Ri}iH(kd);kd[Tb]="Generator";kd[Vv]=function(){return this};kd.toString=function(){return"[object Generator]"};function KSe(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function G_(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B3(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(KSe,this),this.reset(!0)}function eke(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}}function Q5(e){if(e){var t=e[Vv];if(t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(il.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=hs,i.done=!0,i};return r.next=r}}return{next:uH}}function uH(){return{value:hs,done:!0}}B3.prototype={constructor:B3,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=hs,this.done=!1,this.delegate=null,this.method="next",this.arg=hs,this.tryEntries.forEach(G_),!t)for(var n in this)n.charAt(0)==="t"&&il.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=hs)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(l,c){return a.type="throw",a.arg=t,n.next=l,c&&(n.method="next",n.arg=hs),!!c}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if(s.tryLoc==="root")return r("end");if(s.tryLoc<=this.prev){var u=il.call(s,"catchLoc"),o=il.call(s,"finallyLoc");if(u&&o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else if(o){if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&il.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&(t==="break"||t==="continue")&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=n,s?(this.method="next",this.next=s.finallyLoc,Ri):this.complete(a)},complete:function(t,n){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&n&&(this.next=n),Ri},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),G_(r),Ri}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var s=i.arg;G_(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:Q5(t),resultName:n,nextLoc:r},this.method==="next"&&(this.arg=hs),Ri}};var hM={wrap:rH,isGeneratorFunction:sH,AsyncIterator:Wv,mark:YSe,awrap:ZSe,async:QSe,keys:eke,values:Q5},tke=dt;dt.Node=zl;dt.create=dt;function dt(e){var t=this;if(t instanceof dt||(t=new dt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}dt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};dt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};dt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};dt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)rke(this,arguments[e]);return this.length};dt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ike(this,arguments[e]);return this.length};dt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};dt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};dt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};dt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};dt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};dt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};dt.prototype.map=function(e,t){t=t||this;for(var n=new dt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};dt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new dt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};dt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};dt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};dt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};dt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};dt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new dt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};dt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new dt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};dt.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;r!==null&&n<e;n++)r=r.next;for(var i=[],n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=nke(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i};dt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function nke(e,t,n){var r=t===e.head?new zl(n,null,t,e):new zl(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function rke(e,t){e.tail=new zl(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ike(e,t){e.head=new zl(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function zl(e,t,n,r){if(!(this instanceof zl))return new zl(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{dt.prototype[Symbol.iterator]=hM.mark(function e(){var t;return hM.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=this.head;case 1:if(!t){r.next=7;break}return r.next=4,t.value;case 4:t=t.next,r.next=1;break;case 7:case"end":return r.stop()}},e,this)})}catch{}var ske=tke,Jo=Symbol("max"),sa=Symbol("length"),Bc=Symbol("lengthCalculator"),Gh=Symbol("allowStale"),sl=Symbol("maxAge"),na=Symbol("dispose"),gM=Symbol("noDisposeOnSet"),mn=Symbol("lruList"),Oi=Symbol("cache"),oH=Symbol("updateAgeOnGet"),W_=()=>1;class ake{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Jo]=t.max||1/0;var n=t.length||W_;if(this[Bc]=typeof n!="function"?W_:n,this[Gh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[sl]=t.maxAge||0,this[na]=t.dispose,this[gM]=t.noDisposeOnSet||!1,this[oH]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Jo]=t||1/0,uh(this)}get max(){return this[Jo]}set allowStale(t){this[Gh]=!!t}get allowStale(){return this[Gh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[sl]=t,uh(this)}get maxAge(){return this[sl]}set lengthCalculator(t){typeof t!="function"&&(t=W_),t!==this[Bc]&&(this[Bc]=t,this[sa]=0,this[mn].forEach(n=>{n.length=this[Bc](n.value,n.key),this[sa]+=n.length})),uh(this)}get lengthCalculator(){return this[Bc]}get length(){return this[sa]}get itemCount(){return this[mn].length}rforEach(t,n){n=n||this;for(var r=this[mn].tail;r!==null;){var i=r.prev;pM(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(var r=this[mn].head;r!==null;){var i=r.next;pM(this,t,r,n),r=i}}keys(){return this[mn].toArray().map(t=>t.key)}values(){return this[mn].toArray().map(t=>t.value)}reset(){this[na]&&this[mn]&&this[mn].length&&this[mn].forEach(t=>this[na](t.key,t.value)),this[Oi]=new Map,this[mn]=new ske,this[sa]=0}dump(){return this[mn].map(t=>Mb(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[mn]}set(t,n,r){if(r=r||this[sl],r&&typeof r!="number")throw new TypeError("maxAge must be a number");var i=r?Date.now():0,s=this[Bc](n,t);if(this[Oi].has(t)){if(s>this[Jo])return cf(this,this[Oi].get(t)),!1;var a=this[Oi].get(t),u=a.value;return this[na]&&(this[gM]||this[na](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[sa]+=s-u.length,u.length=s,this.get(t),uh(this),!0}var o=new uke(t,n,s,i,r);return o.length>this[Jo]?(this[na]&&this[na](t,n),!1):(this[sa]+=o.length,this[mn].unshift(o),this[Oi].set(t,this[mn].head),uh(this),!0)}has(t){if(!this[Oi].has(t))return!1;var n=this[Oi].get(t).value;return!Mb(this,n)}get(t){return X_(this,t,!0)}peek(t){return X_(this,t,!1)}pop(){var t=this[mn].tail;return t?(cf(this,t),t.value):null}del(t){cf(this,this[Oi].get(t))}load(t){this.reset();for(var n=Date.now(),r=t.length-1;r>=0;r--){var i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{var a=s-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[Oi].forEach((t,n)=>X_(this,n,!1))}}var X_=(e,t,n)=>{var r=e[Oi].get(t);if(r){var i=r.value;if(Mb(e,i)){if(cf(e,r),!e[Gh])return}else n&&(e[oH]&&(r.value.now=Date.now()),e[mn].unshiftNode(r));return i.value}},Mb=(e,t)=>{if(!t||!t.maxAge&&!e[sl])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[sl]&&n>e[sl]},uh=e=>{if(e[sa]>e[Jo])for(var t=e[mn].tail;e[sa]>e[Jo]&&t!==null;){var n=t.prev;cf(e,t),t=n}},cf=(e,t)=>{if(t){var n=t.value;e[na]&&e[na](n.key,n.value),e[sa]-=n.length,e[Oi].delete(n.key),e[mn].removeNode(t)}};class uke{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}var pM=(e,t,n,r)=>{var i=n.value;Mb(e,i)&&(cf(e,n),e[Gh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},oke=ake,lke=["includePrerelease","loose","rtl"],cke=e=>e?typeof e!="object"?{loose:!0}:lke.filter(t=>e[t]).reduce((t,n)=>(t[n]=!0,t),{}):{},J5=cke,Ii={exports:{}},fke="2.0.0",dke=256,hke=Number.MAX_SAFE_INTEGER||9007199254740991,gke=16,K5={SEMVER_SPEC_VERSION:fke,MAX_LENGTH:dke,MAX_SAFE_INTEGER:hke,MAX_SAFE_COMPONENT_LENGTH:gke},pke=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{},Xv=pke;(function(e,t){var n=K5.MAX_SAFE_COMPONENT_LENGTH,r=Xv;t=e.exports={};var i=t.re=[],s=t.src=[],a=t.t={},u=0,o=(l,c,f)=>{var d=u++;r(l,d,c),a[l]=d,s[d]=c,i[d]=new RegExp(c,f?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION","(".concat(s[a.NUMERICIDENTIFIER],")\\.")+"(".concat(s[a.NUMERICIDENTIFIER],")\\.")+"(".concat(s[a.NUMERICIDENTIFIER],")")),o("MAINVERSIONLOOSE","(".concat(s[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(s[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(s[a.NUMERICIDENTIFIERLOOSE],")")),o("PRERELEASEIDENTIFIER","(?:".concat(s[a.NUMERICIDENTIFIER],"|").concat(s[a.NONNUMERICIDENTIFIER],")")),o("PRERELEASEIDENTIFIERLOOSE","(?:".concat(s[a.NUMERICIDENTIFIERLOOSE],"|").concat(s[a.NONNUMERICIDENTIFIER],")")),o("PRERELEASE","(?:-(".concat(s[a.PRERELEASEIDENTIFIER],"(?:\\.").concat(s[a.PRERELEASEIDENTIFIER],")*))")),o("PRERELEASELOOSE","(?:-?(".concat(s[a.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(s[a.PRERELEASEIDENTIFIERLOOSE],")*))")),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD","(?:\\+(".concat(s[a.BUILDIDENTIFIER],"(?:\\.").concat(s[a.BUILDIDENTIFIER],")*))")),o("FULLPLAIN","v?".concat(s[a.MAINVERSION]).concat(s[a.PRERELEASE],"?").concat(s[a.BUILD],"?")),o("FULL","^".concat(s[a.FULLPLAIN],"$")),o("LOOSEPLAIN","[v=\\s]*".concat(s[a.MAINVERSIONLOOSE]).concat(s[a.PRERELEASELOOSE],"?").concat(s[a.BUILD],"?")),o("LOOSE","^".concat(s[a.LOOSEPLAIN],"$")),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE","".concat(s[a.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),o("XRANGEIDENTIFIER","".concat(s[a.NUMERICIDENTIFIER],"|x|X|\\*")),o("XRANGEPLAIN","[v=\\s]*(".concat(s[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIER],")")+"(?:".concat(s[a.PRERELEASE],")?").concat(s[a.BUILD],"?")+")?)?"),o("XRANGEPLAINLOOSE","[v=\\s]*(".concat(s[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(s[a.PRERELEASELOOSE],")?").concat(s[a.BUILD],"?")+")?)?"),o("XRANGE","^".concat(s[a.GTLT],"\\s*").concat(s[a.XRANGEPLAIN],"$")),o("XRANGELOOSE","^".concat(s[a.GTLT],"\\s*").concat(s[a.XRANGEPLAINLOOSE],"$")),o("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),o("COERCERTL",s[a.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM","(\\s*)".concat(s[a.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",o("TILDE","^".concat(s[a.LONETILDE]).concat(s[a.XRANGEPLAIN],"$")),o("TILDELOOSE","^".concat(s[a.LONETILDE]).concat(s[a.XRANGEPLAINLOOSE],"$")),o("LONECARET","(?:\\^)"),o("CARETTRIM","(\\s*)".concat(s[a.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",o("CARET","^".concat(s[a.LONECARET]).concat(s[a.XRANGEPLAIN],"$")),o("CARETLOOSE","^".concat(s[a.LONECARET]).concat(s[a.XRANGEPLAINLOOSE],"$")),o("COMPARATORLOOSE","^".concat(s[a.GTLT],"\\s*(").concat(s[a.LOOSEPLAIN],")$|^$")),o("COMPARATOR","^".concat(s[a.GTLT],"\\s*(").concat(s[a.FULLPLAIN],")$|^$")),o("COMPARATORTRIM","(\\s*)".concat(s[a.GTLT],"\\s*(").concat(s[a.LOOSEPLAIN],"|").concat(s[a.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE","^\\s*(".concat(s[a.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(s[a.XRANGEPLAIN],")")+"\\s*$"),o("HYPHENRANGELOOSE","^\\s*(".concat(s[a.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(s[a.XRANGEPLAINLOOSE],")")+"\\s*$"),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ii,Ii.exports);var mM=/^[0-9]+$/,lH=(e,t)=>{var n=mM.test(e),r=mM.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},mke=(e,t)=>lH(t,e),bke={compareIdentifiers:lH,rcompareIdentifiers:mke},em=Xv,bM=K5.MAX_LENGTH,tm=K5.MAX_SAFE_INTEGER,yM=Ii.exports.re,vM=Ii.exports.t,yke=J5,Uc=bke.compareIdentifiers;class Ai{constructor(t,n){if(n=yke(n),t instanceof Ai){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: ".concat(t));if(t.length>bM)throw new TypeError("version is longer than ".concat(bM," characters"));em("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=t.trim().match(n.loose?yM[vM.LOOSE]:yM[vM.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>tm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>tm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>tm||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){var s=+i;if(s>=0&&s<tm)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(em("SemVer.compare",this.version,this.options,t),!(t instanceof Ai)){if(typeof t=="string"&&t===this.version)return 0;t=new Ai(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ai||(t=new Ai(t,this.options)),Uc(this.major,t.major)||Uc(this.minor,t.minor)||Uc(this.patch,t.patch)}comparePre(t){if(t instanceof Ai||(t=new Ai(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(em("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Uc(r,i)}while(++n)}compareBuild(t){t instanceof Ai||(t=new Ai(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(em("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Uc(r,i)}while(++n)}inc(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(Uc(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}var eO=Ai,_M=eO,vke=(e,t,n)=>new _M(e,n).compare(new _M(t,n)),Od=vke,_ke=Od,xke=(e,t,n)=>_ke(e,t,n)===0,wke=xke,Eke=Od,Ske=(e,t,n)=>Eke(e,t,n)!==0,kke=Ske,Oke=Od,Ake=(e,t,n)=>Oke(e,t,n)>0,Cke=Ake,Tke=Od,Mke=(e,t,n)=>Tke(e,t,n)>=0,Dke=Mke,Nke=Od,$ke=(e,t,n)=>Nke(e,t,n)<0,Fke=$ke,Rke=Od,Ike=(e,t,n)=>Rke(e,t,n)<=0,Pke=Ike,jke=wke,Lke=kke,zke=Cke,Bke=Dke,Uke=Fke,qke=Pke,Hke=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return jke(e,n,r);case"!=":return Lke(e,n,r);case">":return zke(e,n,r);case">=":return Bke(e,n,r);case"<":return Uke(e,n,r);case"<=":return qke(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}},Vke=Hke,Y_,xM;function Gke(){if(xM)return Y_;xM=1;var e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}a("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){var f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError("Invalid comparator: ".concat(c));this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new u(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new u(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");if((!f||typeof f!="object")&&(f={loose:!!f,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new o(c.value,f).test(this.value);if(c.operator==="")return c.value===""?!0:new o(this.value,f).test(c.semver);var d=(this.operator===">="||this.operator===">")&&(c.operator===">="||c.operator===">"),h=(this.operator==="<="||this.operator==="<")&&(c.operator==="<="||c.operator==="<"),g=this.semver.version===c.semver.version,p=(this.operator===">="||this.operator==="<=")&&(c.operator===">="||c.operator==="<="),m=s(this.semver,"<",c.semver,f)&&(this.operator===">="||this.operator===">")&&(c.operator==="<="||c.operator==="<"),b=s(this.semver,">",c.semver,f)&&(this.operator==="<="||this.operator==="<")&&(c.operator===">="||c.operator===">");return d||h||g&&p||m||b}}Y_=t;var n=J5,r=Ii.exports.re,i=Ii.exports.t,s=Vke,a=Xv,u=eO,o=cH();return Y_}function wM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Wke(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,u;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return s=l.done,l},e:function(l){a=!0,u=l},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw u}}}}function Wke(e,t){if(e){if(typeof e=="string")return EM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EM(e,t)}}function EM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z_,SM;function cH(){if(SM)return Z_;SM=1;class e{constructor($,C){if(C=r(C),$ instanceof e)return $.loose===!!C.loose&&$.includePrerelease===!!C.includePrerelease?$:new e($.raw,C);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=C,this.loose=!!C.loose,this.includePrerelease=!!C.includePrerelease,this.raw=$,this.set=$.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat($));if(this.set.length>1){var T=this.set[0];if(this.set=this.set.filter(L=>!d(L[0])),this.set.length===0)this.set=[T];else if(this.set.length>1){var S=wM(this.set),M;try{for(S.s();!(M=S.n()).done;){var F=M.value;if(F.length===1&&h(F[0])){this.set=[F];break}}}catch(L){S.e(L)}finally{S.f()}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){$=$.trim();var C=Object.keys(this.options).join(","),T="parseRange:".concat(C,":").concat($),S=n.get(T);if(S)return S;var M=this.options.loose,F=M?u[o.HYPHENRANGELOOSE]:u[o.HYPHENRANGE];$=$.replace(F,A(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(u[o.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(u[o.TILDETRIM],c),$=$.replace(u[o.CARETTRIM],f),$=$.split(/\s+/).join(" ");var L=$.split(" ").map(Ne=>p(Ne,this.options)).join(" ").split(/\s+/).map(Ne=>k(Ne,this.options));M&&(L=L.filter(Ne=>(s("loose invalid filter",Ne,this.options),!!Ne.match(u[o.COMPARATORLOOSE])))),s("range list",L);var H=new Map,J=L.map(Ne=>new i(Ne,this.options)),ge=wM(J),ke;try{for(ge.s();!(ke=ge.n()).done;){var Y=ke.value;if(d(Y))return[Y];H.set(Y.value,Y)}}catch(Ne){ge.e(Ne)}finally{ge.f()}H.size>1&&H.has("")&&H.delete("");var ye=[...H.values()];return n.set(T,ye),ye}intersects($,C){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(T=>g(T,C)&&$.set.some(S=>g(S,C)&&T.every(M=>S.every(F=>M.intersects(F,C)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new a($,this.options)}catch{return!1}for(var C=0;C<this.set.length;C++)if(N(this.set[C],$,this.options))return!0;return!1}}Z_=e;var t=oke,n=new t({max:1e3}),r=J5,i=Gke(),s=Xv,a=eO,u=Ii.exports.re,o=Ii.exports.t,l=Ii.exports.comparatorTrimReplace,c=Ii.exports.tildeTrimReplace,f=Ii.exports.caretTrimReplace,d=O=>O.value==="<0.0.0-0",h=O=>O.value==="",g=(O,$)=>{for(var C=!0,T=O.slice(),S=T.pop();C&&T.length;)C=T.every(M=>S.intersects(M,$)),S=T.pop();return C},p=(O,$)=>(s("comp",O,$),O=v(O,$),s("caret",O),O=b(O,$),s("tildes",O),O=x(O,$),s("xrange",O),O=w(O,$),s("stars",O),O),m=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,$)=>O.trim().split(/\s+/).map(C=>y(C,$)).join(" "),y=(O,$)=>{var C=$.loose?u[o.TILDELOOSE]:u[o.TILDE];return O.replace(C,(T,S,M,F,L)=>{s("tilde",O,T,S,M,F,L);var H;return m(S)?H="":m(M)?H=">=".concat(S,".0.0 <").concat(+S+1,".0.0-0"):m(F)?H=">=".concat(S,".").concat(M,".0 <").concat(S,".").concat(+M+1,".0-0"):L?(s("replaceTilde pr",L),H=">=".concat(S,".").concat(M,".").concat(F,"-").concat(L," <").concat(S,".").concat(+M+1,".0-0")):H=">=".concat(S,".").concat(M,".").concat(F," <").concat(S,".").concat(+M+1,".0-0"),s("tilde return",H),H})},v=(O,$)=>O.trim().split(/\s+/).map(C=>_(C,$)).join(" "),_=(O,$)=>{s("caret",O,$);var C=$.loose?u[o.CARETLOOSE]:u[o.CARET],T=$.includePrerelease?"-0":"";return O.replace(C,(S,M,F,L,H)=>{s("caret",O,S,M,F,L,H);var J;return m(M)?J="":m(F)?J=">=".concat(M,".0.0").concat(T," <").concat(+M+1,".0.0-0"):m(L)?M==="0"?J=">=".concat(M,".").concat(F,".0").concat(T," <").concat(M,".").concat(+F+1,".0-0"):J=">=".concat(M,".").concat(F,".0").concat(T," <").concat(+M+1,".0.0-0"):H?(s("replaceCaret pr",H),M==="0"?F==="0"?J=">=".concat(M,".").concat(F,".").concat(L,"-").concat(H," <").concat(M,".").concat(F,".").concat(+L+1,"-0"):J=">=".concat(M,".").concat(F,".").concat(L,"-").concat(H," <").concat(M,".").concat(+F+1,".0-0"):J=">=".concat(M,".").concat(F,".").concat(L,"-").concat(H," <").concat(+M+1,".0.0-0")):(s("no pr"),M==="0"?F==="0"?J=">=".concat(M,".").concat(F,".").concat(L).concat(T," <").concat(M,".").concat(F,".").concat(+L+1,"-0"):J=">=".concat(M,".").concat(F,".").concat(L).concat(T," <").concat(M,".").concat(+F+1,".0-0"):J=">=".concat(M,".").concat(F,".").concat(L," <").concat(+M+1,".0.0-0")),s("caret return",J),J})},x=(O,$)=>(s("replaceXRanges",O,$),O.split(/\s+/).map(C=>E(C,$)).join(" ")),E=(O,$)=>{O=O.trim();var C=$.loose?u[o.XRANGELOOSE]:u[o.XRANGE];return O.replace(C,(T,S,M,F,L,H)=>{s("xRange",O,T,S,M,F,L,H);var J=m(M),ge=J||m(F),ke=ge||m(L),Y=ke;return S==="="&&Y&&(S=""),H=$.includePrerelease?"-0":"",J?S===">"||S==="<"?T="<0.0.0-0":T="*":S&&Y?(ge&&(F=0),L=0,S===">"?(S=">=",ge?(M=+M+1,F=0,L=0):(F=+F+1,L=0)):S==="<="&&(S="<",ge?M=+M+1:F=+F+1),S==="<"&&(H="-0"),T="".concat(S+M,".").concat(F,".").concat(L).concat(H)):ge?T=">=".concat(M,".0.0").concat(H," <").concat(+M+1,".0.0-0"):ke&&(T=">=".concat(M,".").concat(F,".0").concat(H," <").concat(M,".").concat(+F+1,".0-0")),s("xRange return",T),T})},w=(O,$)=>(s("replaceStars",O,$),O.trim().replace(u[o.STAR],"")),k=(O,$)=>(s("replaceGTE0",O,$),O.trim().replace(u[$.includePrerelease?o.GTE0PRE:o.GTE0],"")),A=O=>($,C,T,S,M,F,L,H,J,ge,ke,Y,ye)=>(m(T)?C="":m(S)?C=">=".concat(T,".0.0").concat(O?"-0":""):m(M)?C=">=".concat(T,".").concat(S,".0").concat(O?"-0":""):F?C=">=".concat(C):C=">=".concat(C).concat(O?"-0":""),m(J)?H="":m(ge)?H="<".concat(+J+1,".0.0-0"):m(ke)?H="<".concat(J,".").concat(+ge+1,".0-0"):Y?H="<=".concat(J,".").concat(ge,".").concat(ke,"-").concat(Y):O?H="<".concat(J,".").concat(ge,".").concat(+ke+1,"-0"):H="<=".concat(H),"".concat(C," ").concat(H).trim()),N=(O,$,C)=>{for(var T=0;T<O.length;T++)if(!O[T].test($))return!1;if($.prerelease.length&&!C.includePrerelease){for(var S=0;S<O.length;S++)if(s(O[S].semver),O[S].semver!==i.ANY&&O[S].semver.prerelease.length>0){var M=O[S].semver;if(M.major===$.major&&M.minor===$.minor&&M.patch===$.patch)return!0}return!1}return!0};return Z_}cH();String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var Q_,Xke=Nve,Db=GSe,nm=typeof window<"u"?window:void 0;Db===void 0&&nm!==null&&nm!==void 0&&(Q_=nm.vl)!==null&&Q_!==void 0&&Q_.compile&&(Db=nm.vl);Xke.version,Db&&Db.version;function Yke(e){let t,n,r,i,s,a,u,o,l,c,f,d,h,g,p,m,b,y,v,_,x,E,w,k,A,N,O,$,C,T;return t=new Vt({props:{label:"Button"}}),r=new Vt({props:{label:"Checkbox"}}),s=new Vt({props:{label:"File Upload"}}),u=new Vt({props:{label:"Image"}}),l=new Vt({props:{label:"Json"}}),f=new Vt({props:{label:"Markdown"}}),h=new Vt({props:{label:"Slider"}}),p=new Vt({props:{label:"Toggle"}}),b=new Vt({props:{label:"Text"}}),v=new Vt({props:{label:"Textbox"}}),x=new Vt({props:{label:"Radio"}}),w=new Vt({props:{label:"Radio Group"}}),A=new Vt({props:{label:"Select"}}),O=new Vt({props:{label:"Tabs"}}),C=new Vt({props:{label:"Stats"}}),{c(){re(t.$$.fragment),n=ue(),re(r.$$.fragment),i=ue(),re(s.$$.fragment),a=ue(),re(u.$$.fragment),o=ue(),re(l.$$.fragment),c=ue(),re(f.$$.fragment),d=ue(),re(h.$$.fragment),g=ue(),re(p.$$.fragment),m=ue(),re(b.$$.fragment),y=ue(),re(v.$$.fragment),_=ue(),re(x.$$.fragment),E=ue(),re(w.$$.fragment),k=ue(),re(A.$$.fragment),N=ue(),re(O.$$.fragment),$=ue(),re(C.$$.fragment)},l(S){ae(t.$$.fragment,S),n=oe(S),ae(r.$$.fragment,S),i=oe(S),ae(s.$$.fragment,S),a=oe(S),ae(u.$$.fragment,S),o=oe(S),ae(l.$$.fragment,S),c=oe(S),ae(f.$$.fragment,S),d=oe(S),ae(h.$$.fragment,S),g=oe(S),ae(p.$$.fragment,S),m=oe(S),ae(b.$$.fragment,S),y=oe(S),ae(v.$$.fragment,S),_=oe(S),ae(x.$$.fragment,S),E=oe(S),ae(w.$$.fragment,S),k=oe(S),ae(A.$$.fragment,S),N=oe(S),ae(O.$$.fragment,S),$=oe(S),ae(C.$$.fragment,S)},m(S,M){ie(t,S,M),q(S,n,M),ie(r,S,M),q(S,i,M),ie(s,S,M),q(S,a,M),ie(u,S,M),q(S,o,M),ie(l,S,M),q(S,c,M),ie(f,S,M),q(S,d,M),ie(h,S,M),q(S,g,M),ie(p,S,M),q(S,m,M),ie(b,S,M),q(S,y,M),ie(v,S,M),q(S,_,M),ie(x,S,M),q(S,E,M),ie(w,S,M),q(S,k,M),ie(A,S,M),q(S,N,M),ie(O,S,M),q(S,$,M),ie(C,S,M),T=!0},p:xe,i(S){T||(R(t.$$.fragment,S),R(r.$$.fragment,S),R(s.$$.fragment,S),R(u.$$.fragment,S),R(l.$$.fragment,S),R(f.$$.fragment,S),R(h.$$.fragment,S),R(p.$$.fragment,S),R(b.$$.fragment,S),R(v.$$.fragment,S),R(x.$$.fragment,S),R(w.$$.fragment,S),R(A.$$.fragment,S),R(O.$$.fragment,S),R(C.$$.fragment,S),T=!0)},o(S){j(t.$$.fragment,S),j(r.$$.fragment,S),j(s.$$.fragment,S),j(u.$$.fragment,S),j(l.$$.fragment,S),j(f.$$.fragment,S),j(h.$$.fragment,S),j(p.$$.fragment,S),j(b.$$.fragment,S),j(v.$$.fragment,S),j(x.$$.fragment,S),j(w.$$.fragment,S),j(A.$$.fragment,S),j(O.$$.fragment,S),j(C.$$.fragment,S),T=!1},d(S){se(t,S),S&&D(n),se(r,S),S&&D(i),se(s,S),S&&D(a),se(u,S),S&&D(o),se(l,S),S&&D(c),se(f,S),S&&D(d),se(h,S),S&&D(g),se(p,S),S&&D(m),se(b,S),S&&D(y),se(v,S),S&&D(_),se(x,S),S&&D(E),se(w,S),S&&D(k),se(A,S),S&&D(N),se(O,S),S&&D($),se(C,S)}}}function Zke(e){let t,n,r,i,s,a,u,o,l,c,f,d,h,g,p,m;return t=new Vt({props:{label:"Bar Plot"}}),r=new Vt({props:{label:"Document"}}),s=new Vt({props:{label:"Filter"}}),u=new Vt({props:{label:"Gallery"}}),l=new Vt({props:{label:"Match"}}),f=new Vt({props:{label:"Plot"}}),h=new Vt({props:{label:"Sort"}}),p=new Vt({props:{label:"Table"}}),{c(){re(t.$$.fragment),n=ue(),re(r.$$.fragment),i=ue(),re(s.$$.fragment),a=ue(),re(u.$$.fragment),o=ue(),re(l.$$.fragment),c=ue(),re(f.$$.fragment),d=ue(),re(h.$$.fragment),g=ue(),re(p.$$.fragment)},l(b){ae(t.$$.fragment,b),n=oe(b),ae(r.$$.fragment,b),i=oe(b),ae(s.$$.fragment,b),a=oe(b),ae(u.$$.fragment,b),o=oe(b),ae(l.$$.fragment,b),c=oe(b),ae(f.$$.fragment,b),d=oe(b),ae(h.$$.fragment,b),g=oe(b),ae(p.$$.fragment,b)},m(b,y){ie(t,b,y),q(b,n,y),ie(r,b,y),q(b,i,y),ie(s,b,y),q(b,a,y),ie(u,b,y),q(b,o,y),ie(l,b,y),q(b,c,y),ie(f,b,y),q(b,d,y),ie(h,b,y),q(b,g,y),ie(p,b,y),m=!0},p:xe,i(b){m||(R(t.$$.fragment,b),R(r.$$.fragment,b),R(s.$$.fragment,b),R(u.$$.fragment,b),R(l.$$.fragment,b),R(f.$$.fragment,b),R(h.$$.fragment,b),R(p.$$.fragment,b),m=!0)},o(b){j(t.$$.fragment,b),j(r.$$.fragment,b),j(s.$$.fragment,b),j(u.$$.fragment,b),j(l.$$.fragment,b),j(f.$$.fragment,b),j(h.$$.fragment,b),j(p.$$.fragment,b),m=!1},d(b){se(t,b),b&&D(n),se(r,b),b&&D(i),se(s,b),b&&D(a),se(u,b),b&&D(o),se(l,b),b&&D(c),se(f,b),b&&D(d),se(h,b),b&&D(g),se(p,b)}}}function Qke(e){let t,n,r,i,s,a,u,o;return t=new KO({props:{label:"The Basics",$$slots:{default:[Yke]},$$scope:{ctx:e}}}),r=new KO({props:{label:"Dataframe Components",$$slots:{default:[Zke]},$$scope:{ctx:e}}}),s=new XO({props:{label:"Flowbite Components"}}),u=new XO({props:{label:"HTML Tags"}}),{c(){re(t.$$.fragment),n=ue(),re(r.$$.fragment),i=ue(),re(s.$$.fragment),a=ue(),re(u.$$.fragment)},l(l){ae(t.$$.fragment,l),n=oe(l),ae(r.$$.fragment,l),i=oe(l),ae(s.$$.fragment,l),a=oe(l),ae(u.$$.fragment,l)},m(l,c){ie(t,l,c),q(l,n,c),ie(r,l,c),q(l,i,c),ie(s,l,c),q(l,a,c),ie(u,l,c),o=!0},p(l,c){const f={};c&2&&(f.$$scope={dirty:c,ctx:l}),t.$set(f);const d={};c&2&&(d.$$scope={dirty:c,ctx:l}),r.$set(d)},i(l){o||(R(t.$$.fragment,l),R(r.$$.fragment,l),R(s.$$.fragment,l),R(u.$$.fragment,l),o=!0)},o(l){j(t.$$.fragment,l),j(r.$$.fragment,l),j(s.$$.fragment,l),j(u.$$.fragment,l),o=!1},d(l){se(t,l),l&&D(n),se(r,l),l&&D(i),se(s,l),l&&D(a),se(u,l)}}}function Jke(e){let t,n;return t=new QV({props:{$$slots:{default:[Qke]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,i){const s={};i&2&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function Kke(e){let t,n;return t=new eG({props:{$$slots:{default:[Jke]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){ie(t,r,i),n=!0},p(r,i){const s={};i&2&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function e5e(e){let t;return{c(){t=Fe("Button")},l(n){t=Re(n,"Button")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function t5e(e){let t;return{c(){t=Fe("Checkbox")},l(n){t=Re(n,"Checkbox")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function n5e(e){let t;return{c(){t=Fe("Text")},l(n){t=Re(n,"Text")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function r5e(e){let t;return{c(){t=Fe("Textbox")},l(n){t=Re(n,"Textbox")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function i5e(e){let t;return{c(){t=Fe("Slider")},l(n){t=Re(n,"Slider")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function s5e(e){let t;return{c(){t=Fe("Radio")},l(n){t=Re(n,"Radio")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function a5e(e){let t;return{c(){t=Fe("RawHTML")},l(n){t=Re(n,"RawHTML")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function u5e(e){let t;return{c(){t=Fe("RadioGroup")},l(n){t=Re(n,"RadioGroup")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function o5e(e){let t;return{c(){t=Fe("FileUpload")},l(n){t=Re(n,"FileUpload")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function l5e(e){let t;return{c(){t=Fe("Stats")},l(n){t=Re(n,"Stats")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function c5e(e){let t;return{c(){t=Fe("Toggle")},l(n){t=Re(n,"Toggle")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function f5e(e){let t;return{c(){t=Fe("Code")},l(n){t=Re(n,"Code")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function d5e(e){let t;return{c(){t=Fe("Image")},l(n){t=Re(n,"Image")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function h5e(e){let t;return{c(){t=Fe("Markdown")},l(n){t=Re(n,"Markdown")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function g5e(e){let t;return{c(){t=Fe("Json")},l(n){t=Re(n,"Json")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function p5e(e){let t;return{c(){t=Fe("Tabs")},l(n){t=Re(n,"Tabs")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function m5e(e){let t;return{c(){t=Fe("Select")},l(n){t=Re(n,"Select")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function b5e(e){let t;return{c(){t=Fe("Chat")},l(n){t=Re(n,"Chat")},m(n,r){q(n,t,r)},d(n){n&&D(t)}}}function y5e(e){let t,n,r,i,s,a,u,o,l,c,f,d,h,g,p,m,b,y,v,_,x,E,w,k,A,N,O,$,C,T,S,M,F,L,H,J,ge,ke,Y,ye,Ne,ut,ot,ln,he,Me,Ie,te,Et,Je,Xt,jt,In,Ei,Yv,oc,xo,Zv,ja,lc,La,Qv,cc,wo,Jv,za,fc,Ba,Kv,dc,Eo,e2,Ua,hc,qa,t2,gc,So,n2,Ha,pc,Va,r2,mc,ko,i2,Ga,bc,Wa,s2,Oo,a2,Xa,yc,Ya,u2,vc,Ao,o2,Za,_c,Qa,l2,xc,Co,c2,Ja,wc,Ka,f2,Ec,To,d2,eu,Sc,tu,h2,kc,Mo,g2,nu,Oc,ru,p2,Do,m2,iu,Ac,su,b2,No,y2,Cc,$o,Ug;return r=new xH({props:{page:"components"}}),u=new NV({props:{$$slots:{default:[Kke]},$$scope:{ctx:e}}}),d=new rn({props:{$$slots:{default:[e5e]},$$scope:{ctx:e}}}),p=new hG({props:{title:"Hello"}}),v=new rn({props:{$$slots:{default:[t5e]},$$scope:{ctx:e}}}),E=new $G({props:{checked:!0}}),N=new rn({props:{$$slots:{default:[n5e]},$$scope:{ctx:e}}}),C=new UN({props:{data:"A quick brown fox jumped over a lazy dog."}}),F=new rn({props:{$$slots:{default:[r5e]},$$scope:{ctx:e}}}),J=new QX({props:{text:"Write."}}),ye=new rn({props:{$$slots:{default:[i5e]},$$scope:{ctx:e}}}),ot=new BJ({props:{min:0,max:10}}),Ie=new rn({props:{$$slots:{default:[s5e]},$$scope:{ctx:e}}}),Je=new tY({}),Ei=new rn({props:{$$slots:{default:[a5e]},$$scope:{ctx:e}}}),xo=new NJ({props:{html:`
<div>
    <h1>Hello</h1>
    <p>World</p>
</div>
`}}),La=new rn({props:{$$slots:{default:[u5e]},$$scope:{ctx:e}}}),wo=new sY({props:{values:[1,2,3]}}),Ba=new rn({props:{$$slots:{default:[o5e]},$$scope:{ctx:e}}}),Eo=new zG({props:{files:[],filenames:[],contents:[]}}),qa=new rn({props:{$$slots:{default:[l5e]},$$scope:{ctx:e}}}),So=new HJ({props:{data:{"Temperature (C)":13,"Altitude (ft)":12345}}}),Va=new rn({props:{$$slots:{default:[c5e]},$$scope:{ctx:e}}}),ko=new nK({props:{value:!1}}),Wa=new rn({props:{$$slots:{default:[f5e]},$$scope:{ctx:e}}}),Oo=new PG({props:{body:"import meerkat as mk"}}),Ya=new rn({props:{$$slots:{default:[d5e]},$$scope:{ctx:e}}}),Ao=new xX({props:{data:"http://placekitten.com/200/200"}}),Qa=new rn({props:{$$slots:{default:[h5e]},$$scope:{ctx:e}}}),Co=new RD({props:{body:`
# Github Flavored Markdown
## Hello from Meerkat
### Table
| A | B |
|---|---|
| 1 | 2 |
`}}),Ka=new rn({props:{$$slots:{default:[g5e]},$$scope:{ctx:e}}}),To=new DX({props:{body:e[0]}}),tu=new rn({props:{$$slots:{default:[p5e]},$$scope:{ctx:e}}}),Mo=new WJ({props:{tabs:[{label:"Tab 1",id:"tab1",component:{name:"Text",props:{data:"This is a component in Tab 1"}}},{label:"Tab 2",id:"tab2",component:{name:"Text",props:{data:"This is a component in Tab 2"}}},{label:"Tab 3",id:"tab3",component:{name:"Text",props:{data:"This is a component in Tab 3"}}}]}}),ru=new rn({props:{$$slots:{default:[m5e]},$$scope:{ctx:e}}}),Do=new RJ({props:{values:[1,2,3,4],labels:["Option 1","Option 2","Option 3","Option 4"],value:"1"}}),su=new rn({props:{$$slots:{default:[b5e]},$$scope:{ctx:e}}}),No=new TG({props:{df:{refId:"mock"}}}),$o=new wH({}),{c(){t=z("div"),n=z("header"),re(r.$$.fragment),i=ue(),s=z("main"),a=z("div"),re(u.$$.fragment),o=ue(),l=z("div"),c=z("div"),f=z("div"),re(d.$$.fragment),h=ue(),g=z("div"),re(p.$$.fragment),m=ue(),b=z("div"),y=z("div"),re(v.$$.fragment),_=ue(),x=z("div"),re(E.$$.fragment),w=ue(),k=z("div"),A=z("div"),re(N.$$.fragment),O=ue(),$=z("div"),re(C.$$.fragment),T=ue(),S=z("div"),M=z("div"),re(F.$$.fragment),L=ue(),H=z("div"),re(J.$$.fragment),ge=ue(),ke=z("div"),Y=z("div"),re(ye.$$.fragment),Ne=ue(),ut=z("div"),re(ot.$$.fragment),ln=ue(),he=z("div"),Me=z("div"),re(Ie.$$.fragment),te=ue(),Et=z("div"),re(Je.$$.fragment),Xt=ue(),jt=z("div"),In=z("div"),re(Ei.$$.fragment),Yv=ue(),oc=z("div"),re(xo.$$.fragment),Zv=ue(),ja=z("div"),lc=z("div"),re(La.$$.fragment),Qv=ue(),cc=z("div"),re(wo.$$.fragment),Jv=ue(),za=z("div"),fc=z("div"),re(Ba.$$.fragment),Kv=ue(),dc=z("div"),re(Eo.$$.fragment),e2=ue(),Ua=z("div"),hc=z("div"),re(qa.$$.fragment),t2=ue(),gc=z("div"),re(So.$$.fragment),n2=ue(),Ha=z("div"),pc=z("div"),re(Va.$$.fragment),r2=ue(),mc=z("div"),re(ko.$$.fragment),i2=ue(),Ga=z("div"),bc=z("div"),re(Wa.$$.fragment),s2=ue(),re(Oo.$$.fragment),a2=ue(),Xa=z("div"),yc=z("div"),re(Ya.$$.fragment),u2=ue(),vc=z("div"),re(Ao.$$.fragment),o2=ue(),Za=z("div"),_c=z("div"),re(Qa.$$.fragment),l2=ue(),xc=z("div"),re(Co.$$.fragment),c2=ue(),Ja=z("div"),wc=z("div"),re(Ka.$$.fragment),f2=ue(),Ec=z("div"),re(To.$$.fragment),d2=ue(),eu=z("div"),Sc=z("div"),re(tu.$$.fragment),h2=ue(),kc=z("div"),re(Mo.$$.fragment),g2=ue(),nu=z("div"),Oc=z("div"),re(ru.$$.fragment),p2=ue(),re(Do.$$.fragment),m2=ue(),iu=z("div"),Ac=z("div"),re(su.$$.fragment),b2=ue(),re(No.$$.fragment),y2=ue(),Cc=z("footer"),re($o.$$.fragment),this.h()},l(Q){t=B(Q,"DIV",{class:!0});var je=U(t);n=B(je,"HEADER",{class:!0});var Ad=U(n);ae(r.$$.fragment,Ad),Ad.forEach(D),i=oe(je),s=B(je,"MAIN",{class:!0});var Cd=U(s);a=B(Cd,"DIV",{class:!0});var Fo=U(a);ae(u.$$.fragment,Fo),o=oe(Fo),l=B(Fo,"DIV",{});var Xe=U(l);c=B(Xe,"DIV",{class:!0});var Ro=U(c);f=B(Ro,"DIV",{class:!0});var Td=U(f);ae(d.$$.fragment,Td),Td.forEach(D),h=oe(Ro),g=B(Ro,"DIV",{class:!0});var Md=U(g);ae(p.$$.fragment,Md),Md.forEach(D),Ro.forEach(D),m=oe(Xe),b=B(Xe,"DIV",{class:!0});var Io=U(b);y=B(Io,"DIV",{class:!0});var Dd=U(y);ae(v.$$.fragment,Dd),Dd.forEach(D),_=oe(Io),x=B(Io,"DIV",{class:!0});var Nd=U(x);ae(E.$$.fragment,Nd),Nd.forEach(D),Io.forEach(D),w=oe(Xe),k=B(Xe,"DIV",{class:!0});var Po=U(k);A=B(Po,"DIV",{class:!0});var $d=U(A);ae(N.$$.fragment,$d),$d.forEach(D),O=oe(Po),$=B(Po,"DIV",{class:!0});var Fd=U($);ae(C.$$.fragment,Fd),Fd.forEach(D),Po.forEach(D),T=oe(Xe),S=B(Xe,"DIV",{class:!0});var jo=U(S);M=B(jo,"DIV",{class:!0});var Rd=U(M);ae(F.$$.fragment,Rd),Rd.forEach(D),L=oe(jo),H=B(jo,"DIV",{class:!0});var Id=U(H);ae(J.$$.fragment,Id),Id.forEach(D),jo.forEach(D),ge=oe(Xe),ke=B(Xe,"DIV",{class:!0});var Lo=U(ke);Y=B(Lo,"DIV",{class:!0});var Pd=U(Y);ae(ye.$$.fragment,Pd),Pd.forEach(D),Ne=oe(Lo),ut=B(Lo,"DIV",{class:!0});var jd=U(ut);ae(ot.$$.fragment,jd),jd.forEach(D),Lo.forEach(D),ln=oe(Xe),he=B(Xe,"DIV",{class:!0});var qg=U(he);Me=B(qg,"DIV",{class:!0});var tO=U(Me);ae(Ie.$$.fragment,tO),tO.forEach(D),te=oe(qg),Et=B(qg,"DIV",{class:!0});var nO=U(Et);ae(Je.$$.fragment,nO),nO.forEach(D),qg.forEach(D),Xt=oe(Xe),jt=B(Xe,"DIV",{class:!0});var Hg=U(jt);In=B(Hg,"DIV",{class:!0});var rO=U(In);ae(Ei.$$.fragment,rO),rO.forEach(D),Yv=oe(Hg),oc=B(Hg,"DIV",{class:!0});var iO=U(oc);ae(xo.$$.fragment,iO),iO.forEach(D),Hg.forEach(D),Zv=oe(Xe),ja=B(Xe,"DIV",{class:!0});var Vg=U(ja);lc=B(Vg,"DIV",{class:!0});var sO=U(lc);ae(La.$$.fragment,sO),sO.forEach(D),Qv=oe(Vg),cc=B(Vg,"DIV",{class:!0});var aO=U(cc);ae(wo.$$.fragment,aO),aO.forEach(D),Vg.forEach(D),Jv=oe(Xe),za=B(Xe,"DIV",{class:!0});var Gg=U(za);fc=B(Gg,"DIV",{class:!0});var uO=U(fc);ae(Ba.$$.fragment,uO),uO.forEach(D),Kv=oe(Gg),dc=B(Gg,"DIV",{class:!0});var oO=U(dc);ae(Eo.$$.fragment,oO),oO.forEach(D),Gg.forEach(D),e2=oe(Xe),Ua=B(Xe,"DIV",{class:!0});var Wg=U(Ua);hc=B(Wg,"DIV",{class:!0});var lO=U(hc);ae(qa.$$.fragment,lO),lO.forEach(D),t2=oe(Wg),gc=B(Wg,"DIV",{class:!0});var cO=U(gc);ae(So.$$.fragment,cO),cO.forEach(D),Wg.forEach(D),n2=oe(Xe),Ha=B(Xe,"DIV",{class:!0});var Xg=U(Ha);pc=B(Xg,"DIV",{class:!0});var fO=U(pc);ae(Va.$$.fragment,fO),fO.forEach(D),r2=oe(Xg),mc=B(Xg,"DIV",{class:!0});var dO=U(mc);ae(ko.$$.fragment,dO),dO.forEach(D),Xg.forEach(D),i2=oe(Xe),Ga=B(Xe,"DIV",{class:!0});var Yg=U(Ga);bc=B(Yg,"DIV",{class:!0});var hO=U(bc);ae(Wa.$$.fragment,hO),hO.forEach(D),s2=oe(Yg),ae(Oo.$$.fragment,Yg),Yg.forEach(D),a2=oe(Xe),Xa=B(Xe,"DIV",{class:!0});var Zg=U(Xa);yc=B(Zg,"DIV",{class:!0});var gO=U(yc);ae(Ya.$$.fragment,gO),gO.forEach(D),u2=oe(Zg),vc=B(Zg,"DIV",{class:!0});var pO=U(vc);ae(Ao.$$.fragment,pO),pO.forEach(D),Zg.forEach(D),o2=oe(Xe),Za=B(Xe,"DIV",{class:!0});var Qg=U(Za);_c=B(Qg,"DIV",{class:!0});var mO=U(_c);ae(Qa.$$.fragment,mO),mO.forEach(D),l2=oe(Qg),xc=B(Qg,"DIV",{class:!0});var bO=U(xc);ae(Co.$$.fragment,bO),bO.forEach(D),Qg.forEach(D),c2=oe(Xe),Ja=B(Xe,"DIV",{class:!0});var Jg=U(Ja);wc=B(Jg,"DIV",{class:!0});var yO=U(wc);ae(Ka.$$.fragment,yO),yO.forEach(D),f2=oe(Jg),Ec=B(Jg,"DIV",{class:!0});var vO=U(Ec);ae(To.$$.fragment,vO),vO.forEach(D),Jg.forEach(D),d2=oe(Xe),eu=B(Xe,"DIV",{class:!0});var Kg=U(eu);Sc=B(Kg,"DIV",{class:!0});var _O=U(Sc);ae(tu.$$.fragment,_O),_O.forEach(D),h2=oe(Kg),kc=B(Kg,"DIV",{class:!0});var xO=U(kc);ae(Mo.$$.fragment,xO),xO.forEach(D),Kg.forEach(D),g2=oe(Xe),nu=B(Xe,"DIV",{class:!0});var ep=U(nu);Oc=B(ep,"DIV",{class:!0});var wO=U(Oc);ae(ru.$$.fragment,wO),wO.forEach(D),p2=oe(ep),ae(Do.$$.fragment,ep),ep.forEach(D),m2=oe(Xe),iu=B(Xe,"DIV",{class:!0});var tp=U(iu);Ac=B(tp,"DIV",{class:!0});var EO=U(Ac);ae(su.$$.fragment,EO),EO.forEach(D),b2=oe(tp),ae(No.$$.fragment,tp),tp.forEach(D),Xe.forEach(D),Fo.forEach(D),Cd.forEach(D),y2=oe(je),Cc=B(je,"FOOTER",{class:!0});var SO=U(Cc);ae($o.$$.fragment,SO),SO.forEach(D),je.forEach(D),this.h()},h(){I(n,"class","fixed w-full top-0 z-50"),I(f,"class","flex flex-col items-center mt-4 mb-4"),I(g,"class","w-20"),I(c,"class","flex flex-col items-center mb-4"),I(y,"class","flex flex-col items-center mt-4 mb-4"),I(x,"class","w-fit"),I(b,"class","flex flex-col items-center mb-4"),I(A,"class","flex flex-col items-center mt-4 mb-4"),I($,"class","w-fit"),I(k,"class","flex flex-col items-center mb-4"),I(M,"class","flex flex-col items-center mt-4 mb-4"),I(H,"class","w-fit"),I(S,"class","flex flex-col items-center mb-4"),I(Y,"class","flex flex-col items-center mt-4 mb-4"),I(ut,"class","w-fit"),I(ke,"class","flex flex-col items-center mb-4"),I(Me,"class","flex flex-col items-center mt-4 mb-4"),I(Et,"class","w-fit"),I(he,"class","flex flex-col items-center mb-4"),I(In,"class","flex flex-col items-center mt-4 mb-4"),I(oc,"class","w-fit"),I(jt,"class","flex flex-col items-center mb-4"),I(lc,"class","flex flex-col items-center mt-4 mb-4"),I(cc,"class","w-fit"),I(ja,"class","flex flex-col items-center mb-4"),I(fc,"class","flex flex-col items-center mt-4 mb-4"),I(dc,"class","w-fit"),I(za,"class","flex flex-col items-center mb-4"),I(hc,"class","flex flex-col items-center mt-4 mb-4"),I(gc,"class","w-fit"),I(Ua,"class","flex flex-col items-center mb-4"),I(pc,"class","flex flex-col items-center mt-4 mb-4"),I(mc,"class","w-fit"),I(Ha,"class","flex flex-col items-center mb-4"),I(bc,"class","flex flex-col items-center mt-4 mb-4"),I(Ga,"class","flex flex-col items-center mb-4"),I(yc,"class","flex flex-col items-center mt-4 mb-4"),I(vc,"class","w-fit"),I(Xa,"class","flex flex-col items-center mb-4"),I(_c,"class","flex flex-col items-center mt-4 mb-4"),I(xc,"class","w-fit"),I(Za,"class","flex flex-col items-center mb-4"),I(wc,"class","flex flex-col items-center mt-4 mb-4"),I(Ec,"class","w-fit"),I(Ja,"class","flex flex-col items-center mb-4"),I(Sc,"class","flex flex-col items-center mt-4 mb-4"),I(kc,"class","w-fit"),I(eu,"class","flex flex-col items-center mb-4"),I(Oc,"class","flex flex-col items-center mt-4 mb-4"),I(nu,"class","flex flex-col items-center mb-4"),I(Ac,"class","flex flex-col items-center mt-4 mb-4"),I(iu,"class","flex flex-col items-center mb-4 h-64"),I(a,"class","flex flex-row"),I(s,"class","mt-20 relative grow"),I(Cc,"class","sticky bottom-0 z-50"),I(t,"class","flex flex-col h-screen")},m(Q,je){q(Q,t,je),P(t,n),ie(r,n,null),P(t,i),P(t,s),P(s,a),ie(u,a,null),P(a,o),P(a,l),P(l,c),P(c,f),ie(d,f,null),P(c,h),P(c,g),ie(p,g,null),P(l,m),P(l,b),P(b,y),ie(v,y,null),P(b,_),P(b,x),ie(E,x,null),P(l,w),P(l,k),P(k,A),ie(N,A,null),P(k,O),P(k,$),ie(C,$,null),P(l,T),P(l,S),P(S,M),ie(F,M,null),P(S,L),P(S,H),ie(J,H,null),P(l,ge),P(l,ke),P(ke,Y),ie(ye,Y,null),P(ke,Ne),P(ke,ut),ie(ot,ut,null),P(l,ln),P(l,he),P(he,Me),ie(Ie,Me,null),P(he,te),P(he,Et),ie(Je,Et,null),P(l,Xt),P(l,jt),P(jt,In),ie(Ei,In,null),P(jt,Yv),P(jt,oc),ie(xo,oc,null),P(l,Zv),P(l,ja),P(ja,lc),ie(La,lc,null),P(ja,Qv),P(ja,cc),ie(wo,cc,null),P(l,Jv),P(l,za),P(za,fc),ie(Ba,fc,null),P(za,Kv),P(za,dc),ie(Eo,dc,null),P(l,e2),P(l,Ua),P(Ua,hc),ie(qa,hc,null),P(Ua,t2),P(Ua,gc),ie(So,gc,null),P(l,n2),P(l,Ha),P(Ha,pc),ie(Va,pc,null),P(Ha,r2),P(Ha,mc),ie(ko,mc,null),P(l,i2),P(l,Ga),P(Ga,bc),ie(Wa,bc,null),P(Ga,s2),ie(Oo,Ga,null),P(l,a2),P(l,Xa),P(Xa,yc),ie(Ya,yc,null),P(Xa,u2),P(Xa,vc),ie(Ao,vc,null),P(l,o2),P(l,Za),P(Za,_c),ie(Qa,_c,null),P(Za,l2),P(Za,xc),ie(Co,xc,null),P(l,c2),P(l,Ja),P(Ja,wc),ie(Ka,wc,null),P(Ja,f2),P(Ja,Ec),ie(To,Ec,null),P(l,d2),P(l,eu),P(eu,Sc),ie(tu,Sc,null),P(eu,h2),P(eu,kc),ie(Mo,kc,null),P(l,g2),P(l,nu),P(nu,Oc),ie(ru,Oc,null),P(nu,p2),ie(Do,nu,null),P(l,m2),P(l,iu),P(iu,Ac),ie(su,Ac,null),P(iu,b2),ie(No,iu,null),P(t,y2),P(t,Cc),ie($o,Cc,null),Ug=!0},p(Q,[je]){const Ad={};je&2&&(Ad.$$scope={dirty:je,ctx:Q}),u.$set(Ad);const Cd={};je&2&&(Cd.$$scope={dirty:je,ctx:Q}),d.$set(Cd);const Fo={};je&2&&(Fo.$$scope={dirty:je,ctx:Q}),v.$set(Fo);const Xe={};je&2&&(Xe.$$scope={dirty:je,ctx:Q}),N.$set(Xe);const Ro={};je&2&&(Ro.$$scope={dirty:je,ctx:Q}),F.$set(Ro);const Td={};je&2&&(Td.$$scope={dirty:je,ctx:Q}),ye.$set(Td);const Md={};je&2&&(Md.$$scope={dirty:je,ctx:Q}),Ie.$set(Md);const Io={};je&2&&(Io.$$scope={dirty:je,ctx:Q}),Ei.$set(Io);const Dd={};je&2&&(Dd.$$scope={dirty:je,ctx:Q}),La.$set(Dd);const Nd={};je&2&&(Nd.$$scope={dirty:je,ctx:Q}),Ba.$set(Nd);const Po={};je&2&&(Po.$$scope={dirty:je,ctx:Q}),qa.$set(Po);const $d={};je&2&&($d.$$scope={dirty:je,ctx:Q}),Va.$set($d);const Fd={};je&2&&(Fd.$$scope={dirty:je,ctx:Q}),Wa.$set(Fd);const jo={};je&2&&(jo.$$scope={dirty:je,ctx:Q}),Ya.$set(jo);const Rd={};je&2&&(Rd.$$scope={dirty:je,ctx:Q}),Qa.$set(Rd);const Id={};je&2&&(Id.$$scope={dirty:je,ctx:Q}),Ka.$set(Id);const Lo={};je&2&&(Lo.$$scope={dirty:je,ctx:Q}),tu.$set(Lo);const Pd={};je&2&&(Pd.$$scope={dirty:je,ctx:Q}),ru.$set(Pd);const jd={};je&2&&(jd.$$scope={dirty:je,ctx:Q}),su.$set(jd)},i(Q){Ug||(R(r.$$.fragment,Q),R(u.$$.fragment,Q),R(d.$$.fragment,Q),R(p.$$.fragment,Q),R(v.$$.fragment,Q),R(E.$$.fragment,Q),R(N.$$.fragment,Q),R(C.$$.fragment,Q),R(F.$$.fragment,Q),R(J.$$.fragment,Q),R(ye.$$.fragment,Q),R(ot.$$.fragment,Q),R(Ie.$$.fragment,Q),R(Je.$$.fragment,Q),R(Ei.$$.fragment,Q),R(xo.$$.fragment,Q),R(La.$$.fragment,Q),R(wo.$$.fragment,Q),R(Ba.$$.fragment,Q),R(Eo.$$.fragment,Q),R(qa.$$.fragment,Q),R(So.$$.fragment,Q),R(Va.$$.fragment,Q),R(ko.$$.fragment,Q),R(Wa.$$.fragment,Q),R(Oo.$$.fragment,Q),R(Ya.$$.fragment,Q),R(Ao.$$.fragment,Q),R(Qa.$$.fragment,Q),R(Co.$$.fragment,Q),R(Ka.$$.fragment,Q),R(To.$$.fragment,Q),R(tu.$$.fragment,Q),R(Mo.$$.fragment,Q),R(ru.$$.fragment,Q),R(Do.$$.fragment,Q),R(su.$$.fragment,Q),R(No.$$.fragment,Q),R($o.$$.fragment,Q),Ug=!0)},o(Q){j(r.$$.fragment,Q),j(u.$$.fragment,Q),j(d.$$.fragment,Q),j(p.$$.fragment,Q),j(v.$$.fragment,Q),j(E.$$.fragment,Q),j(N.$$.fragment,Q),j(C.$$.fragment,Q),j(F.$$.fragment,Q),j(J.$$.fragment,Q),j(ye.$$.fragment,Q),j(ot.$$.fragment,Q),j(Ie.$$.fragment,Q),j(Je.$$.fragment,Q),j(Ei.$$.fragment,Q),j(xo.$$.fragment,Q),j(La.$$.fragment,Q),j(wo.$$.fragment,Q),j(Ba.$$.fragment,Q),j(Eo.$$.fragment,Q),j(qa.$$.fragment,Q),j(So.$$.fragment,Q),j(Va.$$.fragment,Q),j(ko.$$.fragment,Q),j(Wa.$$.fragment,Q),j(Oo.$$.fragment,Q),j(Ya.$$.fragment,Q),j(Ao.$$.fragment,Q),j(Qa.$$.fragment,Q),j(Co.$$.fragment,Q),j(Ka.$$.fragment,Q),j(To.$$.fragment,Q),j(tu.$$.fragment,Q),j(Mo.$$.fragment,Q),j(ru.$$.fragment,Q),j(Do.$$.fragment,Q),j(su.$$.fragment,Q),j(No.$$.fragment,Q),j($o.$$.fragment,Q),Ug=!1},d(Q){Q&&D(t),se(r),se(u),se(d),se(p),se(v),se(E),se(N),se(C),se(F),se(J),se(ye),se(ot),se(Ie),se(Je),se(Ei),se(xo),se(La),se(wo),se(Ba),se(Eo),se(qa),se(So),se(Va),se(ko),se(Wa),se(Oo),se(Ya),se(Ao),se(Qa),se(Co),se(Ka),se(To),se(tu),se(Mo),se(ru),se(Do),se(su),se(No),se($o)}}}function v5e(e){return vH("Components",{Text:UN}),[{columnInfos:[{name:"id",type:"number",cellComponent:"Cell",cellProps:{},cellDataProp:"data"},{name:"message",type:"string",cellComponent:"Cell",cellProps:{},cellDataProp:"data"},{name:"name",type:"string",cellComponent:"Cell",cellProps:{},cellDataProp:"data"},{name:"time",type:"string",cellComponent:"Cell",cellProps:{},cellDataProp:"data"},{name:"sender",type:"string",cellComponent:"Cell",cellProps:{},cellDataProp:"data"}],posidxs:[0,1,2,3],rows:[[0,"hello","chatbot","2021-01-01 00:00:00"],[1,"hi","user","2021-01-01 00:00:00"],[2,"how can i help","chatbot","2021-01-01 00:00:00"],[3,"im good thanks","user","2021-01-01 00:00:00"]],fullLength:4,primaryKey:"id"}]}class Q5e extends He{constructor(t){super(),Ve(this,t,v5e,y5e,Be,{})}}export{Q5e as default};
